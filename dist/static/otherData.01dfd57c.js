var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,u=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&o(e,l,a[l]);if(s)for(var l of s(a))r.call(a,l)&&o(e,l,a[l]);return e};import{H as n,g as c,u as i,$ as d,o as v,c as p,w as f,a as m,a0 as y,J as b,B as g,ac as h,a2 as _,r as j,ad as z}from"./vue.a499711c.js";import{K as w}from"./KzTopSearch.d8bf695d.js";import{K}from"./KzPage.9c6d1927.js";import{K as k}from"./KzTopBtns.baf6f18f.js";import{_ as O}from"./KzCompanyTable.f39efbd3.js";import{K as C}from"./KzDmpTitle.75aa6a30.js";import{g as P,a as L,w as S,s as x,b as B}from"./findB.e68a3db7.js";import{_ as D,S as I,e as T}from"./index.561f5261.js";import"./KzCascader.6a65f304.js";import"./KzDialog.9ecb6295.js";import"./kzkf.83b11867.js";import"./KzEmpty.b11d49f7.js";import"./tinymce.275386ab.js";const U={class:"dmp_b_kzdata_content kz_card dmp_page"},V={class:"fsc mb20"},E={class:"fcs"},R={class:"fcs word_search"},H=_("查询一下"),J=_("高级查询");var M=D(n({name:"otherData",setup(e){const s=c(!1),t=c([]),r=()=>{L().then((e=>{t.value=e.body}))};r();const o=(e,a)=>{a(e?t.value.filter(n(e)):t.value)},n=e=>a=>0===a.keyword.toLowerCase().indexOf(e.toLowerCase()),_=c({size:50,current:1,source:2}),D=c(0),M=c([]),$=c(!1),q=c(1),A=c(""),F=async()=>{A.value.trim().length<1||A.value.trim().length>36?T("输入长度须在 1 ~ 36 之间"):(q.value=1,$.value=!0,_.value.current=1,await G(),r())},G=async()=>{var e,s;$.value=!0,await S((e=u({},_.value),s={keywords:A.value},a(e,l(s)))).then((e=>{1===e.status&&(D.value=e.body.total,M.value=e.body.records),$.value=!1})).catch((()=>{T("查询失败"),$.value=!1}))},N=c({}),Q=async e=>{$.value=!0,q.value=2,_.value.current=1,N.value=e,await W()},W=async()=>{$.value=!0,await x(u(u({},_.value),N.value)).then((e=>{1===e.status&&(D.value=e.body.total,M.value=e.body.records),$.value=!1})).catch((()=>{T("查询失败"),$.value=!1}))},X=()=>{1==q.value?G():W()},Y=c(),Z=c(),ee=i((()=>Z.value&&!Z.value.selIdList.length)),ae=async()=>{Y.value.setLoading(!0);const e=await B({list:Z.value.selIdList});Y.value.close(e.message),Z.value.clear()};return(e,a)=>{const l=j("el-collapse-transition"),t=j("el-icon"),r=j("el-autocomplete"),u=j("el-button"),n=j("el-link"),c=j("el-scrollbar"),i=z("loading");return d((v(),p(c,{height:"100%",class:"dmp_b_otherdata_page",noresize:!0},{default:f((()=>[m(l,null,{default:f((()=>[d(m(w,{onSearch:Q,onClose:a[0]||(a[0]=e=>s.value=!1)},null,512),[[y,s.value]])])),_:1}),b("div",U,[b("div",V,[m(C,{total:D.value},null,8,["total"]),b("div",E,[b("div",R,[m(r,{modelValue:A.value,"onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),modelModifiers:{trim:!0},placeholder:"请输入企业名称、联系人、经营范围关键词","fetch-suggestions":o,"value-key":"keyword",onKeyup:h(F,["enter"])},{prefix:f((()=>[m(t,{class:"searchicon"},{default:f((()=>[m(g(I))])),_:1})])),_:1},8,["modelValue","onKeyup"]),m(u,{type:"primary",class:"ml16",onClick:F},{default:f((()=>[H])),_:1}),m(n,{class:"heisearch ml16 fs0",type:"primary",onClick:a[2]||(a[2]=e=>s.value=!0)},{default:f((()=>[J])),_:1})]),m(k,{ref_key:"topBtnRef",ref:Y,type:"sync",syncbtn:"","sync-api":g(P),"sync-disabled":g(ee),onSync:ae},null,8,["sync-api","sync-disabled"])])]),m(O,{ref_key:"tableRef",ref:Z,data:M.value},null,8,["data"]),m(K,{page:_.value.current,"onUpdate:page":a[3]||(a[3]=e=>_.value.current=e),size:_.value.size,"onUpdate:size":a[4]||(a[4]=e=>_.value.size=e),total:D.value,onChange:X},null,8,["page","size","total"])])])),_:1})),[[i,$.value]])}}}),[["__scopeId","data-v-282c6c4c"]]);export{M as default};
