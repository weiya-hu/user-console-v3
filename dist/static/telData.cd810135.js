import{H as e,u as a,g as l,j as t,o as d,I as o,J as s,a as u,w as r,B as p,X as i,a3 as n,c as v,$ as c,P as m,aa as f,av as y,aw as _,a2 as b,ax as g,r as w,ad as h}from"./vue.a499711c.js";import{f as V}from"./date.23847c74.js";import{K as k}from"./KzPage.9312e74c.js";import{_ as j}from"./KzCascader.6fd21cdd.js";import{K as C}from"./KzEmpty.61a513e5.js";import{_ as x,m as z,A as U,S as D,P as K,Q as I,R as P}from"./index.7f252a0e.js";import{b as F,c as H,d as M}from"./findC.9b95a9e9.js";import"./tinymce.275386ab.js";const R={class:"kz_card teldata_page_c"},S={class:"fsc f1"},q=(e=>(y("data-v-2352f4fc"),e=e(),_(),e))((()=>s("div",{class:"card_title"},"号码段获客",-1))),A={class:"btns"},B=b("同步数据"),E=b("新建数据"),J={class:"mytable"},N={class:"fcs"},Q=b("查看"),X={key:1},$={class:"fcs fjend"},G=b("取消"),L=b("提交");var O=x(e({name:"telData",setup(e){const y=z(),_=a((()=>y.state.addressHash)),x=g(),O=l(0),T=l(10),W=l(1),Y=()=>{F({current:W.value,size:T.value}).then((e=>{1==e.status&&(Z.value=e.body.records,O.value=e.body.total)}))};Y();const Z=l([]),ee=l([]),ae=e=>{ee.value=e},le=l([]),te=l({});H().then((e=>{te.value=e.body}));const de=e=>{le.value=te.value[e].segments},oe=l(!1),se=()=>{le.value=[],oe.value=!1,pe.value=!1,ie.value.resetFields()},ue=l({people:"",desc:"",addr:[],operator:"",tels:[]}),re=t({people:[{required:!0,message:"请输入人群名称",trigger:"blur"}]}),pe=l(!1),ie=l(),ne=()=>{ie.value.validate((e=>{if(!e)return!1;pe.value=!0,M({city:ue.value.addr[1]||0,district:ue.value.addr[2]||0,group_desc:ue.value.desc,group_name:ue.value.people,province:ue.value.addr[0]||0,segment:ue.value.tels.join()}).then((e=>{1==e.status&&(se(),Y()),pe.value=!1}))}))};return(e,a)=>{const l=w("el-button"),t=w("el-icon"),y=w("el-table-column"),g=w("el-link"),z=w("el-table"),F=w("el-input"),H=w("el-form-item"),M=w("el-radio"),ee=w("el-radio-group"),ve=w("el-option"),ce=w("el-select"),me=w("el-form"),fe=w("el-dialog"),ye=h("loading");return d(),o("div",R,[s("div",S,[q,s("div",A,[u(l,{type:"primary",plain:""},{default:r((()=>[B])),_:1}),u(l,{type:"primary",onClick:a[0]||(a[0]=e=>oe.value=!0)},{default:r((()=>[u(t,{size:"14px",style:{"margin-right":"4px"}},{default:r((()=>[u(p(U))])),_:1}),E])),_:1})])]),s("div",J,[u(z,{data:Z.value,style:{width:"100%"},onSelectionChange:ae},{empty:r((()=>[u(C)])),default:r((()=>[u(y,{type:"selection",width:"50"}),u(y,{property:"id",label:"ID"}),u(y,{property:"group_name",label:"人群名称"}),u(y,{property:"group_desc",label:"人群描述"}),u(y,{property:"status",label:"状态"},{default:r((e=>[s("div",N,[s("div",{class:i(["status_dot",p(D)(e.row.status).className])},null,2),s("div",null,n(p(D)(e.row.status).text),1)])])),_:1}),u(y,{label:"地区"},{default:r((e=>[s("div",null,n(p(K)(p(I)(e.row.province,e.row.city,e.row.district),p(_))),1)])),_:1}),u(y,{property:"count",label:"覆盖用户人数"},{default:r((e=>[s("div",null,n(e.row.count),1)])),_:1}),u(y,{property:"source",label:"来源"},{default:r((e=>[s("div",null,n(p(P)(e.row.source)),1)])),_:1}),u(y,{property:"user_name",label:"创建人"}),u(y,{property:"create_time",label:"创建日期"},{default:r((e=>[s("div",null,n(p(V)(new Date(e.row.create_time),"yyyy-MM-dd")),1)])),_:1}),u(y,{property:"source",label:"操作",fixed:"right"},{default:r((e=>[4==e.row.status?(d(),v(g,{key:0,type:"primary",onClick:a=>{return l=e.row.id,void x.push("/product/dmp/findc/telDataDetails?id="+l);var l}},{default:r((()=>[Q])),_:2},1032,["onClick"])):(d(),o("div",X,"---"))])),_:1}),u(k,{page:W.value,"onUpdate:page":a[1]||(a[1]=e=>W.value=e),size:T.value,"onUpdate:size":a[2]||(a[2]=e=>T.value=e),total:O.value,onChange:Y},null,8,["page","size","total"])])),_:1},8,["data"])]),u(fe,{modelValue:oe.value,"onUpdate:modelValue":a[8]||(a[8]=e=>oe.value=e),title:"新建数据",width:"500px",onClose:se},{default:r((()=>[c((d(),v(me,{ref_key:"addFormRef",ref:ie,class:"myform",model:ue.value,rules:re},{default:r((()=>[u(H,{label:"人群名称",prop:"people"},{default:r((()=>[u(F,{modelValue:ue.value.people,"onUpdate:modelValue":a[3]||(a[3]=e=>ue.value.people=e),placeholder:"请输入人群名称"},null,8,["modelValue"])])),_:1}),u(H,{label:"选择地区",prop:"addr"},{default:r((()=>[u(j,{modelValue:ue.value.addr,"onUpdate:modelValue":a[4]||(a[4]=e=>ue.value.addr=e),type:"address"},null,8,["modelValue"])])),_:1}),u(H,{label:"人群描述",prop:"desc"},{default:r((()=>[u(F,{modelValue:ue.value.desc,"onUpdate:modelValue":a[5]||(a[5]=e=>ue.value.desc=e),placeholder:"可对人群进行简单的描述",type:"textarea",maxlength:"150","show-word-limit":"",rows:"4",resize:"none"},null,8,["modelValue"])])),_:1}),u(H,{label:"运营商",prop:"operator"},{default:r((()=>[u(ee,{modelValue:ue.value.operator,"onUpdate:modelValue":a[6]||(a[6]=e=>ue.value.operator=e),onChange:de},{default:r((()=>[(d(!0),o(m,null,f(te.value,(e=>(d(),v(M,{key:e.id,label:e.id},{default:r((()=>[b(n(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(H,{label:"号码段",prop:"tels"},{default:r((()=>[u(ce,{modelValue:ue.value.tels,"onUpdate:modelValue":a[7]||(a[7]=e=>ue.value.tels=e),multiple:"",placeholder:"请选择号码段",class:"w100",disabled:0==le.value.length},{default:r((()=>[(d(!0),o(m,null,f(le.value,((e,a)=>(d(),v(ve,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),s("div",$,[u(l,{onClick:se},{default:r((()=>[G])),_:1}),u(l,{type:"primary",onClick:ne},{default:r((()=>[L])),_:1})])])),_:1},8,["model","rules"])),[[ye,pe.value]])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-2352f4fc"]]);export{O as default};
