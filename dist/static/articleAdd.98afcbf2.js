var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,o,n)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,i=(e,t)=>{for(var o in t||(t={}))r.call(t,o)&&a(e,o,t[o]);if(n)for(var o of n(t))s.call(t,o)&&a(e,o,t[o]);return e},l=(e,n)=>t(e,o(n)),c=(e,t)=>{var o={};for(var a in e)r.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(null!=e&&n)for(var a of n(e))t.indexOf(a)<0&&s.call(e,a)&&(o[a]=e[a]);return o};import{i as d,H as m,s as u,g,C as h,S as p,aB as f,aC as v,af as b,q as y,u as w,o as x,c as S,B as C,k,I as z,J as O,a as T,w as M,_,a6 as D,a1 as A,av as E,aw as H,ay as B,ax as V,b as R,ae as L}from"./vue.fa004e33.js";import{t as N}from"./tinymce.50e98bcc.js";import{H as I,I as F,_ as P,m as j,e as U}from"./index.ef7540d4.js";import{c as W,d as $,e as G}from"./myWork.640e74c7.js";var q,K=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],X=function(e){return-1!==K.map((function(e){return e.toLowerCase()})).indexOf(e.toLowerCase())},J=function(e,t,o,n,r,s){n.setContent(s()),o.attrs["onUpdate:modelValue"]&&function(e,t,o,n){var r=e.modelEvents?e.modelEvents:null,s=Array.isArray(r)?r.join(" "):r;d(n,(function(t,n){o&&"string"==typeof t&&t!==n&&t!==o.getContent({format:e.outputFormat})&&o.setContent(t)})),o.on(s||"change input undo redo",(function(){t.emit("update:modelValue",o.getContent({format:e.outputFormat}))}))}(t,o,n,r),function(e,t,o){Object.keys(t).filter(X).forEach((function(n){var r=t[n];"function"==typeof r&&("onInit"===n?r(e,o):o.on(n.substring(2),(function(e){return r(e,o)})))}))}(e,o.attrs,n)},Y=0,Z=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++Y+String(t)},Q=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},ee=function(){return{listeners:[],scriptId:Z("tiny-script"),scriptLoaded:!1}},te=(q=ee(),{load:function(e,t,o){q.scriptLoaded?o():(q.listeners.push(o),e.getElementById(q.scriptId)||function(e,t,o,n){var r=t.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=e,r.src=o;var s=function(){r.removeEventListener("load",s),n()};r.addEventListener("load",s),t.head&&t.head.appendChild(r)}(q.scriptId,e,t,(function(){q.listeners.forEach((function(e){return e()})),q.scriptLoaded=!0})))},reinitialize:function(){q=ee()}}),oe=function(){var e="undefined"!=typeof window?window:global;return e&&e.tinymce?e.tinymce:null},ne={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return"html"===e||"text"===e}}},re=globalThis&&globalThis.__assign||function(){return re=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},re.apply(this,arguments)},se=m({props:ne,setup:function(e,t){var o=e.init?re({},e.init):{},n=u(e),r=n.disabled,s=n.modelValue,a=n.tagName,i=g(null),l=null,c=e.id||Z("tiny-vue"),m=e.init&&e.init.inline||e.inline,w=!!t.attrs["onUpdate:modelValue"],x=!0,S=e.initialValue?e.initialValue:"",C="",k=function(){var n,r,a,d=(n=x,w?function(){return(null==s?void 0:s.value)?s.value:""}:function(){return n?S:C}),u=re(re({},o),{readonly:e.disabled,selector:"#"+c,plugins:(r=o.plugins,a=e.plugins,Q(r).concat(Q(a))),toolbar:e.toolbar||o.toolbar,inline:m,setup:function(n){l=n,n.on("init",(function(o){return J(o,e,t,n,s,d)})),"function"==typeof o.setup&&o.setup(n)}});(function(e){return null!==e&&"textarea"===e.tagName.toLowerCase()})(i.value)&&(i.value.style.visibility=""),oe().init(u),x=!1};d(r,(function(e){var t;null!==l&&("function"==typeof(null===(t=l.mode)||void 0===t?void 0:t.set)?l.mode.set(e?"readonly":"design"):l.setMode(e?"readonly":"design"))})),d(a,(function(e){var t;w||(C=l.getContent()),null===(t=oe())||void 0===t||t.remove(l),y((function(){return k()}))})),h((function(){if(null!==oe())k();else if(i.value&&i.value.ownerDocument){var t=e.cloudChannel?e.cloudChannel:"6",o=e.apiKey?e.apiKey:"no-api-key",n=null==e.tinymceScriptSrc?"https://cdn.tiny.cloud/1/"+o+"/tinymce/"+t+"/tinymce.min.js":e.tinymceScriptSrc;te.load(i.value.ownerDocument,n,k)}})),p((function(){null!==oe()&&oe().remove(l)})),m||(f((function(){x||k()})),v((function(){var e;w||(C=l.getContent()),null===(e=oe())||void 0===e||e.remove(l)})));return t.expose({rerender:function(e){var t;C=l.getContent(),null===(t=oe())||void 0===t||t.remove(l),o=re(re({},o),e),y((function(){return k()}))}}),function(){return m?function(e,t,o,n){return e(n||"div",{id:t,ref:o})}(b,c,i,e.tagName):b("textarea",{id:c,visibility:"hidden",ref:i})}}});!function(){const e=Object.getPrototypeOf,t=(e,t,o)=>{var n;return!!o(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},o=e=>o=>(e=>{const o=typeof e;return null===e?"null":"object"===o&&Array.isArray(e)?"array":"object"===o&&t(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":o})(o)===e,n=e=>t=>typeof t===e,r=e=>t=>e===t,s=o("string"),a=o("object"),d=o=>((o,n)=>a(o)&&t(o,n,((t,o)=>e(t)===o)))(o,Object),m=o("array"),u=r(null),g=n("boolean"),h=r(void 0),p=e=>null==e,f=e=>!p(e),v=n("function"),b=n("number"),y=(e,t)=>{if(m(e)){for(let o=0,n=e.length;o<n;++o)if(!t(e[o]))return!1;return!0}return!1},w=()=>{},x=(e,t)=>(...o)=>e(t.apply(null,o)),S=e=>()=>e,C=e=>e,k=(e,t)=>e===t;function z(e,...t){return(...o)=>{const n=t.concat(o);return e.apply(null,n)}}const O=e=>t=>!e(t),T=e=>()=>{throw new Error(e)},M=e=>e(),_=S(!1),D=S(!0);var A=tinymce.util.Tools.resolve("tinymce.ThemeManager");class E{constructor(e,t){this.tag=e,this.value=t}static some(e){return new E(!0,e)}static none(){return E.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?E.some(e(this.value)):E.none()}bind(e){return this.tag?e(this.value):E.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:E.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return f(e)?E.some(e):E.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}E.singletonNone=new E(!1);const H=Array.prototype.slice,B=Array.prototype.indexOf,V=Array.prototype.push,R=(e,t)=>B.call(e,t),L=(e,t)=>{const o=R(e,t);return-1===o?E.none():E.some(o)},N=(e,t)=>R(e,t)>-1,I=(e,t)=>{for(let o=0,n=e.length;o<n;o++){if(t(e[o],o))return!0}return!1},F=(e,t)=>{const o=[];for(let n=0;n<e;n++)o.push(t(n));return o},P=(e,t)=>{const o=[];for(let n=0;n<e.length;n+=t){const r=H.call(e,n,n+t);o.push(r)}return o},j=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},U=(e,t)=>{for(let o=0,n=e.length;o<n;o++){t(e[o],o)}},W=(e,t)=>{const o=[],n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];(t(s,r)?o:n).push(s)}return{pass:o,fail:n}},$=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t(r,n)&&o.push(r)}return o},G=(e,t,o)=>(((e,t)=>{for(let o=e.length-1;o>=0;o--)t(e[o],o)})(e,((e,n)=>{o=t(o,e,n)})),o),q=(e,t,o)=>(U(e,((e,n)=>{o=t(o,e,n)})),o),K=(e,t)=>((e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t(r,n))return E.some(r);if(o(r,n))break}return E.none()})(e,t,_),X=(e,t)=>{for(let o=0,n=e.length;o<n;o++){if(t(e[o],o))return E.some(o)}return E.none()},J=e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!m(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);V.apply(t,e[o])}return t},Y=(e,t)=>J(j(e,t)),Z=(e,t)=>{for(let o=0,n=e.length;o<n;++o){if(!0!==t(e[o],o))return!1}return!0},Q=e=>{const t=H.call(e,0);return t.reverse(),t},ee=(e,t)=>$(e,(e=>!N(t,e))),te=(e,t)=>{const o={};for(let n=0,r=e.length;n<r;n++){const r=e[n];o[String(r)]=t(r,n)}return o},oe=e=>[e],ne=(e,t)=>{const o=H.call(e,0);return o.sort(t),o},re=(e,t)=>t>=0&&t<e.length?E.some(e[t]):E.none(),se=e=>re(e,0),ae=e=>re(e,e.length-1),ie=v(Array.from)?Array.from:e=>H.call(e),le=(e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return E.none()},ce=Object.keys,de=Object.hasOwnProperty,me=(e,t)=>{const o=ce(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}},ue=(e,t)=>ge(e,((e,o)=>({k:o,v:t(e,o)}))),ge=(e,t)=>{const o={};return me(e,((e,n)=>{const r=t(e,n);o[r.k]=r.v})),o},he=e=>(t,o)=>{e[o]=t},pe=(e,t,o,n)=>(me(e,((e,r)=>{(t(e,r)?o:n)(e,r)})),{}),fe=(e,t)=>{const o=[];return me(e,((e,n)=>{o.push(t(e,n))})),o},ve=(e,t)=>{const o=ce(e);for(let n=0,r=o.length;n<r;n++){const r=o[n],s=e[r];if(t(s,r,e))return E.some(s)}return E.none()},be=e=>fe(e,C),ye=(e,t)=>we(e,t)?E.from(e[t]):E.none(),we=(e,t)=>de.call(e,t),xe=(e,t)=>we(e,t)&&void 0!==e[t]&&null!==e[t],Se=(e,t,o=k)=>e.exists((e=>o(e,t))),Ce=e=>{const t=[],o=e=>{t.push(e)};for(let n=0;n<e.length;n++)e[n].each(o);return t},ke=(e,t,o)=>e.isSome()&&t.isSome()?E.some(o(e.getOrDie(),t.getOrDie())):E.none(),ze=(e,t)=>e?E.some(t):E.none(),Oe=(e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t,Te=(e,t)=>-1!==e.indexOf(t),Me=(e,t)=>Oe(e,t,0),_e=(e,t)=>Oe(e,t,e.length-t.length),De=(Ae=/^\s+|\s+$/g,e=>e.replace(Ae,""));var Ae;const Ee=e=>e.length>0,He=e=>void 0!==e.style&&v(e.style.getPropertyValue),Be=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},Ve={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){throw new Error("HTML does not have a single root node")}return Be(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return Be(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return Be(o)},fromDom:Be,fromPoint:(e,t,o)=>E.from(e.dom.elementFromPoint(t,o)).map(Be)};"undefined"!=typeof window?window:Function("return this;")();const Re=e=>e.dom.nodeName.toLowerCase(),Le=e=>t=>(e=>e.dom.nodeType)(t)===e,Ne=Le(1),Ie=Le(3),Fe=Le(9),Pe=Le(11),je=e=>t=>Ne(t)&&Re(t)===e,Ue=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},We=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,$e=(e,t)=>e.dom===t.dom,Ge=(e,t)=>{const o=e.dom,n=t.dom;return o!==n&&o.contains(n)},qe=e=>Ve.fromDom(e.dom.ownerDocument),Ke=e=>Fe(e)?e:qe(e),Xe=e=>Ve.fromDom(Ke(e).dom.documentElement),Je=e=>Ve.fromDom(Ke(e).dom.defaultView),Ye=e=>E.from(e.dom.parentNode).map(Ve.fromDom),Ze=e=>E.from(e.dom.parentElement).map(Ve.fromDom),Qe=e=>E.from(e.dom.offsetParent).map(Ve.fromDom),et=e=>j(e.dom.childNodes,Ve.fromDom),tt=(e,t)=>{const o=e.dom.childNodes;return E.from(o[t]).map(Ve.fromDom)},ot=(e,t)=>({element:e,offset:t}),nt=(e,t)=>{const o=et(e);return o.length>0&&t<o.length?ot(o[t],0):ot(e,t)},rt=e=>Pe(e)&&f(e.dom.host),st=v(Element.prototype.attachShadow)&&v(Node.prototype.getRootNode),at=S(st),it=st?e=>Ve.fromDom(e.dom.getRootNode()):Ke,lt=e=>rt(e)?e:Ve.fromDom(Ke(e).dom.body),ct=e=>{const t=it(e);return rt(t)?E.some(t):E.none()},dt=e=>Ve.fromDom(e.dom.host),mt=e=>f(e.dom.shadowRoot),ut=e=>{const t=Ie(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const o=t.ownerDocument;return ct(Ve.fromDom(t)).fold((()=>o.body.contains(t)),(n=ut,r=dt,e=>n(r(e))));var n,r},gt=()=>ht(Ve.fromDom(document)),ht=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return Ve.fromDom(t)},pt=(e,t,o)=>{if(!(s(o)||g(o)||b(o)))throw new Error("Attribute value was not simple");e.setAttribute(t,o+"")},ft=(e,t,o)=>{pt(e.dom,t,o)},vt=(e,t)=>{const o=e.dom;me(t,((e,t)=>{pt(o,t,e)}))},bt=(e,t)=>{const o=e.dom.getAttribute(t);return null===o?void 0:o},yt=(e,t)=>E.from(bt(e,t)),wt=(e,t)=>{const o=e.dom;return!(!o||!o.hasAttribute)&&o.hasAttribute(t)},xt=(e,t)=>{e.dom.removeAttribute(t)},St=(e,t,o)=>{if(!s(o))throw new Error("CSS value must be a string: "+o);He(e)&&e.style.setProperty(t,o)},Ct=(e,t)=>{He(e)&&e.style.removeProperty(t)},kt=(e,t,o)=>{const n=e.dom;St(n,t,o)},zt=(e,t)=>{const o=e.dom;me(t,((e,t)=>{St(o,t,e)}))},Ot=(e,t)=>{const o=e.dom;me(t,((e,t)=>{e.fold((()=>{Ct(o,t)}),(e=>{St(o,t,e)}))}))},Tt=(e,t)=>{const o=e.dom,n=window.getComputedStyle(o).getPropertyValue(t);return""!==n||ut(e)?n:Mt(o,t)},Mt=(e,t)=>He(e)?e.style.getPropertyValue(t):"",_t=(e,t)=>{const o=e.dom,n=Mt(o,t);return E.from(n).filter((e=>e.length>0))},Dt=e=>{const t={},o=e.dom;if(He(o))for(let n=0;n<o.style.length;n++){const e=o.style.item(n);t[e]=o.style[e]}return t},At=(e,t,o)=>{const n=Ve.fromTag(e);kt(n,t,o);return _t(n,t).isSome()},Et=(e,t)=>{const o=e.dom;Ct(o,t),Se(yt(e,"style").map(De),"")&&xt(e,"style")},Ht=e=>e.dom.offsetWidth,Bt=(e,t)=>{const o=o=>{const n=t(o);if(n<=0||null===n){const t=Tt(o,e);return parseFloat(t)||0}return n},n=(e,t)=>q(t,((t,o)=>{const n=Tt(e,o),r=void 0===n?0:parseInt(n,10);return isNaN(r)?t:t+r}),0);return{set:(t,o)=>{if(!b(o)&&!o.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+o);const n=t.dom;He(n)&&(n.style[e]=o+"px")},get:o,getOuter:o,aggregate:n,max:(e,t,o)=>{const r=n(e,o);return t>r?t-r:0}}},Vt=Bt("height",(e=>{const t=e.dom;return ut(e)?t.getBoundingClientRect().height:t.offsetHeight})),Rt=e=>Vt.get(e),Lt=e=>Vt.getOuter(e),Nt=(e,t)=>({left:e,top:t,translate:(o,n)=>Nt(e+o,t+n)}),It=Nt,Ft=(e,t)=>void 0!==e?e:void 0!==t?t:0,Pt=e=>{const t=e.dom.ownerDocument,o=t.body,n=t.defaultView,r=t.documentElement;if(o===e.dom)return It(o.offsetLeft,o.offsetTop);const s=Ft(null==n?void 0:n.pageYOffset,r.scrollTop),a=Ft(null==n?void 0:n.pageXOffset,r.scrollLeft),i=Ft(r.clientTop,o.clientTop),l=Ft(r.clientLeft,o.clientLeft);return jt(e).translate(a-l,s-i)},jt=e=>{const t=e.dom,o=t.ownerDocument.body;return o===t?It(o.offsetLeft,o.offsetTop):ut(e)?(e=>{const t=e.getBoundingClientRect();return It(t.left,t.top)})(t):It(0,0)},Ut=Bt("width",(e=>e.dom.offsetWidth)),Wt=e=>Ut.get(e),$t=e=>Ut.getOuter(e),Gt=e=>{let t,o=!1;return(...n)=>(o||(o=!0,t=e.apply(null,n)),t)},qt=()=>Kt(0,0),Kt=(e,t)=>({major:e,minor:t}),Xt={nu:Kt,detect:(e,t)=>{const o=String(t).toLowerCase();return 0===e.length?qt():((e,t)=>{const o=((e,t)=>{for(let o=0;o<e.length;o++){const n=e[o];if(n.test(t))return n}})(e,t);if(!o)return{major:0,minor:0};const n=e=>Number(t.replace(o,"$"+e));return Kt(n(1),n(2))})(e,o)},unknown:qt},Jt=(e,t)=>{const o=String(t).toLowerCase();return K(e,(e=>e.search(o)))},Yt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Zt=e=>t=>Te(t,e),Qt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Te(e,"edge/")&&Te(e,"chrome")&&Te(e,"safari")&&Te(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Yt],search:e=>Te(e,"chrome")&&!Te(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Te(e,"msie")||Te(e,"trident")},{name:"Opera",versionRegexes:[Yt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zt("firefox")},{name:"Safari",versionRegexes:[Yt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Te(e,"safari")||Te(e,"mobile/"))&&Te(e,"applewebkit")}],eo=[{name:"Windows",search:Zt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Te(e,"iphone")||Te(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Zt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zt("linux"),versionRegexes:[]},{name:"Solaris",search:Zt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Zt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],to={browsers:S(Qt),oses:S(eo)},oo="Edge",no="Chromium",ro="Opera",so="Firefox",ao="Safari",io=e=>{const t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isEdge:n(oo),isChromium:n(no),isIE:n("IE"),isOpera:n(ro),isFirefox:n(so),isSafari:n(ao)}},lo={unknown:()=>io({current:void 0,version:Xt.unknown()}),nu:io,edge:S(oo),chromium:S(no),ie:S("IE"),opera:S(ro),firefox:S(so),safari:S(ao)},co="Windows",mo="Android",uo="Linux",go="macOS",ho="Solaris",po="FreeBSD",fo="ChromeOS",vo=e=>{const t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isWindows:n(co),isiOS:n("iOS"),isAndroid:n(mo),isMacOS:n(go),isLinux:n(uo),isSolaris:n(ho),isFreeBSD:n(po),isChromeOS:n(fo)}},bo={unknown:()=>vo({current:void 0,version:Xt.unknown()}),nu:vo,windows:S(co),ios:S("iOS"),android:S(mo),linux:S(uo),macos:S(go),solaris:S(ho),freebsd:S(po),chromeos:S(fo)},yo=(e,t,o)=>{const n=to.browsers(),r=to.oses(),s=t.bind((e=>((e,t)=>le(t.brands,(t=>{const o=t.brand.toLowerCase();return K(e,(e=>{var t;return o===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:Xt.nu(parseInt(t.version,10),0)})))})))(n,e))).orThunk((()=>((e,t)=>Jt(e,t).map((e=>{const o=Xt.detect(e.versionRegexes,t);return{current:e.name,version:o}})))(n,e))).fold(lo.unknown,lo.nu),a=((e,t)=>Jt(e,t).map((e=>{const o=Xt.detect(e.versionRegexes,t);return{current:e.name,version:o}})))(r,e).fold(bo.unknown,bo.nu),i=((e,t,o,n)=>{const r=e.isiOS()&&!0===/ipad/i.test(o),s=e.isiOS()&&!r,a=e.isiOS()||e.isAndroid(),i=a||n("(pointer:coarse)"),l=r||!s&&a&&n("(min-device-width:768px)"),c=s||a&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(o),m=!c&&!l&&!d;return{isiPad:S(r),isiPhone:S(s),isTablet:S(l),isPhone:S(c),isTouch:S(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:S(d),isDesktop:S(m)}})(a,s,e,o);return{browser:s,os:a,deviceType:i}},wo=e=>window.matchMedia(e).matches;let xo=Gt((()=>yo(navigator.userAgent,E.from(navigator.userAgentData),wo)));const So=()=>xo(),Co=e=>{const t=Ve.fromDom((e=>{if(at()&&f(e.target)){const t=Ve.fromDom(e.target);if(Ne(t)&&mt(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return se(t)}}return E.from(e.target)})(e).getOr(e.target)),o=()=>e.stopPropagation(),n=()=>e.preventDefault(),r=x(n,o);return((e,t,o,n,r,s,a)=>({target:e,x:t,y:o,stop:n,prevent:r,kill:s,raw:a}))(t,e.clientX,e.clientY,o,n,r,e)},ko=(e,t,o,n,r)=>{const s=((e,t)=>o=>{e(o)&&t(Co(o))})(o,n);return e.dom.addEventListener(t,s,r),{unbind:z(zo,e,t,s,r)}},zo=(e,t,o,n)=>{e.dom.removeEventListener(t,o,n)},Oo=(e,t)=>{Ye(e).each((o=>{o.dom.insertBefore(t.dom,e.dom)}))},To=(e,t)=>{const o=(e=>E.from(e.dom.nextSibling).map(Ve.fromDom))(e);o.fold((()=>{Ye(e).each((e=>{_o(e,t)}))}),(e=>{Oo(e,t)}))},Mo=(e,t)=>{const o=(e=>tt(e,0))(e);o.fold((()=>{_o(e,t)}),(o=>{e.dom.insertBefore(t.dom,o.dom)}))},_o=(e,t)=>{e.dom.appendChild(t.dom)},Do=(e,t)=>{U(t,(t=>{_o(e,t)}))},Ao=e=>{e.dom.textContent="",U(et(e),(e=>{Eo(e)}))},Eo=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},Ho=e=>{const t=void 0!==e?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return It(o,n)},Bo=(e,t,o)=>{const n=(void 0!==o?o.dom:document).defaultView;n&&n.scrollTo(e,t)},Vo=(e,t,o,n)=>({x:e,y:t,width:o,height:n,right:e+o,bottom:t+n}),Ro=e=>{const t=void 0===e?window:e,o=t.document,n=Ho(Ve.fromDom(o));return(e=>{const t=void 0===e?window:e;return So().browser.isFirefox()?E.none():E.from(t.visualViewport)})(t).fold((()=>{const e=t.document.documentElement,o=e.clientWidth,r=e.clientHeight;return Vo(n.left,n.top,o,r)}),(e=>Vo(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height)))},Lo=()=>Ve.fromDom(document),No=(e,t)=>e.view(t).fold(S([]),(t=>{const o=e.owner(t),n=No(e,o);return[t].concat(n)}));var Io=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?E.none():E.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(Ve.fromDom)},owner:e=>qe(e)});const Fo=e=>{const t=Lo(),o=Ho(t),n=((e,t)=>{const o=t.owner(e),n=No(t,o);return E.some(n)})(e,Io);return n.fold(z(Pt,e),(t=>{const n=jt(e),r=G(t,((e,t)=>{const o=jt(t);return{left:e.left+o.left,top:e.top+o.top}}),{left:0,top:0});return It(r.left+n.left+o.left,r.top+n.top+o.top)}))},Po=(e,t,o,n)=>({x:e,y:t,width:o,height:n,right:e+o,bottom:t+n}),jo=e=>{const t=Pt(e),o=$t(e),n=Lt(e);return Po(t.left,t.top,o,n)},Uo=e=>{const t=Fo(e),o=$t(e),n=Lt(e);return Po(t.left,t.top,o,n)},Wo=()=>Ro(window),$o=e=>{const t=t=>t(e),o=S(e),n=()=>r,r={tag:!0,inner:e,fold:(t,o)=>o(e),isValue:D,isError:_,map:t=>qo.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:o,or:n,getOrThunk:o,orThunk:n,getOrDie:o,each:t=>{t(e)},toOptional:()=>E.some(e)};return r},Go=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(t,o)=>t(e),isValue:_,isError:D,map:t,mapError:t=>qo.error(t(e)),bind:t,exists:_,forall:D,getOr:C,or:C,getOrThunk:M,orThunk:M,getOrDie:T(String(e)),each:w,toOptional:E.none};return o},qo={value:$o,error:Go,fromOption:(e,t)=>e.fold((()=>Go(t)),$o)};var Ko,Xo;(Xo=Ko||(Ko={}))[Xo.Error=0]="Error",Xo[Xo.Value=1]="Value";const Jo=(e,t,o)=>e.stype===Ko.Error?t(e.serror):o(e.svalue),Yo=e=>({stype:Ko.Value,svalue:e}),Zo=e=>({stype:Ko.Error,serror:e}),Qo=e=>e.fold(Zo,Yo),en=e=>Jo(e,qo.error,qo.value),tn=Yo,on=e=>{const t=[],o=[];return U(e,(e=>{Jo(e,(e=>o.push(e)),(e=>t.push(e)))})),{values:t,errors:o}},nn=Zo,rn=(e,t)=>e.stype===Ko.Value?t(e.svalue):e,sn=(e,t)=>e.stype===Ko.Error?t(e.serror):e,an=(e,t)=>e.stype===Ko.Value?{stype:Ko.Value,svalue:t(e.svalue)}:e,ln=(e,t)=>e.stype===Ko.Error?{stype:Ko.Error,serror:t(e.serror)}:e,cn=Jo,dn=(e,t,o,n)=>({tag:"field",key:e,newKey:t,presence:o,prop:n}),mn=(e,t,o)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},un=e=>(...t)=>{if(0===t.length)throw new Error("Can't merge zero objects");const o={};for(let n=0;n<t.length;n++){const r=t[n];for(const t in r)we(r,t)&&(o[t]=e(o[t],r[t]))}return o},gn=un(((e,t)=>d(e)&&d(t)?gn(e,t):t)),hn=un(((e,t)=>t)),pn=e=>({tag:"defaultedThunk",process:e}),fn=e=>pn(S(e)),vn=e=>({tag:"mergeWithThunk",process:e}),bn=e=>x(nn,J)(e),yn=e=>{const t=on(e);return t.errors.length>0?bn(t.errors):tn(t.values)},wn=e=>a(e)&&ce(e).length>100?" removed due to size":JSON.stringify(e,null,2),xn=(e,t)=>nn([{path:e,getErrorInfo:t}]),Sn=e=>({extract:(t,o)=>sn(e(o),(e=>((e,t)=>xn(e,S(t)))(t,e))),toString:S("val")}),Cn=Sn(tn),kn=(e,t,o,n)=>ye(t,o).fold((()=>((e,t,o)=>xn(e,(()=>'Could not find valid *required* value for "'+t+'" in '+wn(o))))(e,o,t)),n),zn=(e,t,o,n)=>n(ye(e,t).getOrThunk((()=>o(e)))),On=(e,t,o,n,r)=>{const s=e=>r.extract(t.concat([n]),e),a=e=>e.fold((()=>tn(E.none())),(e=>{const o=r.extract(t.concat([n]),e);return an(o,E.some)}));switch(e.tag){case"required":return kn(t,o,n,s);case"defaultedThunk":return zn(o,n,e.process,s);case"option":return((e,t,o)=>o(ye(e,t)))(o,n,a);case"defaultedOptionThunk":return((e,t,o,n)=>n(ye(e,t).map((t=>!0===t?o(e):t))))(o,n,e.process,a);case"mergeWithThunk":return zn(o,n,S({}),(t=>{const n=gn(e.process(o),t);return s(n)}))}},Tn=e=>({extract:(t,o)=>e().extract(t,o),toString:()=>e().toString()}),Mn=e=>ce(((e,t)=>{const o={};return pe(e,t,he(o),w),o})(e,f)),_n=e=>{const t=Dn(e),o=G(e,((e,t)=>mn(t,(t=>gn(e,{[t]:!0})),S(e))),{});return{extract:(e,n)=>{const r=g(n)?[]:Mn(n),s=$(r,(e=>!xe(o,e)));return 0===s.length?t.extract(e,n):((e,t)=>xn(e,(()=>"There are unsupported fields: ["+t.join(", ")+"] specified")))(e,s)},toString:t.toString}},Dn=e=>({extract:(t,o)=>((e,t,o)=>{const n={},r=[];for(const s of o)mn(s,((o,s,a,i)=>{const l=On(a,e,t,o,i);cn(l,(e=>{r.push(...e)}),(e=>{n[s]=e}))}),((e,o)=>{n[e]=o(t)}));return r.length>0?nn(r):tn(n)})(t,o,e),toString:()=>"obj{\n"+j(e,(e=>mn(e,((e,t,o,n)=>e+" -> "+n.toString()),((e,t)=>"state("+e+")")))).join("\n")+"}"}),An=e=>({extract:(t,o)=>{const n=j(o,((o,n)=>e.extract(t.concat(["["+n+"]"]),o)));return yn(n)},toString:()=>"array("+e.toString()+")"}),En=e=>({extract:(t,o)=>{const n=[];for(const r of e){const e=r.extract(t,o);if(e.stype===Ko.Value)return e;n.push(e)}return yn(n)},toString:()=>"oneOf("+j(e,(e=>e.toString())).join(", ")+")"}),Hn=(e,t)=>({extract:(o,n)=>{const r=ce(n),s=((t,o)=>An(Sn(e)).extract(t,o))(o,r);return rn(s,(e=>{const r=j(e,(e=>dn(e,e,{tag:"required",process:{}},t)));return Dn(r).extract(o,n)}))},toString:()=>"setOf("+t.toString()+")"}),Bn=x(An,Dn),Vn=S(Cn),Rn=(e,t)=>Sn((o=>{const n=typeof o;return e(o)?tn(o):nn(`Expected type: ${t} but got: ${n}`)})),Ln=Rn(b,"number"),Nn=Rn(s,"string"),In=Rn(g,"boolean"),Fn=Rn(v,"function"),Pn=e=>{if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((t=>Pn(e[t])));default:return!1}},jn=Sn((e=>Pn(e)?tn(e):nn("Expected value to be acceptable for sending via postMessage"))),Un=(e,t,o,n)=>ye(o,n).fold((()=>((e,t,o)=>xn(e,(()=>'The chosen schema: "'+o+'" did not exist in branches: '+wn(t))))(e,o,n)),(o=>o.extract(e.concat(["branch: "+n]),t))),Wn=(e,t)=>({extract:(o,n)=>ye(n,e).fold((()=>((e,t)=>xn(e,(()=>'Choice schema did not contain choice key: "'+t+'"')))(o,e)),(e=>Un(o,n,t,e))),toString:()=>"chooseOn("+e+"). Possible values: "+ce(t)}),$n=e=>Sn((t=>e(t).fold(nn,tn))),Gn=(e,t)=>Hn((t=>Qo(e(t))),t),qn=(e,t,o)=>en(((e,t,o)=>{const n=t.extract([e],o);return ln(n,(e=>({input:o,errors:e})))})(e,t,o)),Kn=e=>e.fold((e=>{throw new Error(Jn(e))}),C),Xn=(e,t,o)=>Kn(qn(e,t,o)),Jn=e=>"Errors: \n"+(e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:S("... (only showing first ten failures)")}]):e;return j(t,(e=>"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()))})(e.errors).join("\n")+"\n\nInput object: "+wn(e.input),Yn=(e,t)=>Wn(e,ue(t,Dn)),Zn=dn,Qn=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),er=e=>$n((t=>N(e,t)?qo.value(t):qo.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`))),tr=e=>Zn(e,e,{tag:"required",process:{}},Vn()),or=(e,t)=>Zn(e,e,{tag:"required",process:{}},t),nr=e=>or(e,Ln),rr=e=>or(e,Nn),sr=(e,t)=>Zn(e,e,{tag:"required",process:{}},er(t)),ar=e=>or(e,Fn),ir=(e,t)=>Zn(e,e,{tag:"required",process:{}},Dn(t)),lr=(e,t)=>Zn(e,e,{tag:"required",process:{}},Bn(t)),cr=(e,t)=>Zn(e,e,{tag:"required",process:{}},An(t)),dr=e=>Zn(e,e,{tag:"option",process:{}},Vn()),mr=(e,t)=>Zn(e,e,{tag:"option",process:{}},t),ur=e=>mr(e,Ln),gr=e=>mr(e,Nn),hr=(e,t)=>mr(e,er(t)),pr=e=>mr(e,Fn),fr=(e,t)=>mr(e,An(t)),vr=(e,t)=>mr(e,Dn(t)),br=(e,t)=>Zn(e,e,fn(t),Vn()),yr=(e,t,o)=>Zn(e,e,fn(t),o),wr=(e,t)=>yr(e,t,Ln),xr=(e,t)=>yr(e,t,Nn),Sr=(e,t,o)=>yr(e,t,er(o)),Cr=(e,t)=>yr(e,t,In),kr=(e,t)=>yr(e,t,Fn),zr=(e,t,o)=>yr(e,t,An(o)),Or=(e,t,o)=>yr(e,t,Dn(o)),Tr=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Mr=e=>{if(!m(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],o={};return U(e,((n,r)=>{const s=ce(n);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=n[a];if(void 0!==o[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!m(i))throw new Error("case arguments must be an array");t.push(a),o[a]=(...o)=>{const n=o.length;if(n!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+n);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,o)},match:e=>{const n=ce(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!Z(t,(e=>N(n,e))))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[a].apply(null,o)},log:e=>{}}}})),o};Mr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const _r=(e,t)=>((e,t)=>{const o={};return me(e,((e,n)=>{N(t,n)||(o[n]=e)})),o})(e,t),Dr=(e,t)=>((e,t)=>({[e]:t}))(e,t),Ar=e=>(e=>{const t={};return U(e,(e=>{t[e.key]=e.value})),t})(e),Er=(e,t)=>{const o=(e=>{const t=[],o=[];return U(e,(e=>{e.fold((e=>{t.push(e)}),(e=>{o.push(e)}))})),{errors:t,values:o}})(e);return o.errors.length>0?(n=o.errors,qo.error(J(n))):((e,t)=>0===e.length?qo.value(t):qo.value(gn(t,hn.apply(void 0,e))))(o.values,t);var n},Hr=e=>v(e)?e:_,Br=(e,t,o)=>{let n=e.dom;const r=Hr(o);for(;n.parentNode;){n=n.parentNode;const e=Ve.fromDom(n),o=t(e);if(o.isSome())return o;if(r(e))break}return E.none()},Vr=(e,t,o)=>{const n=t(e),r=Hr(o);return n.orThunk((()=>r(e)?E.none():Br(e,t,r)))},Rr=(e,t)=>$e(e.element,t.event.target),Lr={can:D,abort:_,run:w},Nr=e=>{if(!xe(e,"can")&&!xe(e,"abort")&&!xe(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return i(i({},Lr),e)},Ir=e=>{const t=((e,t)=>(...o)=>q(e,((e,n)=>e&&t(n).apply(void 0,o)),!0))(e,(e=>e.can)),o=((e,t)=>(...o)=>q(e,((e,n)=>e||t(n).apply(void 0,o)),!1))(e,(e=>e.abort));return{can:t,abort:o,run:(...t)=>{U(e,(e=>{e.run.apply(void 0,t)}))}}},Fr=S,Pr=Fr("touchstart"),jr=Fr("touchmove"),Ur=Fr("touchend"),Wr=Fr("touchcancel"),$r=Fr("mousedown"),Gr=Fr("mousemove"),qr=Fr("mouseout"),Kr=Fr("mouseup"),Xr=Fr("mouseover"),Jr=Fr("focusin"),Yr=Fr("focusout"),Zr=Fr("keydown"),Qr=Fr("keyup"),es=Fr("input"),ts=Fr("change"),os=Fr("click"),ns=Fr("transitioncancel"),rs=Fr("transitionend"),ss=Fr("transitionstart"),as=Fr("selectstart"),is=e=>S("alloy."+e),ls={tap:is("tap")},cs=is("focus"),ds=is("blur.post"),ms=is("paste.post"),us=is("receive"),gs=is("execute"),hs=is("focus.item"),ps=ls.tap,fs=is("longpress"),vs=is("sandbox.close"),bs=is("typeahead.cancel"),ys=is("system.init"),ws=is("system.touchmove"),xs=is("system.touchend"),Ss=is("system.scroll"),Cs=is("system.resize"),ks=is("system.attached"),zs=is("system.detached"),Os=is("system.dismissRequested"),Ts=is("system.repositionRequested"),Ms=is("focusmanager.shifted"),_s=is("slotcontainer.visibility"),Ds=is("change.tab"),As=is("dismiss.tab"),Es=is("highlight"),Hs=is("dehighlight"),Bs=(e,t)=>{Ns(e,e.element,t,{})},Vs=(e,t,o)=>{Ns(e,e.element,t,o)},Rs=e=>{Bs(e,gs())},Ls=(e,t,o)=>{Ns(e,t,o,{})},Ns=(e,t,o,n)=>{const r=i({target:t},n);e.getSystem().triggerEvent(o,t,r)},Is=(e,t,o,n)=>{e.getSystem().triggerEvent(o,t,n.event)},Fs=e=>Ar(e),Ps=(e,t)=>({key:e,value:Nr({abort:t})}),js=e=>({key:e,value:Nr({run:(e,t)=>{t.event.prevent()}})}),Us=(e,t)=>({key:e,value:Nr({run:t})}),Ws=(e,t,o)=>({key:e,value:Nr({run:(e,n)=>{t.apply(void 0,[e,n].concat(o))}})}),$s=e=>t=>({key:e,value:Nr({run:(e,o)=>{Rr(e,o)&&t(e,o)}})}),Gs=(e,t,o)=>((e,t)=>Us(e,((o,n)=>{o.getSystem().getByUid(t).each((t=>{Is(t,t.element,e,n)}))})))(e,t.partUids[o]),qs=(e,t)=>Us(e,((e,o)=>{const n=o.event,r=e.getSystem().getByDom(n.target).getOrThunk((()=>Vr(n.target,(t=>e.getSystem().getByDom(t).toOptional()),_).getOr(e)));t(e,r,o)})),Ks=e=>Us(e,((e,t)=>{t.cut()})),Xs=e=>Us(e,((e,t)=>{t.stop()})),Js=(e,t)=>$s(e)(t),Ys=$s(ks()),Zs=$s(zs()),Qs=$s(ys()),ea=(ta=gs(),e=>Us(ta,e));var ta;const oa=e=>e.dom.innerHTML,na=(e,t)=>{const o=qe(e).dom,n=Ve.fromDom(o.createDocumentFragment()),r=((e,t)=>{const o=(t||document).createElement("div");return o.innerHTML=e,et(Ve.fromDom(o))})(t,o);Do(n,r),Ao(e),_o(e,n)},ra=e=>((e,t)=>Ve.fromDom(e.dom.cloneNode(t)))(e,!1),sa=e=>{if(rt(e))return"#shadow-root";return(e=>{const t=Ve.fromTag("div"),o=Ve.fromDom(e.dom.cloneNode(!0));return _o(t,o),oa(t)})(ra(e))},aa=e=>sa(e),ia=Fs([((e,t)=>({key:e,value:Nr({can:t})}))(cs(),((e,t)=>{const o=t.event;return!((e,t,o)=>$e(t,e.element)&&!$e(t,o))(e,o.originator,o.target)}))]);var la=Object.freeze({__proto__:null,events:ia});let ca=0;const da=e=>{const t=(new Date).getTime(),o=Math.floor(1e9*Math.random());return ca++,e+"_"+o+ca+String(t)},ma=S("alloy-id-"),ua=S("data-alloy-id"),ga=ma(),ha=ua(),pa=(e,t)=>{Object.defineProperty(e.dom,ha,{value:t,writable:!0})},fa=e=>{const t=Ne(e)?e.dom[ha]:null;return E.from(t)},va=e=>da(e),ba=C,ya=e=>{const t=t=>()=>{throw new Error((t=>`The component must be in a context to execute: ${t}`+(e?"\n"+aa(e().element)+" is not in context.":""))(t))};return{debugInfo:S("fake"),triggerEvent:()=>{},triggerFocus:()=>{},triggerEscape:()=>{},broadcast:()=>{},broadcastOn:()=>{},broadcastEvent:()=>{},build:t("build"),buildOrPatch:t("buildOrPatch"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),isConnected:_}},wa=ya(),xa=e=>j(e,(e=>_e(e,"/*")?e.substring(0,e.length-"/*".length):e)),Sa=(e,t)=>{const o=e.toString(),n=o.indexOf(")")+1,r=o.indexOf("("),s=o.substring(r+1,n-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:xa(s)}),e},Ca=da("alloy-premade"),ka=e=>(Object.defineProperty(e.element.dom,Ca,{value:e.uid,writable:!0}),Dr(Ca,e)),za=e=>ye(e,Ca),Oa=e=>((e,t)=>{const o=t.toString(),n=o.indexOf(")")+1,r=o.indexOf("("),s=o.substring(r+1,n-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:xa(s.slice(1))}),e})(((t,...o)=>e(t.getApis(),t,...o)),e),Ta={init:()=>Ma({readState:S("No State required")})},Ma=e=>e,_a=(e,t)=>{const o={};return me(e,((e,n)=>{me(e,((e,r)=>{const s=ye(o,r).getOr([]);o[r]=s.concat([t(n,e)])}))})),o},Da=e=>({classes:h(e.classes)?[]:e.classes,attributes:h(e.attributes)?{}:e.attributes,styles:h(e.styles)?{}:e.styles}),Aa=e=>e.cHandler,Ea=(e,t)=>({name:e,handler:t}),Ha=(e,t,o)=>{const n=i(i({},o),((e,t)=>{const o={};return U(e,(e=>{o[e.name()]=e.handlers(t)})),o})(t,e));return _a(n,Ea)},Ba=e=>{const t=(e=>v(e)?{can:D,abort:_,run:e}:e)(e);return(e,o,...n)=>{const r=[e,o].concat(n);t.abort.apply(void 0,r)?o.stop():t.can.apply(void 0,r)&&t.run.apply(void 0,r)}},Va=(e,t,o)=>{const n=t[o];return n?((e,t,o,n)=>{try{const r=ne(o,((o,r)=>{const s=o[t],a=r[t],i=n.indexOf(s),l=n.indexOf(a);if(-1===i)throw new Error("The ordering for "+e+" does not have an entry for "+s+".\nOrder specified: "+JSON.stringify(n,null,2));if(-1===l)throw new Error("The ordering for "+e+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(n,null,2));return i<l?-1:l<i?1:0}));return qo.value(r)}catch(r){return qo.error([r])}})("Event: "+o,"name",e,n).map((e=>{const t=j(e,(e=>e.handler));return Ir(t)})):((e,t)=>qo.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(j(t,(e=>e.name)),null,2)]))(o,e)},Ra=(e,t)=>{const o=fe(e,((e,o)=>(1===e.length?qo.value(e[0].handler):Va(e,t,o)).map((n=>{const r=Ba(n),s=e.length>1?$(t[o],(t=>I(e,(e=>e.name===t)))).join(" > "):e[0].name;return Dr(o,((e,t)=>({handler:e,purpose:t}))(r,s))}))));return Er(o,{})},La="alloy.base.behaviour",Na=Dn([Zn("dom","dom",{tag:"required",process:{}},Dn([tr("tag"),br("styles",{}),br("classes",[]),br("attributes",{}),dr("value"),dr("innerHtml")])),tr("components"),tr("uid"),br("events",{}),br("apis",{}),Zn("eventOrder","eventOrder",(Ia={[gs()]:["disabling",La,"toggling","typeaheadevents"],[cs()]:[La,"focusing","keying"],[ys()]:[La,"disabling","toggling","representing"],[es()]:[La,"representing","streaming","invalidating"],[zs()]:[La,"representing","item-events","tooltipping"],[$r()]:["focusing",La,"item-type-events"],[Pr()]:["focusing",La,"item-type-events"],[Xr()]:["item-type-events","tooltipping"],[us()]:["receiving","reflecting","tooltipping"]},vn(S(Ia))),Vn()),dr("domModification")]);var Ia;const Fa=e=>e.events,Pa=(e,t)=>{const o=bt(e,t);return void 0===o||""===o?[]:o.split(" ")},ja=e=>void 0!==e.dom.classList,Ua=e=>Pa(e,"class"),Wa=(e,t)=>((e,t,o)=>{const n=Pa(e,t).concat([o]);return ft(e,t,n.join(" ")),!0})(e,"class",t),$a=(e,t)=>((e,t,o)=>{const n=$(Pa(e,t),(e=>e!==o));return n.length>0?ft(e,t,n.join(" ")):xt(e,t),!1})(e,"class",t),Ga=(e,t)=>{ja(e)?e.dom.classList.add(t):Wa(e,t)},qa=(e,t)=>{if(ja(e)){e.dom.classList.remove(t)}else $a(e,t);(e=>{0===(ja(e)?e.dom.classList:Ua(e)).length&&xt(e,"class")})(e)},Ka=(e,t)=>ja(e)&&e.dom.classList.contains(t),Xa=(e,t)=>{U(t,(t=>{Ga(e,t)}))},Ja=(e,t)=>{U(t,(t=>{qa(e,t)}))},Ya=e=>ja(e)?(e=>{const t=e.dom.classList,o=new Array(t.length);for(let n=0;n<t.length;n++){const e=t.item(n);null!==e&&(o[n]=e)}return o})(e):Ua(e),Za=e=>e.dom.value,Qa=(e,t)=>{if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},ei=(e,t,o)=>{o.fold((()=>_o(e,t)),(e=>{$e(e,t)||(Oo(e,t),Eo(e))}))},ti=(e,t,o)=>{const n=j(t,o),r=et(e);return U(r.slice(n.length),Eo),n},oi=(e,t,o,n)=>{const r=tt(e,t),s=n(o,r),a=((e,t,o)=>tt(e,t).map((e=>{if(o.exists((t=>!$e(t,e)))){const t=o.map(Re).getOr("span"),n=Ve.fromTag(t);return Oo(e,n),n}return e})))(e,t,r);return ei(e,s.element,a),s},ni=(e,t)=>{const o=ce(e),n=ce(t);return{toRemove:ee(n,o),toSet:((e,t)=>{const o={},n={};return pe(e,t,he(o),he(n)),{t:o,f:n}})(e,((e,o)=>!we(t,o)||e!==t[o])).t}},ri=(e,t)=>{const o=q(t.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),{class:n,style:r}=o,s=c(o,["class","style"]);const{toSet:a,toRemove:i}=ni(e.attributes,s),l=Dt(t),{toSet:d,toRemove:m}=ni(e.styles,l),u=Ya(t),g=ee(u,e.classes),h=ee(e.classes,u);return U(i,(e=>xt(t,e))),vt(t,a),Xa(t,h),Ja(t,g),U(m,(e=>Et(t,e))),zt(t,d),e.innerHtml.fold((()=>{const o=e.domChildren;var n;ti(n=t,o,((e,t)=>{const o=tt(n,t);return ei(n,e,o),e}))}),(e=>{na(t,e)})),(()=>{const o=t;e.value.filter((e=>e!==Za(o))).each((e=>Qa(o,e)))})(),t},si=(e,t)=>{const o=t.filter((t=>Re(t)===e.tag&&!(e=>e.innerHtml.isSome()&&e.domChildren.length>0)(e)&&!we(t.dom,Ca))).bind((t=>((e,t)=>{try{const o=ri(e,t);return E.some(o)}catch(o){return E.none()}})(e,t))).getOrThunk((()=>(e=>{const t=Ve.fromTag(e.tag);vt(t,e.attributes),Xa(t,e.classes),zt(t,e.styles),e.innerHtml.each((e=>na(t,e)));const o=e.domChildren;return Do(t,o),e.value.each((e=>{Qa(t,e)})),t})(e)));return pa(o,e.uid),o},ai=(e,t)=>((e,t)=>{const o=j(t,(e=>vr(e.name(),[tr("config"),br("state",Ta)]))),n=qn("component.behaviours",Dn(o),e.behaviours).fold((t=>{throw new Error(Jn(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))}),C);return{list:t,data:ue(n,(e=>{const t=e.map((e=>({config:e.config,state:e.state.init(e.config)})));return S(t)}))}})(e,t),ii=e=>{const t=(e=>{const t=ye(e,"behaviours").getOr({});return Y(ce(t),(e=>{const o=t[e];return f(o)?[o.me]:[]}))})(e);return ai(e,t)},li=(e,t,o)=>{const n=l(i({},(r=e).dom),{uid:r.uid,domChildren:j(r.components,(e=>e.element))});var r;const s=(e=>e.domModification.fold((()=>Da({})),Da))(e),a={"alloy.base.modification":s},c=t.length>0?((e,t,o,n)=>{const r=i({},t);U(o,(t=>{r[t.name()]=t.exhibit(e,n)}));const s=_a(r,((e,t)=>({name:e,modification:t}))),a=e=>G(e,((e,t)=>i(i({},t.modification),e)),{}),l=G(s.classes,((e,t)=>t.modification.concat(e)),[]),c=a(s.attributes),d=a(s.styles);return Da({classes:l,attributes:c,styles:d})})(o,a,t,n):s;return m=c,l(i({},d=n),{attributes:i(i({},d.attributes),m.attributes),styles:i(i({},d.styles),m.styles),classes:d.classes.concat(m.classes)});var d,m},ci=(e,t,o)=>{const n={"alloy.base.behaviour":Fa(e)};return((e,t,o,n)=>{const r=Ha(e,o,n);return Ra(r,t)})(o,e.eventOrder,t,n).getOrDie()},di=(e,t)=>{const o=()=>u,n=Tr(wa),r=Kn((e=>qn("custom.definition",Na,e))(e)),s=ii(e),a=(e=>e.list)(s),i=(e=>e.data)(s),l=li(r,a,i),c=si(l,t),d=ci(r,a,i),m=Tr(r.components),u={uid:e.uid,getSystem:n.get,config:t=>{const o=i;return(v(o[t.name()])?o[t.name()]:()=>{throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:e=>v(i[e.name()]),spec:e,readState:e=>i[e]().map((e=>e.state.readState())).getOr("not enabled"),getApis:()=>r.apis,connect:e=>{n.set(e)},disconnect:()=>{n.set(ya(o))},element:c,syncComponents:()=>{const e=et(c),t=Y(e,(e=>n.get().getByDom(e).fold((()=>[]),oe)));m.set(t)},components:m.get,events:d};return u},mi=(e,t)=>{const o=ba(e),{events:n}=o,r=c(o,["events"]),s=((e,t)=>{const o=ye(e,"components").getOr([]);return t.fold((()=>j(o,fi)),(e=>j(o,((t,o)=>pi(t,tt(e,o))))))})(r,t),a=l(i({},r),{events:i(i({},la),n),components:s});return qo.value(di(a,t))},ui=e=>{const t=Ve.fromText(e);return gi({element:t})},gi=e=>{const t=Xn("external.component",_n([tr("element"),dr("uid")]),e),o=Tr(ya()),n=t.uid.getOrThunk((()=>va("external")));pa(t.element,n);const r={uid:n,getSystem:o.get,config:E.none,hasConfigured:_,connect:e=>{o.set(e)},disconnect:()=>{o.set(ya((()=>r)))},getApis:()=>({}),element:t.element,spec:e,readState:S("No state"),syncComponents:w,components:S([]),events:{}};return ka(r)},hi=va,pi=(e,t)=>za(e).getOrThunk((()=>{const o=(e=>we(e,"uid"))(e)?e:i({uid:hi("")},e);return mi(o,t).getOrDie()})),fi=e=>pi(e,E.none()),vi=ka;var bi=(e,t,o,n,r)=>e(o,n)?E.some(o):v(r)&&r(o)?E.none():t(o,n,r);const yi=(e,t,o)=>{let n=e.dom;const r=v(o)?o:_;for(;n.parentNode;){n=n.parentNode;const e=Ve.fromDom(n);if(t(e))return E.some(e);if(r(e))break}return E.none()},wi=(e,t,o)=>bi(((e,t)=>t(e)),yi,e,t,o),xi=(e,t,o)=>wi(e,t,o).isSome(),Si=(e,t,o)=>yi(e,(e=>Ue(e,t)),o),Ci=(e,t)=>((e,t)=>K(e.dom.childNodes,(e=>t(Ve.fromDom(e)))).map(Ve.fromDom))(e,(e=>Ue(e,t))),ki=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return We(o)?E.none():E.from(o.querySelector(e)).map(Ve.fromDom)})(t,e),zi=(e,t,o)=>bi(((e,t)=>Ue(e,t)),Si,e,t,o),Oi="aria-controls",Ti=()=>{const e=da(Oi);return{id:e,link:t=>{ft(t,Oi,e)},unlink:e=>{xt(e,Oi)}}},Mi=(e,t)=>(e=>wi(e,(e=>{if(!Ne(e))return!1;const t=bt(e,"id");return void 0!==t&&t.indexOf(Oi)>-1})).bind((e=>{const t=bt(e,"id"),o=it(e);return ki(o,`[${Oi}="${t}"]`)})))(t).exists((t=>_i(e,t))),_i=(e,t)=>xi(t,(t=>$e(t,e.element)),_)||Mi(e,t),Di="unknown";var Ai,Ei;(Ei=Ai||(Ai={}))[Ei.STOP=0]="STOP",Ei[Ei.NORMAL=1]="NORMAL",Ei[Ei.LOGGING=2]="LOGGING";const Hi=Tr({}),Bi=(e,t,o)=>{switch(ye(Hi.get(),e).orThunk((()=>{const t=ce(Hi.get());return le(t,(t=>e.indexOf(t)>-1?E.some(Hi.get()[t]):E.none()))})).getOr(Ai.NORMAL)){case Ai.NORMAL:return o(Li());case Ai.LOGGING:{const t=((e,t)=>{const o=[];return(new Date).getTime(),{logEventCut:(e,t,n)=>{o.push({outcome:"cut",target:t,purpose:n})},logEventStopped:(e,t,n)=>{o.push({outcome:"stopped",target:t,purpose:n})},logNoParent:(e,t,n)=>{o.push({outcome:"no-parent",target:t,purpose:n})},logEventNoHandlers:(e,t)=>{o.push({outcome:"no-handlers-left",target:t})},logEventResponse:(e,t,n)=>{o.push({outcome:"response",purpose:n,target:t})},write:()=>{(new Date).getTime(),N(["mousemove","mouseover","mouseout",ys()],e)}}})(e),n=o(t);return t.write(),n}case Ai.STOP:return!0}},Vi=["alloy/data/Fields","alloy/debugging/Debugging"],Ri=(e,t,o)=>Bi(e,0,o),Li=S({logEventCut:w,logEventStopped:w,logNoParent:w,logEventNoHandlers:w,logEventResponse:w,write:w}),Ni=S([tr("menu"),tr("selectedMenu")]),Ii=S([tr("item"),tr("selectedItem")]);S(Dn(Ii().concat(Ni())));const Fi=S(Dn(Ii())),Pi=ir("initSize",[tr("numColumns"),tr("numRows")]),ji=()=>ir("markers",[tr("backgroundMenu")].concat(Ni()).concat(Ii())),Ui=e=>ir("markers",j(e,tr)),Wi=(e,t,o)=>((()=>{const e=new Error;if(void 0!==e.stack){const t=e.stack.split("\n");return K(t,(e=>e.indexOf("alloy")>0&&!I(Vi,(t=>e.indexOf(t)>-1)))).getOr(Di)}})(),Zn(t,t,o,$n((e=>qo.value(((...t)=>e.apply(void 0,t))))))),$i=e=>Wi(0,e,fn(w)),Gi=e=>Wi(0,e,fn(E.none)),qi=e=>Wi(0,e,{tag:"required",process:{}}),Ki=e=>Wi(0,e,{tag:"required",process:{}}),Xi=(e,t)=>Qn(e,S(t)),Ji=e=>Qn(e,C),Yi=S(Pi),Zi=(e,t,o,n,r,s,a,i=!1)=>({x:e,y:t,bubble:o,direction:n,placement:r,restriction:s,label:`${a}-${r}`,alwaysFit:i}),Qi=Mr([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),el=Qi.southeast,tl=Qi.southwest,ol=Qi.northeast,nl=Qi.northwest,rl=Qi.south,sl=Qi.north,al=Qi.east,il=Qi.west,ll=(e,t,o,n)=>{const r=e+t;return r>n?o:r<o?n:r},cl=(e,t,o)=>Math.min(Math.max(e,t),o),dl=(e,t)=>te(["left","right","top","bottom"],(o=>ye(t,o).map((t=>((e,t)=>{switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}})(e,t))))),ml="layout",ul=e=>e.x,gl=(e,t)=>e.x+e.width/2-t.width/2,hl=(e,t)=>e.x+e.width-t.width,pl=(e,t)=>e.y-t.height,fl=e=>e.y+e.height,vl=(e,t)=>e.y+e.height/2-t.height/2,bl=(e,t,o)=>Zi(ul(e),fl(e),o.southeast(),el(),"southeast",dl(e,{left:1,top:3}),ml),yl=(e,t,o)=>Zi(hl(e,t),fl(e),o.southwest(),tl(),"southwest",dl(e,{right:0,top:3}),ml),wl=(e,t,o)=>Zi(ul(e),pl(e,t),o.northeast(),ol(),"northeast",dl(e,{left:1,bottom:2}),ml),xl=(e,t,o)=>Zi(hl(e,t),pl(e,t),o.northwest(),nl(),"northwest",dl(e,{right:0,bottom:2}),ml),Sl=(e,t,o)=>Zi(gl(e,t),pl(e,t),o.north(),sl(),"north",dl(e,{bottom:2}),ml),Cl=(e,t,o)=>Zi(gl(e,t),fl(e),o.south(),rl(),"south",dl(e,{top:3}),ml),kl=(e,t,o)=>Zi((e=>e.x+e.width)(e),vl(e,t),o.east(),al(),"east",dl(e,{left:0}),ml),zl=(e,t,o)=>Zi(((e,t)=>e.x-t.width)(e,t),vl(e,t),o.west(),il(),"west",dl(e,{right:1}),ml),Ol=()=>[bl,yl,wl,xl,Cl,Sl,kl,zl],Tl=()=>[yl,bl,xl,wl,Cl,Sl,kl,zl],Ml=()=>[wl,xl,bl,yl,Sl,Cl],_l=()=>[xl,wl,yl,bl,Sl,Cl],Dl=()=>[bl,yl,wl,xl,Cl,Sl],Al=()=>[yl,bl,xl,wl,Cl,Sl];var El=Object.freeze({__proto__:null,events:e=>Fs([Us(us(),((t,o)=>{const n=e.channels,r=ce(n),s=o,a=((e,t)=>t.universal?e:$(e,(e=>N(t.channels,e))))(r,s);U(a,(e=>{const o=n[e],r=o.schema,a=Xn("channel["+e+"] data\nReceiver: "+aa(t.element),r,s.data);o.onReceive(t,a)}))}))])}),Hl=[or("channels",Gn(qo.value,_n([qi("onReceive"),br("schema",Vn())])))];const Bl=(e,t,o)=>Qs(((n,r)=>{o(n,e,t)})),Vl=(e,t,o)=>((e,t,o)=>{const n=o.toString(),r=n.indexOf(")")+1,s=n.indexOf("("),a=n.substring(s+1,r-1).split(/,\s*/);return e.toFunctionAnnotation=()=>({name:t,parameters:xa(a.slice(0,1).concat(a.slice(3)))}),e})(((n,...r)=>{const s=[n].concat(r);return n.config({name:S(e)}).fold((()=>{throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+o)}),(e=>{const o=Array.prototype.slice.call(s,1);return t.apply(void 0,[n,e.config,e.state].concat(o))}))}),o,t),Rl=e=>({key:e,value:void 0}),Ll=(e,t,o,n,r,s,a)=>{const c=e=>xe(e,o)?e[o]():E.none(),d=ue(r,((e,t)=>Vl(o,e,t))),m=ue(s,((e,t)=>Sa(e,t))),u=l(i(i({},m),d),{revoke:z(Rl,o),config:t=>{const n=Xn(o+"-config",e,t);return{key:o,value:{config:n,me:u,configAsRaw:Gt((()=>Xn(o+"-config",e,t))),initialConfig:t,state:a}}},schema:S(t),exhibit:(e,t)=>ke(c(e),ye(n,"exhibit"),((e,o)=>o(t,e.config,e.state))).getOrThunk((()=>Da({}))),name:S(o),handlers:e=>c(e).map((e=>ye(n,"events").getOr((()=>({})))(e.config,e.state))).getOr({})});return u},Nl=e=>Ar(e),Il=_n([tr("fields"),tr("name"),br("active",{}),br("apis",{}),br("state",Ta),br("extra",{})]),Fl=e=>{const t=Xn("Creating behaviour: "+e.name,Il,e);return((e,t,o,n,r,s)=>{const a=_n(e),i=vr(t,[(l="config",c=e,mr(l,_n(c)))]);var l,c;return Ll(a,i,t,o,n,r,s)})(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Pl=_n([tr("branchKey"),tr("branches"),tr("name"),br("active",{}),br("apis",{}),br("state",Ta),br("extra",{})]),jl=e=>{const t=Xn("Creating behaviour: "+e.name,Pl,e);return((e,t,o,n,r,s)=>{const a=e,i=vr(t,[mr("config",e)]);return Ll(a,i,t,o,n,r,s)})(Yn(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},Ul=S(void 0),Wl=Fl({fields:Hl,name:"receiving",active:El});var $l=Object.freeze({__proto__:null,exhibit:(e,t)=>Da({classes:[],styles:t.useFixed()?{}:{position:"relative"}})});const Gl=e=>e.dom.focus(),ql=e=>{const t=it(e).dom;return e.dom===t.activeElement},Kl=(e=Lo())=>E.from(e.dom.activeElement).map(Ve.fromDom),Xl=e=>Kl(it(e)).filter((t=>e.dom.contains(t.dom))),Jl=(e,t)=>{const o=it(t),n=Kl(o).bind((e=>{const o=t=>$e(e,t);return o(t)?E.some(t):((e,t)=>{const o=e=>{for(let n=0;n<e.childNodes.length;n++){const r=Ve.fromDom(e.childNodes[n]);if(t(r))return E.some(r);const s=o(e.childNodes[n]);if(s.isSome())return s}return E.none()};return o(e.dom)})(t,o)})),r=e(t);return n.each((e=>{Kl(o).filter((t=>$e(t,e))).fold((()=>{Gl(e)}),w)})),r},Yl=(e,t,o,n,r)=>{const s=e=>e+"px";return{position:e,left:t.map(s),top:o.map(s),right:n.map(s),bottom:r.map(s)}},Zl=(e,t)=>{Ot(e,(e=>l(i({},e),{position:E.some(e.position)}))(t))},Ql=Mr([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),ec=(e,t,o,n,r,s)=>{const a=t.rect,i=a.x-o,l=a.y-n,c=r-(i+a.width),d=s-(l+a.height),m=E.some(i),u=E.some(l),g=E.some(c),h=E.some(d),p=E.none();return f=t.direction,v=()=>Yl(e,m,u,p,p),b=()=>Yl(e,p,u,g,p),y=()=>Yl(e,m,p,p,h),w=()=>Yl(e,p,p,g,h),x=()=>Yl(e,m,u,p,p),S=()=>Yl(e,m,p,p,h),C=()=>Yl(e,m,u,p,p),k=()=>Yl(e,p,u,g,p),f.fold(v,b,y,w,x,S,C,k);var f,v,b,y,w,x,S,C,k},tc=(e,t)=>e.fold((()=>{const e=t.rect;return Yl("absolute",E.some(e.x),E.some(e.y),E.none(),E.none())}),((e,o,n,r)=>ec("absolute",t,e,o,n,r)),((e,o,n,r)=>ec("fixed",t,e,o,n,r))),oc=(e,t)=>{const o=z(Fo,t),n=e.fold(o,o,(()=>{const e=Ho();return Fo(t).translate(-e.left,-e.top)})),r=$t(t),s=Lt(t);return Po(n.left,n.top,r,s)},nc=(e,t)=>t.fold((()=>e.fold(Wo,Wo,Po)),(t=>e.fold(t,t,(()=>{const o=t(),n=rc(e,o.x,o.y);return Po(n.left,n.top,o.width,o.height)})))),rc=(e,t,o)=>{const n=It(t,o);return e.fold(S(n),S(n),(()=>{const e=Ho();return n.translate(-e.left,-e.top)}))};Ql.none;const sc=Ql.relative,ac=Ql.fixed,ic="data-alloy-placement",lc=e=>yt(e,ic),cc=Mr([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),dc=(e,t,o,n)=>{const r=e.bubble,s=r.offset,a=((e,t,o)=>{const n=(n,r)=>t[n].map((t=>{const s="top"===n||"bottom"===n,a=s?o.top:o.left,i=("left"===n||"top"===n?Math.max:Math.min)(t,r)+a;return s?cl(i,e.y,e.bottom):cl(i,e.x,e.right)})).getOr(r),r=n("left",e.x),s=n("top",e.y),a=n("right",e.right),i=n("bottom",e.bottom);return Po(r,s,a-r,i-s)})(n,e.restriction,s),i=e.x+s.left,l=e.y+s.top,c=Po(i,l,t,o),{originInBounds:d,sizeInBounds:m,visibleW:u,visibleH:g}=((e,t)=>{const{x:o,y:n,right:r,bottom:s}=t,{x:a,y:i,right:l,bottom:c,width:d,height:m}=e;return{originInBounds:a>=o&&a<=r&&i>=n&&i<=s,sizeInBounds:l<=r&&l>=o&&c<=s&&c>=n,visibleW:Math.min(d,a>=o?r-a:l-o),visibleH:Math.min(m,i>=n?s-i:c-n)}})(c,a),h=d&&m,p=h?c:((e,t)=>{const{x:o,y:n,right:r,bottom:s}=t,{x:a,y:i,width:l,height:c}=e,d=Math.max(o,r-l),m=Math.max(n,s-c),u=cl(a,o,d),g=cl(i,n,m),h=Math.min(u+l,r)-u,p=Math.min(g+c,s)-g;return Po(u,g,h,p)})(c,a),f=p.width>0&&p.height>0,{maxWidth:v,maxHeight:b}=((e,t,o)=>{const n=S(t.bottom-o.y),r=S(o.bottom-t.y),s=(a=r,i=r,l=n,e.fold(a,a,l,l,a,l,i,i));var a,i,l;const c=S(t.right-o.x),d=S(o.right-t.x),m=((e,t,o,n)=>e.fold(t,n,t,n,o,o,t,n))(e,d,d,c);return{maxWidth:m,maxHeight:s}})(e.direction,p,n),y={rect:p,maxHeight:b,maxWidth:v,direction:e.direction,placement:e.placement,classes:{on:r.classesOn,off:r.classesOff},layout:e.label,testY:l};return h||e.alwaysFit?cc.fit(y):cc.nofit(y,u,g,f)},mc=e=>{const t=Tr(E.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(E.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(E.some(e))}}},uc=()=>mc((e=>e.unbind())),gc=()=>{const e=mc(w);return l(i({},e),{on:t=>e.get().each(t)})},hc=D,pc=(e,t,o)=>((e,t,o,n)=>ko(e,t,o,n,!1))(e,t,hc,o),fc=(e,t,o)=>((e,t,o,n)=>ko(e,t,o,n,!0))(e,t,hc,o),vc=Co,bc=["top","bottom","right","left"],yc="data-alloy-transition-timer",wc=(e,t)=>((e,t)=>Z(t,(t=>Ka(e,t))))(e,t.classes),xc=(e,t)=>{const o=e=>parseFloat(e).toFixed(3);return ve(t,((t,n)=>!((e,t,o=k)=>ke(e,t,o).getOr(e.isNone()&&t.isNone()))(e[n].map(o),t.map(o)))).isSome()},Sc=(e,t)=>{const o=uc(),n=uc();let r;const a=t=>{var o;const n=null!==(o=t.raw.pseudoElement)&&void 0!==o?o:"";return $e(t.target,e)&&!Ee(n)&&N(bc,t.raw.propertyName)},i=s=>{if(p(s)||a(s)){o.clear(),n.clear();const a=null==s?void 0:s.raw.type;(p(a)||a===rs())&&(clearTimeout(r),xt(e,yc),Ja(e,t.classes))}},l=pc(e,ss(),(t=>{a(t)&&(l.unbind(),o.set(pc(e,rs(),i)),n.set(pc(e,ns(),i)))})),c=(e=>{const t=t=>{const o=Tt(e,t).split(/\s*,\s*/);return $(o,Ee)},o=e=>{if(s(e)&&/^[\d.]+/.test(e)){const t=parseFloat(e);return _e(e,"ms")?t:1e3*t}return 0},n=t("transition-delay"),r=t("transition-duration");return q(r,((e,t,r)=>{const s=o(n[r])+o(t);return Math.max(e,s)}),0)})(e);requestAnimationFrame((()=>{r=setTimeout(i,c+17),ft(e,yc,r)}))},Cc=(e,t,o,n,r,s)=>{const a=((e,t,o)=>o.exists((o=>{const n=e.mode;return"all"===n||o[n]!==t[n]})))(n,r,s);if(a||wc(e,n)){kt(e,"position",o.position);const s=oc(t,e),c=tc(t,l(i({},r),{rect:s})),d=te(bc,(e=>c[e]));xc(o,d)&&(Ot(e,d),a&&((e,t)=>{Xa(e,t.classes),yt(e,yc).each((t=>{clearTimeout(parseInt(t,10)),xt(e,yc)})),Sc(e,t)})(e,n),Ht(e))}else Ja(e,n.classes)},kc=(e,t,o,n)=>{Et(t,"max-height"),Et(t,"max-width");const r={width:$t(s=t),height:Lt(s)};var s;return((e,t,o,n,r,s)=>{const a=n.width,i=n.height,l=(t,l,c,d,m)=>{const u=t(o,n,r,e,s),g=dc(u,a,i,s);return g.fold(S(g),((e,t,o,n)=>(m===n?o>d||t>c:!m&&n)?g:cc.nofit(l,c,d,m)))};return q(t,((e,t)=>{const o=z(l,t);return e.fold(S(e),o)}),cc.nofit({rect:o,maxHeight:n.height,maxWidth:n.width,direction:el(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:o.y},-1,-1,!1)).fold(C,C)})(t,n.preference,e,r,o,n.bounds)},zc=(e,t)=>{((e,t)=>{ft(e,ic,t)})(e,t.placement)},Oc=(e,t)=>{((e,t)=>{const o=Vt.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);kt(e,"max-height",o+"px")})(e,Math.floor(t))},Tc=S(((e,t)=>{Oc(e,t),zt(e,{"overflow-x":"hidden","overflow-y":"auto"})})),Mc=S(((e,t)=>{Oc(e,t)})),_c=(e,t,o)=>void 0===e[t]?o:e[t],Dc=(e,t,o,n)=>{const r=kc(e,t,o,n);return((e,t,o)=>{const n=tc(o.origin,t);o.transition.each((r=>{Cc(e,o.origin,n,r,t,o.lastPlacement)})),Zl(e,n)})(t,r,n),zc(t,r),((e,t)=>{const o=t.classes;Ja(e,o.off),Xa(e,o.on)})(t,r),((e,t,o)=>{(0,o.maxHeightFunction)(e,t.maxHeight)})(t,r,n),((e,t,o)=>{(0,o.maxWidthFunction)(e,t.maxWidth)})(t,r,n),{layout:r.layout,placement:r.placement}},Ac=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],Ec=(e,t,o,n=1)=>{const r=e*n,s=t*n,a=e=>ye(o,e).getOr([]),i=(e,t,o)=>{const n=ee(Ac,o);return{offset:It(e,t),classesOn:Y(o,a),classesOff:Y(n,a)}};return{southeast:()=>i(-e,t,["top","alignLeft"]),southwest:()=>i(e,t,["top","alignRight"]),south:()=>i(-e/2,t,["top","alignCentre"]),northeast:()=>i(-e,-t,["bottom","alignLeft"]),northwest:()=>i(e,-t,["bottom","alignRight"]),north:()=>i(-e/2,-t,["bottom","alignCentre"]),east:()=>i(e,-t/2,["valignCentre","left"]),west:()=>i(-e,-t/2,["valignCentre","right"]),insetNortheast:()=>i(r,s,["top","alignLeft","inset"]),insetNorthwest:()=>i(-r,s,["top","alignRight","inset"]),insetNorth:()=>i(-r/2,s,["top","alignCentre","inset"]),insetSoutheast:()=>i(r,-s,["bottom","alignLeft","inset"]),insetSouthwest:()=>i(-r,-s,["bottom","alignRight","inset"]),insetSouth:()=>i(-r/2,-s,["bottom","alignCentre","inset"]),insetEast:()=>i(-r,-s/2,["valignCentre","right","inset"]),insetWest:()=>i(r,-s/2,["valignCentre","left","inset"])}},Hc=()=>Ec(0,0,{}),Bc=C,Vc=(e,t)=>o=>"rtl"===Rc(o)?t:e,Rc=e=>"rtl"===Tt(e,"direction")?"rtl":"ltr";var Lc,Nc;(Nc=Lc||(Lc={})).TopToBottom="toptobottom",Nc.BottomToTop="bottomtotop";const Ic="data-alloy-vertical-dir",Fc=e=>xi(e,(e=>Ne(e)&&bt(e,"data-alloy-vertical-dir")===Lc.BottomToTop)),Pc=()=>vr("layouts",[tr("onLtr"),tr("onRtl"),dr("onBottomLtr"),dr("onBottomRtl")]),jc=(e,t,o,n,r,s,a)=>{const i=a.map(Fc).getOr(!1),l=t.layouts.map((t=>t.onLtr(e))),c=t.layouts.map((t=>t.onRtl(e))),d=i?t.layouts.bind((t=>t.onBottomLtr.map((t=>t(e))))).or(l).getOr(r):l.getOr(o),m=i?t.layouts.bind((t=>t.onBottomRtl.map((t=>t(e))))).or(c).getOr(s):c.getOr(n);return Vc(d,m)(e)};var Uc=[tr("hotspot"),dr("bubble"),br("overrides",{}),Pc(),Xi("placement",((e,t,o)=>{const n=t.hotspot,r=oc(o,n.element),s=jc(e.element,t,Dl(),Al(),Ml(),_l(),E.some(t.hotspot.element));return E.some(Bc({anchorBox:r,bubble:t.bubble.getOr(Hc()),overrides:t.overrides,layouts:s,placer:E.none()}))}))];var Wc=[tr("x"),tr("y"),br("height",0),br("width",0),br("bubble",Hc()),br("overrides",{}),Pc(),Xi("placement",((e,t,o)=>{const n=rc(o,t.x,t.y),r=Po(n.left,n.top,t.width,t.height),s=jc(e.element,t,Ol(),Tl(),Ol(),Tl(),E.none());return E.some(Bc({anchorBox:r,bubble:t.bubble,overrides:t.overrides,layouts:s,placer:E.none()}))}))];const $c=Mr([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Gc=e=>e.fold(C,((e,t,o)=>e.translate(-t,-o))),qc=e=>e.fold(C,C),Kc=e=>q(e,((e,t)=>e.translate(t.left,t.top)),It(0,0)),Xc=e=>{const t=j(e,qc);return Kc(t)},Jc=$c.screen,Yc=$c.absolute,Zc=(e,t,o)=>{const n=qe(e.element),r=Ho(n),s=((e,t,o)=>{const n=Je(o.root).dom;return E.from(n.frameElement).map(Ve.fromDom).filter((t=>{const o=qe(t),n=qe(e.element);return $e(o,n)})).map(Pt)})(e,0,o).getOr(r);return Yc(s,r.left,r.top)},Qc=(e,t,o,n)=>{const r=Jc(It(e,t));return E.some(((e,t,o)=>({point:e,width:t,height:o}))(r,o,n))},ed=(e,t,o,n,r)=>e.map((e=>{const s=[t,e.point],a=(i=()=>Xc(s),l=()=>Xc(s),c=()=>(e=>{const t=j(e,Gc);return Kc(t)})(s),n.fold(i,l,c));var i,l,c;const d=(m=a.left,u=a.top,g=e.width,h=e.height,{x:m,y:u,width:g,height:h});var m,u,g,h;const p=o.showAbove?Ml():Dl(),f=o.showAbove?_l():Al(),v=jc(r,o,p,f,p,f,E.none());return Bc({anchorBox:d,bubble:o.bubble.getOr(Hc()),overrides:o.overrides,layouts:v,placer:E.none()})}));var td=[tr("node"),tr("root"),dr("bubble"),Pc(),br("overrides",{}),br("showAbove",!1),Xi("placement",((e,t,o)=>{const n=Zc(e,0,t);return t.node.filter(ut).bind((r=>{const s=r.dom.getBoundingClientRect(),a=Qc(s.left,s.top,s.width,s.height),i=t.node.getOr(e.element);return ed(a,n,t,o,i)}))}))];const od=(e,t,o,n)=>({start:e,soffset:t,finish:o,foffset:n}),nd=Mr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),rd=(nd.before,nd.on,nd.after,e=>e.fold(C,C,C)),sd=Mr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),ad={domRange:sd.domRange,relative:sd.relative,exact:sd.exact,exactFromRange:e=>sd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>Ve.fromDom(e.startContainer),relative:(e,t)=>rd(e),exact:(e,t,o,n)=>e}))(e);return Je(t)},range:od},id=(e,t,o)=>{const n=e.document.createRange();var r;return r=n,t.fold((e=>{r.setStartBefore(e.dom)}),((e,t)=>{r.setStart(e.dom,t)}),(e=>{r.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,o)=>{e.setEnd(t.dom,o)}),(t=>{e.setEndAfter(t.dom)}))})(n,o),n},ld=(e,t,o,n,r)=>{const s=e.document.createRange();return s.setStart(t.dom,o),s.setEnd(n.dom,r),s},cd=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),dd=Mr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),md=(e,t,o)=>t(Ve.fromDom(o.startContainer),o.startOffset,Ve.fromDom(o.endContainer),o.endOffset),ud=(e,t)=>{const o=((e,t)=>t.match({domRange:e=>({ltr:S(e),rtl:E.none}),relative:(t,o)=>({ltr:Gt((()=>id(e,t,o))),rtl:Gt((()=>E.some(id(e,o,t))))}),exact:(t,o,n,r)=>({ltr:Gt((()=>ld(e,t,o,n,r))),rtl:Gt((()=>E.some(ld(e,n,r,t,o))))})}))(e,t);return((e,t)=>{const o=t.ltr();if(o.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>dd.rtl(Ve.fromDom(e.endContainer),e.endOffset,Ve.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>md(0,dd.ltr,o)));return md(0,dd.ltr,o)})(0,o)},gd=(e,t)=>ud(e,t).match({ltr:(t,o,n,r)=>{const s=e.document.createRange();return s.setStart(t.dom,o),s.setEnd(n.dom,r),s},rtl:(t,o,n,r)=>{const s=e.document.createRange();return s.setStart(n.dom,r),s.setEnd(t.dom,o),s}});dd.ltr,dd.rtl;const hd=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return We(o)?[]:j(o.querySelectorAll(e),Ve.fromDom)})(t,e),pd=(e,t,o,n)=>{const r=((e,t,o,n)=>{const r=qe(e).dom.createRange();return r.setStart(e.dom,t),r.setEnd(o.dom,n),r})(e,t,o,n),s=$e(e,o)&&t===n;return r.collapsed&&!s},fd=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),o=e.getRangeAt(e.rangeCount-1);return E.some(od(Ve.fromDom(t.startContainer),t.startOffset,Ve.fromDom(o.endContainer),o.endOffset))}return E.none()},vd=e=>{if(null===e.anchorNode||null===e.focusNode)return fd(e);{const t=Ve.fromDom(e.anchorNode),o=Ve.fromDom(e.focusNode);return pd(t,e.anchorOffset,o,e.focusOffset)?E.some(od(t,e.anchorOffset,o,e.focusOffset)):fd(e)}},bd=e=>(e=>E.from(e.getSelection()))(e).filter((e=>e.rangeCount>0)).bind(vd),yd=(e,t)=>(e=>{const t=e.getClientRects(),o=t.length>0?t[0]:e.getBoundingClientRect();return o.width>0||o.height>0?E.some(o).map(cd):E.none()})(gd(e,t)),wd=(e,t)=>(e=>{const t=e.getBoundingClientRect();return t.width>0||t.height>0?E.some(t).map(cd):E.none()})(gd(e,t)),xd=((e,t)=>{const o=t=>e(t)?E.from(t.dom.nodeValue):E.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},getOption:o,set:(o,n)=>{if(!e(o))throw new Error("Can only set raw "+t+" value of a "+t+" node");o.dom.nodeValue=n}}})(Ie,"text"),Sd=(e,t)=>({element:e,offset:t}),Cd=(e,t)=>{const o=et(e);if(0===o.length)return Sd(e,t);if(t<o.length)return Sd(o[t],0);{const e=o[o.length-1],t=Ie(e)?(e=>xd.get(e))(e).length:et(e).length;return Sd(e,t)}},kd=(e,t)=>Ie(e)?Sd(e,t):Cd(e,t),zd=(e,t)=>t.getSelection.getOrThunk((()=>()=>bd(e)))().map((e=>{const t=kd(e.start,e.soffset),o=kd(e.finish,e.foffset);return ad.range(t.element,t.offset,o.element,o.offset)}));var Od=[dr("getSelection"),tr("root"),dr("bubble"),Pc(),br("overrides",{}),br("showAbove",!1),Xi("placement",((e,t,o)=>{const n=Je(t.root).dom,r=Zc(e,0,t),s=zd(n,t).bind((e=>wd(n,ad.exactFromRange(e)).orThunk((()=>{const t=Ve.fromText("\ufeff");Oo(e.start,t);const o=yd(n,ad.exact(t,0,t,1));return Eo(t),o})).bind((e=>Qc(e.left,e.top,e.width,e.height))))),a=zd(n,t).bind((e=>Ne(e.start)?E.some(e.start):Ze(e.start))).getOr(e.element);return ed(s,r,t,o,a)}))];const Td="link-layout",Md=e=>e.x+e.width,_d=(e,t)=>e.x-t.width,Dd=(e,t)=>e.y-t.height+e.height,Ad=e=>e.y,Ed=(e,t,o)=>Zi(Md(e),Ad(e),o.southeast(),el(),"southeast",dl(e,{left:0,top:2}),Td),Hd=(e,t,o)=>Zi(_d(e,t),Ad(e),o.southwest(),tl(),"southwest",dl(e,{right:1,top:2}),Td),Bd=(e,t,o)=>Zi(Md(e),Dd(e,t),o.northeast(),ol(),"northeast",dl(e,{left:0,bottom:3}),Td),Vd=(e,t,o)=>Zi(_d(e,t),Dd(e,t),o.northwest(),nl(),"northwest",dl(e,{right:1,bottom:3}),Td),Rd=()=>[Ed,Hd,Bd,Vd],Ld=()=>[Hd,Ed,Vd,Bd];var Nd=[tr("item"),Pc(),br("overrides",{}),Xi("placement",((e,t,o)=>{const n=oc(o,t.item.element),r=jc(e.element,t,Rd(),Ld(),Rd(),Ld(),E.none());return E.some(Bc({anchorBox:n,bubble:Hc(),overrides:t.overrides,layouts:r,placer:E.none()}))}))],Id=Yn("type",{selection:Od,node:td,hotspot:Uc,submenu:Nd,makeshift:Wc});const Fd=[cr("classes",Nn),Sr("mode","all",["all","layout","placement"])],Pd=[br("useFixed",_),dr("getBounds")],jd=[or("anchor",Id),vr("transition",Fd)],Ud=(e,t,o,n,r,s,a)=>{const i=((e,t)=>((e,t)=>({anchorBox:e,origin:t}))(e,t))(o.anchorBox,t);return((e,t,o,n,r,s,a,i)=>{const l=_c(a,"maxHeightFunction",Tc()),c=_c(a,"maxWidthFunction",w),d=e.anchorBox,m=e.origin,u={bounds:nc(m,s),origin:m,preference:n,maxHeightFunction:l,maxWidthFunction:c,lastPlacement:r,transition:i};return Dc(d,t,o,u)})(i,r.element,o.bubble,o.layouts,s,n,o.overrides,a)},Wd=(e,t,o,n,r,s)=>{const a=s.map(jo);return $d(e,t,o,n,r,a)},$d=(e,t,o,n,r,s)=>{const a=Xn("placement.info",Dn(jd),r),i=a.anchor,l=n.element,c=o.get(n.uid);Jl((()=>{kt(l,"position","fixed");const r=_t(l,"visibility");kt(l,"visibility","hidden");const d=t.useFixed()?(()=>{const e=document.documentElement;return ac(0,0,e.clientWidth,e.clientHeight)})():(e=>{const t=Pt(e.element),o=e.element.dom.getBoundingClientRect();return sc(t.left,t.top,o.width,o.height)})(e),m=i.placement,u=s.map(S).or(t.getBounds);m(e,i,d).each((t=>{const r=t.placer.getOr(Ud)(e,d,t,u,n,c,a.transition);o.set(n.uid,r)})),r.fold((()=>{Et(l,"visibility")}),(e=>{kt(l,"visibility",e)})),_t(l,"left").isNone()&&_t(l,"top").isNone()&&_t(l,"right").isNone()&&_t(l,"bottom").isNone()&&Se(_t(l,"position"),"fixed")&&Et(l,"position")}),l)};var Gd=Object.freeze({__proto__:null,position:(e,t,o,n,r)=>{Wd(e,t,o,n,r,E.none())},positionWithin:Wd,positionWithinBounds:$d,getMode:(e,t,o)=>t.useFixed()?"fixed":"absolute",reset:(e,t,o,n)=>{const r=n.element;U(["position","left","right","top","bottom"],(e=>Et(r,e))),(e=>{xt(e,ic)})(r),o.clear(n.uid)}});var qd=Object.freeze({__proto__:null,init:()=>{let e={};return Ma({readState:()=>e,clear:t=>{f(t)?delete e[t]:e={}},set:(t,o)=>{e[t]=o},get:t=>ye(e,t)})}});const Kd=Fl({fields:Pd,name:"positioning",active:$l,apis:Gd,state:qd}),Xd=e=>e.getSystem().isConnected(),Jd=e=>{Bs(e,zs());const t=e.components();U(t,Jd)},Yd=e=>{const t=e.components();U(t,Yd),Bs(e,ks())},Zd=(e,t)=>{e.getSystem().addToWorld(t),ut(e.element)&&Yd(t)},Qd=e=>{Jd(e),e.getSystem().removeFromWorld(e)},em=(e,t)=>{_o(e.element,t.element)},tm=(e,t,o)=>{const n=e.components();(e=>{U(e.components(),(e=>Eo(e.element))),Ao(e.element),e.syncComponents()})(e);const r=o(t),s=ee(n,r);U(s,(t=>{Jd(t),e.getSystem().removeFromWorld(t)})),U(r,(t=>{Xd(t)?em(e,t):(e.getSystem().addToWorld(t),em(e,t),ut(e.element)&&Yd(t))})),e.syncComponents()},om=(e,t)=>{nm(e,t,_o)},nm=(e,t,o)=>{e.getSystem().addToWorld(t),o(e.element,t.element),ut(e.element)&&Yd(t),e.syncComponents()},rm=e=>{Jd(e),Eo(e.element),e.getSystem().removeFromWorld(e)},sm=e=>{const t=Ye(e.element).bind((t=>e.getSystem().getByDom(t).toOptional()));rm(e),t.each((e=>{e.syncComponents()}))},am=e=>{const t=e.components();U(t,rm),Ao(e.element),e.syncComponents()},im=(e,t)=>{lm(e,t,_o)},lm=(e,t,o)=>{o(e,t.element);const n=et(t.element);U(n,(e=>{t.getByDom(e).each(Yd)}))},cm=e=>{const t=et(e.element);U(t,(t=>{e.getByDom(t).each(Jd)})),Eo(e.element)},dm=(e,t,o,n)=>{o.get().each((t=>{am(e)}));const r=t.getAttachPoint(e);om(r,e);const s=e.getSystem().build(n);return om(e,s),o.set(s),s},mm=(e,t,o,n)=>{const r=dm(e,t,o,n);return t.onOpen(e,r),r},um=(e,t,o)=>{o.get().each((n=>{am(e),sm(e),t.onClose(e,n),o.clear()}))},gm=(e,t,o)=>o.isOpen(),hm=(e,t,o)=>{const n=t.getAttachPoint(e);kt(e.element,"position",Kd.getMode(n)),((e,t,o,n)=>{_t(e.element,t).fold((()=>{xt(e.element,o)}),(t=>{ft(e.element,o,t)})),kt(e.element,t,n)})(e,"visibility",t.cloakVisibilityAttr,"hidden")},pm=(e,t,o)=>{var n;n=e.element,I(["top","left","right","bottom"],(e=>_t(n,e).isSome()))||Et(e.element,"position"),((e,t,o)=>{yt(e.element,o).fold((()=>Et(e.element,t)),(o=>kt(e.element,t,o)))})(e,"visibility",t.cloakVisibilityAttr)};var fm=Object.freeze({__proto__:null,cloak:hm,decloak:pm,open:mm,openWhileCloaked:(e,t,o,n,r)=>{hm(e,t),mm(e,t,o,n),r(),pm(e,t)},close:um,isOpen:gm,isPartOf:(e,t,o,n)=>gm(0,0,o)&&o.get().exists((o=>t.isPartOf(e,o,n))),getState:(e,t,o)=>o.get(),setContent:(e,t,o,n)=>o.get().map((()=>dm(e,t,o,n)))});var vm=Object.freeze({__proto__:null,events:(e,t)=>Fs([Us(vs(),((o,n)=>{um(o,e,t)}))])}),bm=[$i("onOpen"),$i("onClose"),tr("isPartOf"),tr("getAttachPoint"),br("cloakVisibilityAttr","data-precloak-visibility")];const ym=Fl({fields:bm,name:"sandboxing",active:vm,apis:fm,state:Object.freeze({__proto__:null,init:()=>{const e=gc(),t=S("not-implemented");return Ma({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}})}),wm=S("dismiss.popups"),xm=S("reposition.popups"),Sm=S("mouse.released"),Cm=_n([br("isExtraPart",_),vr("fireEventInstead",[br("event",Os())])]),km=e=>{const t=Xn("Dismissal",Cm,e);return{[wm()]:{schema:_n([tr("target")]),onReceive:(e,o)=>{if(ym.isOpen(e)){ym.isPartOf(e,o.target)||t.isExtraPart(e,o.target)||t.fireEventInstead.fold((()=>ym.close(e)),(t=>Bs(e,t.event)))}}}}},zm=_n([vr("fireEventInstead",[br("event",Ts())]),ar("doReposition")]),Om=e=>{const t=Xn("Reposition",zm,e);return{[xm()]:{onReceive:e=>{ym.isOpen(e)&&t.fireEventInstead.fold((()=>t.doReposition(e)),(t=>Bs(e,t.event)))}}}},Tm=(e,t,o)=>{t.store.manager.onLoad(e,t,o)},Mm=(e,t,o)=>{t.store.manager.onUnload(e,t,o)};var _m=Object.freeze({__proto__:null,onLoad:Tm,onUnload:Mm,setValue:(e,t,o,n)=>{t.store.manager.setValue(e,t,o,n)},getValue:(e,t,o)=>t.store.manager.getValue(e,t,o),getState:(e,t,o)=>o});var Dm=Object.freeze({__proto__:null,events:(e,t)=>{const o=e.resetOnDom?[Ys(((o,n)=>{Tm(o,e,t)})),Zs(((o,n)=>{Mm(o,e,t)}))]:[Bl(e,t,Tm)];return Fs(o)}});const Am=()=>{const e=Tr(null);return Ma({set:e.set,get:e.get,isNotSet:()=>null===e.get(),clear:()=>{e.set(null)},readState:()=>({mode:"memory",value:e.get()})})},Em=()=>{const e=Tr({}),t=Tr({});return Ma({readState:()=>({mode:"dataset",dataByValue:e.get(),dataByText:t.get()}),lookup:o=>ye(e.get(),o).orThunk((()=>ye(t.get(),o))),update:o=>{const n=e.get(),r=t.get(),s={},a={};U(o,(e=>{s[e.value]=e,ye(e,"meta").each((t=>{ye(t,"text").each((t=>{a[t]=e}))}))})),e.set(i(i({},n),s)),t.set(i(i({},r),a))},clear:()=>{e.set({}),t.set({})}})};var Hm=Object.freeze({__proto__:null,memory:Am,dataset:Em,manual:()=>Ma({readState:w}),init:e=>e.store.manager.state(e)});const Bm=(e,t,o,n)=>{const r=t.store;o.update([n]),r.setValue(e,n),t.onSetValue(e,n)};var Vm=[dr("initialValue"),tr("getFallbackEntry"),tr("getDataKey"),tr("setValue"),Xi("manager",{setValue:Bm,getValue:(e,t,o)=>{const n=t.store,r=n.getDataKey(e);return o.lookup(r).getOrThunk((()=>n.getFallbackEntry(r)))},onLoad:(e,t,o)=>{t.store.initialValue.each((n=>{Bm(e,t,o,n)}))},onUnload:(e,t,o)=>{o.clear()},state:Em})];var Rm=[tr("getValue"),br("setValue",w),dr("initialValue"),Xi("manager",{setValue:(e,t,o,n)=>{t.store.setValue(e,n),t.onSetValue(e,n)},getValue:(e,t,o)=>t.store.getValue(e),onLoad:(e,t,o)=>{t.store.initialValue.each((o=>{t.store.setValue(e,o)}))},onUnload:w,state:Ta.init})];var Lm=[dr("initialValue"),Xi("manager",{setValue:(e,t,o,n)=>{o.set(n),t.onSetValue(e,n)},getValue:(e,t,o)=>o.get(),onLoad:(e,t,o)=>{t.store.initialValue.each((e=>{o.isNotSet()&&o.set(e)}))},onUnload:(e,t,o)=>{o.clear()},state:Am})],Nm=[yr("store",{mode:"memory"},Yn("mode",{memory:Lm,manual:Rm,dataset:Vm})),$i("onSetValue"),br("resetOnDom",!1)];const Im=Fl({fields:Nm,name:"representing",active:Dm,apis:_m,extra:{setValueFrom:(e,t)=>{const o=Im.getValue(t);Im.setValue(e,o)}},state:Hm}),Fm=(e,t)=>Or(e,{},j(t,(t=>{return o=t.name(),n="Cannot configure "+t.name()+" for "+e,Zn(o,o,{tag:"option",process:{}},Sn((e=>nn("The field: "+o+" is forbidden. "+n))));var o,n})).concat([Qn("dump",C)])),Pm=e=>e.dump,jm=(e,t)=>i(i({},Nl(t)),e.dump),Um=Fm,Wm=jm,$m="placeholder",Gm=Mr([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),qm=e=>we(e,"uiType"),Km=(e,t,o,n)=>qm(o)&&o.uiType===$m?((e,t,o,n)=>e.exists((e=>e!==o.owner))?Gm.single(!0,S(o)):ye(n,o.name).fold((()=>{throw new Error("Unknown placeholder component: "+o.name+"\nKnown: ["+ce(n)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(o,null,2))}),(e=>e.replace())))(e,0,o,n):Gm.single(!1,S(o)),Xm=(e,t,o,n)=>Km(e,0,o,n).fold(((r,s)=>{const a=qm(o)?s(t,o.config,o.validated):s(t),c=ye(a,"components").getOr([]),d=Y(c,(o=>Xm(e,t,o,n)));return[l(i({},a),{components:d})]}),((e,n)=>{if(qm(o)){const e=n(t,o.config,o.validated);return o.validated.preprocess.getOr(C)(e)}return n(t)})),Jm=(e,t,o,n)=>{const r=ue(n,((e,t)=>((e,t)=>{let o=!1;return{name:S(e),required:()=>t.fold(((e,t)=>e),((e,t)=>e)),used:()=>o,replace:()=>{if(o)throw new Error("Trying to use the same placeholder more than once: "+e);return o=!0,t}}})(t,e))),s=((e,t,o,n)=>Y(o,(o=>Xm(e,t,o,n))))(e,t,o,r);return me(r,(o=>{if(!1===o.used()&&o.required())throw new Error("Placeholder: "+o.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),s},Ym=Gm.single,Zm=Gm.multiple,Qm=S($m),eu=Mr([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),tu=br("factory",{sketch:C}),ou=br("schema",[]),nu=tr("name"),ru=Zn("pname","pname",pn((e=>"<alloy."+da(e.name)+">")),Vn()),su=Qn("schema",(()=>[dr("preprocess")])),au=br("defaults",S({})),iu=br("overrides",S({})),lu=Dn([tu,ou,nu,ru,au,iu]),cu=Dn([tu,ou,nu,au,iu]),du=Dn([tu,ou,nu,ru,au,iu]),mu=Dn([tu,su,nu,tr("unit"),ru,au,iu]),uu=e=>e.fold(E.some,E.none,E.some,E.some),gu=e=>{const t=e=>e.name;return e.fold(t,t,t,t)},hu=(e,t)=>o=>{const n=Xn("Converting part type",t,o);return e(n)},pu=hu(eu.required,lu),fu=hu(eu.external,cu),vu=hu(eu.optional,du),bu=hu(eu.group,mu),yu=S("entirety");var wu=Object.freeze({__proto__:null,required:pu,external:fu,optional:vu,group:bu,asNamedPart:uu,name:gu,asCommon:e=>e.fold(C,C,C,C),original:yu});const xu=(e,t,o,n)=>gn(t.defaults(e,o,n),o,{uid:e.partUids[t.name]},t.overrides(e,o,n)),Su=(e,t)=>{const o={};return U(t,(t=>{uu(t).each((t=>{const n=Cu(e,t.pname);o[t.name]=o=>{const r=Xn("Part: "+t.name+" in "+e,Dn(t.schema),o);return l(i({},n),{config:o,validated:r})}}))})),o},Cu=(e,t)=>({uiType:Qm(),owner:e,name:t}),ku=(e,t,o)=>({uiType:Qm(),owner:e,name:t,config:o,validated:{}}),zu=e=>Y(e,(e=>e.fold(E.none,E.some,E.none,E.none).map((e=>ir(e.name,e.schema.concat([Ji(yu())])))).toArray())),Ou=e=>j(e,gu),Tu=(e,t,o)=>((e,t,o)=>{const n={},r={};return U(o,(e=>{e.fold((e=>{n[e.pname]=Ym(!0,((t,o,n)=>e.factory.sketch(xu(t,e,o,n))))}),(e=>{const o=t.parts[e.name];r[e.name]=S(e.factory.sketch(xu(t,e,o[yu()]),o))}),(e=>{n[e.pname]=Ym(!1,((t,o,n)=>e.factory.sketch(xu(t,e,o,n))))}),(e=>{n[e.pname]=Zm(!0,((t,o,n)=>{const r=t[e.name];return j(r,(o=>e.factory.sketch(gn(e.defaults(t,o,n),o,e.overrides(t,o)))))}))}))})),{internals:S(n),externals:S(r)}})(0,t,o),Mu=(e,t,o)=>Jm(E.some(e),t,t.components,o),_u=(e,t,o)=>{const n=t.partUids[o];return e.getSystem().getByUid(n).toOptional()},Du=(e,t,o)=>_u(e,t,o).getOrDie("Could not find part: "+o),Au=(e,t,o)=>{const n={},r=t.partUids,s=e.getSystem();return U(o,(e=>{n[e]=S(s.getByUid(r[e]))})),n},Eu=(e,t)=>{const o=e.getSystem();return ue(t.partUids,((e,t)=>S(o.getByUid(e))))},Hu=e=>ce(e.partUids),Bu=(e,t,o)=>{const n={},r=t.partUids,s=e.getSystem();return U(o,(e=>{n[e]=S(s.getByUid(r[e]).getOrDie())})),n},Vu=(e,t)=>{const o=Ou(t);return Ar(j(o,(t=>({key:t,value:e+"-"+t}))))},Ru=e=>Zn("partUids","partUids",vn((t=>Vu(t.uid,e))),Vn());var Lu=Object.freeze({__proto__:null,generate:Su,generateOne:ku,schemas:zu,names:Ou,substitutes:Tu,components:Mu,defaultUids:Vu,defaultUidsSchema:Ru,getAllParts:Eu,getAllPartNames:Hu,getPart:_u,getPartOrDie:Du,getParts:Au,getPartsOrDie:Bu});const Nu=(e,t,o,n,r)=>{const s=((e,t)=>(e.length>0?[ir("parts",e)]:[]).concat([tr("uid"),br("dom",{}),br("components",[]),Ji("originalSpec"),br("debug.sketcher",{})]).concat(t))(n,r);return Xn(e+" [SpecSchema]",_n(s.concat(t)),o)},Iu=(e,t,o,n,r)=>{const s=Fu(r),a=zu(o),i=Ru(o),l=Nu(e,t,s,a,[i]),c=Tu(0,l,o);return n(l,Mu(e,l,c.internals()),s,c.externals())},Fu=e=>(e=>we(e,"uid"))(e)?e:l(i({},e),{uid:va("uid")}),Pu=_n([tr("name"),tr("factory"),tr("configFields"),br("apis",{}),br("extraApis",{})]),ju=_n([tr("name"),tr("factory"),tr("configFields"),tr("partFields"),br("apis",{}),br("extraApis",{})]),Uu=e=>{const t=Xn("Sketcher for "+e.name,Pu,e),o=ue(t.apis,Oa),n=ue(t.extraApis,((e,t)=>Sa(e,t)));return i(i({name:t.name,configFields:t.configFields,sketch:e=>((e,t,o,n)=>{const r=Fu(n);return o(Nu(e,t,r,[],[]),r)})(t.name,t.configFields,t.factory,e)},o),n)},Wu=e=>{const t=Xn("Sketcher for "+e.name,ju,e),o=Su(t.name,t.partFields),n=ue(t.apis,Oa),r=ue(t.extraApis,((e,t)=>Sa(e,t)));return i(i({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:e=>Iu(t.name,t.configFields,t.partFields,t.factory,e),parts:o},n),r)},$u=e=>je("input")(e)&&"radio"!==bt(e,"type")||je("textarea")(e);var Gu=Object.freeze({__proto__:null,getCurrent:(e,t,o)=>t.find(e)});const qu=[tr("find")],Ku=Fl({fields:qu,name:"composing",apis:Gu}),Xu=["input","button","textarea","select"],Ju=(e,t,o)=>{(t.disabled()?og:ng)(e,t)},Yu=(e,t)=>!0===t.useNative&&N(Xu,Re(e.element)),Zu=e=>{ft(e.element,"disabled","disabled")},Qu=e=>{xt(e.element,"disabled")},eg=e=>{ft(e.element,"aria-disabled","true")},tg=e=>{ft(e.element,"aria-disabled","false")},og=(e,t,o)=>{t.disableClass.each((t=>{Ga(e.element,t)}));(Yu(e,t)?Zu:eg)(e),t.onDisabled(e)},ng=(e,t,o)=>{t.disableClass.each((t=>{qa(e.element,t)}));(Yu(e,t)?Qu:tg)(e),t.onEnabled(e)},rg=(e,t)=>Yu(e,t)?(e=>wt(e.element,"disabled"))(e):(e=>"true"===bt(e.element,"aria-disabled"))(e);var sg=Object.freeze({__proto__:null,enable:ng,disable:og,isDisabled:rg,onLoad:Ju,set:(e,t,o,n)=>{(n?og:ng)(e,t)}});var ag=Object.freeze({__proto__:null,exhibit:(e,t)=>Da({classes:t.disabled()?t.disableClass.toArray():[]}),events:(e,t)=>Fs([Ps(gs(),((t,o)=>rg(t,e))),Bl(e,t,Ju)])}),ig=[kr("disabled",_),br("useNative",!0),dr("disableClass"),$i("onDisabled"),$i("onEnabled")];const lg=Fl({fields:ig,name:"disabling",active:ag,apis:sg}),cg=(e,t,o,n)=>{const r=hd(e.element,"."+t.highlightClass);U(r,(o=>{I(n,(e=>e.element===o))||(qa(o,t.highlightClass),e.getSystem().getByDom(o).each((o=>{t.onDehighlight(e,o),Bs(o,Hs())})))}))},dg=(e,t,o,n)=>{cg(e,t,0,[n]),mg(e,t,o,n)||(Ga(n.element,t.highlightClass),t.onHighlight(e,n),Bs(n,Es()))},mg=(e,t,o,n)=>Ka(n.element,t.highlightClass),ug=(e,t,o,n)=>{const r=hd(e.element,"."+t.itemClass);return E.from(r[n]).fold((()=>qo.error(new Error("No element found with index "+n))),e.getSystem().getByDom)},gg=(e,t,o)=>ki(e.element,"."+t.itemClass).bind((t=>e.getSystem().getByDom(t).toOptional())),hg=(e,t,o)=>{const n=hd(e.element,"."+t.itemClass);return(n.length>0?E.some(n[n.length-1]):E.none()).bind((t=>e.getSystem().getByDom(t).toOptional()))},pg=(e,t,o,n)=>{const r=hd(e.element,"."+t.itemClass);return X(r,(e=>Ka(e,t.highlightClass))).bind((t=>{const o=ll(t,n,0,r.length-1);return e.getSystem().getByDom(r[o]).toOptional()}))},fg=(e,t,o)=>{const n=hd(e.element,"."+t.itemClass);return Ce(j(n,(t=>e.getSystem().getByDom(t).toOptional())))};var vg=Object.freeze({__proto__:null,dehighlightAll:(e,t,o)=>cg(e,t,0,[]),dehighlight:(e,t,o,n)=>{mg(e,t,o,n)&&(qa(n.element,t.highlightClass),t.onDehighlight(e,n),Bs(n,Hs()))},highlight:dg,highlightFirst:(e,t,o)=>{gg(e,t).each((n=>{dg(e,t,o,n)}))},highlightLast:(e,t,o)=>{hg(e,t).each((n=>{dg(e,t,o,n)}))},highlightAt:(e,t,o,n)=>{ug(e,t,o,n).fold((e=>{throw e}),(n=>{dg(e,t,o,n)}))},highlightBy:(e,t,o,n)=>{const r=fg(e,t);K(r,n).each((n=>{dg(e,t,o,n)}))},isHighlighted:mg,getHighlighted:(e,t,o)=>ki(e.element,"."+t.highlightClass).bind((t=>e.getSystem().getByDom(t).toOptional())),getFirst:gg,getLast:hg,getPrevious:(e,t,o)=>pg(e,t,0,-1),getNext:(e,t,o)=>pg(e,t,0,1),getCandidates:fg}),bg=[tr("highlightClass"),tr("itemClass"),$i("onHighlight"),$i("onDehighlight")];const yg=Fl({fields:bg,name:"highlighting",apis:vg}),wg=[8],xg=[9],Sg=[13],Cg=[27],kg=[32],zg=[37],Og=[38],Tg=[39],Mg=[40],_g=(e,t,o)=>{const n=Q(e.slice(0,t)),r=Q(e.slice(t+1));return K(n.concat(r),o)},Dg=(e,t,o)=>{const n=Q(e.slice(0,t));return K(n,o)},Ag=(e,t,o)=>{const n=e.slice(0,t),r=e.slice(t+1);return K(r.concat(n),o)},Eg=(e,t,o)=>{const n=e.slice(t+1);return K(n,o)},Hg=e=>t=>{const o=t.raw;return N(e,o.which)},Bg=e=>t=>Z(e,(e=>e(t))),Vg=e=>!0===e.raw.shiftKey,Rg=e=>!0===e.raw.ctrlKey,Lg=O(Vg),Ng=(e,t)=>({matches:e,classification:t}),Ig=(e,t,o)=>{t.exists((e=>o.exists((t=>$e(t,e)))))||Vs(e,Ms(),{prevFocus:t,newFocus:o})},Fg=()=>{const e=e=>Xl(e.element);return{get:e,set:(t,o)=>{const n=e(t);t.getSystem().triggerFocus(o,t.element);const r=e(t);Ig(t,n,r)}}},Pg=()=>{const e=e=>yg.getHighlighted(e).map((e=>e.element));return{get:e,set:(t,o)=>{const n=e(t);t.getSystem().getByDom(o).fold(w,(e=>{yg.highlight(t,e)}));const r=e(t);Ig(t,n,r)}}};var jg,Ug;(Ug=jg||(jg={})).OnFocusMode="onFocus",Ug.OnEnterOrSpaceMode="onEnterOrSpace",Ug.OnApiMode="onApi";const Wg=(e,t,o,n,r)=>{const s=(e,t,o,n,r)=>{const s=o(e,t,n,r);return(a=s,i=t.event,K(a,(e=>e.matches(i))).map((e=>e.classification))).bind((o=>o(e,t,n,r)));var a,i},a={schema:()=>e.concat([br("focusManager",Fg()),yr("focusInside","onFocus",$n((e=>N(["onFocus","onEnterOrSpace","onApi"],e)?qo.value(e):qo.error("Invalid value for focusInside")))),Xi("handler",a),Xi("state",t),Xi("sendFocusIn",r)]),processKey:s,toEvents:(e,t)=>{const a=e.focusInside!==jg.OnFocusMode?E.none():r(e).map((o=>Us(cs(),((n,r)=>{o(n,e,t),r.stop()})))),i=[Us(Zr(),((n,a)=>{s(n,a,o,e,t).fold((()=>{((o,n)=>{const s=Hg(kg.concat(Sg))(n.event);e.focusInside===jg.OnEnterOrSpaceMode&&s&&Rr(o,n)&&r(e).each((r=>{r(o,e,t),n.stop()}))})(n,a)}),(e=>{a.stop()}))})),Us(Qr(),((o,r)=>{s(o,r,n,e,t).each((e=>{r.stop()}))}))];return Fs(a.toArray().concat(i))}};return a},$g=e=>{const t=[dr("onEscape"),dr("onEnter"),br("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),br("firstTabstop",0),br("useTabstopAt",D),dr("visibilitySelector")].concat([e]),o=(e,t)=>{const o=e.visibilitySelector.bind((e=>zi(t,e))).getOr(t);return Rt(o)>0},n=(e,t,n)=>{((e,t)=>{const n=hd(e.element,t.selector),r=$(n,(e=>o(t,e)));return E.from(r[t.firstTabstop])})(e,t).each((o=>{t.focusManager.set(e,o)}))},r=(e,t,n,r,s)=>s(t,n,(e=>((e,t)=>o(e,t)&&e.useTabstopAt(t))(r,e))).fold((()=>r.cyclic?E.some(!0):E.none()),(t=>(r.focusManager.set(e,t),E.some(!0)))),s=(e,t,o,n)=>{const s=hd(e.element,o.selector);return((e,t)=>t.focusManager.get(e).bind((e=>zi(e,t.selector))))(e,o).bind((t=>X(s,z($e,t)).bind((t=>r(e,s,t,o,n)))))},a=S([Ng(Bg([Vg,Hg(xg)]),((e,t,o)=>{const n=o.cyclic?_g:Dg;return s(e,0,o,n)})),Ng(Hg(xg),((e,t,o)=>{const n=o.cyclic?Ag:Eg;return s(e,0,o,n)})),Ng(Hg(Cg),((e,t,o)=>o.onEscape.bind((o=>o(e,t))))),Ng(Bg([Lg,Hg(Sg)]),((e,t,o)=>o.onEnter.bind((o=>o(e,t)))))]),i=S([]);return Wg(t,Ta.init,a,i,(()=>E.some(n)))};var Gg=$g(Qn("cyclic",_)),qg=$g(Qn("cyclic",D));const Kg=(e,t,o)=>$u(o)&&Hg(kg)(t.event)?E.none():((e,t,o)=>(Ls(e,o,gs()),E.some(!0)))(e,0,o),Xg=(e,t)=>E.some(!0),Jg=[br("execute",Kg),br("useSpace",!1),br("useEnter",!0),br("useControlEnter",!1),br("useDown",!1)],Yg=(e,t,o)=>o.execute(e,t,e.element);var Zg=Wg(Jg,Ta.init,((e,t,o,n)=>{const r=o.useSpace&&!$u(e.element)?kg:[],s=o.useEnter?Sg:[],a=o.useDown?Mg:[],i=r.concat(s).concat(a);return[Ng(Hg(i),Yg)].concat(o.useControlEnter?[Ng(Bg([Rg,Hg(Sg)]),Yg)]:[])}),((e,t,o,n)=>o.useSpace&&!$u(e.element)?[Ng(Hg(kg),Xg)]:[]),(()=>E.none()));const Qg=()=>{const e=gc();return Ma({readState:()=>e.get().map((e=>({numRows:String(e.numRows),numColumns:String(e.numColumns)}))).getOr({numRows:"?",numColumns:"?"}),setGridSize:(t,o)=>{e.set({numRows:t,numColumns:o})},getNumRows:()=>e.get().map((e=>e.numRows)),getNumColumns:()=>e.get().map((e=>e.numColumns))})};var eh=Object.freeze({__proto__:null,flatgrid:Qg,init:e=>e.state(e)});const th=e=>(t,o,n,r)=>{const s=e(t.element);return sh(s,t,o,n,r)},oh=(e,t)=>{const o=Vc(e,t);return th(o)},nh=(e,t)=>{const o=Vc(t,e);return th(o)},rh=e=>(t,o,n,r)=>sh(e,t,o,n,r),sh=(e,t,o,n,r)=>n.focusManager.get(t).bind((o=>e(t.element,o,n,r))).map((e=>(n.focusManager.set(t,e),!0))),ah=rh,ih=rh,lh=rh,ch=e=>{return!((t=e.dom).offsetWidth<=0&&t.offsetHeight<=0);var t},dh=(e,t,o)=>{const n=hd(e,o);return((e,t)=>X(e,t).map((t=>({index:t,candidates:e}))))($(n,ch),(e=>$e(e,t)))},mh=(e,t)=>X(e,(e=>$e(t,e))),uh=(e,t,o,n)=>n(Math.floor(t/o),t%o).bind((t=>{const n=t.row*o+t.column;return n>=0&&n<e.length?E.some(e[n]):E.none()})),gh=(e,t,o,n,r)=>uh(e,t,n,((t,s)=>{const a=t===o-1?e.length-t*n:n,i=ll(s,r,0,a-1);return E.some({row:t,column:i})})),hh=(e,t,o,n,r)=>uh(e,t,n,((t,s)=>{const a=ll(t,r,0,o-1),i=a===o-1?e.length-a*n:n,l=cl(s,0,i-1);return E.some({row:a,column:l})})),ph=[tr("selector"),br("execute",Kg),Gi("onEscape"),br("captureTab",!1),Yi()],fh=(e,t,o)=>{ki(e.element,t.selector).each((o=>{t.focusManager.set(e,o)}))},vh=e=>(t,o,n,r)=>dh(t,o,n.selector).bind((t=>e(t.candidates,t.index,r.getNumRows().getOr(n.initSize.numRows),r.getNumColumns().getOr(n.initSize.numColumns)))),bh=(e,t,o)=>o.captureTab?E.some(!0):E.none(),yh=vh(((e,t,o,n)=>gh(e,t,o,n,-1))),wh=vh(((e,t,o,n)=>gh(e,t,o,n,1))),xh=vh(((e,t,o,n)=>hh(e,t,o,n,-1))),Sh=vh(((e,t,o,n)=>hh(e,t,o,n,1))),Ch=S([Ng(Hg(zg),oh(yh,wh)),Ng(Hg(Tg),nh(yh,wh)),Ng(Hg(Og),ah(xh)),Ng(Hg(Mg),ih(Sh)),Ng(Bg([Vg,Hg(xg)]),bh),Ng(Bg([Lg,Hg(xg)]),bh),Ng(Hg(Cg),((e,t,o)=>o.onEscape(e,t))),Ng(Hg(kg.concat(Sg)),((e,t,o,n)=>((e,t)=>t.focusManager.get(e).bind((e=>zi(e,t.selector))))(e,o).bind((n=>o.execute(e,t,n)))))]),kh=S([Ng(Hg(kg),Xg)]);var zh=Wg(ph,Qg,Ch,kh,(()=>E.some(fh)));const Oh=(e,t,o,n)=>{const r=(e,t,o)=>{const s=ll(t,n,0,o.length-1);return s===e?E.none():(a=o[s],"button"===Re(a)&&"disabled"===bt(a,"disabled")?r(e,s,o):E.from(o[s]));var a};return dh(e,o,t).bind((e=>{const t=e.index,o=e.candidates;return r(t,t,o)}))},Th=[tr("selector"),br("getInitial",E.none),br("execute",Kg),Gi("onEscape"),br("executeOnMove",!1),br("allowVertical",!0)],Mh=(e,t,o)=>((e,t)=>t.focusManager.get(e).bind((e=>zi(e,t.selector))))(e,o).bind((n=>o.execute(e,t,n))),_h=(e,t,o)=>{t.getInitial(e).orThunk((()=>ki(e.element,t.selector))).each((o=>{t.focusManager.set(e,o)}))},Dh=(e,t,o)=>Oh(e,o.selector,t,-1),Ah=(e,t,o)=>Oh(e,o.selector,t,1),Eh=e=>(t,o,n,r)=>e(t,o,n,r).bind((()=>n.executeOnMove?Mh(t,o,n):E.some(!0))),Hh=(e,t,o)=>o.onEscape(e,t),Bh=S([Ng(Hg(kg),Xg)]);var Vh=Wg(Th,Ta.init,((e,t,o,n)=>{const r=zg.concat(o.allowVertical?Og:[]),s=Tg.concat(o.allowVertical?Mg:[]);return[Ng(Hg(r),Eh(oh(Dh,Ah))),Ng(Hg(s),Eh(nh(Dh,Ah))),Ng(Hg(Sg),Mh),Ng(Hg(kg),Mh),Ng(Hg(Cg),Hh)]}),Bh,(()=>E.some(_h)));const Rh=(e,t,o)=>E.from(e[t]).bind((e=>E.from(e[o]).map((e=>({rowIndex:t,columnIndex:o,cell:e}))))),Lh=(e,t,o,n)=>{const r=e[t].length,s=ll(o,n,0,r-1);return Rh(e,t,s)},Nh=(e,t,o,n)=>{const r=ll(o,n,0,e.length-1),s=e[r].length,a=cl(t,0,s-1);return Rh(e,r,a)},Ih=(e,t,o,n)=>{const r=e[t].length,s=cl(o+n,0,r-1);return Rh(e,t,s)},Fh=(e,t,o,n)=>{const r=cl(o+n,0,e.length-1),s=e[r].length,a=cl(t,0,s-1);return Rh(e,r,a)},Ph=[ir("selectors",[tr("row"),tr("cell")]),br("cycles",!0),br("previousSelector",E.none),br("execute",Kg)],jh=(e,t,o)=>{t.previousSelector(e).orThunk((()=>{const o=t.selectors;return ki(e.element,o.cell)})).each((o=>{t.focusManager.set(e,o)}))},Uh=(e,t)=>(o,n,r)=>{const s=r.cycles?e:t;return zi(n,r.selectors.row).bind((e=>{const t=hd(e,r.selectors.cell);return mh(t,n).bind((t=>{const n=hd(o,r.selectors.row);return mh(n,e).bind((e=>{const o=((e,t)=>j(e,(e=>hd(e,t.selectors.cell))))(n,r);return s(o,e,t).map((e=>e.cell))}))}))}))},Wh=Uh(((e,t,o)=>Lh(e,t,o,-1)),((e,t,o)=>Ih(e,t,o,-1))),$h=Uh(((e,t,o)=>Lh(e,t,o,1)),((e,t,o)=>Ih(e,t,o,1))),Gh=Uh(((e,t,o)=>Nh(e,o,t,-1)),((e,t,o)=>Fh(e,o,t,-1))),qh=Uh(((e,t,o)=>Nh(e,o,t,1)),((e,t,o)=>Fh(e,o,t,1))),Kh=S([Ng(Hg(zg),oh(Wh,$h)),Ng(Hg(Tg),nh(Wh,$h)),Ng(Hg(Og),ah(Gh)),Ng(Hg(Mg),ih(qh)),Ng(Hg(kg.concat(Sg)),((e,t,o)=>Xl(e.element).bind((n=>o.execute(e,t,n)))))]),Xh=S([Ng(Hg(kg),Xg)]);var Jh=Wg(Ph,Ta.init,Kh,Xh,(()=>E.some(jh)));const Yh=[tr("selector"),br("execute",Kg),br("moveOnTab",!1)],Zh=(e,t,o)=>o.focusManager.get(e).bind((n=>o.execute(e,t,n))),Qh=(e,t,o)=>{ki(e.element,t.selector).each((o=>{t.focusManager.set(e,o)}))},ep=(e,t,o)=>Oh(e,o.selector,t,-1),tp=(e,t,o)=>Oh(e,o.selector,t,1),op=S([Ng(Hg(Og),lh(ep)),Ng(Hg(Mg),lh(tp)),Ng(Bg([Vg,Hg(xg)]),((e,t,o,n)=>o.moveOnTab?lh(ep)(e,t,o,n):E.none())),Ng(Bg([Lg,Hg(xg)]),((e,t,o,n)=>o.moveOnTab?lh(tp)(e,t,o,n):E.none())),Ng(Hg(Sg),Zh),Ng(Hg(kg),Zh)]),np=S([Ng(Hg(kg),Xg)]);var rp=Wg(Yh,Ta.init,op,np,(()=>E.some(Qh)));const sp=[Gi("onSpace"),Gi("onEnter"),Gi("onShiftEnter"),Gi("onLeft"),Gi("onRight"),Gi("onTab"),Gi("onShiftTab"),Gi("onUp"),Gi("onDown"),Gi("onEscape"),br("stopSpaceKeyup",!1),dr("focusIn")];var ap=Wg(sp,Ta.init,((e,t,o)=>[Ng(Hg(kg),o.onSpace),Ng(Bg([Lg,Hg(Sg)]),o.onEnter),Ng(Bg([Vg,Hg(Sg)]),o.onShiftEnter),Ng(Bg([Vg,Hg(xg)]),o.onShiftTab),Ng(Bg([Lg,Hg(xg)]),o.onTab),Ng(Hg(Og),o.onUp),Ng(Hg(Mg),o.onDown),Ng(Hg(zg),o.onLeft),Ng(Hg(Tg),o.onRight),Ng(Hg(kg),o.onSpace),Ng(Hg(Cg),o.onEscape)]),((e,t,o)=>o.stopSpaceKeyup?[Ng(Hg(kg),Xg)]:[]),(e=>e.focusIn));const ip=Gg.schema(),lp=qg.schema(),cp=Vh.schema(),dp=zh.schema(),mp=Jh.schema(),up=Zg.schema(),gp=rp.schema(),hp=ap.schema();const pp=jl({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:ip,cyclic:lp,flow:cp,flatgrid:dp,matrix:mp,execution:up,menu:gp,special:hp}),name:"keying",active:{events:(e,t)=>e.handler.toEvents(e,t)},apis:{focusIn:(e,t,o)=>{t.sendFocusIn(t).fold((()=>{e.getSystem().triggerFocus(e.element,e.element)}),(n=>{n(e,t,o)}))},setGridSize:(e,t,o,n,r)=>{(e=>xe(e,"setGridSize"))(o)&&o.setGridSize(n,r)}},state:eh}),fp=(e,t)=>{Jl((()=>{tm(e,t,(()=>j(t,e.getSystem().build)))}),e.element)},vp=(e,t)=>{Jl((()=>{((e,t,o)=>{const n=e.components(),r=Y(t,(e=>za(e).toArray()));U(n,(e=>{N(r,e)||Qd(e)}));const s=o(t),a=ee(n,s);U(a,(e=>{Xd(e)&&Qd(e)})),U(s,(t=>{Xd(t)||Zd(e,t)})),e.syncComponents()})(e,t,(()=>((e,t,o)=>ti(e,t,((t,n)=>oi(e,n,t,o))))(e.element,t,e.getSystem().buildOrPatch)))}),e.element)},bp=(e,t,o,n)=>{Qd(t);const r=oi(e.element,o,n,e.getSystem().buildOrPatch);Zd(e,r),e.syncComponents()},yp=(e,t,o)=>{const n=e.getSystem().build(o);nm(e,n,t)},wp=(e,t,o,n)=>{sm(t),yp(e,((e,t)=>{return r=t,void tt(n=e,o).fold((()=>{_o(n,r)}),(e=>{Oo(e,r)}));var n,r}),n)},xp=(e,t)=>e.components(),Sp=(e,t,o,n,r)=>{const s=xp(e);return E.from(s[n]).map((o=>(r.fold((()=>sm(o)),(r=>{(t.reuseDom?bp:wp)(e,o,n,r)})),o)))};var Cp=Object.freeze({__proto__:null,append:(e,t,o,n)=>{yp(e,_o,n)},prepend:(e,t,o,n)=>{yp(e,Mo,n)},remove:(e,t,o,n)=>{const r=xp(e);K(r,(e=>$e(n.element,e.element))).each(sm)},replaceAt:Sp,replaceBy:(e,t,o,n,r)=>{const s=xp(e);return X(s,n).bind((o=>Sp(e,t,0,o,r)))},set:(e,t,o,n)=>(t.reuseDom?vp:fp)(e,n),contents:xp});const kp=Fl({fields:[Cr("reuseDom",!0)],name:"replacing",apis:Cp}),zp=(e,t)=>{const o=((e,t)=>{const o=Fs(t);return Fl({fields:[tr("enabled")],name:e,active:{events:S(o)}})})(e,t);return{key:e,value:{config:{},me:o,configAsRaw:S({}),initialConfig:{},state:Ta}}},Op=(e,t)=>{t.ignore||(Gl(e.element),t.onFocus(e))};var Tp=Object.freeze({__proto__:null,focus:Op,blur:(e,t)=>{t.ignore||e.element.dom.blur()},isFocused:e=>ql(e.element)});var Mp=Object.freeze({__proto__:null,exhibit:(e,t)=>{const o=t.ignore?{}:{attributes:{tabindex:"-1"}};return Da(o)},events:e=>Fs([Us(cs(),((t,o)=>{Op(t,e),o.stop()}))].concat(e.stopMousedown?[Us($r(),((e,t)=>{t.event.prevent()}))]:[]))}),_p=[$i("onFocus"),br("stopMousedown",!1),br("ignore",!1)];const Dp=Fl({fields:_p,name:"focusing",active:Mp,apis:Tp}),Ap=(e,t,o)=>{const n=t.aria;n.update(e,n,o.get())},Ep=(e,t,o)=>{t.toggleClass.each((t=>{o.get()?Ga(e.element,t):qa(e.element,t)}))},Hp=(e,t,o)=>{Rp(e,t,o,!o.get())},Bp=(e,t,o)=>{o.set(!0),Ep(e,t,o),Ap(e,t,o)},Vp=(e,t,o)=>{o.set(!1),Ep(e,t,o),Ap(e,t,o)},Rp=(e,t,o,n)=>{(n?Bp:Vp)(e,t,o)},Lp=(e,t,o)=>{Rp(e,t,o,t.selected)};var Np=Object.freeze({__proto__:null,onLoad:Lp,toggle:Hp,isOn:(e,t,o)=>o.get(),on:Bp,off:Vp,set:Rp});var Ip=Object.freeze({__proto__:null,exhibit:()=>Da({}),events:(e,t)=>{const o=(n=e,r=t,s=Hp,ea((e=>{s(e,n,r)})));var n,r,s;const a=Bl(e,t,Lp);return Fs(J([e.toggleOnExecute?[o]:[],[a]]))}});const Fp=(e,t,o)=>{ft(e.element,"aria-expanded",o)};var Pp=[br("selected",!1),dr("toggleClass"),br("toggleOnExecute",!0),yr("aria",{mode:"none"},Yn("mode",{pressed:[br("syncWithExpanded",!1),Xi("update",((e,t,o)=>{ft(e.element,"aria-pressed",o),t.syncWithExpanded&&Fp(e,t,o)}))],checked:[Xi("update",((e,t,o)=>{ft(e.element,"aria-checked",o)}))],expanded:[Xi("update",Fp)],selected:[Xi("update",((e,t,o)=>{ft(e.element,"aria-selected",o)}))],none:[Xi("update",w)]}))];const jp=Fl({fields:Pp,name:"toggling",active:Ip,apis:Np,state:(Up=!1,{init:()=>{const e=Tr(Up);return{get:()=>e.get(),set:t=>e.set(t),clear:()=>e.set(Up),readState:()=>e.get()}}})});var Up;const Wp=()=>{const e=(e,t)=>{t.stop(),Rs(e)};return[Us(os(),e),Us(ps(),e),Ks(Pr()),Ks($r())]},$p=e=>Fs(J([e.map((e=>ea(((t,o)=>{e(t),o.stop()})))).toArray(),Wp()])),Gp="alloy.item-hover",qp="alloy.item-focus",Kp=e=>{(Xl(e.element).isNone()||Dp.isFocused(e))&&(Dp.isFocused(e)||Dp.focus(e),Vs(e,Gp,{item:e}))},Xp=e=>{Vs(e,qp,{item:e})},Jp=S(Gp),Yp=S(qp),Zp=[tr("data"),tr("components"),tr("dom"),br("hasSubmenu",!1),dr("toggling"),Um("itemBehaviours",[jp,Dp,pp,Im]),br("ignoreFocus",!1),br("domModification",{}),Xi("builder",(e=>({dom:e.dom,domModification:l(i({},e.domModification),{attributes:i(l(i({role:e.toggling.isSome()?"menuitemcheckbox":"menuitem"},e.domModification.attributes),{"aria-haspopup":e.hasSubmenu}),e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Wm(e.itemBehaviours,[e.toggling.fold(jp.revoke,(e=>jp.config(i({aria:{mode:"checked"}},e)))),Dp.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:e=>{Xp(e)}}),pp.config({mode:"execution"}),Im.config({store:{mode:"memory",initialValue:e.data}}),zp("item-type-events",[...Wp(),Us(Xr(),Kp),Us(hs(),Dp.focus)])]),components:e.components,eventOrder:e.eventOrder}))),br("eventOrder",{})],Qp=[tr("dom"),tr("components"),Xi("builder",(e=>({dom:e.dom,components:e.components,events:Fs([Xs(hs())])})))],ef=S("item-widget"),tf=S([pu({name:"widget",overrides:e=>({behaviours:Nl([Im.config({store:{mode:"manual",getValue:t=>e.data,setValue:w}})])})})]),of=[tr("uid"),tr("data"),tr("components"),tr("dom"),br("autofocus",!1),br("ignoreFocus",!1),Um("widgetBehaviours",[Im,Dp,pp]),br("domModification",{}),Ru(tf()),Xi("builder",(e=>{const t=Tu(ef(),e,tf()),o=Mu(ef(),e,t.internals()),n=t=>_u(t,e,"widget").map((e=>(pp.focusIn(e),e))),r=(t,o)=>$u(o.event.target)?E.none():e.autofocus?(o.setSource(t.element),E.none()):E.none();return{dom:e.dom,components:o,domModification:e.domModification,events:Fs([ea(((e,t)=>{n(e).each((e=>{t.stop()}))})),Us(Xr(),Kp),Us(hs(),((t,o)=>{e.autofocus?n(t):Dp.focus(t)}))]),behaviours:Wm(e.widgetBehaviours,[Im.config({store:{mode:"memory",initialValue:e.data}}),Dp.config({ignore:e.ignoreFocus,onFocus:e=>{Xp(e)}}),pp.config({mode:"special",focusIn:e.autofocus?e=>{n(e)}:Ul(),onLeft:r,onRight:r,onEscape:(t,o)=>Dp.isFocused(t)||e.autofocus?e.autofocus?(o.setSource(t.element),E.none()):E.none():(Dp.focus(t),E.some(!0))})])}}))],nf=Yn("type",{widget:of,item:Zp,separator:Qp}),rf=S([bu({factory:{sketch:e=>{const t=Xn("menu.spec item",nf,e);return t.builder(t)}},name:"items",unit:"item",defaults:(e,t)=>we(t,"uid")?t:l(i({},t),{uid:va("item")}),overrides:(e,t)=>({type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}})})]),sf=S([tr("value"),tr("items"),tr("dom"),tr("components"),br("eventOrder",{}),Fm("menuBehaviours",[yg,Im,Ku,pp]),yr("movement",{mode:"menu",moveOnTab:!0},Yn("mode",{grid:[Yi(),Xi("config",((e,t)=>({mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager})))],matrix:[Xi("config",((e,t)=>({mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},focusManager:e.focusManager}))),tr("rowSelector")],menu:[br("moveOnTab",!0),Xi("config",((e,t)=>({mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager})))]})),or("markers",Fi()),br("fakeFocus",!1),br("focusManager",Fg()),$i("onHighlight")]),af=S("alloy.menu-focus"),lf=Wu({name:"Menu",configFields:sf(),partFields:rf(),factory:(e,t,o,n)=>({uid:e.uid,dom:e.dom,markers:e.markers,behaviours:jm(e.menuBehaviours,[yg.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight}),Im.config({store:{mode:"memory",initialValue:e.value}}),Ku.config({find:E.some}),pp.config(e.movement.config(e,e.movement))]),events:Fs([Us(Yp(),((e,t)=>{const o=t.event;e.getSystem().getByDom(o.target).each((o=>{yg.highlight(e,o),t.stop(),Vs(e,af(),{menu:e,item:o})}))})),Us(Jp(),((e,t)=>{const o=t.event.item;yg.highlight(e,o)}))]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}})}),cf=(e,t,o,n)=>ye(o,n).bind((n=>ye(e,n).bind((n=>{const r=cf(e,t,o,n);return E.some([n].concat(r))})))).getOr([]),df=(e,t)=>{const o={};me(e,((e,t)=>{U(e,(e=>{o[e]=t}))}));const n=t,r=ge(t,((e,t)=>({k:e,v:t})));const s=ue(r,((e,t)=>[t].concat(cf(o,n,r,t))));return ue(o,(e=>ye(s,e).getOr([e])))},mf=e=>"prepared"===e.type?E.some(e.menu):E.none(),uf={init:()=>{const e=Tr({}),t=Tr({}),o=Tr({}),n=gc(),r=Tr({}),s=(t,o,n)=>a(t).bind((r=>(t=>ve(e.get(),((e,o)=>e===t)))(t).bind((e=>o(e).map((e=>({triggeredMenu:r,triggeringItem:e,triggeringPath:n}))))))),a=e=>c(e).bind(mf),c=e=>ye(t.get(),e),d=t=>ye(e.get(),t);return{setMenuBuilt:(e,o)=>{t.set(l(i({},t.get()),{[e]:{type:"prepared",menu:o}}))},setContents:(s,a,i,l)=>{n.set(s),e.set(i),t.set(a),r.set(l);const c=df(l,i);o.set(c)},expand:t=>ye(e.get(),t).map((e=>{const n=ye(o.get(),t).getOr([]);return[e].concat(n)})),refresh:e=>ye(o.get(),e),collapse:e=>ye(o.get(),e).bind((e=>e.length>1?E.some(e.slice(1)):E.none())),lookupMenu:c,lookupItem:d,otherMenus:e=>{const t=r.get();return ee(ce(t),e)},getPrimary:()=>n.get().bind(a),getMenus:()=>t.get(),clear:()=>{e.set({}),t.set({}),o.set({}),n.clear()},isClear:()=>n.get().isNone(),getTriggeringPath:(e,t)=>{const r=$(d(e).toArray(),(e=>a(e).isSome()));return ye(o.get(),e).bind((e=>{const o=Q(r.concat(e));return(e=>{const t=[];for(let o=0;o<e.length;o++){const n=e[o];if(!n.isSome())return E.none();t.push(n.getOrDie())}return E.some(t)})(Y(o,((e,r)=>s(e,t,o.slice(0,r+1)).fold((()=>Se(n.get(),e)?[]:[E.none()]),(e=>[E.some(e)])))))}))}}},extractPreparedMenu:mf},gf=S("collapse-item"),hf=Uu({name:"TieredMenu",configFields:[Ki("onExecute"),Ki("onEscape"),qi("onOpenMenu"),qi("onOpenSubmenu"),$i("onRepositionMenu"),$i("onCollapseMenu"),br("highlightImmediately",!0),ir("data",[tr("primary"),tr("menus"),tr("expansions")]),br("fakeFocus",!1),$i("onHighlight"),$i("onHover"),ji(),tr("dom"),br("navigateOnHover",!0),br("stayInDom",!1),Fm("tmenuBehaviours",[pp,yg,Ku,kp]),br("eventOrder",{})],apis:{collapseMenu:(e,t)=>{e.collapseMenu(t)},highlightPrimary:(e,t)=>{e.highlightPrimary(t)},repositionMenus:(e,t)=>{e.repositionMenus(t)}},factory:(e,t)=>{const o=gc(),n=uf.init(),r=t=>{const o=((t,o,n)=>ue(n,((n,r)=>{const s=()=>lf.sketch(l(i({},n),{value:r,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:e.onHighlight,focusManager:e.fakeFocus?Pg():Fg()}));return r===o?{type:"prepared",menu:t.getSystem().build(s())}:{type:"notbuilt",nbMenu:s}})))(t,e.data.primary,e.data.menus),r=a();return n.setContents(e.data.primary,o,e.data.expansions,r),n.getPrimary()},s=e=>Im.getValue(e).value,a=t=>ue(e.data.menus,((e,t)=>Y(e.items,(e=>"separator"===e.type?[]:[e.data.value])))),c=(e,t)=>{yg.highlight(e,t),yg.getHighlighted(t).orThunk((()=>yg.getFirst(t))).each((t=>{Ls(e,t.element,hs())}))},d=(e,t)=>Ce(j(t,(t=>e.lookupMenu(t).bind((e=>"prepared"===e.type?E.some(e.menu):E.none()))))),m=(t,o,n)=>{const r=d(o,o.otherMenus(n));U(r,(o=>{Ja(o.element,[e.markers.backgroundMenu]),e.stayInDom||kp.remove(t,o)}))},u=(t,n)=>{const r=(t=>o.get().getOrThunk((()=>{const n={},r=hd(t.element,`.${e.markers.item}`),a=$(r,(e=>"true"===bt(e,"aria-haspopup")));return U(a,(e=>{t.getSystem().getByDom(e).each((e=>{const t=s(e);n[t]=e}))})),o.set(n),n})))(t);me(r,((e,t)=>{const o=N(n,t);ft(e.element,"aria-expanded",o)}))},g=(t,o,n)=>E.from(n[0]).bind((r=>o.lookupMenu(r).bind((r=>{if("notbuilt"===r.type)return E.none();{const s=r.menu,a=d(o,n.slice(1));return U(a,(t=>{Ga(t.element,e.markers.backgroundMenu)})),ut(s.element)||kp.append(t,vi(s)),Ja(s.element,[e.markers.backgroundMenu]),c(t,s),m(t,o,n),E.some(s)}}))));let h;var p;(p=h||(h={}))[p.HighlightSubmenu=0]="HighlightSubmenu",p[p.HighlightParent=1]="HighlightParent";const f=(t,o,r=h.HighlightSubmenu)=>{if(o.hasConfigured(lg)&&lg.isDisabled(o))return E.some(o);{const a=s(o);return n.expand(a).bind((s=>(u(t,s),E.from(s[0]).bind((a=>n.lookupMenu(a).bind((i=>{const l=((e,t,o)=>{if("notbuilt"===o.type){const r=e.getSystem().build(o.nbMenu());return n.setMenuBuilt(t,r),r}return o.menu})(t,a,i);return ut(l.element)||kp.append(t,vi(l)),e.onOpenSubmenu(t,o,l,Q(s)),r===h.HighlightSubmenu?(yg.highlightFirst(l),g(t,n,s)):(yg.dehighlightAll(l),E.some(o))})))))))}},v=(t,o)=>{const r=s(o);return n.collapse(r).bind((r=>(u(t,r),g(t,n,r).map((n=>(e.onCollapseMenu(t,o,n),n))))))},b=t=>(o,n)=>zi(n.getSource(),"."+e.markers.item).bind((e=>o.getSystem().getByDom(e).toOptional().bind((e=>t(o,e).map(D))))),y=Fs([Us(af(),((e,t)=>{const o=t.event.item;n.lookupItem(s(o)).each((()=>{const o=t.event.menu;yg.highlight(e,o);const r=s(t.event.item);n.refresh(r).each((t=>m(e,n,t)))}))})),ea(((t,o)=>{const n=o.event.target;t.getSystem().getByDom(n).each((o=>{0===s(o).indexOf("collapse-item")&&v(t,o),f(t,o,h.HighlightSubmenu).fold((()=>{e.onExecute(t,o)}),w)}))})),Ys(((t,o)=>{r(t).each((o=>{kp.append(t,vi(o)),e.onOpenMenu(t,o),e.highlightImmediately&&c(t,o)}))}))].concat(e.navigateOnHover?[Us(Jp(),((t,o)=>{const r=o.event.item;((e,t)=>{const o=s(t);n.refresh(o).bind((t=>(u(e,t),g(e,n,t))))})(t,r),f(t,r,h.HighlightParent),e.onHover(t,r)}))]:[])),x=e=>yg.getHighlighted(e).bind(yg.getHighlighted),S={collapseMenu:e=>{x(e).each((t=>{v(e,t)}))},highlightPrimary:e=>{n.getPrimary().each((t=>{c(e,t)}))},repositionMenus:t=>{n.getPrimary().bind((e=>x(t).bind((e=>{const t=s(e),o=be(n.getMenus()),r=Ce(j(o,uf.extractPreparedMenu));return n.getTriggeringPath(t,(e=>((e,t,o)=>le(t,(e=>{if(!e.getSystem().isConnected())return E.none();const t=yg.getCandidates(e);return K(t,(e=>s(e)===o))})))(0,r,e)))})).map((t=>({primary:e,triggeringPath:t}))))).fold((()=>{(e=>E.from(e.components()[0]).filter((e=>"menu"===bt(e.element,"role"))))(t).each((o=>{e.onRepositionMenu(t,o,[])}))}),(({primary:o,triggeringPath:n})=>{e.onRepositionMenu(t,o,n)}))}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:jm(e.tmenuBehaviours,[pp.config({mode:"special",onRight:b(((e,t)=>$u(t.element)?E.none():f(e,t,h.HighlightSubmenu))),onLeft:b(((e,t)=>$u(t.element)?E.none():v(e,t))),onEscape:b(((t,o)=>v(t,o).orThunk((()=>e.onEscape(t,o).map((()=>t)))))),focusIn:(e,t)=>{n.getPrimary().each((t=>{Ls(e,t.element,hs())}))}}),yg.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),Ku.config({find:e=>yg.getHighlighted(e)}),kp.config({})]),eventOrder:e.eventOrder,apis:S,events:y}},extraApis:{tieredData:(e,t,o)=>({primary:e,menus:t,expansions:o}),singleData:(e,t)=>({primary:e,menus:Dr(e,t),expansions:{}}),collapseItem:e=>({value:da(gf()),meta:{text:e}})}}),pf=Uu({name:"InlineView",configFields:[tr("lazySink"),$i("onShow"),$i("onHide"),pr("onEscape"),Fm("inlineBehaviours",[ym,Im,Wl]),vr("fireDismissalEventInstead",[br("event",Os())]),vr("fireRepositionEventInstead",[br("event",Ts())]),br("getRelated",E.none),br("isExtraPart",_),br("eventOrder",E.none)],factory:(e,t)=>{const o=(e,t,o,r)=>{n(e,t,o,(()=>r.map((e=>jo(e)))))},n=(t,o,n,r)=>{const s=e.lazySink(t).getOrDie();ym.openWhileCloaked(t,o,(()=>Kd.positionWithinBounds(s,t,n,r()))),Im.setValue(t,E.some({mode:"position",config:n,getBounds:r}))},r=(t,o,n,r)=>{const s=((e,t,o,n,r)=>{const s=()=>e.lazySink(t),a="horizontal"===n.type?{layouts:{onLtr:()=>Dl(),onRtl:()=>Al()}}:{},l=e=>(e=>2===e.length)(e)?a:{};return hf.sketch({dom:{tag:"div"},data:n.data,markers:n.menu.markers,highlightImmediately:n.menu.highlightImmediately,onEscape:()=>(ym.close(t),e.onEscape.map((e=>e(t))),E.some(!0)),onExecute:()=>E.some(!0),onOpenMenu:(e,t)=>{Kd.positionWithinBounds(s().getOrDie(),t,o,r())},onOpenSubmenu:(e,t,o,n)=>{const r=s().getOrDie();Kd.position(r,o,{anchor:i({type:"submenu",item:t},l(n))})},onRepositionMenu:(e,t,n)=>{const a=s().getOrDie();Kd.positionWithinBounds(a,t,o,r()),U(n,(e=>{const t=l(e.triggeringPath);Kd.position(a,e.triggeredMenu,{anchor:i({type:"submenu",item:e.triggeringItem},t)})}))}})})(e,t,o,n,r);ym.open(t,s),Im.setValue(t,E.some({mode:"menu",menu:s}))},s=t=>{ym.isOpen(t)&&Im.getValue(t).each((o=>{switch(o.mode){case"menu":ym.getState(t).each(hf.repositionMenus);break;case"position":const n=e.lazySink(t).getOrDie();Kd.positionWithinBounds(n,t,o.config,o.getBounds())}}))},a={setContent:(e,t)=>{ym.setContent(e,t)},showAt:(e,t,n)=>{o(e,t,n,E.none())},showWithin:o,showWithinBounds:n,showMenuAt:(e,t,o)=>{r(e,t,o,E.none)},showMenuWithinBounds:r,hide:e=>{ym.isOpen(e)&&(Im.setValue(e,E.none()),ym.close(e))},getContent:e=>ym.getState(e),reposition:s,isOpen:ym.isOpen};return{uid:e.uid,dom:e.dom,behaviours:jm(e.inlineBehaviours,[ym.config({isPartOf:(t,o,n)=>_i(o,n)||((t,o)=>e.getRelated(t).exists((e=>_i(e,o))))(t,n),getAttachPoint:t=>e.lazySink(t).getOrDie(),onOpen:t=>{e.onShow(t)},onClose:t=>{e.onHide(t)}}),Im.config({store:{mode:"memory",initialValue:E.none()}}),Wl.config({channels:i(i({},km(i({isExtraPart:t.isExtraPart},e.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})))),Om(l(i({},e.fireRepositionEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})),{doReposition:s})))})]),eventOrder:e.eventOrder,apis:a}},apis:{showAt:(e,t,o,n)=>{e.showAt(t,o,n)},showWithin:(e,t,o,n,r)=>{e.showWithin(t,o,n,r)},showWithinBounds:(e,t,o,n,r)=>{e.showWithinBounds(t,o,n,r)},showMenuAt:(e,t,o,n)=>{e.showMenuAt(t,o,n)},showMenuWithinBounds:(e,t,o,n,r)=>{e.showMenuWithinBounds(t,o,n,r)},hide:(e,t)=>{e.hide(t)},isOpen:(e,t)=>e.isOpen(t),getContent:(e,t)=>e.getContent(t),setContent:(e,t,o)=>{e.setContent(t,o)},reposition:(e,t)=>{e.reposition(t)}}});var ff=tinymce.util.Tools.resolve("tinymce.util.Delay");const vf=Uu({name:"Button",factory:e=>{const t=$p(e.action),o=e.dom.tag,n=t=>ye(e.dom,"attributes").bind((e=>ye(e,t)));return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Wm(e.buttonBehaviours,[Dp.config({}),pp.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:(()=>{if("button"===o){const e=n("type").getOr("button"),t=n("role").map((e=>({role:e}))).getOr({});return i({type:e},t)}return{role:n("role").getOr("button")}})()},eventOrder:e.eventOrder}},configFields:[br("uid",void 0),tr("dom"),br("components",[]),Um("buttonBehaviours",[Dp,pp]),dr("action"),dr("role"),br("eventOrder",{})]}),bf=e=>{const t=(e=>void 0!==e.uid)(e)&&xe(e,"uid")?e.uid:va("memento");return{get:e=>e.getSystem().getByUid(t).getOrDie(),getOpt:e=>e.getSystem().getByUid(t).toOptional(),asSpec:()=>l(i({},e),{uid:t})}};var yf=tinymce.util.Tools.resolve("tinymce.util.I18n");const wf={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},xf="temporary-placeholder",Sf=e=>()=>ye(e,xf).getOr("!not found!"),Cf=(e,t)=>{const o=e.toLowerCase();if(yf.isRtl()){const e=_e(n=o,r="-rtl")?n:((e,t)=>e+t)(n,r);return we(t,e)?e:o}return o;var n,r},kf=(e,t)=>ye(t,Cf(e,t)),zf=(e,t)=>{const o=t();return kf(e,o).getOrThunk(Sf(o))},Of=()=>zp("add-focusable",[Ys((e=>{Ci(e.element,"svg").each((e=>ft(e,"focusable","false")))}))]),Tf=(e,t,o,n)=>{var r,s;const a=(e=>!!yf.isRtl()&&we(wf,e))(t)?["tox-icon--flip"]:[],i=ye(o,Cf(t,o)).or(n).getOrThunk(Sf(o));return{dom:{tag:e.tag,attributes:null!==(r=e.attributes)&&void 0!==r?r:{},classes:e.classes.concat(a),innerHtml:i},behaviours:Nl([...null!==(s=e.behaviours)&&void 0!==s?s:[],Of()])}},Mf=(e,t,o,n=E.none())=>Tf(t,e,o(),n),_f={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Df=Uu({name:"Notification",factory:e=>{const t=bf({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:Nl([kp.config({})])}),o=e=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${e}%`}}}),n=e=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${e}%`}}),r=bf({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(0)]},n(0)],behaviours:Nl([kp.config({})])}),s={updateProgress:(e,t)=>{e.getSystem().isConnected()&&r.getOpt(e).each((e=>{kp.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[o(t)]},n(t)])}))},updateText:(e,o)=>{if(e.getSystem().isConnected()){const n=t.get(e);kp.set(n,[ui(o)])}}},a=J([e.icon.toArray(),e.level.toArray(),e.level.bind((e=>E.from(_f[e]))).toArray()]),i=bf(vf.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Mf("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:t=>{e.onAction(t)}})),l=((e,t,o)=>{const n=o(),r=K(e,(e=>we(n,Cf(e,n))));return Tf(t,r.getOr(xf),n,E.none())})(a,{tag:"div",classes:["tox-notification__icon"]},e.iconProvider),c=[l,{dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:Nl([kp.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map((e=>["tox-notification","tox-notification--in",`tox-notification--${e}`])).getOr(["tox-notification","tox-notification--in"])},behaviours:Nl([Dp.config({}),zp("notification-events",[Us(Jr(),(e=>{i.getOpt(e).each(Dp.focus)}))])]),components:c.concat(e.progress?[r.asSpec()]:[]).concat(e.closeButton?[i.asSpec()]:[]),apis:s}},configFields:[dr("level"),tr("progress"),tr("icon"),tr("onAction"),tr("text"),tr("iconProvider"),tr("translationProvider"),Cr("closeButton",!0)],apis:{updateProgress:(e,t,o)=>{e.updateProgress(t,o)},updateText:(e,t,o)=>{e.updateText(t,o)}}});var Af,Ef,Hf,Bf,Vf=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Rf=tinymce.util.Tools.resolve("tinymce.EditorManager"),Lf=tinymce.util.Tools.resolve("tinymce.Env");(Ef=Af||(Af={})).default="wrap",Ef.floating="floating",Ef.sliding="sliding",Ef.scrolling="scrolling",(Bf=Hf||(Hf={})).auto="auto",Bf.top="top",Bf.bottom="bottom";const Nf=e=>t=>t.options.get(e),If=e=>t=>E.from(e(t)),Ff=e=>{const t=Lf.deviceType.isPhone(),o=Lf.deviceType.isTablet()||t,n=e.options.register,r=e=>s(e)||!1===e,a=e=>s(e)||b(e);n("skin",{processor:e=>s(e)||!1===e,default:"oxide"}),n("skin_url",{processor:"string"}),n("height",{processor:a,default:Math.max(e.getElement().offsetHeight,400)}),n("width",{processor:a,default:Vf.DOM.getStyle(e.getElement(),"width")}),n("min_height",{processor:"number",default:100}),n("min_width",{processor:"number"}),n("max_height",{processor:"number"}),n("max_width",{processor:"number"}),n("style_formats",{processor:"object[]"}),n("style_formats_merge",{processor:"boolean",default:!1}),n("style_formats_autohide",{processor:"boolean",default:!1}),n("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),n("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),n("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),n("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),n("content_langs",{processor:"object[]"}),n("removed_menuitems",{processor:"string",default:""}),n("menubar",{processor:e=>s(e)||g(e),default:!t}),n("menu",{processor:"object",default:{}}),n("toolbar",{processor:e=>g(e)||s(e)||m(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),F(9,(e=>{n("toolbar"+(e+1),{processor:"string"})})),n("toolbar_mode",{processor:"string",default:o?"scrolling":"floating"}),n("toolbar_groups",{processor:"object",default:{}}),n("toolbar_location",{processor:"string",default:Hf.auto}),n("toolbar_persist",{processor:"boolean",default:!1}),n("toolbar_sticky",{processor:"boolean",default:e.inline}),n("toolbar_sticky_offset",{processor:"number",default:0}),n("fixed_toolbar_container",{processor:"string",default:""}),n("fixed_toolbar_container_target",{processor:"object"}),n("file_picker_callback",{processor:"function"}),n("file_picker_validator_handler",{processor:"function"}),n("file_picker_types",{processor:"string"}),n("typeahead_urls",{processor:"boolean",default:!0}),n("anchor_top",{processor:r,default:"#top"}),n("anchor_bottom",{processor:r,default:"#bottom"}),n("draggable_modal",{processor:"boolean",default:!1}),n("statusbar",{processor:"boolean",default:!0}),n("elementpath",{processor:"boolean",default:!0}),n("branding",{processor:"boolean",default:!0}),n("resize",{processor:e=>"both"===e||g(e),default:!Lf.deviceType.isTouch()})},Pf=Nf("readonly"),jf=Nf("height"),Uf=Nf("width"),Wf=If(Nf("min_width")),$f=If(Nf("min_height")),Gf=If(Nf("max_width")),qf=If(Nf("max_height")),Kf=If(Nf("style_formats")),Xf=Nf("style_formats_merge"),Jf=Nf("style_formats_autohide"),Yf=Nf("content_langs"),Zf=Nf("removed_menuitems"),Qf=Nf("toolbar_mode"),ev=Nf("toolbar_groups"),tv=Nf("toolbar_location"),ov=Nf("fixed_toolbar_container"),nv=Nf("fixed_toolbar_container_target"),rv=Nf("toolbar_persist"),sv=Nf("toolbar_sticky_offset"),av=Nf("menubar"),iv=Nf("toolbar"),lv=Nf("file_picker_callback"),cv=Nf("file_picker_validator_handler"),dv=Nf("file_picker_types"),mv=Nf("typeahead_urls"),uv=Nf("anchor_top"),gv=Nf("anchor_bottom"),hv=Nf("draggable_modal"),pv=Nf("statusbar"),fv=Nf("elementpath"),vv=Nf("branding"),bv=Nf("resize"),yv=Nf("paste_as_text"),wv=e=>!1===e.options.get("skin"),xv=e=>!1!==e.options.get("menubar"),Sv=e=>{const t=e.options.get("skin_url");if(wv(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);{const t=e.options.get("skin");return Rf.baseURL+"/skins/ui/"+t}},Cv=e=>e.options.get("line_height_formats").split(" "),kv=e=>{const t=iv(e),o=s(t),n=m(t)&&t.length>0;return!Ov(e)&&(n||o||!0===t)},zv=e=>{const t=F(9,(t=>e.options.get("toolbar"+(t+1)))),o=$(t,s);return ze(o.length>0,o)},Ov=e=>zv(e).fold((()=>{const t=iv(e);return y(t,s)&&t.length>0}),D),Tv=e=>tv(e)===Hf.bottom,Mv=e=>{if(!e.inline)return E.none();const t=ov(e);if(t.length>0)return ki(gt(),t);const o=nv(e);return f(o)?E.some(Ve.fromDom(o)):E.none()},_v=e=>e.inline&&Mv(e).isSome(),Dv=e=>Mv(e).getOrThunk((()=>lt(it(Ve.fromDom(e.getElement()))))),Av=e=>e.inline&&!xv(e)&&!kv(e)&&!Ov(e),Ev=e=>(e.options.get("toolbar_sticky")||e.inline)&&!_v(e)&&!Av(e),Hv=e=>{const t=e.options.get("menu");return ue(t,(e=>l(i({},e),{items:e.items})))};var Bv=Object.freeze({__proto__:null,get ToolbarMode(){return Af},get ToolbarLocation(){return Hf},register:Ff,getSkinUrl:Sv,isReadOnly:Pf,isSkinDisabled:wv,getHeightOption:jf,getWidthOption:Uf,getMinWidthOption:Wf,getMinHeightOption:$f,getMaxWidthOption:Gf,getMaxHeightOption:qf,getUserStyleFormats:Kf,shouldMergeStyleFormats:Xf,shouldAutoHideStyleFormats:Jf,getLineHeightFormats:Cv,getContentLanguages:Yf,getRemovedMenuItems:Zf,isMenubarEnabled:xv,isMultipleToolbars:Ov,isToolbarEnabled:kv,isToolbarPersist:rv,getMultipleToolbarsOption:zv,getUiContainer:Dv,useFixedContainer:_v,getToolbarMode:Qf,isDraggableModal:hv,isDistractionFree:Av,isStickyToolbar:Ev,getStickyToolbarOffset:sv,getToolbarLocation:tv,isToolbarLocationBottom:Tv,getToolbarGroups:ev,getMenus:Hv,getMenubar:av,getToolbar:iv,getFilePickerCallback:lv,getFilePickerTypes:dv,useTypeaheadUrls:mv,getAnchorTop:uv,getAnchorBottom:gv,getFilePickerValidatorHandler:cv,useStatusBar:pv,useElementPath:fv,useBranding:vv,getResize:bv,getPasteAsText:yv});const Vv="[data-mce-autocompleter]",Rv=e=>zi(e,Vv),Lv=(e,t)=>{const o=(e,t)=>{Vs(e,Zr(),{raw:t})},n=()=>e.getView().bind(yg.getHighlighted);t.on("keydown",(t=>{const r=t.which;e.isActive()&&(e.isMenuOpen()?13===r?(n().each(Rs),t.preventDefault()):40===r?(n().fold((()=>{e.getView().each(yg.highlightFirst)}),(e=>{o(e,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==r&&38!==r&&39!==r||n().each((e=>{o(e,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==r&&38!==r&&40!==r||e.cancelIfNecessary())})),t.on("NodeChange",(t=>{e.isActive()&&!e.isProcessingAction()&&Rv(Ve.fromDom(t.element)).isNone()&&e.cancelIfNecessary()}))};var Nv,Iv;(Iv=Nv||(Nv={}))[Iv.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Iv[Iv.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var Fv=Nv;const Pv="tox-menu-nav__js",jv="tox-collection__item",Uv="tox-swatch",Wv={normal:Pv,color:Uv},$v="tox-collection__item--enabled",Gv="tox-collection__item-icon",qv="tox-collection__item-label",Kv="tox-collection__item-caret",Xv="tox-collection__item--active",Jv="tox-collection__item-container",Yv="tox-collection__item-container--row",Zv=e=>ye(Wv,e).getOr(Pv),Qv=e=>"color"===e?"tox-swatches":"tox-menu",eb=e=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Qv(e),tieredMenu:"tox-tiered-menu"}),tb=e=>{const t=eb(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:Zv(e)}},ob=(e,t,o)=>{const n=eb(o);return{tag:"div",classes:J([[n.menu,`tox-menu-${t}-column`],e?[n.hasIcons]:[]])}},nb=[lf.parts.items({})],rb=(e,t,o)=>{const n=eb(o);return{dom:{tag:"div",classes:J([[n.tieredMenu]])},markers:tb(o)}},sb=(e,t)=>o=>{const n=P(o,t);return j(n,(t=>({dom:e,components:t})))},ab=(e,t)=>{const o=[];let n=[];return U(e,((e,r)=>{t(e,r)?(n.length>0&&o.push(n),n=[],(we(e.dom,"innerHtml")||e.components.length>0)&&n.push(e)):n.push(e)})),n.length>0&&o.push(n),j(o,(e=>({dom:{tag:"div",classes:["tox-collection__group"]},components:e})))},ib=(e,t,o=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[lf.parts.items({preprocess:o=>"auto"!==e&&e>1?sb({tag:"div",classes:["tox-collection__group"]},e)(o):ab(o,((e,o)=>"separator"===t[o].type))})]}),lb=e=>I(e,(e=>"icon"in e&&void 0!==e.icon)),cb=e=>E.none(),db=(e,t,o,n,r)=>{const s=(a=o,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[lf.parts.items({preprocess:e=>ab(e,((e,t)=>"separator"===a[t].type))})]});var a;return{value:e,dom:s.dom,components:s.components,items:o}},mb=(e,t,o,n,r)=>{if("color"===r){const t=(e=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[lf.parts.items({preprocess:"auto"!==e?sb({tag:"div",classes:["tox-swatches__row"]},e):C})]}]}))(n);return{value:e,dom:t.dom,components:t.components,items:o}}if("normal"===r&&"auto"===n){const t=ib(n,o);return{value:e,dom:t.dom,components:t.components,items:o}}if("normal"===r&&1===n){const t=ib(1,o);return{value:e,dom:t.dom,components:t.components,items:o}}if("normal"===r){const t=ib(n,o);return{value:e,dom:t.dom,components:t.components,items:o}}if("listpreview"===r&&"auto"!==n){const t=(e=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[lf.parts.items({preprocess:sb({tag:"div",classes:["tox-collection__group"]},e)})]}))(n);return{value:e,dom:t.dom,components:t.components,items:o}}return{value:e,dom:ob(t,n,r),components:nb,items:o}},ub=rr("type"),gb=rr("name"),hb=rr("label"),pb=rr("text"),fb=rr("title"),vb=rr("icon"),bb=rr("value"),yb=ar("fetch"),wb=ar("getSubmenuItems"),xb=ar("onAction"),Sb=ar("onItemAction"),Cb=kr("onSetup",(()=>w)),kb=gr("name"),zb=gr("text"),Ob=gr("icon"),Tb=gr("tooltip"),Mb=gr("label"),_b=gr("shortcut"),Db=pr("select"),Ab=Cr("active",!1),Eb=Cr("borderless",!1),Hb=Cr("enabled",!0),Bb=Cr("primary",!1),Vb=e=>br("columns",e),Rb=br("meta",{}),Lb=kr("onAction",w),Nb=e=>xr("type",e),Ib=e=>Zn("name","name",pn((()=>da(`${e}-name`))),Nn),Fb=Dn([ub,zb]),Pb=Dn([Nb("autocompleteitem"),Ab,Hb,Rb,bb,zb,Ob]),jb=[Hb,Tb,Ob,zb,Cb],Ub=Dn([ub,xb].concat(jb)),Wb=e=>qn("toolbarbutton",Ub,e),$b=[Ab].concat(jb),Gb=Dn($b.concat([ub,xb])),qb=e=>qn("ToggleButton",Gb,e),Kb=[kr("predicate",_),Sr("scope","node",["node","editor"]),Sr("position","selection",["node","selection","line"])],Xb=jb.concat([Nb("contextformbutton"),Bb,xb,Qn("original",C)]),Jb=$b.concat([Nb("contextformbutton"),Bb,xb,Qn("original",C)]),Yb=jb.concat([Nb("contextformbutton")]),Zb=$b.concat([Nb("contextformtogglebutton")]),Qb=Yn("type",{contextformbutton:Xb,contextformtogglebutton:Jb}),ey=Dn([Nb("contextform"),kr("initValue",S("")),Mb,cr("commands",Qb),mr("launch",Yn("type",{contextformbutton:Yb,contextformtogglebutton:Zb}))].concat(Kb)),ty=Dn([Nb("contexttoolbar"),rr("items")].concat(Kb)),oy=[ub,rr("src"),gr("alt"),zr("classes",[],Nn)],ny=Dn(oy),ry=[ub,pb,kb,zr("classes",["tox-collection__item-label"],Nn)],sy=Dn(ry),ay=Tn((()=>Wn("type",{cardimage:ny,cardtext:sy,cardcontainer:iy}))),iy=Dn([ub,xr("direction","horizontal"),xr("align","left"),xr("valign","middle"),cr("items",ay)]),ly=[Hb,zb,_b,(cy="menuitem",Zn("value","value",pn((()=>da(`${cy}-value`))),Vn())),Rb];var cy;const dy=Dn([ub,Mb,cr("items",ay),Cb,Lb].concat(ly)),my=Dn([ub,Ab,Ob].concat(ly)),uy=[ub,rr("fancytype"),Lb],gy=[br("initData",{})].concat(uy),hy=[Or("initData",{},[Cr("allowCustomColors",!0),fr("colors",Vn())])].concat(uy),py=Yn("fancytype",{inserttable:gy,colorswatch:hy}),fy=Dn([ub,Cb,Lb,Ob].concat(ly)),vy=Dn([ub,wb,Cb,Ob].concat(ly)),by=Dn([ub,Ob,Ab,Cb,xb].concat(ly)),yy=(e,t,o)=>{const n=hd(e.element,"."+o);if(n.length>0){const e=X(n,(e=>{const o=e.dom.getBoundingClientRect().top,r=n[0].dom.getBoundingClientRect().top;return Math.abs(o-r)>t})).getOr(n.length);return E.some({numColumns:e,numRows:Math.ceil(n.length/e)})}return E.none()},wy=(e,t)=>Nl([zp(e,t)]),xy=e=>wy(da("unnamed-events"),e),Sy=da("tooltip.exclusive"),Cy=da("tooltip.show"),ky=da("tooltip.hide"),zy=(e,t,o)=>{e.getSystem().broadcastOn([Sy],{})};var Oy=Object.freeze({__proto__:null,hideAllExclusive:zy,setComponents:(e,t,o,n)=>{o.getTooltip().each((e=>{e.getSystem().isConnected()&&kp.set(e,n)}))}});var Ty=Object.freeze({__proto__:null,events:(e,t)=>{const o=o=>{t.getTooltip().each((n=>{sm(n),e.onHide(o,n),t.clearTooltip()})),t.clearTimer()};return Fs(J([[Us(Cy,(o=>{t.resetTimer((()=>{(o=>{if(!t.isShowing()){zy(o);const n=e.lazySink(o).getOrDie(),r=o.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Fs("normal"===e.mode?[Us(Xr(),(e=>{Bs(o,Cy)})),Us(qr(),(e=>{Bs(o,ky)}))]:[]),behaviours:Nl([kp.config({})])});t.setTooltip(r),om(n,r),e.onShow(o,r),Kd.position(n,r,{anchor:e.anchor(o)})}})(o)}),e.delay)})),Us(ky,(n=>{t.resetTimer((()=>{o(n)}),e.delay)})),Us(us(),((e,t)=>{const n=t;n.universal||N(n.channels,Sy)&&o(e)})),Zs((e=>{o(e)}))],"normal"===e.mode?[Us(Jr(),(e=>{Bs(e,Cy)})),Us(ds(),(e=>{Bs(e,ky)})),Us(Xr(),(e=>{Bs(e,Cy)})),Us(qr(),(e=>{Bs(e,ky)}))]:[Us(Es(),((e,t)=>{Bs(e,Cy)})),Us(Hs(),(e=>{Bs(e,ky)}))]]))}}),My=[tr("lazySink"),tr("tooltipDom"),br("exclusive",!0),br("tooltipComponents",[]),br("delay",300),Sr("mode","normal",["normal","follow-highlight"]),br("anchor",(e=>({type:"hotspot",hotspot:e,layouts:{onLtr:S([Cl,Sl,bl,wl,yl,xl]),onRtl:S([Cl,Sl,bl,wl,yl,xl])}}))),$i("onHide"),$i("onShow")];const _y=Fl({fields:My,name:"tooltipping",active:Ty,state:Object.freeze({__proto__:null,init:()=>{const e=gc(),t=gc(),o=()=>{e.on(clearTimeout)},n=S("not-implemented");return Ma({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:o,resetTimer:(t,n)=>{o(),e.set(setTimeout(t,n))},readState:n})}}),apis:Oy}),Dy="silver.readonly",Ay=Dn([(Ey="readonly",or(Ey,In))]);var Ey;const Hy=(e,t)=>{const o=e.outerContainer.element;t&&(e.mothership.broadcastOn([wm()],{target:o}),e.uiMothership.broadcastOn([wm()],{target:o})),e.mothership.broadcastOn([Dy],{readonly:t}),e.uiMothership.broadcastOn([Dy],{readonly:t})},By=(e,t)=>{e.on("init",(()=>{e.mode.isReadOnly()&&Hy(t,!0)})),e.on("SwitchMode",(()=>Hy(t,e.mode.isReadOnly()))),Pf(e)&&e.mode.set("readonly")},Vy=()=>Wl.config({channels:{[Dy]:{schema:Ay,onReceive:(e,t)=>{lg.set(e,t.readonly)}}}}),Ry=e=>lg.config({disabled:e,disableClass:"tox-collection__item--state-disabled"}),Ly=e=>lg.config({disabled:e}),Ny=e=>lg.config({disabled:e,disableClass:"tox-tbtn--disabled"}),Iy=e=>lg.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1}),Fy=(e,t)=>{const o=e.getApi(t);return e=>{e(o)}},Py=(e,t)=>Ys((o=>{Fy(e,o)((o=>{const n=e.onSetup(o);v(n)&&t.set(n)}))})),jy=(e,t)=>Zs((o=>Fy(e,o)(t.get()))),Uy=(e,t)=>ea(((o,n)=>{Fy(e,o)(e.onAction),e.triggersSubmenu||t!==Fv.CLOSE_ON_EXECUTE||(o.getSystem().isConnected()&&Bs(o,vs()),n.stop())})),Wy={[gs()]:["disabling","alloy.base.behaviour","toggling","item-events"]},$y=Ce,Gy=(e,t,o,n)=>{const r=Tr(w);return{type:"item",dom:t.dom,components:$y(t.optComponents),data:e.data,eventOrder:Wy,hasSubmenu:e.triggersSubmenu,itemBehaviours:Nl([zp("item-events",[Uy(e,o),Py(e,r),jy(e,r)]),Ry((()=>!e.enabled||n.isDisabled())),Vy(),kp.config({})].concat(e.itemBehaviours))}},qy=e=>({value:e.value,meta:i({text:e.text.getOr("")},e.meta)}),Ky=e=>{const t=Lf.os.isMacOS()||Lf.os.isiOS(),o=t?{alt:"",ctrl:"",shift:"",meta:"",access:""}:{meta:"Ctrl",access:"Shift+Alt"},n=e.split("+"),r=j(n,(e=>{const t=e.toLowerCase().trim();return we(o,t)?o[t]:e}));return t?r.join(""):r.join("+")},Xy=(e,t,o=[Gv])=>Mf(e,{tag:"div",classes:o},t),Jy=e=>({dom:{tag:"div",classes:[qv]},components:[ui(yf.translate(e))]}),Yy=(e,t)=>({dom:{tag:"div",classes:t,innerHtml:e}}),Zy=(e,t)=>({dom:{tag:"div",classes:[qv]},components:[{dom:{tag:e.tag,styles:e.styles},components:[ui(yf.translate(t))]}]}),Qy=e=>({dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[ui(Ky(e))]}),ew=e=>Xy("checkmark",e,["tox-collection__item-checkmark"]),tw=(e,t,o)=>{const n=e.ariaLabel,r=e.value,s=e.iconContent.map((e=>((e,t,o)=>{const n=t();return kf(e,n).or(o).getOrThunk(Sf(n))})(e,t.icons,o)));return{dom:(()=>{const e=s.getOr(""),o={tag:"div",attributes:n.map((e=>({title:t.translate(e)}))).getOr({}),classes:["tox-swatch"]};return l(i({},o),"custom"===r?{tag:"button",classes:[...o.classes,"tox-swatches__picker-btn"],innerHtml:e}:"remove"===r?{classes:[...o.classes,"tox-swatch--remove"],innerHtml:e}:{attributes:l(i({},o.attributes),{"data-mce-color":r}),styles:{"background-color":r}})})(),optComponents:[]}},ow=e=>{const t=e.map((e=>({attributes:{title:yf.translate(e)}}))).getOr({});return i({tag:"div",classes:[Pv,jv]},t)},nw=(e,t,o,n=E.none())=>"color"===e.presets?tw(e,t,n):((e,t,o,n)=>{const r={tag:"div",classes:[Gv]},s=o?e.iconContent.map((e=>Mf(e,r,t.icons,n))).orThunk((()=>E.some({dom:r}))):E.none(),a=e.checkMark,i=E.from(e.meta).fold((()=>Jy),(e=>we(e,"style")?z(Zy,e.style):Jy)),l=e.htmlContent.fold((()=>e.textContent.map(i)),(e=>E.some(Yy(e,[qv]))));return{dom:ow(e.ariaLabel),optComponents:[s,l,e.shortcutContent.map(Qy),a,e.caret]}})(e,t,o,n),rw=(e,t)=>ye(e,"tooltipWorker").map((e=>[_y.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:e=>({type:"submenu",item:e,overrides:{maxHeightFunction:Mc}}),mode:"follow-highlight",onShow:(t,o)=>{e((e=>{_y.setComponents(t,[gi({element:Ve.fromDom(e)})])}))}})])).getOr([]),sw=(e,t)=>{const o=(e=>Vf.DOM.encode(e))(yf.translate(e));if(t.length>0){const e=new RegExp((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t),"gi");return o.replace(e,(e=>`<span class="tox-autocompleter-highlight">${e}</span>`))}return o},aw=(e,t)=>j(e,(e=>{switch(e.type){case"cardcontainer":return((e,t)=>{const o="vertical"===e.direction?"tox-collection__item-container--column":Yv,n="left"===e.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[Jv,o,n,(()=>{switch(e.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}})()]},components:t}})(e,aw(e.items,t));case"cardimage":return o=e.src,n=e.classes,r=e.alt,{dom:{tag:"img",classes:n,attributes:{src:o,alt:r.getOr("")}}};case"cardtext":const s=e.name.exists((e=>N(t.cardText.highlightOn,e))),a=s?E.from(t.cardText.matchText).getOr(""):"";return Yy(sw(e.text,a),e.classes)}var o,n,r})),iw=Su(ef(),tf()),lw=e=>({value:e}),cw=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,dw=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,mw=e=>cw.test(e)||dw.test(e),uw=e=>{return(t=e,o="#",Me(t,o)?((e,t)=>e.substring(t))(t,o.length):t).toUpperCase();var t,o},gw=e=>{const t=(e=>{const t=e.value.replace(cw,((e,t,o,n)=>t+t+o+o+n+n));return{value:t}})(e),o=dw.exec(t.value);return null===o?["FFFFFF","FF","FF","FF"]:o},hw=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},pw=e=>{const t=hw(e.red)+hw(e.green)+hw(e.blue);return lw(t)},fw=Math.min,vw=Math.max,bw=Math.round,yw=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ww=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,xw=(e,t,o,n)=>({red:e,green:t,blue:o,alpha:n}),Sw=e=>{const t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},Cw=e=>{let t,o,n;const r=(e.hue||0)%360;let s=e.saturation/100,a=e.value/100;if(s=vw(0,fw(s,1)),a=vw(0,fw(a,1)),0===s)return t=o=n=bw(255*a),xw(t,o,n,1);const i=r/60,l=a*s,c=l*(1-Math.abs(i%2-1)),d=a-l;switch(Math.floor(i)){case 0:t=l,o=c,n=0;break;case 1:t=c,o=l,n=0;break;case 2:t=0,o=l,n=c;break;case 3:t=0,o=c,n=l;break;case 4:t=c,o=0,n=l;break;case 5:t=l,o=0,n=c;break;default:t=o=n=0}return t=bw(255*(t+d)),o=bw(255*(o+d)),n=bw(255*(n+d)),xw(t,o,n,1)},kw=e=>{const t=gw(e),o=parseInt(t[1],16),n=parseInt(t[2],16),r=parseInt(t[3],16);return xw(o,n,r,1)},zw=(e,t,o,n)=>{const r=parseInt(e,10),s=parseInt(t,10),a=parseInt(o,10),i=parseFloat(n);return xw(r,s,a,i)},Ow=e=>{if("transparent"===e)return E.some(xw(0,0,0,0));const t=yw.exec(e);if(null!==t)return E.some(zw(t[1],t[2],t[3],"1"));const o=ww.exec(e);return null!==o?E.some(zw(o[1],o[2],o[3],o[4])):E.none()},Tw=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,Mw=xw(255,0,0,1),_w=(e,t)=>e.dispatch("ResizeContent",t),Dw=(e,t,o)=>({hue:e,saturation:t,value:o}),Aw=e=>{let t=0,o=0,n=0;const r=e.red/255,s=e.green/255,a=e.blue/255,i=Math.min(r,Math.min(s,a)),l=Math.max(r,Math.max(s,a));if(i===l)return n=i,Dw(0,0,100*n);return t=r===i?3:a===i?1:5,t=60*(t-(r===i?s-a:a===i?r-s:a-r)/(l-i)),o=(l-i)/l,n=l,Dw(Math.round(t),Math.round(100*o),Math.round(100*n))},Ew=e=>pw(Cw(e)),Hw=e=>{return(t=e,mw(t)?E.some({value:uw(t)}):E.none()).orThunk((()=>Ow(e).map(pw))).getOrThunk((()=>{const t=document.createElement("canvas");t.height=1,t.width=1;const o=t.getContext("2d");o.clearRect(0,0,t.width,t.height),o.fillStyle="#FFFFFF",o.fillStyle=e,o.fillRect(0,0,1,1);const n=o.getImageData(0,0,1,1).data,r=n[0],s=n[1],a=n[2],i=n[3];return pw(xw(r,s,a,i))}));var t};var Bw=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const Vw="tinymce-custom-colors";const Rw=((e=10)=>{const t=Bw.getItem(Vw),o=s(t)?JSON.parse(t):[],n=e-(r=o).length<0?r.slice(0,e):r;var r;const a=e=>{n.splice(e,1)};return{add:t=>{L(n,t).each(a),n.unshift(t),n.length>e&&n.pop(),Bw.setItem(Vw,JSON.stringify(n))},state:()=>n.slice(0)}})(10),Lw=e=>{const t=[];for(let o=0;o<e.length;o+=2)t.push({text:e[o+1],value:"#"+Hw(e[o]).value,type:"choiceitem"});return t},Nw=e=>t=>t.options.get(e),Iw=Nw("color_cols"),Fw=Nw("custom_colors"),Pw=Nw("color_map"),jw=e=>{Rw.add(e)},Uw="#000000",Ww=e=>{const t="choiceitem",o={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[o,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[o]},$w=(e,t,o,n)=>{if("custom"===o){Yw(e)((o=>{o.each((o=>{jw(o),e.execCommand("mceApplyTextcolor",t,o),n(o)}))}),Uw)}else"remove"===o?(n(""),e.execCommand("mceRemoveTextcolor",t)):(n(o),e.execCommand("mceApplyTextcolor",t,o))},Gw=(e,t)=>e.concat(j(Rw.state(),(e=>({type:"choiceitem",text:e,value:e}))).concat(Ww(t))),qw=(e,t)=>o=>{o(Gw(e,t))},Kw=(e,t,o)=>{const n="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(n,o)},Xw=(e,t,o,n,r)=>{e.ui.registry.addSplitButton(t,{tooltip:n,presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:t=>{const n=((e,t)=>{let o;return e.dom.getParents(e.selection.getStart(),(e=>{let n;(n=e.style["forecolor"===t?"color":"background-color"])&&(o=o||n)})),E.from(o)})(e,o);return n.bind((e=>Ow(e).map((e=>{const o=pw(e).value;return Te(t.toLowerCase(),o)})))).getOr(!1)},columns:Iw(e),fetch:qw(Pw(e),Fw(e)),onAction:t=>{$w(e,o,r.get(),w)},onItemAction:(n,s)=>{$w(e,o,s,(o=>{r.set(o),((e,t)=>{e.dispatch("TextColorChange",t)})(e,{name:t,color:o})}))},onSetup:o=>{Kw(o,t,r.get());const n=e=>{e.name===t&&Kw(o,e.name,e.color)};return e.on("TextColorChange",n),()=>{e.off("TextColorChange",n)}}})},Jw=(e,t,o,n)=>{e.ui.registry.addNestedMenuItem(t,{text:n,icon:"forecolor"===t?"text-color":"highlight-bg-color",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",onAction:t=>{$w(e,o,t.value,w)}}]})},Yw=e=>(t,o)=>{let n=!1;const r={colorpicker:o};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onAction:(e,t)=>{"hex-valid"===t.name&&(n=t.value)},onSubmit:o=>{const r=o.getData().colorpicker;n?(t(E.from(r)),o.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",r]))},onClose:w,onCancel:()=>{t(E.none())}})},Zw=(e,t,o,n,r,s,a,i)=>{const l=lb(t),c=Qw(t,o,n,"color"!==r?"normal":"color",s,a,i);return mb(e,l,c,n,r)},Qw=(e,t,o,n,r,s,a)=>Ce(j(e,(i=>{return"choiceitem"===i.type?(l=i,qn("choicemenuitem",my,l)).fold(cb,(l=>E.some(((e,t,o,n,r,s,a,i=!0)=>{const l=nw({presets:o,textContent:t?e.text:E.none(),htmlContent:E.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:E.none(),checkMark:t?E.some(ew(a.icons)):E.none(),caret:E.none(),value:e.value},a,i);return gn(Gy({data:qy(e),enabled:e.enabled,getApi:e=>({setActive:t=>{jp.set(e,t)},isActive:()=>jp.isOn(e),isEnabled:()=>!lg.isDisabled(e),setEnabled:t=>lg.set(e,!t)}),onAction:t=>n(e.value),onSetup:e=>(e.setActive(r),w),triggersSubmenu:!1,itemBehaviours:[]},l,s,a),{toggling:{toggleClass:$v,toggleOnExecute:!1,selected:e.active}})})(l,1===o,n,t,s(i.value),r,a,lb(e))))):E.none();var l}))),ex=(e,t)=>{const o=tb(t);if(1===e)return{mode:"menu",moveOnTab:!0};if("auto"===e)return{mode:"grid",selector:"."+o.item,initSize:{numColumns:1,numRows:1}};return{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group")}},tx=(e,t)=>{const o=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold((()=>Gw(t.colorinput.getColors(),o)),(e=>e.concat(Ww(o))))},ox=da("cell-over"),nx=da("cell-execute"),rx=(e,t,o)=>{const n=o=>Vs(o,nx,{row:e,col:t}),r=(e,t)=>{t.stop(),n(e)};return fi({dom:{tag:"div",attributes:{role:"button","aria-labelledby":o}},behaviours:Nl([zp("insert-table-picker-cell",[Us(Xr(),Dp.focus),Us(gs(),n),Us(os(),r),Us(ps(),r)]),jp.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Dp.config({onFocus:o=>Vs(o,ox,{row:e,col:t})})])})},sx=e=>Y(e,(e=>j(e,vi))),ax=(e,t)=>ui(`${t}x${e}`),ix={inserttable:e=>{const t=da("size-label"),o=((e,t,o)=>{const n=[];for(let r=0;r<t;r++){const t=[];for(let n=0;n<o;n++)t.push(rx(r,n,e));n.push(t)}return n})(t,10,10),n=ax(0,0),r=bf({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:t}},components:[n],behaviours:Nl([kp.config({})])});return{type:"widget",data:{value:da("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[iw.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:sx(o).concat(r.asSpec()),behaviours:Nl([zp("insert-table-picker",[Ys((e=>{kp.set(r.get(e),[n])})),qs(ox,((e,t,n)=>{const{row:s,col:a}=n.event;((e,t,o,n,r)=>{for(let s=0;s<n;s++)for(let n=0;n<r;n++)jp.set(e[s][n],s<=t&&n<=o)})(o,s,a,10,10),kp.set(r.get(e),[ax(s+1,a+1)])})),qs(nx,((t,o,n)=>{const{row:r,col:s}=n.event;e.onAction({numRows:r+1,numColumns:s+1}),Bs(t,vs())}))]),pp.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:(e,t)=>{const o=tx(e,t),n=t.colorinput.getColorCols(),r="color",s=Zw(da("menu-value"),o,(t=>{e.onAction({value:t})}),n,r,Fv.CLOSE_ON_EXECUTE,_,t.shared.providers),a=l(i({},s),{markers:tb(r),movement:ex(n,r)});return{type:"widget",data:{value:da("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[iw.widget(lf.sketch(a))]}}},lx=(e,t,o,n,r,s,a,i=!0)=>{const l=nw({presets:n,textContent:E.none(),htmlContent:o?e.text.map((e=>sw(e,t))):E.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:E.none(),checkMark:E.none(),caret:E.none(),value:e.value},a.providers,i,e.icon);return Gy({data:qy(e),enabled:e.enabled,getApi:S({}),onAction:t=>r(e.value,e.meta),onSetup:S(w),triggersSubmenu:!1,itemBehaviours:rw(e.meta,a)},l,s,a.providers)},cx=e=>({type:"separator",dom:{tag:"div",classes:[jv,"tox-collection__group-heading"]},components:e.text.map(ui).toArray()}),dx=(e,t,o,n=!0)=>{const r=nw({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:E.none(),ariaLabel:e.text,caret:E.none(),checkMark:E.none(),shortcutContent:e.shortcut},o,n);return Gy({data:qy(e),getApi:e=>({isEnabled:()=>!lg.isDisabled(e),setEnabled:t=>lg.set(e,!t)}),enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,t,o)},mx=(e,t,o,n=!0,r=!1)=>{const s=r?(a=o.icons,Xy("chevron-down",a,[Kv])):(e=>Xy("chevron-right",e,[Kv]))(o.icons);var a;const i=nw({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:E.none(),ariaLabel:e.text,caret:E.some(s),checkMark:E.none(),shortcutContent:e.shortcut},o,n);return Gy({data:qy(e),getApi:e=>({isEnabled:()=>!lg.isDisabled(e),setEnabled:t=>lg.set(e,!t)}),enabled:e.enabled,onAction:w,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},i,t,o)},ux=(e,t,o,n=!0)=>{const r=nw({iconContent:e.icon,textContent:e.text,htmlContent:E.none(),ariaLabel:e.text,checkMark:E.some(ew(o.icons)),caret:E.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},o,n);return gn(Gy({data:qy(e),enabled:e.enabled,getApi:e=>({setActive:t=>{jp.set(e,t)},isActive:()=>jp.isOn(e),isEnabled:()=>!lg.isDisabled(e),setEnabled:t=>lg.set(e,!t)}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},r,t,o),{toggling:{toggleClass:$v,toggleOnExecute:!1,selected:e.active}})},gx=(e,t)=>ye(ix,e.fancytype).map((o=>o(e,t))),hx=(e,t,o,n)=>{const r={dom:ow(e.label),optComponents:[E.some({dom:{tag:"div",classes:[Jv,Yv]},components:aw(e.items,n)})]};return Gy({data:qy(i({text:E.none()},e)),enabled:e.enabled,getApi:e=>({isEnabled:()=>!lg.isDisabled(e),setEnabled:t=>{lg.set(e,!t),U(hd(e.element,"*"),(o=>{e.getSystem().getByDom(o).each((e=>{e.hasConfigured(lg)&&lg.set(e,!t)}))}))}}),onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:E.from(n.itemBehaviours).getOr([])},r,t,o.providers)};var px,fx;(fx=px||(px={}))[fx.ContentFocus=0]="ContentFocus",fx[fx.UiFocus=1]="UiFocus";const vx=(e,t,o,n,r)=>{const s=o.shared.providers,a=e=>r?l(i({},e),{shortcut:E.none(),icon:e.text.isSome()?E.none():e.icon}):e;switch(e.type){case"menuitem":return(c=e,qn("menuitem",fy,c)).fold(cb,(e=>E.some(dx(a(e),t,s,n))));case"nestedmenuitem":return(e=>qn("nestedmenuitem",vy,e))(e).fold(cb,(e=>E.some(mx(a(e),t,s,n,r))));case"togglemenuitem":return(e=>qn("togglemenuitem",by,e))(e).fold(cb,(e=>E.some(ux(a(e),t,s,n))));case"separator":return(e=>qn("separatormenuitem",Fb,e))(e).fold(cb,(e=>E.some(cx(e))));case"fancymenuitem":return(e=>qn("fancymenuitem",py,e))(e).fold(cb,(e=>gx(a(e),o)));default:return E.none()}var c},bx=(e,t,o,n,r,s,a)=>{const c=1===n,d=!c||lb(e);return Ce(j(e,(e=>{switch(e.type){case"separator":return(n=e,qn("Autocompleter.Separator",Fb,n)).fold(cb,(e=>E.some(cx(e))));case"cardmenuitem":return(e=>qn("cardmenuitem",dy,e))(e).fold(cb,(e=>E.some(hx(l(i({},e),{onAction:t=>{e.onAction(t),o(e.value,e.meta)}}),r,s,{itemBehaviours:rw(e.meta,s),cardText:{matchText:t,highlightOn:a}}))));default:return(e=>qn("Autocompleter.Item",Pb,e))(e).fold(cb,(e=>E.some(lx(e,t,c,"normal",o,r,s,d))))}var n})))},yx=(e,t,o,n,r)=>{const s=lb(t),a=Ce(j(t,(e=>{const t=e=>vx(e,o,n,(e=>r?!we(e,"text"):s)(e),r);return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t(l(i({},e),{enabled:!1})):t(e)})));return(r?db:mb)(e,s,a,1,"normal")},wx=e=>hf.singleData(e.value,e),xx=(e,t)=>{const o=Tr(!1),n=Tr(!1),r=fi(pf.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Nl([zp("dismissAutocompleter",[Us(Os(),(()=>l()))])]),lazySink:t.getSink})),s=()=>pf.isOpen(r),a=n.get,i=()=>{s()&&pf.hide(r)},l=()=>e.execCommand("mceAutocompleterClose"),c=n=>{const r=le(n,(e=>E.from(e.columns))).getOr(1);return Y(n,(n=>{const s=n.items;return bx(s,n.matchText,((t,r)=>{const s=e.selection.getRng();var a,c;(a=e.dom,c=s,Rv(Ve.fromDom(c.startContainer)).map((e=>{const t=a.createRng();return t.selectNode(e.dom),t}))).each((s=>{const a={hide:()=>l(),reload:t=>{i(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:t})}};o.set(!0),n.onAction(a,s,t,r),o.set(!1)}))}),r,Fv.BUBBLE_TO_SANDBOX,t,n.highlightOn)}))},d=(t,o)=>{var n;(n=Ve.fromDom(e.getBody()),ki(n,Vv)).each((n=>{const s=le(t,(e=>E.from(e.columns))).getOr(1);pf.showAt(r,lf.sketch(((e,t,o,n)=>{const r=o===px.ContentFocus?Pg():Fg(),s=ex(t,n),a=tb(n);return{dom:e.dom,components:e.components,items:e.items,value:e.value,markers:{selectedItem:a.selectedItem,item:a.item},movement:s,fakeFocus:o===px.ContentFocus,focusManager:r,menuBehaviours:xy("auto"!==t?[]:[Ys(((e,t)=>{yy(e,4,a.item).each((({numColumns:t,numRows:o})=>{pp.setGridSize(e,o,t)}))}))])}})(mb("autocompleter-value",!0,o,s,"normal"),s,px.ContentFocus,"normal")),{anchor:{type:"node",root:Ve.fromDom(e.getBody()),node:E.from(n)}}),pf.getContent(r).each(yg.highlightFirst)}))},m=e=>{const t=c(e);t.length>0?d(e,t):i()};e.on("AutocompleterStart",(({lookupData:e})=>{n.set(!0),o.set(!1),m(e)})),e.on("AutocompleterUpdate",(({lookupData:e})=>m(e))),e.on("AutocompleterEnd",(()=>{i(),n.set(!1),o.set(!1)}));const u={cancelIfNecessary:l,isMenuOpen:s,isActive:a,isProcessingAction:o.get,getView:()=>pf.getContent(r)};Lv(u,e)},Sx=(e,t,o)=>zi(e,t,o).isSome(),Cx=(e,t)=>{let o=null;return{cancel:()=>{null!==o&&(clearTimeout(o),o=null)},schedule:(...n)=>{o=setTimeout((()=>{e.apply(null,n),o=null}),t)}}},kx=e=>{const t=e.raw;return void 0===t.touches||1!==t.touches.length?E.none():E.some(t.touches[0])},zx=e=>{const t=gc(),o=Tr(!1),n=Cx((t=>{e.triggerEvent(fs(),t),o.set(!0)}),400),r=Ar([{key:Pr(),value:e=>(kx(e).each((r=>{n.cancel();const s={x:r.clientX,y:r.clientY,target:e.target};n.schedule(e),o.set(!1),t.set(s)})),E.none())},{key:jr(),value:e=>(n.cancel(),kx(e).each((e=>{t.on((o=>{((e,t)=>{const o=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y);return o>5||n>5})(e,o)&&t.clear()}))})),E.none())},{key:Ur(),value:r=>{n.cancel();return t.get().filter((e=>$e(e.target,r.target))).map((t=>o.get()?(r.prevent(),!1):e.triggerEvent(ps(),r)))}}]);return{fireIfReady:(e,t)=>ye(r,t).bind((t=>t(e)))}},Ox=(e,t)=>{const o=i({stopBackspace:!0},t),n=zx(o),r=j(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(t=>pc(e,t,(e=>{n.fireIfReady(e,t).each((t=>{t&&e.kill()}));o.triggerEvent(t,e)&&e.kill()})))),s=gc(),a=pc(e,"paste",(e=>{n.fireIfReady(e,"paste").each((t=>{t&&e.kill()}));o.triggerEvent("paste",e)&&e.kill(),s.set(setTimeout((()=>{o.triggerEvent(ms(),e)}),0))})),l=pc(e,"keydown",(e=>{o.triggerEvent("keydown",e)?e.kill():o.stopBackspace&&(e=>e.raw.which===wg[0]&&!N(["input","textarea"],Re(e.target))&&!Sx(e.target,'[contenteditable="true"]'))(e)&&e.prevent()})),c=pc(e,"focusin",(e=>{o.triggerEvent("focusin",e)&&e.kill()})),d=gc(),m=pc(e,"focusout",(e=>{o.triggerEvent("focusout",e)&&e.kill(),d.set(setTimeout((()=>{o.triggerEvent(ds(),e)}),0))}));return{unbind:()=>{U(r,(e=>{e.unbind()})),l.unbind(),c.unbind(),m.unbind(),a.unbind(),s.on(clearTimeout),d.on(clearTimeout)}}},Tx=(e,t)=>{const o=ye(e,"target").getOr(t);return Tr(o)},Mx=Mr([{stopped:[]},{resume:["element"]},{complete:[]}]),_x=(e,t,o,n,r,s)=>{const a=e(t,n),i=((e,t)=>{const o=Tr(!1),n=Tr(!1);return{stop:()=>{o.set(!0)},cut:()=>{n.set(!0)},isStopped:o.get,isCut:n.get,event:e,setSource:t.set,getSource:t.get}})(o,r);return a.fold((()=>(s.logEventNoHandlers(t,n),Mx.complete())),(e=>{const o=e.descHandler;return Aa(o)(i),i.isStopped()?(s.logEventStopped(t,e.element,o.purpose),Mx.stopped()):i.isCut()?(s.logEventCut(t,e.element,o.purpose),Mx.complete()):Ye(e.element).fold((()=>(s.logNoParent(t,e.element,o.purpose),Mx.complete())),(n=>(s.logEventResponse(t,e.element,o.purpose),Mx.resume(n))))}))},Dx=(e,t,o,n,r,s)=>_x(e,t,o,n,r,s).fold(D,(n=>Dx(e,t,o,n,r,s)),_),Ax=(e,t,o)=>{const n=(e=>{const t=Tr(!1);return{stop:()=>{t.set(!0)},cut:w,isStopped:t.get,isCut:_,event:e,setSource:T("Cannot set source of a broadcasted event"),getSource:T("Cannot get source of a broadcasted event")}})(t);return U(e,(e=>{const t=e.descHandler;Aa(t)(n)})),n.isStopped()},Ex=(e,t,o,n,r)=>{const s=Tx(o,n);return Dx(e,t,o,n,s,r)},Hx=()=>{const e={};return{registerId:(t,o,n)=>{me(n,((n,r)=>{const s=void 0!==e[r]?e[r]:{};s[o]=((e,t)=>{return o=z.apply(void 0,[e.handler].concat(t)),n=e.purpose,{cHandler:o,purpose:n};var o,n})(n,t),e[r]=s}))},unregisterId:t=>{me(e,((e,o)=>{we(e,t)&&delete e[t]}))},filterByType:t=>ye(e,t).map((e=>fe(e,((e,t)=>((e,t)=>({id:e,descHandler:t}))(t,e))))).getOr([]),find:(t,o,n)=>ye(e,o).bind((e=>Vr(n,(t=>((e,t)=>fa(t).bind((t=>ye(e,t))).map((e=>((e,t)=>({element:e,descHandler:t}))(t,e))))(e,t)),t)))}},Bx=()=>{const e=Hx(),t={},o=e=>{const t=e.element;return fa(t).getOrThunk((()=>((e,t)=>{const o=da(ga+e);return pa(t,o),o})("uid-",e.element)))},n=o=>{fa(o.element).each((o=>{delete t[o],e.unregisterId(o)}))};return{find:(t,o,n)=>e.find(t,o,n),filter:t=>e.filterByType(t),register:r=>{const s=o(r);xe(t,s)&&((e,o)=>{const r=t[o];if(r!==e)throw new Error('The tagId "'+o+'" is already used by: '+aa(r.element)+"\nCannot use it for: "+aa(e.element)+"\nThe conflicting element is"+(ut(r.element)?" ":" not ")+"already in the DOM");n(e)})(r,s);const a=[r];e.registerId(a,s,r.events),t[s]=r},unregister:n,getById:e=>ye(t,e)}},Vx=Uu({name:"Container",factory:e=>{const t=e.dom,{attributes:o}=t,n=c(t,["attributes"]);return{uid:e.uid,dom:i({tag:"div",attributes:i({role:"presentation"},o)},n),components:e.components,behaviours:Pm(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[br("components",[]),Fm("containerBehaviours",[]),br("events",{}),br("domModification",{}),br("eventOrder",{})]}),Rx=e=>{const t=t=>Ye(e.element).fold(D,(e=>$e(t,e))),o=Bx(),n=(e,n)=>o.find(t,e,n),r=Ox(e.element,{triggerEvent:(e,t)=>Ri(e,t.target,(o=>((e,t,o,n)=>Ex(e,t,o,o.target,n))(n,e,t,o)))}),s={debugInfo:S("real"),triggerEvent:(e,t,o)=>{Ri(e,0,(r=>Ex(n,e,o,t,r)))},triggerFocus:(e,t)=>{fa(e).fold((()=>{Gl(e)}),(o=>{Ri(cs(),0,(o=>(((e,t,o,n,r)=>{const s=Tx(o,n);_x(e,t,o,n,s,r)})(n,cs(),{originator:t,kill:w,prevent:w,target:e},e,o),!1)))}))},triggerEscape:(e,t)=>{s.triggerEvent("keydown",e.element,t.event)},getByUid:e=>h(e),getByDom:e=>p(e),build:fi,buildOrPatch:pi,addToGui:e=>{l(e)},removeFromGui:e=>{c(e)},addToWorld:e=>{a(e)},removeFromWorld:e=>{i(e)},broadcast:e=>{m(e)},broadcastOn:(e,t)=>{u(e,t)},broadcastEvent:(e,t)=>{g(e,t)},isConnected:D},a=e=>{e.connect(s),Ie(e.element)||(o.register(e),U(e.components(),a),s.triggerEvent(ys(),e.element,{target:e.element}))},i=e=>{Ie(e.element)||(U(e.components(),i),o.unregister(e)),e.disconnect()},l=t=>{om(e,t)},c=e=>{sm(e)},d=e=>{const t=o.filter(us());U(t,(t=>{const o=t.descHandler;Aa(o)(e)}))},m=e=>{d({universal:!0,data:e})},u=(e,t)=>{d({universal:!1,channels:e,data:t})},g=(e,t)=>{const n=o.filter(e);return Ax(n,t)},h=e=>o.getById(e).fold((()=>qo.error(new Error('Could not find component with uid: "'+e+'" in system.'))),qo.value),p=e=>{const t=fa(e).getOr("not found");return h(t)};return a(e),{root:e,element:e.element,destroy:()=>{r.unbind(),Eo(e.element)},add:l,remove:c,getByUid:h,getByDom:p,addToWorld:a,removeFromWorld:i,broadcast:m,broadcastOn:u,broadcastEvent:g}},Lx=S([br("prefix","form-field"),Fm("fieldBehaviours",[Ku,Im])]),Nx=S([vu({schema:[tr("dom")],name:"label"}),vu({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[tr("text")],name:"aria-descriptor"}),pu({factory:{sketch:e=>{const t=_r(e,["factory"]);return e.factory.sketch(t)}},schema:[tr("factory")],name:"field"})]),Ix=Wu({name:"FormField",configFields:Lx(),partFields:Nx(),factory:(e,t,o,n)=>{const r=jm(e.fieldBehaviours,[Ku.config({find:t=>_u(t,e,"field")}),Im.config({store:{mode:"manual",getValue:e=>Ku.getCurrent(e).bind(Im.getValue),setValue:(e,t)=>{Ku.getCurrent(e).each((e=>{Im.setValue(e,t)}))}}})]),s=Fs([Ys(((t,o)=>{const n=Au(t,e,["label","field","aria-descriptor"]);n.field().each((t=>{const o=da(e.prefix);n.label().each((e=>{ft(e.element,"for",o),ft(t.element,"id",o)})),n["aria-descriptor"]().each((o=>{const n=da(e.prefix);ft(o.element,"id",n),ft(t.element,"aria-describedby",n)}))}))}))]),a={getField:t=>_u(t,e,"field"),getLabel:t=>_u(t,e,"label")};return{uid:e.uid,dom:e.dom,components:t,behaviours:r,events:s,apis:a}},apis:{getField:(e,t)=>e.getField(t),getLabel:(e,t)=>e.getLabel(t)}});var Fx=Object.freeze({__proto__:null,exhibit:(e,t)=>Da({attributes:Ar([{key:t.tabAttr,value:"true"}])})}),Px=[br("tabAttr","data-alloy-tabstop")];const jx=Fl({fields:Px,name:"tabstopping",active:Fx});var Ux=tinymce.util.Tools.resolve("tinymce.html.Entities");const Wx=(e,t,o,n)=>{const r=$x(e,t,o,n);return Ix.sketch(r)},$x=(e,t,o,n)=>({dom:Gx(o),components:e.toArray().concat([t]),fieldBehaviours:Nl(n)}),Gx=e=>({tag:"div",classes:["tox-form__group"].concat(e)}),qx=(e,t)=>Ix.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ui(t.translate(e))]}),Kx=da("form-component-change"),Xx=da("form-close"),Jx=da("form-cancel"),Yx=da("form-action"),Zx=da("form-submit"),Qx=da("form-block"),eS=da("form-unblock"),tS=da("form-tabchange"),oS=da("form-resize"),nS=(e,t,o)=>{const n=e.label.map((e=>qx(e,t))),r=e=>(t,o)=>{zi(o.event.target,"[data-collection-item-value]").each((n=>{e(t,o,n,bt(n,"data-collection-item-value"))}))},s=r(((o,n,r,s)=>{n.stop(),t.isDisabled()||Vs(o,Yx,{name:e.name,value:s})})),a=[Us(Xr(),r(((e,t,o)=>{Gl(o)}))),Us(os(),s),Us(ps(),s),Us(Jr(),r(((e,t,o)=>{ki(e.element,"."+Xv).each((e=>{qa(e,Xv)})),Ga(o,Xv)}))),Us(Yr(),r((e=>{ki(e.element,"."+Xv).each((e=>{qa(e,Xv)}))}))),ea(r(((t,o,n,r)=>{Vs(t,Yx,{name:e.name,value:r})})))],i=(e,t)=>j(hd(e.element,".tox-collection__item"),t),l=Ix.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:C},behaviours:Nl([lg.config({disabled:t.isDisabled,onDisabled:e=>{i(e,(e=>{Ga(e,"tox-collection__item--state-disabled"),ft(e,"aria-disabled",!0)}))},onEnabled:e=>{i(e,(e=>{qa(e,"tox-collection__item--state-disabled"),xt(e,"aria-disabled")}))}}),Vy(),kp.config({}),Im.config({store:{mode:"memory",initialValue:o.getOr([])},onSetValue:(o,n)=>{((o,n)=>{const r=j(n,(o=>{const n=yf.translate(o.text),r=1===e.columns?`<div class="tox-collection__item-label">${n}</div>`:"",s=`<div class="tox-collection__item-icon">${o.icon}</div>`,a={_:" "," - ":" ","-":" "},i=n.replace(/\_| \- |\-/g,(e=>a[e]));return`<div class="tox-collection__item${t.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${Ux.encodeAllRaw(o.value)}" title="${i}" aria-label="${i}">${s}${r}</div>`})),s="auto"!==e.columns&&e.columns>1?P(r,e.columns):[r],a=j(s,(e=>`<div class="tox-collection__group">${e.join("")}</div>`));na(o.element,a.join(""))})(o,n),"auto"===e.columns&&yy(o,5,"tox-collection__item").each((({numRows:e,numColumns:t})=>{pp.setGridSize(o,e,t)})),Bs(o,oS)}}),jx.config({}),pp.config((c=e.columns,d="normal",1===c?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===c?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===d?".tox-swatches__row":".tox-collection__group",cell:"color"===d?".tox-swatch":`.${jv}`}})),zp("collection-events",a)]),eventOrder:{[gs()]:["disabling","alloy.base.behaviour","collection-events"]}});var c,d;return Wx(n,l,["tox-form__group--collection"],[])},rS=S([dr("data"),br("inputAttributes",{}),br("inputStyles",{}),br("tag","input"),br("inputClasses",[]),$i("onSetValue"),br("styles",{}),br("eventOrder",{}),Fm("inputBehaviours",[Im,Dp]),br("selectOnFocus",!0)]),sS=e=>Nl([Dp.config({onFocus:e.selectOnFocus?e=>{const t=e.element,o=Za(t);t.dom.setSelectionRange(0,o.length)}:w})]),aS=e=>i(i({},sS(e)),jm(e.inputBehaviours,[Im.config({store:l(i({mode:"manual"},e.data.map((e=>({initialValue:e}))).getOr({})),{getValue:e=>Za(e.element),setValue:(e,t)=>{Za(e.element)!==t&&Qa(e.element,t)}}),onSetValue:e.onSetValue})])),iS=e=>({tag:e.tag,attributes:i({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses}),lS=Uu({name:"Input",configFields:rS(),factory:(e,t)=>({uid:e.uid,dom:iS(e),components:[],behaviours:aS(e),eventOrder:e.eventOrder})}),cS=e=>{let t=E.none(),o=[];const n=e=>{r()?a(e):o.push(e)},r=()=>t.isSome(),s=e=>{U(e,a)},a=e=>{t.each((t=>{setTimeout((()=>{e(t)}),0)}))};return e((e=>{r()||(t=E.some(e),s(o),o=[])})),{get:n,map:e=>cS((t=>{n((o=>{t(e(o))}))})),isReady:r}},dS={nu:cS,pure:e=>cS((t=>{t(e)}))},mS=e=>{setTimeout((()=>{throw e}),0)},uS=e=>{const t=t=>{e().then(t,mS)};return{map:t=>uS((()=>e().then(t))),bind:t=>uS((()=>e().then((e=>t(e).toPromise())))),anonBind:t=>uS((()=>e().then((()=>t.toPromise())))),toLazy:()=>dS.nu(t),toCached:()=>{let t=null;return uS((()=>(null===t&&(t=e()),t)))},toPromise:e,get:t}},gS=e=>uS((()=>new Promise(e))),hS=e=>uS((()=>Promise.resolve(e))),pS=["input","textarea"],fS=e=>{const t=Re(e);return N(pS,t)},vS=(e,t)=>{const o=t.getRoot(e).getOr(e.element);qa(o,t.invalidClass),t.notify.each((t=>{fS(e.element)&&ft(e.element,"aria-invalid",!1),t.getContainer(e).each((e=>{na(e,t.validHtml)})),t.onValid(e)}))},bS=(e,t,o,n)=>{const r=t.getRoot(e).getOr(e.element);Ga(r,t.invalidClass),t.notify.each((t=>{fS(e.element)&&ft(e.element,"aria-invalid",!0),t.getContainer(e).each((e=>{na(e,n)})),t.onInvalid(e,n)}))},yS=(e,t,o)=>t.validator.fold((()=>hS(qo.value(!0))),(t=>t.validate(e))),wS=(e,t,o)=>(t.notify.each((t=>{t.onValidate(e)})),yS(e,t).map((o=>e.getSystem().isConnected()?o.fold((o=>(bS(e,t,0,o),qo.error(o))),(o=>(vS(e,t),qo.value(o)))):qo.error("No longer in system"))));var xS=Object.freeze({__proto__:null,markValid:vS,markInvalid:bS,query:yS,run:wS,isInvalid:(e,t)=>{const o=t.getRoot(e).getOr(e.element);return Ka(o,t.invalidClass)}});var SS=Object.freeze({__proto__:null,events:(e,t)=>e.validator.map((t=>Fs([Us(t.onEvent,(t=>{wS(t,e).get(C)}))].concat(t.validateOnLoad?[Ys((t=>{wS(t,e).get(w)}))]:[])))).getOr({})}),CS=[tr("invalidClass"),br("getRoot",E.none),vr("notify",[br("aria","alert"),br("getContainer",E.none),br("validHtml",""),$i("onValid"),$i("onInvalid"),$i("onValidate")]),vr("validator",[tr("validate"),br("onEvent","input"),br("validateOnLoad",!0)])];const kS=Fl({fields:CS,name:"invalidating",active:SS,apis:xS,extra:{validation:e=>t=>{const o=Im.getValue(t);return hS(e(o))}}});var zS=Object.freeze({__proto__:null,getCoupled:(e,t,o,n)=>o.getOrCreate(e,t,n)}),OS=[or("others",Gn(qo.value,Vn()))];var TS=Object.freeze({__proto__:null,init:()=>{const e={},t=S({});return Ma({readState:t,getOrCreate:(t,o,n)=>{const r=ce(o.others);if(r)return ye(e,n).getOrThunk((()=>{const r=ye(o.others,n).getOrDie("No information found for coupled component: "+n)(t),s=t.getSystem().build(r);return e[n]=s,s}));throw new Error("Cannot find coupled component: "+n+". Known coupled components: "+JSON.stringify(r,null,2))}})}});const MS=Fl({fields:OS,name:"coupling",apis:zS,state:TS}),_S=S("sink"),DS=S(vu({name:_S(),overrides:S({dom:{tag:"div"},behaviours:Nl([Kd.config({useFixed:D})]),events:Fs([Ks(Zr()),Ks($r()),Ks(os())])})}));var AS,ES;(ES=AS||(AS={}))[ES.HighlightFirst=0]="HighlightFirst",ES[ES.HighlightNone=1]="HighlightNone";const HS=(e,t)=>{const o=e.getHotspot(t).getOr(t),n="hotspot",r=e.getAnchorOverrides();return e.layouts.fold((()=>({type:n,hotspot:o,overrides:r})),(e=>({type:n,hotspot:o,overrides:r,layouts:e})))},BS=(e,t,o,n,r,s,a)=>{const c=((e,t,o,n,r,s,a)=>{const c=((e,t,o)=>(0,e.fetch)(o).map(t))(e,t,n),d=NS(n,e);return c.map((e=>e.bind((e=>E.from(hf.sketch(l(i({},s.menu()),{uid:va(""),data:e,highlightImmediately:a===AS.HighlightFirst,onOpenMenu:(e,t)=>{const n=d().getOrDie();Kd.position(n,t,{anchor:o}),ym.decloak(r)},onOpenSubmenu:(e,t,o)=>{const n=d().getOrDie();Kd.position(n,o,{anchor:{type:"submenu",item:t}}),ym.decloak(r)},onRepositionMenu:(e,t,n)=>{const r=d().getOrDie();Kd.position(r,t,{anchor:o}),U(n,(e=>{Kd.position(r,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem}})}))},onEscape:()=>(Dp.focus(n),ym.close(r),E.some(!0))})))))))})(e,t,HS(e,o),o,n,r,a);return c.map((e=>(e.fold((()=>{ym.isOpen(n)&&ym.close(n)}),(e=>{ym.cloak(n),ym.open(n,e),s(n)})),n)))},VS=(e,t,o,n,r,s,a)=>(ym.close(n),hS(n)),RS=(e,t,o,n,r,s)=>{const a=MS.getCoupled(o,"sandbox");return(ym.isOpen(a)?VS:BS)(e,t,o,a,n,r,s)},LS=(e,t,o)=>{const n=Ku.getCurrent(t).getOr(t),r=Wt(e.element);var s,a;o?kt(n.element,"min-width",r+"px"):(s=n.element,a=r,Ut.set(s,a))},NS=(e,t)=>e.getSystem().getByUid(t.uid+"-"+_S()).map((e=>()=>qo.value(e))).getOrThunk((()=>t.lazySink.fold((()=>()=>qo.error(new Error("No internal sink is specified, nor could an external sink be found"))),(t=>()=>t(e))))),IS=e=>{ym.getState(e).each((e=>{hf.repositionMenus(e)}))},FS=(e,t,o)=>{const n=Ti(),r=NS(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:n.id,role:"listbox"}},behaviours:Wm(e.sandboxBehaviours,[Im.config({store:{mode:"memory",initialValue:t}}),ym.config({onOpen:(r,s)=>{const a=HS(e,t);n.link(t.element),e.matchWidth&&LS(a.hotspot,s,e.useMinWidth),e.onOpen(a,r,s),void 0!==o&&void 0!==o.onOpen&&o.onOpen(r,s)},onClose:(e,r)=>{n.unlink(t.element),void 0!==o&&void 0!==o.onClose&&o.onClose(e,r)},isPartOf:(e,o,n)=>_i(o,n)||_i(t,n),getAttachPoint:()=>r().getOrDie()}),Ku.config({find:e=>ym.getState(e).bind((e=>Ku.getCurrent(e)))}),Wl.config({channels:i(i({},km({isExtraPart:_})),Om({doReposition:IS}))})])}},PS=e=>{const t=MS.getCoupled(e,"sandbox");IS(t)},jS=()=>[br("sandboxClasses",[]),Um("sandboxBehaviours",[Ku,Wl,ym,Im])],US=S([tr("dom"),tr("fetch"),$i("onOpen"),Gi("onExecute"),br("getHotspot",E.some),br("getAnchorOverrides",S({})),Pc(),Fm("dropdownBehaviours",[jp,MS,pp,Dp]),tr("toggleClass"),br("eventOrder",{}),dr("lazySink"),br("matchWidth",!1),br("useMinWidth",!1),dr("role")].concat(jS())),WS=S([fu({schema:[ji()],name:"menu",defaults:e=>({onExecute:e.onExecute})}),DS()]),$S=Wu({name:"Dropdown",configFields:US(),partFields:WS(),factory:(e,t,o,n)=>{const r=e=>{ym.getState(e).each((e=>{hf.highlightPrimary(e)}))},s={expand:t=>{jp.isOn(t)||RS(e,C,t,n,w,AS.HighlightNone).get(w)},open:t=>{jp.isOn(t)||RS(e,C,t,n,w,AS.HighlightFirst).get(w)},isOpen:jp.isOn,close:t=>{jp.isOn(t)&&RS(e,C,t,n,w,AS.HighlightFirst).get(w)},repositionMenus:e=>{jp.isOn(e)&&PS(e)}},a=(e,t)=>(Rs(e),E.some(!0));return{uid:e.uid,dom:e.dom,components:t,behaviours:jm(e.dropdownBehaviours,[jp.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),MS.config({others:{sandbox:t=>FS(e,t,{onOpen:()=>jp.on(t),onClose:()=>jp.off(t)})}}),pp.config({mode:"special",onSpace:a,onEnter:a,onDown:(e,t)=>{if($S.isOpen(e)){const t=MS.getCoupled(e,"sandbox");r(t)}else $S.open(e);return E.some(!0)},onEscape:(e,t)=>$S.isOpen(e)?($S.close(e),E.some(!0)):E.none()}),Dp.config({})]),events:$p(E.some((t=>{RS(e,C,t,n,r,AS.HighlightFirst).get(w)}))),eventOrder:l(i({},e.eventOrder),{[gs()]:["disabling","toggling","alloy.base.behaviour"]}),apis:s,domModification:{attributes:i(i({"aria-haspopup":"true"},e.role.fold((()=>({})),(e=>({role:e})))),"button"===e.dom.tag?{type:(c="type",ye(e.dom,"attributes").bind((e=>ye(e,c)))).getOr("button")}:{})}};var c},apis:{open:(e,t)=>e.open(t),expand:(e,t)=>e.expand(t),close:(e,t)=>e.close(t),isOpen:(e,t)=>e.isOpen(t),repositionMenus:(e,t)=>e.repositionMenus(t)}});const GS=Fl({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:()=>Fs([Ps(as(),D)]),exhibit:()=>Da({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})})}),qS=da("color-input-change"),KS=da("color-swatch-change"),XS=da("color-picker-cancel"),JS=(e,t,o,n)=>{const r=Ix.parts.field({factory:lS,inputClasses:["tox-textfield"],data:n,onSetValue:e=>kS.run(e).get(w),inputBehaviours:Nl([lg.config({disabled:t.providers.isDisabled}),Vy(),jx.config({}),kS.config({invalidClass:"tox-textbox-field-invalid",getRoot:e=>Ze(e.element),notify:{onValid:e=>{const t=Im.getValue(e);Vs(e,qS,{color:t})}},validator:{validateOnLoad:!1,validate:e=>{const t=Im.getValue(e);if(0===t.length)return hS(qo.value(!0));{const e=Ve.fromTag("span");kt(e,"background-color",t);const o=_t(e,"background-color").fold((()=>qo.error("blah")),(e=>qo.value(t)));return hS(o)}}}})]),selectOnFocus:!1}),s=e.label.map((e=>qx(e,t.providers))),a=(e,t)=>{Vs(e,KS,{value:t})},i=bf(((e,t)=>$S.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:Nl([Ly(t.providers.isDisabled),Vy(),GS.config({}),jx.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:o=>gS((t=>e.fetch(t))).map((n=>E.from(wx(gn(Zw(da("menu-value"),n,(t=>{e.onItemAction(o,t)}),e.columns,e.presets,Fv.CLOSE_ON_EXECUTE,_,t.providers),{movement:ex(e.columns,e.presets)}))))),parts:{menu:rb(0,0,e.presets)}}))({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:()=>[yl,bl,Cl],onLtr:()=>[bl,yl,Cl]},components:[],fetch:qw(o.getColors(),o.hasCustomColors()),columns:o.getColorCols(),presets:"color",onItemAction:(e,t)=>{i.getOpt(e).each((e=>{"custom"===t?o.colorPicker((t=>{t.fold((()=>Bs(e,XS)),(t=>{a(e,t),jw(t)}))}),"#ffffff"):a(e,"remove"===t?"":t)}))}},t));return Ix.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:s.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[r,i.asSpec()]}]),fieldBehaviours:Nl([zp("form-field-events",[Us(qS,((t,o)=>{i.getOpt(t).each((e=>{kt(e.element,"background-color",o.event.color)})),Vs(t,Kx,{name:e.name})})),Us(KS,((e,t)=>{Ix.getField(e).each((o=>{Im.setValue(o,t.event.value),Ku.getCurrent(e).each(Dp.focus)}))})),Us(XS,((e,t)=>{Ix.getField(e).each((t=>{Ku.getCurrent(e).each(Dp.focus)}))}))])])})},YS=vu({schema:[tr("dom")],name:"label"}),ZS=e=>vu({name:e+"-edge",overrides:t=>t.model.manager.edgeActions[e].fold((()=>({})),(e=>({events:Fs([Ws(Pr(),((t,o,n)=>e(t,n)),[t]),Ws($r(),((t,o,n)=>e(t,n)),[t]),Ws(Gr(),((t,o,n)=>{n.mouseIsDown.get()&&e(t,n)}),[t])])})))}),QS=ZS("top-left"),eC=ZS("top"),tC=ZS("top-right"),oC=ZS("right"),nC=ZS("bottom-right"),rC=ZS("bottom"),sC=ZS("bottom-left");var aC=[YS,ZS("left"),oC,eC,rC,QS,tC,sC,nC,pu({name:"thumb",defaults:S({dom:{styles:{position:"absolute"}}}),overrides:e=>({events:Fs([Gs(Pr(),e,"spectrum"),Gs(jr(),e,"spectrum"),Gs(Ur(),e,"spectrum"),Gs($r(),e,"spectrum"),Gs(Gr(),e,"spectrum"),Gs(Kr(),e,"spectrum")])})}),pu({schema:[Qn("mouseIsDown",(()=>Tr(!1)))],name:"spectrum",overrides:e=>{const t=e.model.manager,o=(o,n)=>t.getValueFromEvent(n).map((n=>t.setValueFrom(o,e,n)));return{behaviours:Nl([pp.config({mode:"special",onLeft:o=>t.onLeft(o,e),onRight:o=>t.onRight(o,e),onUp:o=>t.onUp(o,e),onDown:o=>t.onDown(o,e)}),Dp.config({})]),events:Fs([Us(Pr(),o),Us(jr(),o),Us($r(),o),Us(Gr(),((t,n)=>{e.mouseIsDown.get()&&o(t,n)}))])}}})];const iC=S("slider.change.value"),lC=e=>{const t=e.event.raw;if((e=>-1!==e.type.indexOf("touch"))(t)){const e=t;return void 0!==e.touches&&1===e.touches.length?E.some(e.touches[0]).map((e=>It(e.clientX,e.clientY))):E.none()}{const e=t;return void 0!==e.clientX?E.some(e).map((e=>It(e.clientX,e.clientY))):E.none()}},cC=e=>e.model.minX,dC=e=>e.model.minY,mC=e=>e.model.minX-1,uC=e=>e.model.minY-1,gC=e=>e.model.maxX,hC=e=>e.model.maxY,pC=e=>e.model.maxX+1,fC=e=>e.model.maxY+1,vC=(e,t,o)=>t(e)-o(e),bC=e=>vC(e,gC,cC),yC=e=>vC(e,hC,dC),wC=e=>bC(e)/2,xC=e=>yC(e)/2,SC=e=>e.stepSize,CC=e=>e.snapToGrid,kC=e=>e.snapStart,zC=e=>e.rounded,OC=(e,t)=>void 0!==e[t+"-edge"],TC=e=>OC(e,"left"),MC=e=>OC(e,"right"),_C=e=>OC(e,"top"),DC=e=>OC(e,"bottom"),AC=e=>e.model.value.get(),EC=(e,t)=>({x:e,y:t}),HC=(e,t)=>{Vs(e,iC(),{value:t})},BC=(e,t,o,n)=>e<t?e:e>o?o:e===t?t-1:Math.max(t,e-n),VC=(e,t,o,n)=>e>o?e:e<t?t:e===o?o+1:Math.min(o,e+n),RC=(e,t,o)=>Math.max(t,Math.min(o,e)),LC=e=>{const{min:t,max:o,range:n,value:r,step:s,snap:a,snapStart:i,rounded:l,hasMinEdge:c,hasMaxEdge:d,minBound:m,maxBound:u,screenRange:g}=e,h=c?t-1:t,p=d?o+1:o;if(r<m)return h;if(r>u)return p;{const e=((e,t,o)=>Math.min(o,Math.max(e,t))-t)(r,m,u),c=RC(e/g*n+t,h,p);return a&&c>=t&&c<=o?((e,t,o,n,r)=>r.fold((()=>{const r=e-t,s=Math.round(r/n)*n;return RC(t+s,t-1,o+1)}),(t=>{const r=(e-t)%n,s=Math.round(r/n),a=Math.floor((e-t)/n),i=Math.floor((o-t)/n),l=t+Math.min(i,a+s)*n;return Math.max(t,l)})))(c,t,o,s,i):l?Math.round(c):c}},NC=e=>{const{min:t,max:o,range:n,value:r,hasMinEdge:s,hasMaxEdge:a,maxBound:i,maxOffset:l,centerMinEdge:c,centerMaxEdge:d}=e;return r<t?s?0:c:r>o?a?i:d:(r-t)/n*l},IC="top",FC="right",PC="bottom",jC="left",UC=e=>e.element.dom.getBoundingClientRect(),WC=(e,t)=>e[t],$C=e=>{const t=UC(e);return WC(t,jC)},GC=e=>{const t=UC(e);return WC(t,FC)},qC=e=>{const t=UC(e);return WC(t,IC)},KC=e=>{const t=UC(e);return WC(t,PC)},XC=e=>{const t=UC(e);return WC(t,"width")},JC=e=>{const t=UC(e);return WC(t,"height")},YC=(e,t,o)=>(e+t)/2-o,ZC=(e,t)=>{const o=UC(e),n=UC(t),r=WC(o,jC),s=WC(o,FC),a=WC(n,jC);return YC(r,s,a)},QC=(e,t)=>{const o=UC(e),n=UC(t),r=WC(o,IC),s=WC(o,PC),a=WC(n,IC);return YC(r,s,a)},ek=(e,t)=>{Vs(e,iC(),{value:t})},tk=(e,t,o)=>{const n={min:cC(t),max:gC(t),range:bC(t),value:o,step:SC(t),snap:CC(t),snapStart:kC(t),rounded:zC(t),hasMinEdge:TC(t),hasMaxEdge:MC(t),minBound:$C(e),maxBound:GC(e),screenRange:XC(e)};return LC(n)},ok=e=>(t,o)=>((e,t,o)=>{const n=(e>0?VC:BC)(AC(o),cC(o),gC(o),SC(o));return ek(t,n),E.some(n)})(e,t,o).map(D),nk=(e,t,o,n,r,s)=>{const a=((e,t,o,n,r)=>{const s=XC(e),a=n.bind((t=>E.some(ZC(t,e)))).getOr(0),i=r.bind((t=>E.some(ZC(t,e)))).getOr(s),l={min:cC(t),max:gC(t),range:bC(t),value:o,hasMinEdge:TC(t),hasMaxEdge:MC(t),minBound:$C(e),minOffset:0,maxBound:GC(e),maxOffset:s,centerMinEdge:a,centerMaxEdge:i};return NC(l)})(t,s,o,n,r);return $C(t)-$C(e)+a},rk=ok(-1),sk=ok(1),ak=E.none,ik=E.none,lk={"top-left":E.none(),top:E.none(),"top-right":E.none(),right:E.some(((e,t)=>{HC(e,pC(t))})),"bottom-right":E.none(),bottom:E.none(),"bottom-left":E.none(),left:E.some(((e,t)=>{HC(e,mC(t))}))};var ck=Object.freeze({__proto__:null,setValueFrom:(e,t,o)=>{const n=tk(e,t,o);return ek(e,n),n},setToMin:(e,t)=>{const o=cC(t);ek(e,o)},setToMax:(e,t)=>{const o=gC(t);ek(e,o)},findValueOfOffset:tk,getValueFromEvent:e=>lC(e).map((e=>e.left)),findPositionOfValue:nk,setPositionFromValue:(e,t,o,n)=>{const r=AC(o),s=nk(e,n.getSpectrum(e),r,n.getLeftEdge(e),n.getRightEdge(e),o),a=Wt(t.element)/2;kt(t.element,"left",s-a+"px")},onLeft:rk,onRight:sk,onUp:ak,onDown:ik,edgeActions:lk});const dk=(e,t)=>{Vs(e,iC(),{value:t})},mk=(e,t,o)=>{const n={min:dC(t),max:hC(t),range:yC(t),value:o,step:SC(t),snap:CC(t),snapStart:kC(t),rounded:zC(t),hasMinEdge:_C(t),hasMaxEdge:DC(t),minBound:qC(e),maxBound:KC(e),screenRange:JC(e)};return LC(n)},uk=e=>(t,o)=>((e,t,o)=>{const n=(e>0?VC:BC)(AC(o),dC(o),hC(o),SC(o));return dk(t,n),E.some(n)})(e,t,o).map(D),gk=(e,t,o,n,r,s)=>{const a=((e,t,o,n,r)=>{const s=JC(e),a=n.bind((t=>E.some(QC(t,e)))).getOr(0),i=r.bind((t=>E.some(QC(t,e)))).getOr(s),l={min:dC(t),max:hC(t),range:yC(t),value:o,hasMinEdge:_C(t),hasMaxEdge:DC(t),minBound:qC(e),minOffset:0,maxBound:KC(e),maxOffset:s,centerMinEdge:a,centerMaxEdge:i};return NC(l)})(t,s,o,n,r);return qC(t)-qC(e)+a},hk=E.none,pk=E.none,fk=uk(-1),vk=uk(1),bk={"top-left":E.none(),top:E.some(((e,t)=>{HC(e,uC(t))})),"top-right":E.none(),right:E.none(),"bottom-right":E.none(),bottom:E.some(((e,t)=>{HC(e,fC(t))})),"bottom-left":E.none(),left:E.none()};var yk=Object.freeze({__proto__:null,setValueFrom:(e,t,o)=>{const n=mk(e,t,o);return dk(e,n),n},setToMin:(e,t)=>{const o=dC(t);dk(e,o)},setToMax:(e,t)=>{const o=hC(t);dk(e,o)},findValueOfOffset:mk,getValueFromEvent:e=>lC(e).map((e=>e.top)),findPositionOfValue:gk,setPositionFromValue:(e,t,o,n)=>{const r=AC(o),s=gk(e,n.getSpectrum(e),r,n.getTopEdge(e),n.getBottomEdge(e),o),a=Rt(t.element)/2;kt(t.element,"top",s-a+"px")},onLeft:hk,onRight:pk,onUp:fk,onDown:vk,edgeActions:bk});const wk=(e,t)=>{Vs(e,iC(),{value:t})},xk=(e,t)=>({x:e,y:t}),Sk=(e,t)=>(o,n)=>((e,t,o,n)=>{const r=e>0?VC:BC,s=t?AC(n).x:r(AC(n).x,cC(n),gC(n),SC(n)),a=t?r(AC(n).y,dC(n),hC(n),SC(n)):AC(n).y;return wk(o,xk(s,a)),E.some(s)})(e,t,o,n).map(D),Ck=Sk(-1,!1),kk=Sk(1,!1),zk=Sk(-1,!0),Ok=Sk(1,!0),Tk={"top-left":E.some(((e,t)=>{HC(e,EC(mC(t),uC(t)))})),top:E.some(((e,t)=>{HC(e,EC(wC(t),uC(t)))})),"top-right":E.some(((e,t)=>{HC(e,EC(pC(t),uC(t)))})),right:E.some(((e,t)=>{HC(e,EC(pC(t),xC(t)))})),"bottom-right":E.some(((e,t)=>{HC(e,EC(pC(t),fC(t)))})),bottom:E.some(((e,t)=>{HC(e,EC(wC(t),fC(t)))})),"bottom-left":E.some(((e,t)=>{HC(e,EC(mC(t),fC(t)))})),left:E.some(((e,t)=>{HC(e,EC(mC(t),xC(t)))}))};var Mk=Object.freeze({__proto__:null,setValueFrom:(e,t,o)=>{const n=tk(e,t,o.left),r=mk(e,t,o.top),s=xk(n,r);return wk(e,s),s},setToMin:(e,t)=>{const o=cC(t),n=dC(t);wk(e,xk(o,n))},setToMax:(e,t)=>{const o=gC(t),n=hC(t);wk(e,xk(o,n))},getValueFromEvent:e=>lC(e),setPositionFromValue:(e,t,o,n)=>{const r=AC(o),s=nk(e,n.getSpectrum(e),r.x,n.getLeftEdge(e),n.getRightEdge(e),o),a=gk(e,n.getSpectrum(e),r.y,n.getTopEdge(e),n.getBottomEdge(e),o),i=Wt(t.element)/2,l=Rt(t.element)/2;kt(t.element,"left",s-i+"px"),kt(t.element,"top",a-l+"px")},onLeft:Ck,onRight:kk,onUp:zk,onDown:Ok,edgeActions:Tk});const _k=Wu({name:"Slider",configFields:[br("stepSize",1),br("onChange",w),br("onChoose",w),br("onInit",w),br("onDragStart",w),br("onDragEnd",w),br("snapToGrid",!1),br("rounded",!0),dr("snapStart"),or("model",Yn("mode",{x:[br("minX",0),br("maxX",100),Qn("value",(e=>Tr(e.mode.minX))),tr("getInitialValue"),Xi("manager",ck)],y:[br("minY",0),br("maxY",100),Qn("value",(e=>Tr(e.mode.minY))),tr("getInitialValue"),Xi("manager",yk)],xy:[br("minX",0),br("maxX",100),br("minY",0),br("maxY",100),Qn("value",(e=>Tr({x:e.mode.minX,y:e.mode.minY}))),tr("getInitialValue"),Xi("manager",Mk)]})),Fm("sliderBehaviours",[pp,Im]),Qn("mouseIsDown",(()=>Tr(!1)))],partFields:aC,factory:(e,t,o,n)=>{const r=t=>Du(t,e,"thumb"),s=t=>Du(t,e,"spectrum"),a=t=>_u(t,e,"left-edge"),i=t=>_u(t,e,"right-edge"),l=t=>_u(t,e,"top-edge"),c=t=>_u(t,e,"bottom-edge"),d=e.model,m=d.manager,u=(t,o)=>{m.setPositionFromValue(t,o,e,{getLeftEdge:a,getRightEdge:i,getTopEdge:l,getBottomEdge:c,getSpectrum:s})},g=(e,t)=>{d.value.set(t);const o=r(e);u(e,o)},h=t=>{const o=e.mouseIsDown.get();e.mouseIsDown.set(!1),o&&_u(t,e,"thumb").each((o=>{const n=d.value.get();e.onChoose(t,o,n)}))},p=(t,o)=>{o.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,r(t))},f=(t,o)=>{o.stop(),e.onDragEnd(t,r(t)),h(t)};return{uid:e.uid,dom:e.dom,components:t,behaviours:jm(e.sliderBehaviours,[pp.config({mode:"special",focusIn:t=>_u(t,e,"spectrum").map(pp.focusIn).map(D)}),Im.config({store:{mode:"manual",getValue:e=>d.value.get(),setValue:g}}),Wl.config({channels:{[Sm()]:{onReceive:h}}})]),events:Fs([Us(iC(),((t,o)=>{((t,o)=>{g(t,o);const n=r(t);e.onChange(t,n,o),E.some(!0)})(t,o.event.value)})),Ys(((t,o)=>{const n=d.getInitialValue();d.value.set(n);const a=r(t);u(t,a);const i=s(t);e.onInit(t,a,i,d.value.get())})),Us(Pr(),p),Us(Ur(),f),Us($r(),p),Us(Kr(),f)]),apis:{resetToMin:t=>{m.setToMin(t,e)},resetToMax:t=>{m.setToMax(t,e)},setValue:g,refresh:u},domModification:{styles:{position:"relative"}}}},apis:{setValue:(e,t,o)=>{e.setValue(t,o)},resetToMin:(e,t)=>{e.resetToMin(t)},resetToMax:(e,t)=>{e.resetToMax(t)},refresh:(e,t)=>{e.refresh(t)}}}),Dk=da("rgb-hex-update"),Ak=da("slider-update"),Ek=da("palette-update"),Hk="form",Bk=[Fm("formBehaviours",[Im])],Vk=e=>"<alloy.field."+e+">",Rk=(e,t)=>({uid:e.uid,dom:e.dom,components:t,behaviours:jm(e.formBehaviours,[Im.config({store:{mode:"manual",getValue:t=>{const o=Eu(t,e);return ue(o,((e,t)=>e().bind((e=>{const o=Ku.getCurrent(e);return n=o,r=new Error(`Cannot find a current component to extract the value from for form part '${t}': `+aa(e.element)),n.fold((()=>qo.error(r)),qo.value);var n,r})).map(Im.getValue)))},setValue:(t,o)=>{me(o,((o,n)=>{_u(t,e,n).each((e=>{Ku.getCurrent(e).each((e=>{Im.setValue(e,o)}))}))}))}}})]),apis:{getField:(t,o)=>_u(t,e,o).bind(Ku.getCurrent)}}),Lk={getField:Oa(((e,t,o)=>e.getField(t,o))),sketch:e=>{const t=(()=>{const e=[];return{field:(t,o)=>(e.push(t),ku(Hk,Vk(t),o)),record:S(e)}})(),o=e(t),n=t.record(),r=j(n,(e=>pu({name:e,pname:Vk(e)})));return Iu(Hk,Bk,r,Rk,o)}},Nk=da("valid-input"),Ik=da("invalid-input"),Fk=da("validating-input"),Pk="colorcustom.rgb.",jk=(e,t,o,n)=>{const r=(o,n)=>kS.config({invalidClass:t("invalid"),notify:{onValidate:e=>{Vs(e,Fk,{type:o})},onValid:e=>{Vs(e,Nk,{type:o,value:Im.getValue(e)})},onInvalid:e=>{Vs(e,Ik,{type:o,value:Im.getValue(e)})}},validator:{validate:t=>{const o=Im.getValue(t),r=n(o)?qo.value(!0):qo.error(e("aria.input.invalid"));return hS(r)},validateOnLoad:!1}}),s=(o,n,s,a,l)=>{const c=e("colorcustom.rgb.range"),d=[Ix.parts.label({dom:{tag:"label",attributes:{"aria-label":a}},components:[ui(s)]}),Ix.parts.field({data:l,factory:lS,inputAttributes:i({type:"text"},"hex"===n?{"aria-live":"polite"}:{}),inputClasses:[t("textfield")],inputBehaviours:Nl([r(n,o),jx.config({})]),onSetValue:e=>{if(kS.isInvalid(e)){kS.run(e).get(w)}}})],m="hex"!==n?[Ix.parts["aria-descriptor"]({text:c})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:d.concat(m)}},a=(e,t)=>{const o=t.red,n=t.green,r=t.blue;Im.setValue(e,{red:o,green:n,blue:r})},l=bf({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),c=(e,t)=>{l.getOpt(e).each((e=>{kt(e.element,"background-color","#"+t.value)}))},d=Uu({factory:()=>{const r={red:Tr(E.some(255)),green:Tr(E.some(255)),blue:Tr(E.some(255)),hex:Tr(E.some("ffffff"))},i=e=>r[e].get(),d=(e,t)=>{r[e].set(t)},m=e=>{const t=e.red,o=e.green,n=e.blue;d("red",E.some(t)),d("green",E.some(o)),d("blue",E.some(n))},u=(e,t)=>{const o=t.event;"hex"!==o.type?d(o.type,E.none()):n(e)},g=(e,t,o)=>{const n=parseInt(o,10);d(t,E.some(n)),i("red").bind((e=>i("green").bind((t=>i("blue").map((o=>xw(e,t,o,1))))))).each((t=>{const o=((e,t)=>{const o=pw(t);return Lk.getField(e,"hex").each((t=>{Dp.isFocused(t)||Im.setValue(e,{hex:o.value})})),o})(e,t);Vs(e,Dk,{hex:o}),c(e,o)}))},h=(e,t)=>{const n=t.event;(e=>"hex"===e.type)(n)?((e,t)=>{o(e);const n=lw(t);d("hex",E.some(t));const r=kw(n);a(e,r),m(r),Vs(e,Dk,{hex:n}),c(e,n)})(e,n.value):g(e,n.type,n.value)},p=t=>({label:e(Pk+t+".label"),description:e(Pk+t+".description")}),f=p("red"),v=p("green"),b=p("blue"),y=p("hex");return gn(Lk.sketch((o=>({dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[o.field("red",Ix.sketch(s(Sw,"red",f.label,f.description,255))),o.field("green",Ix.sketch(s(Sw,"green",v.label,v.description,255))),o.field("blue",Ix.sketch(s(Sw,"blue",b.label,b.description,255))),o.field("hex",Ix.sketch(s(mw,"hex",y.label,y.description,"ffffff"))),l.asSpec()],formBehaviours:Nl([kS.config({invalidClass:t("form-invalid")}),zp("rgb-form-events",[Us(Nk,h),Us(Ik,u),Us(Fk,u)])])}))),{apis:{updateHex:(e,t)=>{Im.setValue(e,{hex:t.value}),((e,t)=>{const o=kw(t);a(e,o),m(o)})(e,t),c(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(e,t,o)=>{e.updateHex(t,o)}},extraApis:{}});return d},Uk=(e,t)=>{const o=_k.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),n=_k.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:`<div class=${t("sv-palette-inner-thumb")} role="presentation"></div>`}}),r=(e,t)=>{const{width:o,height:n}=e,r=e.getContext("2d");if(null===r)return;r.fillStyle=t,r.fillRect(0,0,o,n);const s=r.createLinearGradient(0,0,o,0);s.addColorStop(0,"rgba(255,255,255,1)"),s.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=s,r.fillRect(0,0,o,n);const a=r.createLinearGradient(0,0,0,n);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=a,r.fillRect(0,0,o,n)};return Uu({factory:e=>{const s=S({x:0,y:0}),a=Nl([Ku.config({find:E.some}),Dp.config({})]);return _k.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:s},rounded:!1,components:[o,n],onChange:(e,t,o)=>{Vs(e,Ek,{value:o})},onInit:(e,t,o,n)=>{r(o.element.dom,Tw(Mw))},sliderBehaviours:a})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(e,t,o)=>{((e,t)=>{const o=e.components()[0].element.dom,n=Dw(t,100,100),s=Cw(n);r(o,Tw(s))})(t,o)},setThumb:(e,t,o)=>{((e,t)=>{const o=Aw(kw(t));_k.setValue(e,{x:o.saturation,y:100-o.value})})(t,o)}},extraApis:{}})},Wk=(e,t)=>{const o=Uu({name:"ColourPicker",configFields:[tr("dom"),br("onValidHex",w),br("onInvalidHex",w)],factory:o=>{const n=jk(e,t,o.onValidHex,o.onInvalidHex),r=Uk(0,t),s={paletteRgba:Tr(Mw),paletteHue:Tr(0)},a=bf(((e,t)=>{const o=_k.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),n=_k.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return _k.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:S(0)},components:[o,n],sliderBehaviours:Nl([Dp.config({})]),onChange:(e,t,o)=>{Vs(e,Ak,{value:o})}})})(0,t)),i=bf(r.sketch({})),l=bf(n.sketch({})),c=(e,t,o)=>{i.getOpt(e).each((e=>{r.setHue(e,o)}))},d=(e,t)=>{l.getOpt(e).each((e=>{n.updateHex(e,t)}))},m=(e,t,o)=>{a.getOpt(e).each((e=>{_k.setValue(e,(e=>100-e/360*100)(o))}))},u=(e,t)=>{i.getOpt(e).each((e=>{r.setThumb(e,t)}))},g=(e,t,o,n)=>{((e,t)=>{const o=kw(e);s.paletteRgba.set(o),s.paletteHue.set(t)})(t,o),U(n,(n=>{n(e,t,o)}))};return{uid:o.uid,dom:o.dom,components:[i.asSpec(),a.asSpec(),l.asSpec()],behaviours:Nl([zp("colour-picker-events",[Us(Dk,(()=>{const e=[c,m,u];return(t,o)=>{const n=o.event.hex,r=(e=>Aw(kw(e)))(n);g(t,n,r.hue,e)}})()),Us(Ek,(()=>{const e=[d];return(t,o)=>{const n=o.event.value,r=s.paletteHue.get(),a=Dw(r,n.x,100-n.y),i=Ew(a);g(t,i,r,e)}})()),Us(Ak,(()=>{const e=[c,d];return(t,o)=>{const n=(e=>(100-e)/100*360)(o.event.value),r=s.paletteRgba.get(),a=Aw(r),i=Dw(n,a.saturation,a.value),l=Ew(i);g(t,l,n,e)}})())]),Ku.config({find:e=>l.getOpt(e)}),pp.config({mode:"acyclic"})])}}});return o},$k=()=>Ku.config({find:E.some}),Gk=e=>Ku.config({find:e.getOpt}),qk=e=>Ku.config({find:t=>tt(t.element,e).bind((e=>t.getSystem().getByDom(e).toOptional()))}),Kk=Dn([br("preprocess",C),br("postprocess",C)]),Xk=(e,t,o)=>Im.config({store:l(i({mode:"manual"},e.map((e=>({initialValue:e}))).getOr({})),{getValue:t,setValue:o})}),Jk=(e,t,o)=>Xk(e,(e=>t(e.element)),((e,t)=>o(e.element,t))),Yk=(e,t)=>{const o=Xn("RepresentingConfigs.memento processors",Kk,t);return Im.config({store:{mode:"manual",getValue:t=>{const n=e.get(t),r=Im.getValue(n);return o.postprocess(r)},setValue:(t,n)=>{const r=o.preprocess(n),s=e.get(t);Im.setValue(s,r)}}})},Zk=Jk,Qk=Xk,ez=e=>Jk(e,oa,na),tz=e=>Im.config({store:{mode:"memory",initialValue:e}}),oz={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},nz=(e,t,o)=>{const n=e=>"tox-"+e,r=Wk((e=>t=>e.translate(oz[t]))(t),n),s=bf(r.sketch({dom:{tag:"div",classes:[n("color-picker-container")],attributes:{role:"presentation"}},onValidHex:e=>{Vs(e,Yx,{name:"hex-valid",value:!0})},onInvalidHex:e=>{Vs(e,Yx,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[s.asSpec()],behaviours:Nl([Qk(o,(e=>{const t=s.get(e);return Ku.getCurrent(t).bind((e=>Im.getValue(e).hex)).map((e=>"#"+e)).getOr("")}),((e,t)=>{const o=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t),n=s.get(e);Ku.getCurrent(n).fold((()=>{}),(e=>{Im.setValue(e,{hex:E.from(o[1]).getOr("")}),Lk.getField(e,"hex").each((e=>{Bs(e,es())}))}))})),$k()])}};var rz=tinymce.util.Tools.resolve("tinymce.Resource");var sz=tinymce.util.Tools.resolve("tinymce.util.Tools");const az=(e,t,o)=>{const n=(e,t)=>{t.stop()},r=e=>(t,o)=>{U(e,(e=>{e(t,o)}))},s=(e,t)=>{if(!lg.isDisabled(e)){const o=t.event.raw;i(e,o.dataTransfer.files)}},a=(e,t)=>{const o=t.event.raw.target;i(e,o.files)},i=(o,n)=>{Im.setValue(o,((e,t)=>{const o=sz.explode(t.getOption("images_file_types"));return $(ie(e),(e=>I(o,(t=>_e(e.name.toLowerCase(),`.${t.toLowerCase()}`)))))})(n,t)),Vs(o,Kx,{name:e.name})},l=bf({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Nl([zp("input-file-events",[Ks(os()),Ks(ps())])])}),c=e.label.map((e=>qx(e,t))),d=Ix.parts.field({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Nl([tz(o.getOr([])),$k(),lg.config({}),jp.config({toggleClass:"dragenter",toggleOnExecute:!1}),zp("dropzone-events",[Us("dragenter",r([n,jp.toggle])),Us("dragleave",r([n,jp.toggle])),Us("dragover",n),Us("drop",r([n,s])),Us(ts(),a)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[ui(t.translate("Drop an image here"))]},vf.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[ui(t.translate("Browse for an image")),l.asSpec()],action:e=>{l.get(e).element.dom.click()},buttonBehaviours:Nl([jx.config({}),Ly(t.isDisabled),Vy()])})]}]})}});return Wx(c,d,["tox-form__group--stretched"],[])},iz=da("alloy-fake-before-tabstop"),lz=da("alloy-fake-after-tabstop"),cz=e=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:Nl([Dp.config({ignore:!0}),jx.config({})])}),dz=e=>({dom:{tag:"div",classes:["tox-navobj"]},components:[cz([iz]),e,cz([lz])],behaviours:Nl([qk(1)])}),mz=(e,t)=>{Vs(e,Zr(),{raw:{which:9,shiftKey:t}})},uz=(e,t)=>{const o=t.element;Ka(o,iz)?mz(e,!0):Ka(o,lz)&&mz(e,!1)},gz=e=>Sx(e,["."+iz,"."+lz].join(","),_),hz=(e,t,o)=>{const n=e.sandboxed,r=i(i(i({},e.label.map((e=>({title:e}))).getOr({})),o.map((e=>({srcdoc:e}))).getOr({})),n?{sandbox:"allow-scripts allow-same-origin"}:{}),s=(e=>{const t=Tr(e.getOr(""));return{getValue:e=>t.get(),setValue:(e,o)=>{t.get()!==o&&ft(e.element,"srcdoc",o),t.set(o)}}})(o),a=e.label.map((e=>qx(e,t))),l=Ix.parts.field({factory:{sketch:e=>dz({uid:e.uid,dom:{tag:"iframe",attributes:r},behaviours:Nl([jx.config({}),Dp.config({}),Qk(o,s.getValue,s.setValue)])})}});return Wx(a,l,["tox-form__group--stretched"],[])},pz=(e,t)=>{const o=Tr(t.getOr({url:""})),n=bf({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map((e=>({src:e.url}))).getOr({})}}),r=bf({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[n.asSpec()]}),s={};e.height.each((e=>s.height=e));const a=t.map((e=>({url:e.url,zoom:E.from(e.zoom),cachedWidth:E.from(e.cachedWidth),cachedHeight:E.from(e.cachedHeight)})));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:s,attributes:{role:"presentation"}},components:[r.asSpec()],behaviours:Nl([$k(),Qk(a,(()=>o.get()),((e,t)=>{const s={url:t.url};t.zoom.each((e=>s.zoom=e)),t.cachedWidth.each((e=>s.cachedWidth=e)),t.cachedHeight.each((e=>s.cachedHeight=e)),o.set(s);const a=()=>{const t=s.cachedWidth,o=s.cachedHeight;if(h(s.zoom)){const n=((e,t,o)=>{const n=Wt(e),r=Rt(e);return Math.min(n/t,r/o,1)})(e.element,t,o);s.zoom=n}const n=((e,t,o,n,r)=>{const s=o*r,a=n*r,i=Math.max(0,e/2-s/2),l=Math.max(0,t/2-a/2);return{left:i.toString()+"px",top:l.toString()+"px",width:s.toString()+"px",height:a.toString()+"px"}})(Wt(e.element),Rt(e.element),t,o,s.zoom);r.getOpt(e).each((e=>{zt(e.element,n)}))};n.getOpt(e).each((o=>{const n=o.element;var r;t.url!==bt(n,"src")&&(ft(n,"src",t.url),qa(e.element,"tox-imagepreview__loaded")),h(s.cachedWidth)||h(s.cachedHeight)||a(),(r=n,new Promise(((e,t)=>{const o=()=>{s(),e(r)},n=[pc(r,"load",o),pc(r,"error",(()=>{s(),t("Unable to load data from image: "+r.dom.src)}))],s=()=>U(n,(e=>e.unbind()));r.dom.complete&&o()}))).then((t=>{e.getSystem().isConnected()&&(Ga(e.element,"tox-imagepreview__loaded"),s.cachedWidth=t.dom.naturalWidth,s.cachedHeight=t.dom.naturalHeight,a())}))}))}))])}},fz=da("toolbar.button.execute"),vz={[gs()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},bz=(e,t,o)=>Mf(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:o},t),yz=(e,t)=>bz(e,t,[]),wz=(e,t)=>bz(e,t,[kp.config({})]),xz=(e,t,o)=>({dom:{tag:"span",classes:[`${t}__select-label`]},components:[ui(o.translate(e))],behaviours:Nl([kp.config({})])}),Sz=da("update-menu-text"),Cz=da("update-menu-icon"),kz=(e,t,o)=>{const n=Tr(w),r=e.text.map((e=>bf(xz(e,t,o.providers)))),s=e.icon.map((e=>bf(wz(e,o.providers.icons)))),a=(e,t)=>{const o=Im.getValue(e);return Dp.focus(o),Vs(o,"keydown",{raw:t.event.raw}),$S.close(o),E.some(!0)},c=e.role.fold((()=>({})),(e=>({role:e}))),d=e.tooltip.fold((()=>({})),(e=>{const t=o.providers.translate(e);return{title:t,"aria-label":t}})),m=Mf("chevron-down",{tag:"div",classes:[`${t}__select-chevron`]},o.providers.icons);return bf($S.sketch(l(i(i({},e.uid?{uid:e.uid}:{}),c),{dom:{tag:"button",classes:[t,`${t}--select`].concat(j(e.classes,(e=>`${t}--${e}`))),attributes:i({},d)},components:$y([s.map((e=>e.asSpec())),r.map((e=>e.asSpec())),E.some(m)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Nl([...e.dropdownBehaviours,Ly((()=>e.disabled||o.providers.isDisabled())),Vy(),GS.config({}),kp.config({}),zp("dropdown-events",[Py(e,n),jy(e,n)]),zp("menubutton-update-display-text",[Us(Sz,((e,t)=>{r.bind((t=>t.getOpt(e))).each((e=>{kp.set(e,[ui(o.providers.translate(t.event.text))])}))})),Us(Cz,((e,t)=>{s.bind((t=>t.getOpt(e))).each((e=>{kp.set(e,[wz(t.event.icon,o.providers.icons)])}))}))])]),eventOrder:gn(vz,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Nl([pp.config({mode:"special",onLeft:a,onRight:a})]),lazySink:o.getSink,toggleClass:`${t}--active`,parts:{menu:rb(0,e.columns,e.presets)},fetch:t=>gS(z(e.fetch,t))}))).asSpec()},zz=e=>"separator"===e.type,Oz={type:"separator"},Tz=(e,t)=>{const o=q(e,((e,o)=>(e=>s(e))(o)?""===o?e:"|"===o?e.length>0&&!zz(e[e.length-1])?e.concat([Oz]):e:we(t,o.toLowerCase())?e.concat([t[o.toLowerCase()]]):e:e.concat([o])),[]);return o.length>0&&zz(o[o.length-1])&&o.pop(),o},Mz=(e,t)=>(e=>we(e,"getSubmenuItems"))(e)?((e,t)=>{const o=e.getSubmenuItems(),n=_z(o,t);return{item:e,menus:gn(n.menus,Dr(e.value,n.items)),expansions:gn(n.expansions,Dr(e.value,e.value))}})(e,t):{item:e,menus:{},expansions:{}},_z=(e,t)=>{const o=Tz(s(e)?e.split(" "):e,t);return G(o,((e,o)=>{const n=(e=>{if(zz(e))return e;{const t=ye(e,"value").getOrThunk((()=>da("generated-menu-item")));return gn({value:t},e)}})(o),r=Mz(n,t);return{menus:gn(e.menus,r.menus),items:[r.item].concat(e.items),expansions:gn(e.expansions,r.expansions)}}),{menus:{},expansions:{},items:[]})},Dz=(e,t,o,n)=>{const r=da("primary-menu"),s=_z(e,o.shared.providers.menuItems());if(0===s.items.length)return E.none();const a=yx(r,s.items,t,o,n),i=ue(s.menus,((e,n)=>yx(n,e,t,o,!1))),l=gn(i,Dr(r,a));return E.from(hf.tieredData(r,l,s.expansions))},Az=e=>!we(e,"items"),Ez="data-value",Hz=(e,t,o,n)=>j(o,(o=>Az(o)?{type:"togglemenuitem",text:o.text,value:o.value,active:o.value===n,onAction:()=>{Im.setValue(e,o.value),Vs(e,Kx,{name:t}),Dp.focus(e)}}:{type:"nestedmenuitem",text:o.text,getSubmenuItems:()=>Hz(e,t,o.items,n)})),Bz=(e,t)=>le(e,(e=>Az(e)?ze(e.value===t,e):Bz(e.items,t))),Vz=Uu({name:"HtmlSelect",configFields:[tr("options"),Fm("selectBehaviours",[Dp,Im]),br("selectClasses",[]),br("selectAttributes",{}),dr("data")],factory:(e,t)=>{const o=j(e.options,(e=>({dom:{tag:"option",value:e.value,innerHtml:e.text}}))),n=e.data.map((e=>Dr("initialValue",e))).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:o,behaviours:jm(e.selectBehaviours,[Dp.config({}),Im.config({store:i({mode:"manual",getValue:e=>Za(e.element),setValue:(t,o)=>{K(e.options,(e=>e.value===o)).isSome()&&Qa(t.element,o)}},n)})])}}}),Rz=S([br("field1Name","field1"),br("field2Name","field2"),qi("onLockedChange"),Ui(["lockClass"]),br("locked",!1),Um("coupledFieldBehaviours",[Ku,Im])]),Lz=(e,t)=>pu({factory:Ix,name:e,overrides:e=>({fieldBehaviours:Nl([zp("coupled-input-behaviour",[Us(es(),(o=>{((e,t,o)=>_u(e,t,o).bind(Ku.getCurrent))(o,e,t).each((t=>{_u(o,e,"lock").each((n=>{jp.isOn(n)&&e.onLockedChange(o,t,n)}))}))}))])])})}),Nz=S([Lz("field1","field2"),Lz("field2","field1"),pu({factory:vf,schema:[tr("dom")],name:"lock",overrides:e=>({buttonBehaviours:Nl([jp.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])})})]),Iz=Wu({name:"FormCoupledInputs",configFields:Rz(),partFields:Nz(),factory:(e,t,o,n)=>({uid:e.uid,dom:e.dom,components:t,behaviours:Wm(e.coupledFieldBehaviours,[Ku.config({find:E.some}),Im.config({store:{mode:"manual",getValue:t=>{const o=Bu(t,e,["field1","field2"]);return{[e.field1Name]:Im.getValue(o.field1()),[e.field2Name]:Im.getValue(o.field2())}},setValue:(t,o)=>{const n=Bu(t,e,["field1","field2"]);xe(o,e.field1Name)&&Im.setValue(n.field1(),o[e.field1Name]),xe(o,e.field2Name)&&Im.setValue(n.field2(),o[e.field2Name])}}})]),apis:{getField1:t=>_u(t,e,"field1"),getField2:t=>_u(t,e,"field2"),getLock:t=>_u(t,e,"lock")}}),apis:{getField1:(e,t)=>e.getField1(t),getField2:(e,t)=>e.getField2(t),getLock:(e,t)=>e.getLock(t)}}),Fz=e=>{const t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==t){const e=parseFloat(t[1]),o=t[2];return qo.value({value:e,unit:o})}return qo.error(e)},Pz=(e,t)=>{const o={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},n=e=>we(o,e);return e.unit===t?E.some(e.value):n(e.unit)&&n(t)?o[e.unit]===o[t]?E.some(e.value):E.some(e.value/o[e.unit]*o[t]):E.none()},jz=e=>E.none(),Uz=(e,t)=>{const o=Fz(e).toOptional(),n=Fz(t).toOptional();return ke(o,n,((e,t)=>Pz(e,t.unit).map((e=>t.value/e)).map((e=>{return o=e,n=t.unit,e=>Pz(e,n).map((e=>({value:e*o,unit:n})));var o,n})).getOr(jz))).getOr(jz)},Wz=(e,t)=>{const o=e.label.map((e=>qx(e,t))),n=[lg.config({disabled:()=>e.disabled||t.isDisabled()}),Vy(),pp.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:e=>(Bs(e,Zx),E.some(!0))}),zp("textfield-change",[Us(es(),((t,o)=>{Vs(t,Kx,{name:e.name})})),Us(ms(),((t,o)=>{Vs(t,Kx,{name:e.name})}))]),jx.config({})],r=e.validation.map((e=>kS.config({getRoot:e=>Ze(e.element),invalidClass:"tox-invalid",validator:{validate:t=>{const o=Im.getValue(t),n=e.validator(o);return hS(!0===n?qo.value(o):qo.error(n))},validateOnLoad:e.validateOnLoad}}))).toArray(),s=e.placeholder.fold(S({}),(e=>({placeholder:t.translate(e)}))),a=e.inputMode.fold(S({}),(e=>({inputmode:e}))),c=i(i({},s),a),d=Ix.parts.field(l(i({tag:!0===e.multiline?"textarea":"input"},e.data.map((e=>({data:e}))).getOr({})),{inputAttributes:c,inputClasses:[e.classname],inputBehaviours:Nl(J([n,r])),selectOnFocus:!1,factory:lS})),m=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),u=[lg.config({disabled:()=>e.disabled||t.isDisabled(),onDisabled:e=>{Ix.getField(e).each(lg.disable)},onEnabled:e=>{Ix.getField(e).each(lg.enable)}}),Vy()];return Wx(o,d,m,u)};var $z=Object.freeze({__proto__:null,events:(e,t)=>{const o=e.stream.streams.setup(e,t);return Fs([Us(e.event,o),Zs((()=>t.cancel()))].concat(e.cancelEvent.map((e=>[Us(e,(()=>t.cancel()))])).getOr([])))}});const Gz=(e,t)=>{let o=null;const n=()=>{u(o)||(clearTimeout(o),o=null)};return{cancel:n,throttle:(...r)=>{n(),o=setTimeout((()=>{o=null,e.apply(null,r)}),t)}}},qz=e=>{const t=Tr(null);return Ma({readState:()=>({timer:null!==t.get()?"set":"unset"}),setTimer:e=>{t.set(e)},cancel:()=>{const e=t.get();null!==e&&e.cancel()}})};var Kz=Object.freeze({__proto__:null,throttle:qz,init:e=>e.stream.streams.state(e)});var Xz=[or("stream",Yn("mode",{throttle:[tr("delay"),br("stopEvent",!0),Xi("streams",{setup:(e,t)=>{const o=e.stream,n=Gz(e.onStream,o.delay);return t.setTimer(n),(e,t)=>{n.throttle(e,t),o.stopEvent&&t.stop()}},state:qz})]})),br("event","input"),dr("cancelEvent"),qi("onStream")];const Jz=Fl({fields:Xz,name:"streaming",active:$z,state:Kz}),Yz=(e,t,o)=>{const n=Im.getValue(o);Im.setValue(t,n),Qz(t)},Zz=(e,t)=>{const o=e.element,n=Za(o),r=o.dom;"number"!==bt(o,"type")&&t(r,n)},Qz=e=>{Zz(e,((e,t)=>e.setSelectionRange(t.length,t.length)))},eO=(e,t,o)=>{if(e.selectsOver){const n=Im.getValue(t),r=e.getDisplayText(n),s=Im.getValue(o);return 0===e.getDisplayText(s).indexOf(r)?E.some((()=>{Yz(0,t,o),((e,t)=>{Zz(e,((e,o)=>e.setSelectionRange(t,o.length)))})(t,r.length)})):E.none()}return E.none()},tO=S("alloy.typeahead.itemexecute"),oO=S([dr("lazySink"),tr("fetch"),br("minChars",5),br("responseTime",1e3),$i("onOpen"),br("getHotspot",E.some),br("getAnchorOverrides",S({})),br("layouts",E.none()),br("eventOrder",{}),Or("model",{},[br("getDisplayText",(e=>void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value)),br("selectsOver",!0),br("populateFromBrowse",!0)]),$i("onSetValue"),Gi("onExecute"),$i("onItemExecute"),br("inputClasses",[]),br("inputAttributes",{}),br("inputStyles",{}),br("matchWidth",!0),br("useMinWidth",!1),br("dismissOnBlur",!0),Ui(["openClass"]),dr("initialData"),Fm("typeaheadBehaviours",[Dp,Im,Jz,pp,jp,MS]),Qn("previewing",(()=>Tr(!0)))].concat(rS()).concat(jS())),nO=S([fu({schema:[ji()],name:"menu",overrides:e=>({fakeFocus:!0,onHighlight:(t,o)=>{e.previewing.get()?t.getSystem().getByUid(e.uid).each((n=>{eO(e.model,n,o).fold((()=>yg.dehighlight(t,o)),(e=>e()))})):t.getSystem().getByUid(e.uid).each((t=>{e.model.populateFromBrowse&&Yz(e.model,t,o)})),e.previewing.set(!1)},onExecute:(t,o)=>t.getSystem().getByUid(e.uid).toOptional().map((e=>(Vs(e,tO(),{item:o}),!0))),onHover:(t,o)=>{e.previewing.set(!1),t.getSystem().getByUid(e.uid).each((t=>{e.model.populateFromBrowse&&Yz(e.model,t,o)}))}})})]),rO=Wu({name:"Typeahead",configFields:oO(),partFields:nO(),factory:(e,t,o,n)=>{const r=(t,o,r)=>{e.previewing.set(!1);const s=MS.getCoupled(t,"sandbox");if(ym.isOpen(s))Ku.getCurrent(s).each((e=>{yg.getHighlighted(e).fold((()=>{r(e)}),(()=>{Is(s,e.element,"keydown",o)}))}));else{const o=e=>{Ku.getCurrent(e).each(r)};BS(e,a(t),t,s,n,o,AS.HighlightFirst).get(w)}},s=sS(e),a=e=>t=>t.map((t=>{const o=be(t.menus),n=Y(o,(e=>$(e.items,(e=>"item"===e.type))));return Im.getState(e).update(j(n,(e=>e.data))),t})),l=[Dp.config({}),Im.config({onSetValue:e.onSetValue,store:i({mode:"dataset",getDataKey:e=>Za(e.element),getFallbackEntry:e=>({value:e,meta:{}}),setValue:(t,o)=>{Qa(t.element,e.model.getDisplayText(o))}},e.initialData.map((e=>Dr("initialValue",e))).getOr({}))}),Jz.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:(t,o)=>{const r=MS.getCoupled(t,"sandbox");if(Dp.isFocused(t)&&Za(t.element).length>=e.minChars){const o=Ku.getCurrent(r).bind((e=>yg.getHighlighted(e).map(Im.getValue)));e.previewing.set(!0);const s=t=>{Ku.getCurrent(r).each((t=>{o.fold((()=>{e.model.selectsOver&&yg.highlightFirst(t)}),(e=>{yg.highlightBy(t,(t=>Im.getValue(t).value===e.value)),yg.getHighlighted(t).orThunk((()=>(yg.highlightFirst(t),E.none())))}))}))};BS(e,a(t),t,r,n,s,AS.HighlightFirst).get(w)}},cancelEvent:bs()}),pp.config({mode:"special",onDown:(e,t)=>(r(e,t,yg.highlightFirst),E.some(!0)),onEscape:e=>{const t=MS.getCoupled(e,"sandbox");return ym.isOpen(t)?(ym.close(t),E.some(!0)):E.none()},onUp:(e,t)=>(r(e,t,yg.highlightLast),E.some(!0)),onEnter:t=>{const o=MS.getCoupled(t,"sandbox"),n=ym.isOpen(o);if(n&&!e.previewing.get())return Ku.getCurrent(o).bind((e=>yg.getHighlighted(e))).map((e=>(Vs(t,tO(),{item:e}),!0)));{const r=Im.getValue(t);return Bs(t,bs()),e.onExecute(o,t,r),n&&ym.close(o),E.some(!0)}}}),jp.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),MS.config({others:{sandbox:t=>FS(e,t,{onOpen:()=>jp.on(t),onClose:()=>jp.off(t)})}}),zp("typeaheadevents",[ea((t=>{const o=w;RS(e,a(t),t,n,o,AS.HighlightFirst).get(w)})),Us(tO(),((t,o)=>{const n=MS.getCoupled(t,"sandbox");Yz(e.model,t,o.event.item),Bs(t,bs()),e.onItemExecute(t,n,o.event.item,Im.getValue(t)),ym.close(n),Qz(t)}))].concat(e.dismissOnBlur?[Us(ds(),(e=>{const t=MS.getCoupled(e,"sandbox");Xl(t.element).isNone()&&ym.close(t)}))]:[]))];return{uid:e.uid,dom:iS(gn(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:i(i({},s),jm(e.typeaheadBehaviours,l)),eventOrder:e.eventOrder}}}),sO=e=>l(i({},e),{toCached:()=>sO(e.toCached()),bindFuture:t=>sO(e.bind((e=>e.fold((e=>hS(qo.error(e))),(e=>t(e)))))),bindResult:t=>sO(e.map((e=>e.bind(t)))),mapResult:t=>sO(e.map((e=>e.map(t)))),mapError:t=>sO(e.map((e=>e.mapError(t)))),foldResult:(t,o)=>e.map((e=>e.fold(t,o))),withTimeout:(t,o)=>sO(gS((n=>{let r=!1;const s=setTimeout((()=>{r=!0,n(qo.error(o()))}),t);e.get((e=>{r||(clearTimeout(s),n(e))}))})))}),aO=e=>sO(gS(e)),iO=aO,lO=e=>({isEnabled:()=>!lg.isDisabled(e),setEnabled:t=>lg.set(e,!t),setActive:t=>{const o=e.element;t?(Ga(o,"tox-tbtn--enabled"),ft(o,"aria-pressed",!0)):(qa(o,"tox-tbtn--enabled"),xt(o,"aria-pressed"))},isActive:()=>Ka(e.element,"tox-tbtn--enabled")}),cO=(e,t,o,n)=>kz({text:e.text,icon:e.icon,tooltip:e.tooltip,role:n,fetch:(t,n)=>{e.fetch((e=>{n(Dz(e,Fv.CLOSE_ON_EXECUTE,o,!1))}))},onSetup:e.onSetup,getApi:lO,columns:1,presets:"normal",classes:[],dropdownBehaviours:[jx.config({})]},t,o.shared),dO=(e,t,o)=>{const n=e=>n=>{const r=!n.isActive();n.setActive(r),e.storage.set(r),o.shared.getSink().each((o=>{t().getOpt(o).each((t=>{Gl(t.element),Vs(t,Yx,{name:e.name,value:e.storage.get()})}))}))},r=e=>t=>{t.setActive(e.storage.get())};return t=>{t(j(e,(e=>{const t=e.text.fold((()=>({})),(e=>({text:e})));return l(i({type:e.type,active:!1},t),{onAction:n(e),onSetup:r(e)})})))}},mO=(e,t,o=[],n,r,s)=>{const a=t.fold((()=>({})),(e=>({action:e}))),l=i({buttonBehaviours:Nl([Ly((()=>!e.enabled||s.isDisabled())),Vy(),jx.config({}),zp("button press",[js("click"),js("mousedown")])].concat(o)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},a),c=gn(l,{dom:n});return gn(c,{components:r})},uO=(e,t,o,n=[])=>{const r={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map((e=>({"aria-label":o.translate(e),title:o.translate(e)}))).getOr({})},s=e.icon.map((e=>yz(e,o.icons))),a=$y([s]);return mO(e,t,n,r,a,o)},gO=(e,t,o,n=[],r=[])=>{const s=o.translate(e.text),a=e.icon.map((e=>yz(e,o.icons))),i=[a.getOrThunk((()=>ui(s)))],l=(e=>{switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}})(e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary")),c=[...l,...a.isSome()?["tox-button--icon"]:[],...e.borderless?["tox-button--naked"]:[],...r];return mO(e,t,n,{tag:"button",classes:c,attributes:{title:s}},i,o)},hO=(e,t,o,n=[],r=[])=>{const s=gO(e,E.some(t),o,n,r);return vf.sketch(s)},pO=(e,t)=>o=>{"custom"===t?Vs(o,Yx,{name:e,value:{}}):"submit"===t?Bs(o,Zx):"cancel"===t&&Bs(o,Jx)},fO=(e,t,o)=>{if(((e,t)=>"menu"===t)(0,t)){const t=()=>s,n=e,r=l(i({},e),{onSetup:t=>(t.setEnabled(e.enabled),w),fetch:dO(n.items,t,o)}),s=bf(cO(r,"tox-tbtn",o,E.none()));return s.asSpec()}if(((e,t)=>"custom"===t||"cancel"===t||"submit"===t)(0,t)){const n=pO(e.name,t),r=l(i({},e),{borderless:!1});return hO(r,n,o.shared.providers,[])}},vO=(e,t)=>{const o=pO(e.name,"custom");return n=E.none(),r=Ix.parts.field(i({factory:vf},gO(e,E.some(o),t,[tz(""),$k()]))),Wx(n,r,[],[]);var n,r},bO={type:"separator"},yO=e=>({type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:w}),wO=(e,t)=>({type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:w}),xO=(e,t)=>(e=>j(e,yO))(((e,t)=>$(t,(t=>t.type===e)))(e,t)),SO=e=>xO("header",e.targets),CO=e=>xO("anchor",e.targets),kO=e=>E.from(e.anchorTop).map((e=>wO("<top>",e))).toArray(),zO=e=>E.from(e.anchorBottom).map((e=>wO("<bottom>",e))).toArray(),OO=(e,t)=>{const o=e.toLowerCase();return $(t,(e=>{const t=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text;return Te(t.toLowerCase(),o)||Te(e.value.toLowerCase(),o)}))},TO=(e,t,o)=>{const n=Im.getValue(t),r=void 0!==n.meta.text?n.meta.text:n.value;return o.getLinkInformation().fold((()=>[]),(t=>{const n=OO(r,(e=>j(e,(e=>wO(e,e))))(o.getHistory(e)));return"file"===e?(s=[n,OO(r,SO(t)),OO(r,J([kO(t),CO(t),zO(t)]))],q(s,((e,t)=>0===e.length||0===t.length?e.concat(t):e.concat(bO,t)),[])):n;var s}))},MO=da("aria-invalid"),_O=(e,t)=>{e.dom.checked=t},DO=e=>e.dom.checked,AO=e=>(t,o,n,r)=>ye(o,"name").fold((()=>e(o,r,E.none())),(s=>t.field(s,e(o,r,ye(n,s))))),EO={bar:AO(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:j(e.items,t.interpreter)}))(e,t.shared))),collection:AO(((e,t,o)=>nS(e,t.shared.providers,o))),alertbanner:AO(((e,t)=>((e,t)=>Vx.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${e.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[vf.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:zf(e.icon,t.icons),attributes:{title:t.translate(e.iconTooltip)}},action:t=>{Vs(t,Yx,{name:"alert-banner",value:e.url})},buttonBehaviours:Nl([Of()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]}))(e,t.shared.providers))),input:AO(((e,t,o)=>((e,t,o)=>Wz({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:E.none(),maximized:e.maximized,data:o},t))(e,t.shared.providers,o))),textarea:AO(((e,t,o)=>((e,t,o)=>Wz({name:e.name,multiline:!0,label:e.label,inputMode:E.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:E.none(),maximized:e.maximized,data:o},t))(e,t.shared.providers,o))),label:AO(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:["tox-label"]},components:[ui(t.providers.translate(e.label))]},...j(e.items,t.interpreter)],behaviours:Nl([$k(),kp.config({}),ez(E.none()),pp.config({mode:"acyclic"})])}))(e,t.shared))),iframe:(HO=(e,t,o)=>hz(e,t.shared.providers,o),(e,t,o,n)=>{const r=gn(t,{source:"dynamic"});return AO(HO)(e,r,o,n)}),button:AO(((e,t)=>vO(e,t.shared.providers))),checkbox:AO(((e,t,o)=>((e,t,o)=>{const n=e=>(e.element.dom.click(),E.some(!0)),r=Ix.parts.field({factory:{sketch:C},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Nl([$k(),lg.config({disabled:()=>!e.enabled||t.isDisabled()}),jx.config({}),Dp.config({}),Zk(o,DO,_O),pp.config({mode:"special",onEnter:n,onSpace:n,stopSpaceKeyup:!0}),zp("checkbox-events",[Us(ts(),((t,o)=>{Vs(t,Kx,{name:e.name})}))])])}),s=Ix.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[ui(t.translate(e.label))],behaviours:Nl([GS.config({})])}),a=e=>Mf("checked"===e?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e]},t.icons),i=bf({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[a("checked"),a("unchecked")]});return Ix.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,i.asSpec(),s],fieldBehaviours:Nl([lg.config({disabled:()=>!e.enabled||t.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:e=>{Ix.getField(e).each(lg.disable)},onEnabled:e=>{Ix.getField(e).each(lg.enable)}}),Vy()])})})(e,t.shared.providers,o))),colorinput:AO(((e,t,o)=>JS(e,t.shared,t.colorinput,o))),colorpicker:AO(((e,t,o)=>nz(0,t.shared.providers,o))),dropzone:AO(((e,t,o)=>az(e,t.shared.providers,o))),grid:AO(((e,t)=>((e,t)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${e.columns}col`]},components:j(e.items,t.interpreter)}))(e,t.shared))),listbox:AO(((e,t,o)=>((e,t,o)=>{const n=t.shared.providers,r=o.bind((t=>Bz(e.items,t))).orThunk((()=>se(e.items).filter(Az))),s=e.label.map((e=>qx(e,n))),a={dom:{tag:"div",classes:["tox-listboxfield"]},components:[Ix.parts.field({dom:{},factory:{sketch:o=>kz({uid:o.uid,text:r.map((e=>e.text)),icon:E.none(),tooltip:e.label,role:E.none(),fetch:(o,n)=>{const r=Hz(o,e.name,e.items,Im.getValue(o));n(Dz(r,Fv.CLOSE_ON_EXECUTE,t,!1))},onSetup:S(w),getApi:S({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[jx.config({}),Qk(r.map((e=>e.value)),(e=>bt(e.element,Ez)),((t,o)=>{Bz(e.items,o).each((e=>{ft(t.element,Ez,e.value),Vs(t,Sz,{text:e.text})}))}))]},"tox-listbox",t.shared)}})]};return Ix.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:J([s.toArray(),[a]]),fieldBehaviours:Nl([lg.config({disabled:S(!e.enabled),onDisabled:e=>{Ix.getField(e).each(lg.disable)},onEnabled:e=>{Ix.getField(e).each(lg.enable)}})])})})(e,t,o))),selectbox:AO(((e,t,o)=>((e,t,o)=>{const n=j(e.items,(e=>({text:t.translate(e.text),value:e.value}))),r=e.label.map((e=>qx(e,t))),s=Ix.parts.field(l(i({dom:{}},o.map((e=>({data:e}))).getOr({})),{selectAttributes:{size:e.size},options:n,factory:Vz,selectBehaviours:Nl([lg.config({disabled:()=>!e.enabled||t.isDisabled()}),jx.config({}),zp("selectbox-change",[Us(ts(),((t,o)=>{Vs(t,Kx,{name:e.name})}))])])})),a=e.size>1?E.none():E.some(Mf("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),c={dom:{tag:"div",classes:["tox-selectfield"]},components:J([[s],a.toArray()])};return Ix.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:J([r.toArray(),[c]]),fieldBehaviours:Nl([lg.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{Ix.getField(e).each(lg.disable)},onEnabled:e=>{Ix.getField(e).each(lg.enable)}}),Vy()])})})(e,t.shared.providers,o))),sizeinput:AO(((e,t)=>((e,t)=>{let o=jz;const n=da("ratio-event"),r=e=>Mf(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},t.icons),s=Iz.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[r("lock"),r("unlock")],buttonBehaviours:Nl([lg.config({disabled:()=>!e.enabled||t.isDisabled()}),Vy(),jx.config({})])}),a=e=>({dom:{tag:"div",classes:["tox-form__group"]},components:e}),i=o=>Ix.parts.field({factory:lS,inputClasses:["tox-textfield"],inputBehaviours:Nl([lg.config({disabled:()=>!e.enabled||t.isDisabled()}),Vy(),jx.config({}),zp("size-input-events",[Us(Jr(),((e,t)=>{Vs(e,n,{isField1:o})})),Us(ts(),((t,o)=>{Vs(t,Kx,{name:e.name})}))])]),selectOnFocus:!1}),l=e=>({dom:{tag:"label",classes:["tox-label"]},components:[ui(t.translate(e))]}),c=Iz.parts.field1(a([Ix.parts.label(l("Width")),i(!0)])),d=Iz.parts.field2(a([Ix.parts.label(l("Height")),i(!1)]));return Iz.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[c,d,a([l(""),s])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(e,t,n)=>{Fz(Im.getValue(e)).each((e=>{o(e).each((e=>{Im.setValue(t,(e=>{const t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4};let o=e.value.toFixed((n=e.unit)in t?t[n]:1);var n;return-1!==o.indexOf(".")&&(o=o.replace(/\.?0*$/,"")),o+e.unit})(e))}))}))},coupledFieldBehaviours:Nl([lg.config({disabled:()=>!e.enabled||t.isDisabled(),onDisabled:e=>{Iz.getField1(e).bind(Ix.getField).each(lg.disable),Iz.getField2(e).bind(Ix.getField).each(lg.disable),Iz.getLock(e).each(lg.disable)},onEnabled:e=>{Iz.getField1(e).bind(Ix.getField).each(lg.enable),Iz.getField2(e).bind(Ix.getField).each(lg.enable),Iz.getLock(e).each(lg.enable)}}),Vy(),zp("size-input-events2",[Us(n,((e,t)=>{const n=t.event.isField1,r=n?Iz.getField1(e):Iz.getField2(e),s=n?Iz.getField2(e):Iz.getField1(e),a=r.map(Im.getValue).getOr(""),i=s.map(Im.getValue).getOr("");o=Uz(a,i)}))])])})})(e,t.shared.providers))),slider:AO(((e,t,o)=>((e,t,o)=>{const n=_k.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[ui(t.translate(e.label))]}),r=_k.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),s=_k.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return _k.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:S(o.getOrThunk((()=>(Math.abs(e.max)-Math.abs(e.min))/2)))},components:[n,r,s],sliderBehaviours:Nl([$k(),Dp.config({})]),onChoose:(t,o,n)=>{Vs(t,Kx,{name:e.name,value:n})}})})(e,t.shared.providers,o))),urlinput:AO(((e,t,o)=>((e,t,o,n)=>{const r=t.shared.providers,s=t=>{const n=Im.getValue(t);o.addToHistory(n.value,e.filetype)},a=Ix.parts.field(l(i({factory:rO},n.map((e=>({initialData:e}))).getOr({})),{dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":MO,type:"url"},minChars:0,responseTime:0,fetch:n=>{const r=TO(e.filetype,n,o),s=Dz(r,Fv.BUBBLE_TO_SANDBOX,t,!1);return hS(s)},getHotspot:e=>h.getOpt(e),onSetValue:(e,t)=>{e.hasConfigured(kS)&&kS.run(e).get(w)},typeaheadBehaviours:Nl(J([o.getValidationHandler().map((t=>kS.config({getRoot:e=>Ze(e.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(e,t)=>{d.getOpt(e).each((e=>{ft(e.element,"title",r.translate(t))}))}},validator:{validate:o=>{const n=Im.getValue(o);return iO((o=>{t({type:e.filetype,url:n.value},(e=>{if("invalid"===e.status){const t=qo.error(e.message);o(t)}else{const t=qo.value(e.message);o(t)}}))}))},validateOnLoad:!1}}))).toArray(),[lg.config({disabled:()=>!e.enabled||r.isDisabled()}),jx.config({}),zp("urlinput-events",J(["file"===e.filetype?[Us(es(),(t=>{Vs(t,Kx,{name:e.name})}))]:[],[Us(ts(),(t=>{Vs(t,Kx,{name:e.name}),s(t)})),Us(ms(),(t=>{Vs(t,Kx,{name:e.name}),s(t)}))]]))]])),eventOrder:{[es()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:e=>e.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:rb(0,0,"normal")},onExecute:(e,t,o)=>{Vs(t,Zx,{})},onItemExecute:(t,o,n,r)=>{s(t),Vs(t,Kx,{name:e.name})}})),c=e.label.map((e=>qx(e,r))),d=bf(((e,t,o=e,n=e)=>Mf(o,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:i({title:r.translate(n),"aria-live":"polite"},t.fold((()=>({})),(e=>({id:e}))))},r.icons))("invalid",E.some(MO),"warning")),m=bf({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[d.asSpec()]}),u=o.getUrlPicker(e.filetype),g=da("browser.url.event"),h=bf({dom:{tag:"div",classes:["tox-control-wrap"]},components:[a,m.asSpec()],behaviours:Nl([lg.config({disabled:()=>!e.enabled||r.isDisabled()})])}),p=bf(hO({name:e.name,icon:E.some("browse"),text:e.label.getOr(""),enabled:e.enabled,primary:!1,buttonType:E.none(),borderless:!0},(e=>Bs(e,g)),r,[],["tox-browse-url"]));return Ix.sketch({dom:Gx([]),components:c.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:J([[h.asSpec()],u.map((()=>p.asSpec())).toArray()])}]),fieldBehaviours:Nl([lg.config({disabled:()=>!e.enabled||r.isDisabled(),onDisabled:e=>{Ix.getField(e).each(lg.disable),p.getOpt(e).each(lg.disable)},onEnabled:e=>{Ix.getField(e).each(lg.enable),p.getOpt(e).each(lg.enable)}}),Vy(),zp("url-input-events",[Us(g,(t=>{Ku.getCurrent(t).each((o=>{const n=Im.getValue(o),r=i({fieldname:e.name},n);u.each((n=>{n(r).get((n=>{Im.setValue(o,n),Vs(t,Kx,{name:e.name})}))}))}))}))])])})})(e,t,t.urlinput,o))),customeditor:AO((e=>{const t=gc(),o=bf({dom:{tag:e.tag}}),n=gc();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Nl([zp("custom-editor-events",[Ys((r=>{o.getOpt(r).each((o=>{((e=>we(e,"init"))(e)?e.init(o.element.dom):rz.load(e.scriptId,e.scriptUrl).then((t=>t(o.element.dom,e.settings)))).then((e=>{n.on((t=>{e.setValue(t)})),n.clear(),t.set(e)}))}))}))]),Qk(E.none(),(()=>t.get().fold((()=>n.get().getOr("")),(e=>e.getValue()))),((e,o)=>{t.get().fold((()=>n.set(o)),(e=>e.setValue(o)))})),$k()]),components:[o.asSpec()]}})),htmlpanel:AO((e=>"presentation"===e.presets?Vx.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):Vx.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:Nl([jx.config({}),Dp.config({})])}))),imagepreview:AO(((e,t,o)=>pz(e,o))),table:AO(((e,t)=>((e,t)=>{const o=e=>({dom:{tag:"th",innerHtml:t.translate(e)}}),n=e=>({dom:{tag:"td",innerHtml:t.translate(e)}}),r=e=>({dom:{tag:"tr"},components:j(e,n)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(a=e.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:j(a,o)}]}),(s=e.cells,{dom:{tag:"tbody"},components:j(s,r)})],behaviours:Nl([jx.config({}),Dp.config({})])};var s,a})(e,t.shared.providers))),panel:AO(((e,t)=>((e,t)=>({dom:{tag:"div",classes:e.classes},components:j(e.items,t.shared.interpreter)}))(e,t)))};var HO;const BO={field:(e,t)=>t,record:S([])},VO=(e,t,o,n)=>{const r=gn(n,{shared:{interpreter:t=>RO(e,t,o,r)}});return RO(e,t,o,r)},RO=(e,t,o,n)=>ye(EO,t.type).fold((()=>t),(r=>r(e,t,o,n))),LO="layout-inset",NO=e=>e.x,IO=(e,t)=>e.x+e.width/2-t.width/2,FO=(e,t)=>e.x+e.width-t.width,PO=e=>e.y,jO=(e,t)=>e.y+e.height-t.height,UO=(e,t)=>e.y+e.height/2-t.height/2,WO=(e,t,o)=>Zi(FO(e,t),jO(e,t),o.insetSouthwest(),nl(),"southwest",dl(e,{right:0,bottom:3}),LO),$O=(e,t,o)=>Zi(NO(e),jO(e,t),o.insetSoutheast(),ol(),"southeast",dl(e,{left:1,bottom:3}),LO),GO=(e,t,o)=>Zi(FO(e,t),PO(e),o.insetNorthwest(),tl(),"northwest",dl(e,{right:0,top:2}),LO),qO=(e,t,o)=>Zi(NO(e),PO(e),o.insetNortheast(),el(),"northeast",dl(e,{left:1,top:2}),LO),KO=(e,t,o)=>Zi(IO(e,t),PO(e),o.insetNorth(),rl(),"north",dl(e,{top:2}),LO),XO=(e,t,o)=>Zi(IO(e,t),jO(e,t),o.insetSouth(),sl(),"south",dl(e,{bottom:3}),LO),JO=(e,t,o)=>Zi(FO(e,t),UO(e,t),o.insetEast(),il(),"east",dl(e,{right:0}),LO),YO=(e,t,o)=>Zi(NO(e),UO(e,t),o.insetWest(),al(),"west",dl(e,{left:1}),LO),ZO=e=>{switch(e){case"north":return KO;case"northeast":return qO;case"northwest":return GO;case"south":return XO;case"southeast":return $O;case"southwest":return WO;case"east":return JO;case"west":return YO}},QO=(e,t,o,n,r)=>lc(n).map(ZO).getOr(KO)(e,t,o,n,r),eT=e=>{switch(e){case"north":return XO;case"northeast":return $O;case"northwest":return WO;case"south":return KO;case"southeast":return qO;case"southwest":return GO;case"east":return YO;case"west":return JO}},tT=(e,t,o,n,r)=>lc(n).map(eT).getOr(KO)(e,t,o,n,r),oT={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},nT=(e,t,o)=>{const n={maxHeightFunction:Mc()};return()=>o()?{type:"node",root:lt(e()),node:E.from(e()),bubble:Ec(12,12,oT),layouts:{onRtl:()=>[qO],onLtr:()=>[GO]},overrides:n}:{type:"hotspot",hotspot:t(),bubble:Ec(-12,12,oT),layouts:{onRtl:()=>[bl],onLtr:()=>[yl]},overrides:n}},rT=(e,t,o)=>()=>o()?{type:"node",root:lt(e()),node:E.from(e()),layouts:{onRtl:()=>[KO],onLtr:()=>[KO]}}:{type:"hotspot",hotspot:t(),layouts:{onRtl:()=>[Cl],onLtr:()=>[Cl]}},sT=(e,t)=>()=>({type:"selection",root:t(),getSelection:()=>{const t=e.selection.getRng();return E.some(ad.range(Ve.fromDom(t.startContainer),t.startOffset,Ve.fromDom(t.endContainer),t.endOffset))}}),aT=e=>t=>({type:"node",root:e(),node:t}),iT=(e,t,o)=>{const n=_v(e),r=()=>Ve.fromDom(e.getBody()),s=()=>Ve.fromDom(e.getContentAreaContainer()),a=()=>n||!o();return{inlineDialog:nT(s,t,a),banner:rT(s,t,a),cursor:sT(e,r),node:aT(r)}},lT=e=>(t,o)=>{Yw(e)(t,o)},cT=e=>()=>Fw(e),dT=e=>()=>Pw(e),mT=e=>()=>Iw(e),uT=e=>({colorPicker:lT(e),hasCustomColors:cT(e),getColors:dT(e),getColorCols:mT(e)}),gT=e=>()=>hv(e),hT=e=>({isDraggableModal:gT(e)}),pT=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],fT=e=>q(e,((e,t)=>{if(we(t,"items")){const o=fT(t.items);return{customFormats:e.customFormats.concat(o.customFormats),formats:e.formats.concat([{title:t.title,items:o.formats}])}}if((e=>we(e,"inline"))(t)||(e=>we(e,"block"))(t)||(e=>we(e,"selector"))(t)){const o=`custom-${s(t.name)?t.name:t.title.toLowerCase()}`;return{customFormats:e.customFormats.concat([{name:o,format:t}]),formats:e.formats.concat([{title:t.title,format:o,icon:t.icon}])}}return l(i({},e),{formats:e.formats.concat(t)})}),{customFormats:[],formats:[]}),vT=e=>Kf(e).map((t=>{const o=((e,t)=>{const o=fT(t),n=t=>{U(t,(t=>{e.formatter.has(t.name)||e.formatter.register(t.name,t.format)}))};return e.formatter?n(o.customFormats):e.on("init",(()=>{n(o.customFormats)})),o.formats})(e,t);return Xf(e)?pT.concat(o):o})).getOr(pT),bT=(e,t,o)=>{const n={type:"formatter",isSelected:t(e.format),getStylePreview:o(e.format)};return gn(e,n)},yT=(e,t,o,n)=>{const r=t=>j(t,(t=>{const a=ce(t);if(xe(t,"items")){const e=r(t.items);return gn((e=>gn(e,{type:"submenu"}))(t),{getStyleItems:S(e)})}return xe(t,"format")?(e=>bT(e,o,n))(t):1===a.length&&N(a,"title")?gn(t,{type:"separator"}):(t=>{const r=s(t.name)?t.name:da(t.title),a=`custom-${r}`,i={type:"formatter",format:a,isSelected:o(a),getStylePreview:n(a)},l=gn(t,i);return e.formatter.register(r,l),l})(t)}));return r(t)},wT=e=>{const t=t=>()=>e.formatter.match(t),o=t=>()=>{const o=e.formatter.get(t);return void 0!==o?E.some({tag:o.length>0&&(o[0].inline||o[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):E.none()},n=e=>{const t=e.items;return void 0!==t&&t.length>0?Y(t,n):[e.format]},r=Tr([]),s=Tr([]),a=Tr([]),i=Tr([]),l=Tr(!1);e.on("PreInit",(a=>{const i=vT(e),l=yT(e,i,t,o);r.set(l),s.set(Y(l,n))})),e.on("addStyleModifications",(r=>{const s=yT(e,r.items,t,o);a.set(s),l.set(r.replace),i.set(Y(s,n))}));return{getData:()=>{const e=l.get()?[]:r.get(),t=a.get();return e.concat(t)},getFlattenedKeys:()=>{const e=l.get()?[]:s.get(),t=i.get();return e.concat(t)}}},xT=sz.trim,ST=e=>t=>{if((e=>f(e)&&1===e.nodeType)(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1},CT=ST("true"),kT=ST("false"),zT=(e,t,o,n,r)=>({type:e,title:t,url:o,level:n,attach:r}),OT=e=>e.innerText||e.textContent,TT=e=>(e=>e&&"A"===e.nodeName&&void 0!==(e.id||e.name))(e)&&_T(e),MT=e=>e&&/^(H[1-6])$/.test(e.nodeName),_T=e=>(e=>{for(;e=e.parentNode;){const t=e.contentEditable;if(t&&"inherit"!==t)return CT(e)}return!1})(e)&&!kT(e),DT=e=>MT(e)&&_T(e),AT=e=>{const t=(e=>e.id?e.id:da("h"))(e);return zT("header",OT(e),"#"+t,(e=>MT(e)?parseInt(e.nodeName.substr(1),10):0)(e),(()=>{e.id=t}))},ET=e=>{const t=e.id||e.name,o=OT(e);return zT("anchor",o||"#"+t,"#"+t,0,w)},HT=e=>{var t,o;return t="h1,h2,h3,h4,h5,h6,a:not([href])",o=e,j(hd(Ve.fromDom(o),t),(e=>e.dom))},BT=e=>xT(e.title).length>0,VT=e=>{const t=HT(e);return $((e=>j($(e,DT),AT))(t).concat((e=>j($(e,TT),ET))(t)),BT)},RT="tinymce-url-history",LT=e=>s(e)&&/^https?/.test(e),NT=e=>a(e)&&ve(e,(e=>{return!(m(t=e)&&t.length<=5&&Z(t,LT));var t})).isNone(),IT=()=>{const e=Bw.getItem(RT);if(null===e)return{};let t;try{t=JSON.parse(e)}catch(o){if(o instanceof SyntaxError)return{};throw o}return NT(t)?t:{}},FT=e=>{const t=IT();return ye(t,e).getOr([])},PT=(e,t)=>{if(!LT(e))return;const o=IT(),n=ye(o,t).getOr([]),r=$(n,(t=>t!==e));o[t]=[e].concat(r).slice(0,5),(e=>{if(!NT(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));Bw.setItem(RT,JSON.stringify(e))})(o)},jT=e=>!!e,UT=e=>ue(sz.makeMap(e,/[, ]/),jT),WT=e=>E.from(lv(e)),$T=(e,t)=>{const o=(e=>{const t=E.from(dv(e)).filter(jT).map(UT);return WT(e).fold(_,(e=>t.fold(D,(e=>ce(e).length>0&&e))))})(e);return g(o)?o?WT(e):E.none():o[t]?WT(e):E.none()},GT=e=>E.from(e).filter(s).getOrUndefined(),qT=e=>({getHistory:FT,addToHistory:PT,getLinkInformation:()=>(e=>mv(e)?E.some({targets:VT(e.getBody()),anchorTop:GT(uv(e)),anchorBottom:GT(gv(e))}):E.none())(e),getValidationHandler:()=>(e=>E.from(cv(e)))(e),getUrlPicker:t=>((e,t)=>$T(e,t).map((o=>n=>gS((r=>{const l=i({filetype:t,fieldname:n.fieldname},E.from(n.meta).getOr({}));o.call(e,((e,t)=>{if(!s(e))throw new Error("Expected value to be string");if(void 0!==t&&!a(t))throw new Error("Expected meta to be a object");r({value:e,meta:t})}),n.value,l)})))))(e,t)}),KT=(e,t,o)=>{const n=Tr(!1),r=(e=>{const t=Tr(Tv(e)?"bottom":"top");return{isPositionedAtTop:()=>"top"===t.get(),getDockingMode:t.get,setDockingMode:t.set}})(t),s={shared:{providers:{icons:()=>t.ui.registry.getAll().icons,menuItems:()=>t.ui.registry.getAll().menuItems,translate:yf.translate,isDisabled:()=>t.mode.isReadOnly()||!t.ui.isEnabled(),getOption:t.options.get},interpreter:e=>((e,t,o)=>RO(BO,e,t,o))(e,{},s),anchors:iT(t,o,r.isPositionedAtTop),header:r,getSink:e},urlinput:qT(t),styles:wT(t),colorinput:uT(t),dialog:hT(t),isContextMenuOpen:()=>n.get(),setContextMenuState:e=>n.set(e)};return s},XT=Lu,JT=wu,YT=S([br("shell",!1),tr("makeItem"),br("setupItem",w),Um("listBehaviours",[kp])]),ZT=vu({name:"items",overrides:()=>({behaviours:Nl([kp.config({})])})}),QT=S([ZT]),eM=Wu({name:S("CustomList")(),configFields:YT(),partFields:QT(),factory:(e,t,o,n)=>{const r=e.shell?{behaviours:[kp.config({})],components:[]}:{behaviours:[],components:t},s=t=>e.shell?E.some(t):_u(t,e,"items");return{uid:e.uid,dom:e.dom,components:r.components,behaviours:jm(e.listBehaviours,r.behaviours),apis:{setItems:(t,o)=>{s(t).fold((()=>{throw new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(n=>{const r=kp.contents(n),s=o.length,a=s-r.length,i=a>0?F(a,(()=>e.makeItem())):[],l=r.slice(s);U(l,(e=>kp.remove(n,e))),U(i,(e=>kp.append(n,e)));const c=kp.contents(n);U(c,((n,r)=>{e.setupItem(t,n,o[r],r)}))}))}}}},apis:{setItems:(e,t,o)=>{e.setItems(t,o)}}}),tM=S([tr("dom"),br("shell",!0),Fm("toolbarBehaviours",[kp])]),oM=S([vu({name:"groups",overrides:()=>({behaviours:Nl([kp.config({})])})})]),nM=Wu({name:"Toolbar",configFields:tM(),partFields:oM(),factory:(e,t,o,n)=>{const r=t=>e.shell?E.some(t):_u(t,e,"groups"),s=e.shell?{behaviours:[kp.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:s.components,behaviours:jm(e.toolbarBehaviours,s.behaviours),apis:{setGroups:(e,t)=>{r(e).fold((()=>{throw new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(e=>{kp.set(e,t)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)}}}),rM=w,sM=_,aM=S([]);var iM=Object.freeze({__proto__:null,setup:rM,isDocked:sM,getBehaviours:aM});const lM=e=>(Se(_t(e,"position"),"fixed")?E.none():Qe(e)).orThunk((()=>{const t=Ve.fromTag("span");return Ye(e).bind((e=>{_o(e,t);const o=Qe(t);return Eo(t),o}))})),cM=e=>lM(e).map(Pt).getOrThunk((()=>It(0,0))),dM=Mr([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),mM=(e,t)=>{const o=e.element;Ga(o,t.transitionClass),qa(o,t.fadeOutClass),Ga(o,t.fadeInClass),t.onShow(e)},uM=(e,t)=>{const o=e.element;Ga(o,t.transitionClass),qa(o,t.fadeInClass),Ga(o,t.fadeOutClass),t.onHide(e)},gM=(e,t,o)=>Z(e,(e=>{switch(e){case"bottom":return((e,t)=>e.bottom<=t.bottom)(t,o);case"top":return((e,t)=>e.y>=t.y)(t,o)}})),hM=(e,t)=>t.getInitialPos().map((t=>Po(t.bounds.x,t.bounds.y,Wt(e),Rt(e)))),pM=(e,t,o)=>o.getInitialPos().bind((n=>{switch(o.clearInitialPos(),n.position){case"static":return E.some(dM.static());case"absolute":const o=lM(e).map(jo).getOrThunk((()=>jo(gt())));return E.some(dM.absolute(Yl("absolute",ye(n.style,"left").map((e=>t.x-o.x)),ye(n.style,"top").map((e=>t.y-o.y)),ye(n.style,"right").map((e=>o.right-t.right)),ye(n.style,"bottom").map((e=>o.bottom-t.bottom)))));default:return E.none()}})),fM=(e,t,o)=>{const n=jo(e);if(gM(o.getModes(),n,t))return E.none();{((e,t,o)=>{o.setInitialPos({style:Dt(e),position:Tt(e,"position")||"static",bounds:t})})(e,n,o);const r=Wo(),s=n.x-r.x,a=t.y-r.y,i=r.bottom-t.bottom,l=n.y<=t.y;return E.some(dM.fixed(Yl("fixed",E.some(s),l?E.some(a):E.none(),E.none(),l?E.none():E.some(i))))}},vM=(e,t,o)=>{const n=e.element;return Se(_t(n,"position"),"fixed")?((e,t,o)=>hM(e,o).filter((e=>gM(o.getModes(),e,t))).bind((t=>pM(e,t,o))))(n,t,o):fM(n,t,o)},bM=(e,t,o)=>{o.setDocked(!1),U(["left","right","top","bottom","position"],(t=>Et(e.element,t))),t.onUndocked(e)},yM=(e,t,o,n)=>{const r="fixed"===n.position;o.setDocked(r),Zl(e.element,n);(r?t.onDocked:t.onUndocked)(e)},wM=(e,t,o,n,r=!1)=>{t.contextual.each((t=>{t.lazyContext(e).each((s=>{const a=((e,t)=>e.y<t.bottom&&e.bottom>t.y)(s,n);if(a!==o.isVisible())if(o.setVisible(a),r&&!a)Xa(e.element,[t.fadeOutClass]),t.onHide(e);else{(a?mM:uM)(e,t)}}))}))},xM=(e,t,o)=>{const n=e.element;o.setDocked(!1),((e,t)=>{const o=e.element;return hM(o,t).bind((e=>pM(o,e,t)))})(e,o).each((n=>{n.fold((()=>bM(e,t,o)),(n=>yM(e,t,o,n)),w)})),o.setVisible(!0),t.contextual.each((t=>{Ja(n,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)})),SM(e,t,o)},SM=(e,t,o)=>{e.getSystem().isConnected()&&((e,t,o)=>{const n=t.lazyViewport(e);o.isDocked()&&wM(e,t,o,n),vM(e,n,o).each((r=>{r.fold((()=>bM(e,t,o)),(n=>yM(e,t,o,n)),(r=>{wM(e,t,o,n,!0),yM(e,t,o,r)}))}))})(e,t,o)},CM=(e,t,o)=>{o.isDocked()&&xM(e,t,o)};var kM=Object.freeze({__proto__:null,refresh:SM,reset:CM,isDocked:(e,t,o)=>o.isDocked(),getModes:(e,t,o)=>o.getModes(),setModes:(e,t,o,n)=>o.setModes(n)});var zM=Object.freeze({__proto__:null,events:(e,t)=>Fs([Js(rs(),((o,n)=>{e.contextual.each((e=>{if(Ka(o.element,e.transitionClass)){Ja(o.element,[e.transitionClass,e.fadeInClass]);(t.isVisible()?e.onShown:e.onHidden)(o)}n.stop()}))})),Us(Ss(),((o,n)=>{SM(o,e,t)})),Us(Cs(),((o,n)=>{CM(o,e,t)}))])}),OM=[vr("contextual",[rr("fadeInClass"),rr("fadeOutClass"),rr("transitionClass"),ar("lazyContext"),$i("onShow"),$i("onShown"),$i("onHide"),$i("onHidden")]),kr("lazyViewport",Wo),zr("modes",["top","bottom"],Nn),$i("onDocked"),$i("onUndocked")];const TM=Fl({fields:OM,name:"docking",active:zM,apis:kM,state:Object.freeze({__proto__:null,init:e=>{const t=Tr(!1),o=Tr(!0),n=gc(),r=Tr(e.modes);return Ma({isDocked:t.get,setDocked:t.set,getInitialPos:n.get,setInitialPos:n.set,clearInitialPos:n.clear,isVisible:o.get,setVisible:o.set,getModes:r.get,setModes:r.set,readState:()=>`docked:  ${t.get()}, visible: ${o.get()}, modes: ${r.get().join(",")}`})}})}),MM=S(da("toolbar-height-change")),_M={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},DM="tox-tinymce--toolbar-sticky-on",AM="tox-tinymce--toolbar-sticky-off",EM=(e,t)=>N(TM.getModes(e),t),HM=e=>{const t=e.element;Ye(t).each((o=>{const n="padding-"+TM.getModes(e)[0];if(TM.isDocked(e)){const e=Wt(o);kt(t,"width",e+"px"),kt(o,n,Lt(r=t)+(parseInt(Tt(r,"margin-top"),10)||0)+(parseInt(Tt(r,"margin-bottom"),10)||0)+"px")}else Et(t,"width"),Et(o,n);var r}))},BM=(e,t)=>{t?(qa(e,_M.fadeOutClass),Xa(e,[_M.transitionClass,_M.fadeInClass])):(qa(e,_M.fadeInClass),Xa(e,[_M.fadeOutClass,_M.transitionClass]))},VM=(e,t)=>{const o=Ve.fromDom(e.getContainer());t?(Ga(o,DM),qa(o,AM)):(Ga(o,AM),qa(o,DM))},RM=(e,t)=>{const o=gc(),n=t.getSink,r=e=>{n().each((t=>e(t.element)))},s=t=>{e.inline||HM(t),VM(e,TM.isDocked(t)),t.getSystem().broadcastOn([xm()],{}),n().each((e=>e.getSystem().broadcastOn([xm()],{})))},a=e.inline?[]:[Wl.config({channels:{[MM()]:{onReceive:HM}}})];return[Dp.config({}),TM.config({contextual:i({lazyContext:t=>{const o=Lt(t.element),n=e.inline?e.getContentAreaContainer():e.getContainer(),r=jo(Ve.fromDom(n)),s=r.height-o,a=r.y+(EM(t,"top")?0:o);return E.some(Po(r.x,a,r.width,s))},onShow:()=>{r((e=>BM(e,!0)))},onShown:e=>{r((e=>Ja(e,[_M.transitionClass,_M.fadeInClass]))),o.get().each((t=>{((e,t)=>{const o=qe(t);Kl(o).filter((e=>!$e(t,e))).filter((t=>$e(t,Ve.fromDom(o.dom.body))||Ge(e,t))).each((()=>Gl(t)))})(e.element,t),o.clear()}))},onHide:e=>{((e,t)=>Xl(e).orThunk((()=>t().toOptional().bind((e=>Xl(e.element))))))(e.element,n).fold(o.clear,o.set),r((e=>BM(e,!1)))},onHidden:()=>{r((e=>Ja(e,[_M.transitionClass])))}},_M),lazyViewport:t=>{const o=Wo(),n=sv(e),r=o.y+(EM(t,"top")?n:0),s=o.height-(EM(t,"bottom")?n:0);return Po(o.x,r,o.width,s)},modes:[t.header.getDockingMode()],onDocked:s,onUndocked:s}),...a]};var LM=Object.freeze({__proto__:null,setup:(e,t,o)=>{e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",(()=>{o().each(TM.reset)})),e.on("ResizeWindow ResizeEditor",(()=>{o().each(HM)})),e.on("SkinLoaded",(()=>{o().each((e=>{TM.isDocked(e)?TM.reset(e):TM.refresh(e)}))})),e.on("FullscreenStateChanged",(()=>{o().each(TM.reset)}))),e.on("AfterScrollIntoView",(e=>{o().each((t=>{TM.refresh(t);const o=t.element;ch(o)&&((e,t)=>{const o=qe(t),n=o.dom.defaultView.innerHeight,r=Ho(o),s=Ve.fromDom(e.elm),a=Uo(s),i=Rt(s),l=a.y,c=l+i,d=Pt(t),m=Rt(t),u=d.top,g=u+m,h=Math.abs(u-r.top)<2,p=Math.abs(g-(r.top+n))<2;if(h&&l<g)Bo(r.left,l-m,o);else if(p&&c>u){const e=l-n+i+m;Bo(r.left,e,o)}})(e,o)}))})),e.on("PostRender",(()=>{VM(e,!1)}))},isDocked:e=>e().map(TM.isDocked).getOr(!1),getBehaviours:RM});const NM=Dn([ub,or("items",En([Bn([gb,cr("items",Nn)]),Nn]))].concat(jb)),IM=[gr("text"),gr("tooltip"),gr("icon"),ar("fetch"),kr("onSetup",(()=>w))],FM=Dn([ub,...IM]),PM=e=>qn("menubutton",FM,e),jM=Dn([ub,Tb,Ob,zb,Db,yb,Cb,Sr("presets","normal",["normal","color","listpreview"]),Vb(1),xb,Sb]);var UM=Uu({factory:(e,t)=>{const o={focus:pp.focusIn,setMenus:(e,o)=>{const n=j(o,(e=>{const o={type:"menubutton",text:e.text,fetch:t=>{t(e.getItems())}},n=PM(o).mapError((e=>Jn(e))).getOrDie();return cO(n,"tox-mbtn",t.backstage,E.some("menuitem"))}));kp.set(e,n)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:Nl([kp.config({}),zp("menubar-events",[Ys((t=>{e.onSetup(t)})),Us(Xr(),((e,t)=>{ki(e.element,".tox-mbtn--active").each((o=>{zi(t.event.target,".tox-mbtn").each((t=>{$e(o,t)||e.getSystem().getByDom(o).each((o=>{e.getSystem().getByDom(t).each((e=>{$S.expand(e),$S.close(o),Dp.focus(e)}))}))}))}))})),Us(Ms(),((e,t)=>{t.event.prevFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((o=>{t.event.newFocus.bind((t=>e.getSystem().getByDom(t).toOptional())).each((e=>{$S.isOpen(o)&&($S.expand(e),$S.close(o))}))}))}))]),pp.config({mode:"flow",selector:".tox-mbtn",onEscape:t=>(e.onEscape(t),E.some(!0))}),jx.config({})]),apis:o,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[tr("dom"),tr("uid"),tr("onEscape"),tr("backstage"),br("onSetup",w)],apis:{focus:(e,t)=>{e.focus(t)},setMenus:(e,t,o)=>{e.setMenus(t,o)}}});const WM=(e,t)=>t.getAnimationRoot.fold((()=>e.element),(t=>t(e))),$M=e=>e.dimension.property,GM=(e,t)=>e.dimension.getDimension(t),qM=(e,t)=>{const o=WM(e,t);Ja(o,[t.shrinkingClass,t.growingClass])},KM=(e,t)=>{qa(e.element,t.openClass),Ga(e.element,t.closedClass),kt(e.element,$M(t),"0px"),Ht(e.element)},XM=(e,t)=>{qa(e.element,t.closedClass),Ga(e.element,t.openClass),Et(e.element,$M(t))},JM=(e,t,o,n)=>{o.setCollapsed(),kt(e.element,$M(t),GM(t,e.element)),Ht(e.element),qM(e,t),KM(e,t),t.onStartShrink(e),t.onShrunk(e)},YM=(e,t,o,n)=>{const r=n.getOrThunk((()=>GM(t,e.element)));o.setCollapsed(),kt(e.element,$M(t),r),Ht(e.element);const s=WM(e,t);qa(s,t.growingClass),Ga(s,t.shrinkingClass),KM(e,t),t.onStartShrink(e)},ZM=(e,t,o)=>{const n=GM(t,e.element);("0px"===n?JM:YM)(e,t,o,E.some(n))},QM=(e,t,o)=>{const n=WM(e,t),r=Ka(n,t.shrinkingClass),s=GM(t,e.element);XM(e,t);const a=GM(t,e.element);(r?()=>{kt(e.element,$M(t),s),Ht(e.element)}:()=>{KM(e,t)})(),qa(n,t.shrinkingClass),Ga(n,t.growingClass),XM(e,t),kt(e.element,$M(t),a),o.setExpanded(),t.onStartGrow(e)},e_=(e,t,o)=>{const n=WM(e,t);return!0===Ka(n,t.growingClass)},t_=(e,t,o)=>{const n=WM(e,t);return!0===Ka(n,t.shrinkingClass)};var o_=Object.freeze({__proto__:null,refresh:(e,t,o)=>{if(o.isExpanded()){Et(e.element,$M(t));const o=GM(t,e.element);kt(e.element,$M(t),o)}},grow:(e,t,o)=>{o.isExpanded()||QM(e,t,o)},shrink:(e,t,o)=>{o.isExpanded()&&ZM(e,t,o)},immediateShrink:(e,t,o)=>{o.isExpanded()&&JM(e,t,o)},hasGrown:(e,t,o)=>o.isExpanded(),hasShrunk:(e,t,o)=>o.isCollapsed(),isGrowing:e_,isShrinking:t_,isTransitioning:(e,t,o)=>e_(e,t)||t_(e,t),toggleGrow:(e,t,o)=>{(o.isExpanded()?ZM:QM)(e,t,o)},disableTransitions:qM});var n_=Object.freeze({__proto__:null,exhibit:(e,t,o)=>{const n=t.expanded;return Da(n?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:Dr(t.dimension.property,"0px")})},events:(e,t)=>Fs([Js(rs(),((o,n)=>{if(n.event.raw.propertyName===e.dimension.property){qM(o,e),t.isExpanded()&&Et(o.element,e.dimension.property);(t.isExpanded()?e.onGrown:e.onShrunk)(o)}}))])}),r_=[tr("closedClass"),tr("openClass"),tr("shrinkingClass"),tr("growingClass"),dr("getAnimationRoot"),$i("onShrunk"),$i("onStartShrink"),$i("onGrown"),$i("onStartGrow"),br("expanded",!1),or("dimension",Yn("property",{width:[Xi("property","width"),Xi("getDimension",(e=>Wt(e)+"px"))],height:[Xi("property","height"),Xi("getDimension",(e=>Rt(e)+"px"))]}))];var s_=Object.freeze({__proto__:null,init:e=>{const t=Tr(e.expanded);return Ma({isExpanded:()=>!0===t.get(),isCollapsed:()=>!1===t.get(),setCollapsed:z(t.set,!1),setExpanded:z(t.set,!0),readState:()=>"expanded: "+t.get()})}});const a_=Fl({fields:r_,name:"sliding",active:n_,apis:o_,state:s_}),i_="container",l_=[Fm("slotBehaviours",[])],c_=e=>"<alloy.field."+e+">",d_=(e,t)=>{const o=t=>Hu(e),n=(t,o)=>(n,r)=>_u(n,e,r).map((e=>t(e,r))).getOr(o),r=(e,t)=>"true"!==bt(e.element,"aria-hidden"),s=n(r,!1),a=n(((e,t)=>{if(r(e)){const o=e.element;kt(o,"display","none"),ft(o,"aria-hidden","true"),Vs(e,_s(),{name:t,visible:!1})}})),i=(l=a,(e,t)=>{U(t,(t=>l(e,t)))});var l;const c=n(((e,t)=>{if(!r(e)){const o=e.element;Et(o,"display"),xt(o,"aria-hidden"),Vs(e,_s(),{name:t,visible:!0})}})),d={getSlotNames:o,getSlot:(t,o)=>_u(t,e,o),isShowing:s,hideSlot:a,hideAllSlots:e=>i(e,o()),showSlot:c};return{uid:e.uid,dom:e.dom,components:t,behaviours:Pm(e.slotBehaviours),apis:d}},m_=ue({getSlotNames:(e,t)=>e.getSlotNames(t),getSlot:(e,t,o)=>e.getSlot(t,o),isShowing:(e,t,o)=>e.isShowing(t,o),hideSlot:(e,t,o)=>e.hideSlot(t,o),hideAllSlots:(e,t)=>e.hideAllSlots(t),showSlot:(e,t,o)=>e.showSlot(t,o)},(e=>Oa(e))),u_=i(i({},m_),{sketch:e=>{const t=(()=>{const e=[];return{slot:(t,o)=>(e.push(t),ku(i_,c_(t),o)),record:S(e)}})(),o=e(t),n=t.record(),r=j(n,(e=>pu({name:e,pname:c_(e)})));return Iu(i_,l_,r,d_,o)}}),g_=Dn([Ob,Tb,kr("onShow",w),kr("onHide",w),Cb]),h_=e=>({element:()=>e.element.dom}),p_=(e,t)=>{const o=j(ce(t),(e=>{const o=t[e],n=Kn((e=>qn("sidebar",g_,e))(o));return{name:e,getApi:h_,onSetup:n.onSetup,onShow:n.onShow,onHide:n.onHide}}));return j(o,(t=>{const n=Tr(w);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:xy([Py(t,n),jy(t,n),Us(_s(),((e,t)=>{const n=t.event;K(o,(e=>e.name===n.name)).each((t=>{(n.visible?t.onShow:t.onHide)(t.getApi(e))}))}))])})}))},f_=e=>u_.sketch((t=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:p_(t,e),slotBehaviours:xy([Ys((e=>u_.hideAllSlots(e)))])}))),v_=e=>Ku.getCurrent(e).bind((e=>{if(a_.isGrowing(e)||a_.hasGrown(e)){return Ku.getCurrent(e).bind((e=>K(u_.getSlotNames(e),(t=>u_.isShowing(e,t)))))}return E.none()})),b_=da("FixSizeEvent"),y_=da("AutoSizeEvent");var w_=Object.freeze({__proto__:null,block:(e,t,o,n)=>{ft(e.element,"aria-busy",!0);const r=t.getRoot(e).getOr(e),s=Nl([pp.config({mode:"special",onTab:()=>E.some(!0),onShiftTab:()=>E.some(!0)}),Dp.config({})]),a=n(r,s),i=r.getSystem().build(a);kp.append(r,vi(i)),i.hasConfigured(pp)&&t.focus&&pp.focusIn(i),o.isBlocked()||t.onBlock(e),o.blockWith((()=>kp.remove(r,i)))},unblock:(e,t,o)=>{xt(e.element,"aria-busy"),o.isBlocked()&&t.onUnblock(e),o.clear()}}),x_=[kr("getRoot",E.none),Cr("focus",!0),$i("onBlock"),$i("onUnblock")];const S_=Fl({fields:x_,name:"blocking",apis:w_,state:Object.freeze({__proto__:null,init:()=>{const e=mc((e=>e.destroy()));return Ma({readState:e.isSet,blockWith:t=>{e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),C_=e=>{const t=Ve.fromHtml(e),o=et(t),n=(e=>{const t=void 0!==e.dom.attributes?e.dom.attributes:[];return q(t,((e,t)=>"class"===t.name?e:l(i({},e),{[t.name]:t.value})),{})})(t),r=(e=>Array.prototype.slice.call(e.dom.classList,0))(t),s=0===o.length?{}:{innerHtml:oa(t)};return i({tag:Re(t),classes:r,attributes:n},s)},k_=e=>Ku.getCurrent(e).each((e=>Gl(e.element))),z_=(e,t,o,n)=>{const r=t.element;if(((e,t)=>{const o="tabindex",n="data-mce-tabindex";E.from(e.iframeElement).map(Ve.fromDom).each((e=>{t?(yt(e,o).each((t=>ft(e,n,t))),ft(e,o,-1)):(xt(e,o),yt(e,n).each((t=>{ft(e,o,t),xt(e,n)})))}))})(e,o),o)S_.block(t,(e=>(t,o)=>({dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:C_('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}))(n)),Et(r,"display"),xt(r,"aria-hidden"),e.hasFocus()&&k_(t);else{const o=Ku.getCurrent(t).exists((e=>ql(e.element)));S_.unblock(t),kt(r,"display","none"),ft(r,"aria-hidden","true"),o&&e.focus()}},O_=(e,t,o)=>{const n=Tr(!1),r=gc(),s=o=>{n.get()&&!(e=>{if((e=>"focusin"===e.type)(e))return(e.composed?se(e.composedPath()):E.from(e.target)).map(Ve.fromDom).filter(Ne).exists((e=>Ka(e,"mce-pastebin")));return!1})(o)&&(o.preventDefault(),k_(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",(()=>{e.dom.bind(e.getWin(),"focusin",s),e.on("BeforeExecCommand",(e=>{"mcefocus"===e.command.toLowerCase()&&!0!==e.value&&s(e)}))}));const a=r=>{r!==n.get()&&(n.set(r),z_(e,t(),r,o.providers),e.dispatch("AfterProgressState",{state:r}))};e.on("ProgressState",(t=>{if(r.on(clearTimeout),b(t.time)){const o=ff.setEditorTimeout(e,(()=>a(t.state)),t.time);r.set(o)}else a(t.state),r.clear()}))},T_=(e,t,o)=>({within:e,extra:t,withinWidth:o}),M_=(e,t,o)=>{const n=(r=(e,t)=>{const n=o(e);return E.some({element:e,start:t,finish:t+n,width:n})},q(e,((e,t)=>r(t,e.len).fold(S(e),(t=>({len:t.finish,list:e.list.concat([t])})))),{len:0,list:[]}).list);var r;const s=$(n,(e=>e.finish<=t)),a=G(s,((e,t)=>e+t.width),0);return{within:s,extra:n.slice(s.length),withinWidth:a}},__=e=>j(e,(e=>e.element)),D_=(e,t,o,n)=>{const r=((e,t,o)=>{const n=M_(t,e,o);return 0===n.extra.length?E.some(n):E.none()})(e,t,o).getOrThunk((()=>M_(t,e-o(n),o))),s=r.within,a=r.extra,i=r.withinWidth;return 1===a.length&&a[0].width<=o(n)?((e,t,o)=>{const n=__(e.concat(t));return T_(n,[],o)})(s,a,i):a.length>=1?((e,t,o,n)=>{const r=__(e).concat([o]);return T_(r,__(t),n)})(s,a,n,i):((e,t,o)=>T_(__(e),[],o))(s,0,i)},A_=(e,t)=>{const o=j(t,(e=>vi(e)));nM.setGroups(e,o)},E_=(e,t,o)=>{const n=t.builtGroups.get();if(0===n.length)return;const r=Du(e,t,"primary"),s=MS.getCoupled(e,"overflowGroup");kt(r.element,"visibility","hidden");const a=n.concat([s]),i=le(a,(e=>Xl(e.element).bind((t=>e.getSystem().getByDom(t).toOptional()))));o([]),A_(r,a);const l=Wt(r.element),c=D_(l,t.builtGroups.get(),(e=>Wt(e.element)),s);0===c.extra.length?(kp.remove(r,s),o([])):(A_(r,c.within),o(c.extra)),Et(r.element,"visibility"),Ht(r.element),i.each(Dp.focus)},H_=S([Fm("splitToolbarBehaviours",[MS]),Qn("builtGroups",(()=>Tr([])))]),B_=S([Ui(["overflowToggledClass"]),pr("getOverflowBounds"),tr("lazySink"),Qn("overflowGroups",(()=>Tr([])))].concat(H_())),V_=S([pu({factory:nM,schema:tM(),name:"primary"}),fu({schema:tM(),name:"overflow"}),fu({name:"overflow-button"}),fu({name:"overflow-group"})]),R_=S(((e,t)=>{((e,t)=>{const o=Ut.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);kt(e,"max-width",o+"px")})(e,Math.floor(t))})),L_=S([Ui(["toggledClass"]),tr("lazySink"),ar("fetch"),pr("getBounds"),vr("fireDismissalEventInstead",[br("event",Os())]),Pc()]),N_=S([fu({name:"button",overrides:e=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Nl([jp.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),fu({factory:nM,schema:tM(),name:"toolbar",overrides:e=>({toolbarBehaviours:Nl([pp.config({mode:"cyclic",onEscape:t=>(_u(t,e,"button").each(Dp.focus),E.none())})])})})]),I_=(e,t)=>{const o=MS.getCoupled(e,"toolbarSandbox");ym.isOpen(o)?ym.close(o):ym.open(o,t.toolbar())},F_=(e,t,o,n)=>{const r=o.getBounds.map((e=>e())),s=o.lazySink(e).getOrDie();Kd.positionWithinBounds(s,t,{anchor:{type:"hotspot",hotspot:e,layouts:n,overrides:{maxWidthFunction:R_()}}},r)},P_=(e,t,o,n,r)=>{nM.setGroups(t,r),F_(e,t,o,n),jp.on(e)},j_=Wu({name:"FloatingToolbarButton",factory:(e,t,o,n)=>l(i({},vf.sketch(l(i({},n.button()),{action:e=>{I_(e,n)},buttonBehaviours:Wm({dump:n.button().buttonBehaviours},[MS.config({others:{toolbarSandbox:t=>((e,t,o)=>{const n=Ti();return{dom:{tag:"div",attributes:{id:n.id}},behaviours:Nl([pp.config({mode:"special",onEscape:e=>(ym.close(e),E.some(!0))}),ym.config({onOpen:(r,s)=>{o.fetch().get((r=>{P_(e,s,o,t.layouts,r),n.link(e.element),pp.focusIn(s)}))},onClose:()=>{jp.off(e),Dp.focus(e),n.unlink(e.element)},isPartOf:(t,o,n)=>_i(o,n)||_i(e,n),getAttachPoint:()=>o.lazySink(e).getOrDie()}),Wl.config({channels:i(i({},km(i({isExtraPart:_},o.fireDismissalEventInstead.map((e=>({fireEventInstead:{event:e.event}}))).getOr({})))),Om({doReposition:()=>{ym.getState(MS.getCoupled(e,"toolbarSandbox")).each((n=>{F_(e,n,o,t.layouts)}))}}))})])}})(t,o,e)}})])}))),{apis:{setGroups:(t,n)=>{ym.getState(MS.getCoupled(t,"toolbarSandbox")).each((r=>{P_(t,r,e,o.layouts,n)}))},reposition:t=>{ym.getState(MS.getCoupled(t,"toolbarSandbox")).each((n=>{F_(t,n,e,o.layouts)}))},toggle:e=>{I_(e,n)},getToolbar:e=>ym.getState(MS.getCoupled(e,"toolbarSandbox")),isOpen:e=>ym.isOpen(MS.getCoupled(e,"toolbarSandbox"))}}),configFields:L_(),partFields:N_(),apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},getToolbar:(e,t)=>e.getToolbar(t),isOpen:(e,t)=>e.isOpen(t)}}),U_=S([tr("items"),Ui(["itemSelector"]),Fm("tgroupBehaviours",[pp])]),W_=S([bu({name:"items",unit:"item"})]),$_=Wu({name:"ToolbarGroup",configFields:U_(),partFields:W_(),factory:(e,t,o,n)=>({uid:e.uid,dom:e.dom,components:t,behaviours:jm(e.tgroupBehaviours,[pp.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}})}),G_=e=>j(e,(e=>vi(e))),q_=(e,t,o)=>{E_(e,o,(n=>{o.overflowGroups.set(n),t.getOpt(e).each((e=>{j_.setGroups(e,G_(n))}))}))},K_=Wu({name:"SplitFloatingToolbar",configFields:B_(),partFields:V_(),factory:(e,t,o,n)=>{const r=bf(j_.sketch({fetch:()=>gS((t=>{t(G_(e.overflowGroups.get()))})),layouts:{onLtr:()=>[yl,bl],onRtl:()=>[bl,yl],onBottomLtr:()=>[xl,wl],onBottomRtl:()=>[wl,xl]},getBounds:o.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:n["overflow-button"](),toolbar:n.overflow()}}));return{uid:e.uid,dom:e.dom,components:t,behaviours:jm(e.splitToolbarBehaviours,[MS.config({others:{overflowGroup:()=>$_.sketch(l(i({},n["overflow-group"]()),{items:[r.asSpec()]}))}})]),apis:{setGroups:(t,o)=>{e.builtGroups.set(j(o,t.getSystem().build)),q_(t,r,e)},refresh:t=>q_(t,r,e),toggle:e=>{r.getOpt(e).each((e=>{j_.toggle(e)}))},isOpen:e=>r.getOpt(e).map(j_.isOpen).getOr(!1),reposition:e=>{r.getOpt(e).each((e=>{j_.reposition(e)}))},getOverflow:e=>r.getOpt(e).bind(j_.getToolbar)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)},refresh:(e,t)=>{e.refresh(t)},reposition:(e,t)=>{e.reposition(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t),getOverflow:(e,t)=>e.getOverflow(t)}}),X_=S([Ui(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),$i("onOpened"),$i("onClosed")].concat(H_())),J_=S([pu({factory:nM,schema:tM(),name:"primary"}),pu({factory:nM,schema:tM(),name:"overflow",overrides:e=>({toolbarBehaviours:Nl([a_.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:t=>{_u(t,e,"overflow-button").each((e=>{jp.off(e),Dp.focus(e)})),e.onClosed(t)},onGrown:t=>{pp.focusIn(t),e.onOpened(t)},onStartGrow:t=>{_u(t,e,"overflow-button").each(jp.on)}}),pp.config({mode:"acyclic",onEscape:t=>(_u(t,e,"overflow-button").each(Dp.focus),E.some(!0))})])})}),fu({name:"overflow-button",overrides:e=>({buttonBehaviours:Nl([jp.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),fu({name:"overflow-group"})]),Y_=(e,t)=>{_u(e,t,"overflow-button").bind((()=>_u(e,t,"overflow"))).each((o=>{Z_(e,t),a_.toggleGrow(o)}))},Z_=(e,t)=>{_u(e,t,"overflow").each((o=>{E_(e,t,(e=>{const t=j(e,(e=>vi(e)));nM.setGroups(o,t)})),_u(e,t,"overflow-button").each((e=>{a_.hasGrown(o)&&jp.on(e)})),a_.refresh(o)}))},Q_=Wu({name:"SplitSlidingToolbar",configFields:X_(),partFields:J_(),factory:(e,t,o,n)=>{const r="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:t,behaviours:jm(e.splitToolbarBehaviours,[MS.config({others:{overflowGroup:e=>$_.sketch(l(i({},n["overflow-group"]()),{items:[vf.sketch(l(i({},n["overflow-button"]()),{action:t=>{Bs(e,r)}}))]}))}}),zp("toolbar-toggle-events",[Us(r,(t=>{Y_(t,e)}))])]),apis:{setGroups:(t,o)=>{((t,o)=>{const n=j(o,t.getSystem().build);e.builtGroups.set(n)})(t,o),Z_(t,e)},refresh:t=>Z_(t,e),toggle:t=>Y_(t,e),isOpen:t=>((e,t)=>_u(e,t,"overflow").map(a_.hasGrown).getOr(!1))(t,e)},domModification:{attributes:{role:"group"}}}},apis:{setGroups:(e,t,o)=>{e.setGroups(t,o)},refresh:(e,t)=>{e.refresh(t)},toggle:(e,t)=>{e.toggle(t)},isOpen:(e,t)=>e.isOpen(t)}}),eD=e=>{const t=e.title.fold((()=>({})),(e=>({attributes:{title:e}})));return{dom:i({tag:"div",classes:["tox-toolbar__group"]},t),components:[$_.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Nl([jx.config({}),Dp.config({})])}},tD=e=>$_.sketch(eD(e)),oD=(e,t)=>{const o=Ys((t=>{const o=j(e.initGroups,tD);nM.setGroups(t,o)}));return Nl([Iy(e.providers.isDisabled),Vy(),pp.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),zp("toolbar-events",[o])])},nD=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":eD({title:E.none(),items:[]}),"overflow-button":uO({name:"more",icon:E.some("more-drawer"),enabled:!0,tooltip:E.some("More..."),primary:!1,buttonType:E.none(),borderless:!1},E.none(),e.providers)},splitToolbarBehaviours:oD(e,t)}},rD=e=>{const t=nD(e),o=K_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return K_.sketch(l(i({},t),{lazySink:e.getSink,getOverflowBounds:()=>{const t=e.moreDrawerData.lazyHeader().element,o=Uo(t),n=Xe(t),r=Uo(n),s=Math.max(n.dom.scrollHeight,r.height);return Po(o.x+4,r.y,o.width-8,s)},parts:l(i({},t.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}}),components:[o],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))},sD=e=>{const t=Q_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),o=Q_.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),n=nD(e);return Q_.sketch(l(i({},n),{components:[t,o],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:e=>{e.getSystem().broadcastOn([MM()],{type:"opened"})},onClosed:e=>{e.getSystem().broadcastOn([MM()],{type:"closed"})}}))},aD=e=>{const t=e.cyclicKeying?"cyclic":"acyclic";return nM.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===Af.scrolling?["tox-toolbar--scrolling"]:[])},components:[nM.parts.groups({})],toolbarBehaviours:oD(e,t)})},iD=JT.optional({factory:UM,name:"menubar",schema:[tr("backstage")]}),lD=JT.optional({factory:{sketch:e=>eM.sketch({uid:e.uid,dom:e.dom,listBehaviours:Nl([pp.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>aD({type:e.type,uid:da("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:()=>(e.onEscape(),E.some(!0))}),setupItem:(e,t,o,n)=>{nM.setGroups(t,o)},shell:!0})},name:"multiple-toolbar",schema:[tr("dom"),tr("onEscape")]}),cD=JT.optional({factory:{sketch:e=>{const t=(e=>e.type===Af.sliding?sD:e.type===Af.floating?rD:aD)(e);return t({type:e.type,uid:e.uid,onEscape:()=>(e.onEscape(),E.some(!0)),cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[tr("dom"),tr("onEscape"),tr("getSink")]}),dD=JT.optional({factory:{sketch:e=>{const t=e.editor,o=e.sticky?RM:aM;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:Nl(o(t,e.sharedBackstage))}}},name:"header",schema:[tr("dom")]}),mD=JT.optional({name:"socket",schema:[tr("dom")]}),uD=JT.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Nl([jx.config({}),Dp.config({}),a_.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:e=>{Ku.getCurrent(e).each(u_.hideAllSlots),Bs(e,y_)},onGrown:e=>{Bs(e,y_)},onStartGrow:e=>{Vs(e,b_,{width:_t(e.element,"width").getOr("")})},onStartShrink:e=>{Vs(e,b_,{width:Wt(e.element)+"px"})}}),kp.config({}),Ku.config({find:e=>{const t=kp.contents(e);return se(t)}})])}],behaviours:Nl([qk(0),zp("sidebar-sliding-events",[Us(b_,((e,t)=>{kt(e.element,"width",t.event.width)})),Us(y_,((e,t)=>{Et(e.element,"width")}))])])})},name:"sidebar",schema:[tr("dom")]}),gD=JT.optional({factory:{sketch:e=>({uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Nl([kp.config({}),S_.config({focus:!1}),Ku.config({find:e=>se(e.components())})]),components:[]})},name:"throbber",schema:[tr("dom")]});var hD=Wu({name:"OuterContainer",factory:(e,t,o)=>{const n={getSocket:t=>XT.getPart(t,e,"socket"),setSidebar:(t,o)=>{XT.getPart(t,e,"sidebar").each((e=>((e,t)=>{Ku.getCurrent(e).each((e=>kp.set(e,[f_(t)])))})(e,o)))},toggleSidebar:(t,o)=>{XT.getPart(t,e,"sidebar").each((e=>((e,t)=>{Ku.getCurrent(e).each((e=>{Ku.getCurrent(e).each((o=>{a_.hasGrown(e)?u_.isShowing(o,t)?a_.shrink(e):(u_.hideAllSlots(o),u_.showSlot(o,t)):(u_.hideAllSlots(o),u_.showSlot(o,t),a_.grow(e))}))}))})(e,o)))},whichSidebar:t=>XT.getPart(t,e,"sidebar").bind(v_).getOrNull(),getHeader:t=>XT.getPart(t,e,"header"),getToolbar:t=>XT.getPart(t,e,"toolbar"),setToolbar:(t,o)=>{XT.getPart(t,e,"toolbar").each((e=>{e.getApis().setGroups(e,o)}))},setToolbars:(t,o)=>{XT.getPart(t,e,"multiple-toolbar").each((e=>{eM.setItems(e,o)}))},refreshToolbar:t=>{XT.getPart(t,e,"toolbar").each((e=>e.getApis().refresh(e)))},toggleToolbarDrawer:t=>{XT.getPart(t,e,"toolbar").each((e=>{var t,o;t=e.getApis().toggle,o=t=>t(e),null!=t?E.some(o(t)):E.none()}))},isToolbarDrawerToggled:t=>XT.getPart(t,e,"toolbar").bind((e=>E.from(e.getApis().isOpen).map((t=>t(e))))).getOr(!1),getThrobber:t=>XT.getPart(t,e,"throbber"),focusToolbar:t=>{XT.getPart(t,e,"toolbar").orThunk((()=>XT.getPart(t,e,"multiple-toolbar"))).each((e=>{pp.focusIn(e)}))},setMenubar:(t,o)=>{XT.getPart(t,e,"menubar").each((e=>{UM.setMenus(e,o)}))},focusMenubar:t=>{XT.getPart(t,e,"menubar").each((e=>{UM.focus(e)}))}};return{uid:e.uid,dom:e.dom,components:t,apis:n,behaviours:e.behaviours}},configFields:[tr("dom"),tr("behaviours")],partFields:[dD,iD,cD,lD,mD,uD,gD],apis:{getSocket:(e,t)=>e.getSocket(t),setSidebar:(e,t,o)=>{e.setSidebar(t,o)},toggleSidebar:(e,t,o)=>{e.toggleSidebar(t,o)},whichSidebar:(e,t)=>e.whichSidebar(t),getHeader:(e,t)=>e.getHeader(t),getToolbar:(e,t)=>e.getToolbar(t),setToolbar:(e,t,o)=>{const n=j(o,(e=>tD(e)));e.setToolbar(t,n)},setToolbars:(e,t,o)=>{const n=j(o,(e=>j(e,tD)));e.setToolbars(t,n)},refreshToolbar:(e,t)=>e.refreshToolbar(t),toggleToolbarDrawer:(e,t)=>{e.toggleToolbarDrawer(t)},isToolbarDrawerToggled:(e,t)=>e.isToolbarDrawerToggled(t),getThrobber:(e,t)=>e.getThrobber(t),setMenubar:(e,t,o)=>{e.setMenubar(t,o)},focusMenubar:(e,t)=>{e.focusMenubar(t)},focusToolbar:(e,t)=>{e.focusToolbar(t)}}});const pD={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},fD=e=>"string"==typeof e?e.split(" "):e,vD=(e,t)=>{const o=i(i({},pD),t.menus),n=ce(t.menus).length>0,r=void 0===t.menubar||!0===t.menubar?fD("file edit view insert format tools table help"):fD(!1===t.menubar?"":t.menubar),s=$(r,(e=>{const o=we(pD,e);return n?o||ye(t.menus,e).exists((e=>we(e,"items"))):o})),a=j(s,(n=>{const r=o[n];return((e,t,o)=>{const n=Zf(o).split(/[ ,]/);return{text:e.title,getItems:()=>Y(e.items,(e=>{const o=e.toLowerCase();return 0===o.trim().length||I(n,(e=>e===o))?[]:"separator"===o||"|"===o?[{type:"separator"}]:t.menuItems[o]?[t.menuItems[o]]:[]}))}})({title:r.title,items:fD(r.items)},t,e)}));return $(a,(e=>e.getItems().length>0&&I(e.getItems(),(e=>"separator"!==e.type))))},bD=e=>{const t=()=>{e._skinLoaded=!0,(e=>{e.dispatch("SkinLoaded")})(e)};return()=>{e.initialized?t():e.on("init",t)}},yD=(e,t,o)=>(e.on("remove",(()=>o.unload(t))),o.load(t)),wD=(e,t)=>yD(e,t+"/skin.min.css",e.ui.styleSheetLoader),xD=(e,t)=>{var o;if(o=Ve.fromDom(e.getElement()),ct(o).isSome()){return yD(e,t+"/skin.shadowdom.min.css",Vf.DOM.styleSheetLoader)}return Promise.resolve()},SD=(e,t)=>{const o=Sv(t);o&&t.contentCSS.push(o+(e?"/content.inline":"/content")+".min.css"),!wv(t)&&s(o)?Promise.all([wD(t,o),xD(t,o)]).then(bD(t),((e,t)=>()=>((e,t)=>e.dispatch("SkinLoadError",t))(e,{message:t}))(t,"Skin could not be loaded")):bD(t)()},CD=z(SD,!1),kD=z(SD,!0),zD=(e,t)=>o=>{const n=uc(),r=()=>{o.setActive(e.formatter.match(t));const r=e.formatter.formatChanged(t,o.setActive);n.set(r)};return e.initialized?r():e.once("init",r),()=>{e.off("init",r),n.clear()}},OD=(e,t,o)=>n=>{const r=()=>o(n),s=()=>{o(n),e.on(t,r)};return e.initialized?s():e.once("init",s),()=>{e.off("init",s),e.off(t,r)}},TD=e=>t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("mceToggleFormat",!1,t.format)}))},MD=(e,t)=>()=>e.execCommand(t),_D=(e,t,o)=>{const n=(e,n,s,a)=>{const l=t.shared.providers.translate(e.title);if("separator"===e.type)return E.some({type:"separator",text:l});if("submenu"===e.type){const t=Y(e.getStyleItems(),(e=>r(e,n,a)));return 0===n&&t.length<=0?E.none():E.some({type:"nestedmenuitem",text:l,enabled:t.length>0,getSubmenuItems:()=>Y(e.getStyleItems(),(e=>r(e,n,a)))})}return E.some(i({type:"togglemenuitem",text:l,icon:e.icon,active:e.isSelected(a),enabled:!s,onAction:o.onAction(e)},e.getStylePreview().fold((()=>({})),(e=>({meta:{style:e}})))))},r=(e,t,r)=>{const s="formatter"===e.type&&o.isInvalid(e);return 0===t?s?[]:n(e,t,!1,r).toArray():n(e,t,s,r).toArray()},s=e=>{const t=o.getCurrentValue(),n=o.shouldHide?0:1;return Y(e,(e=>r(e,n,t)))};return{validateItems:s,getFetch:(e,t)=>(o,n)=>{const r=t(),a=s(r);n(Dz(a,Fv.CLOSE_ON_EXECUTE,e,!1))}}},DD=(e,t,o)=>{const n=o.dataset,r="basic"===n.type?()=>j(n.data,(e=>bT(e,o.isSelectedFor,o.getPreviewFor))):n.getData;return{items:_D(0,t,o),getStyleItems:r}},AD=(e,t,o)=>{const{items:n,getStyleItems:r}=DD(0,t,o),s=OD(e,"NodeChange",(e=>{const t=e.getComponent();o.updateText(t)}));return kz({text:o.icon.isSome()?E.none():o.text,icon:o.icon,tooltip:E.from(o.tooltip),role:E.none(),fetch:n.getFetch(t,r),onSetup:s,getApi:e=>({getComponent:S(e)}),columns:1,presets:"normal",classes:o.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)};var ED,HD;(HD=ED||(ED={}))[HD.SemiColon=0]="SemiColon",HD[HD.Space=1]="Space";const BD=(e,t,o)=>{const n=(e=>j(e,(e=>{let t=e,o=e;const n=e.split("=");return n.length>1&&(t=n[0],o=n[1]),{title:t,format:o}})))(((e,t)=>t===ED.SemiColon?e.replace(/;$/,"").split(";"):e.split(" "))(e.options.get(t),o));return{type:"basic",data:n}},VD=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],RD=e=>{const t={type:"basic",data:VD};return{tooltip:"Align",text:E.none(),icon:E.some("align-left"),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:E.none,getPreviewFor:e=>E.none,onAction:t=>()=>K(VD,(e=>e.format===t.format)).each((t=>e.execCommand(t.command))),updateText:t=>{const o=K(VD,(t=>e.formatter.match(t.format))).fold(S("left"),(e=>e.title.toLowerCase()));Vs(t,Cz,{icon:`align-${o}`})},dataset:t,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},LD=(e,t)=>{const o=t(),n=j(o,(e=>e.format));return E.from(e.formatter.closest(n)).bind((e=>K(o,(t=>t.format===e)))).orThunk((()=>ze(e.formatter.match("p"),{title:"Paragraph",format:"p"})))},ND=e=>{const t="Paragraph",o=BD(e,"block_formats",ED.SemiColon);return{tooltip:"Blocks",text:E.some(t),icon:E.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:E.none,getPreviewFor:t=>()=>{const o=e.formatter.get(t);return E.some({tag:o.length>0&&(o[0].inline||o[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))})},onAction:TD(e),updateText:n=>{const r=LD(e,(()=>o.data)).fold(S(t),(e=>e.title));Vs(n,Sz,{text:r})},dataset:o,shouldHide:!1,isInvalid:t=>!e.formatter.canApply(t.format)}},ID=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],FD=e=>{const t=e.split(/\s*,\s*/);return j(t,(e=>e.replace(/^['"]+|['"]+$/g,"")))},PD=e=>{const t="System Font",o=()=>{const o=e=>e?FD(e)[0]:"",r=e.queryCommandValue("FontName"),s=n.data,a=r?r.toLowerCase():"",i=K(s,(e=>{const t=e.format;return t.toLowerCase()===a||o(t).toLowerCase()===o(a).toLowerCase()})).orThunk((()=>ze((e=>0===e.indexOf("-apple-system")&&(()=>{const t=FD(e.toLowerCase());return Z(ID,(e=>t.indexOf(e.toLowerCase())>-1))})())(a),{title:t,format:a})));return{matchOpt:i,font:r}},n=BD(e,"font_family_formats",ED.SemiColon);return{tooltip:"Fonts",text:E.some(t),icon:E.none(),isSelectedFor:e=>t=>t.exists((t=>t.format===e)),getCurrentValue:()=>{const{matchOpt:e}=o();return e},getPreviewFor:e=>()=>E.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}}),onAction:t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontName",!1,t.format)}))},updateText:e=>{const{matchOpt:t,font:n}=o(),r=t.fold(S(n),(e=>e.title));Vs(e,Sz,{text:r})},dataset:n,shouldHide:!1,isInvalid:_}},jD={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},UD={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},WD=(e,t)=>/[0-9.]+px$/.test(e)?((e,t)=>{const o=Math.pow(10,t);return Math.round(e*o)/o})(72*parseInt(e,10)/96,t||0)+"pt":ye(UD,e).getOr(e),$D=e=>ye(jD,e).getOr(""),GD=e=>{const t=()=>{let t=E.none();const o=n.data,r=e.queryCommandValue("FontSize");if(r)for(let e=3;t.isNone()&&e>=0;e--){const n=WD(r,e),s=$D(n);t=K(o,(e=>e.format===r||e.format===n||e.format===s))}return{matchOpt:t,size:r}},o=S(E.none),n=BD(e,"font_size_formats",ED.Space);return{tooltip:"Font sizes",text:E.some("12pt"),icon:E.none(),isSelectedFor:e=>t=>t.exists((t=>t.format===e)),getPreviewFor:o,getCurrentValue:()=>{const{matchOpt:e}=t();return e},onAction:t=>()=>{e.undoManager.transact((()=>{e.focus(),e.execCommand("FontSize",!1,t.format)}))},updateText:e=>{const{matchOpt:o,size:n}=t(),r=o.fold(S(n),(e=>e.title));Vs(e,Sz,{text:r})},dataset:n,shouldHide:!1,isInvalid:_}},qD=(e,t)=>{const o="Paragraph";return{tooltip:"Formats",text:E.some(o),icon:E.none(),isSelectedFor:t=>()=>e.formatter.match(t),getCurrentValue:E.none,getPreviewFor:t=>()=>{const o=e.formatter.get(t);return void 0!==o?E.some({tag:o.length>0&&(o[0].inline||o[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):E.none()},onAction:TD(e),updateText:t=>{const n=e=>{const t=e.items;return void 0!==t&&t.length>0?Y(t,n):[{title:e.title,format:e.format}]},r=Y(vT(e),n),s=LD(e,S(r)).fold(S(o),(e=>e.title));Vs(t,Sz,{text:s})},shouldHide:Jf(e),isInvalid:t=>!e.formatter.canApply(t.format),dataset:t}};var KD=Object.freeze({__proto__:null,events:(e,t)=>{const o=(o,n)=>{e.updateState.each((e=>{const r=e(o,n);t.set(r)})),e.renderComponents.each((r=>{const s=r(n,t.get());(e.reuseDom?vp:fp)(o,s)}))};return Fs([Us(us(),((t,n)=>{const r=n;if(!r.universal){const n=e.channel;N(r.channels,n)&&o(t,r.data)}})),Ys(((t,n)=>{e.initialData.each((e=>{o(t,e)}))}))])}});var XD=Object.freeze({__proto__:null,getState:(e,t,o)=>o}),JD=[tr("channel"),dr("renderComponents"),dr("updateState"),dr("initialData"),Cr("reuseDom",!0)];const YD=Fl({fields:JD,name:"reflecting",active:KD,apis:XD,state:Object.freeze({__proto__:null,init:()=>{const e=Tr(E.none());return{readState:()=>e.get().getOr("none"),get:e.get,set:e.set,clear:()=>e.set(E.none())}}})}),ZD=S([tr("toggleClass"),tr("fetch"),qi("onExecute"),br("getHotspot",E.some),br("getAnchorOverrides",S({})),Pc(),qi("onItemExecute"),dr("lazySink"),tr("dom"),$i("onOpen"),Fm("splitDropdownBehaviours",[MS,pp,Dp]),br("matchWidth",!1),br("useMinWidth",!1),br("eventOrder",{}),dr("role")].concat(jS())),QD=pu({factory:vf,schema:[tr("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Nl([Dp.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each(Rs)},buttonBehaviours:Nl([jp.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])})}),eA=pu({factory:vf,schema:[tr("dom")],name:"button",defaults:()=>({buttonBehaviours:Nl([Dp.revoke()])}),overrides:e=>({dom:{tag:"span",attributes:{role:"presentation"}},action:t=>{t.getSystem().getByUid(e.uid).each((o=>{e.onExecute(o,t)}))}})}),tA=S([QD,eA,vu({factory:{sketch:e=>({uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}})},schema:[tr("text")],name:"aria-descriptor"}),fu({schema:[ji()],name:"menu",defaults:e=>({onExecute:(t,o)=>{t.getSystem().getByUid(e.uid).each((n=>{e.onItemExecute(n,t,o)}))}})}),DS()]),oA=Wu({name:"SplitDropdown",configFields:ZD(),partFields:tA(),factory:(e,t,o,n)=>{const r=e=>{Ku.getCurrent(e).each((e=>{yg.highlightFirst(e),pp.focusIn(e)}))},s=t=>{RS(e,C,t,n,r,AS.HighlightFirst).get(w)},a=t=>{const o=Du(t,e,"button");return Rs(o),E.some(!0)},c=i(i({},Fs([Ys(((t,o)=>{_u(t,e,"aria-descriptor").each((e=>{const o=da("aria");ft(e.element,"id",o),ft(t.element,"aria-describedby",o)}))}))])),$p(E.some(s))),d={repositionMenus:e=>{jp.isOn(e)&&PS(e)}};return{uid:e.uid,dom:e.dom,components:t,apis:d,eventOrder:l(i({},e.eventOrder),{[gs()]:["disabling","toggling","alloy.base.behaviour"]}),events:c,behaviours:jm(e.splitDropdownBehaviours,[MS.config({others:{sandbox:t=>{const o=Du(t,e,"arrow");return FS(e,t,{onOpen:()=>{jp.on(o),jp.on(t)},onClose:()=>{jp.off(o),jp.off(t)}})}}}),pp.config({mode:"special",onSpace:a,onEnter:a,onDown:e=>(s(e),E.some(!0))}),Dp.config({}),jp.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:(e,t)=>e.repositionMenus(t)}}),nA=e=>({isEnabled:()=>!lg.isDisabled(e),setEnabled:t=>lg.set(e,!t)}),rA=e=>({setActive:t=>{jp.set(e,t)},isActive:()=>jp.isOn(e),isEnabled:()=>!lg.isDisabled(e),setEnabled:t=>lg.set(e,!t)}),sA=(e,t)=>e.map((e=>({"aria-label":t.translate(e),title:t.translate(e)}))).getOr({}),aA=da("focus-button"),iA=(e,t,o,n,r,s)=>({dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:sA(o,s)},components:$y([e.map((e=>yz(e,s.icons))),t.map((e=>xz(e,"tox-tbtn",s)))]),eventOrder:{[$r()]:["focusing","alloy.base.behaviour","common-button-display-events"]},buttonBehaviours:Nl([Iy(s.isDisabled),Vy(),zp("common-button-display-events",[Us($r(),((e,t)=>{t.event.prevent(),Bs(e,aA)}))])].concat(n.map((o=>YD.config({channel:o,initialData:{icon:e,text:t},renderComponents:(e,t)=>$y([e.icon.map((e=>yz(e,s.icons))),e.text.map((e=>xz(e,"tox-tbtn",s)))])}))).toArray()).concat(r.getOr([])))}),lA=(e,t,o)=>{const n=Tr(w),r=iA(e.icon,e.text,e.tooltip,E.none(),E.none(),o);return vf.sketch({dom:r.dom,components:r.components,eventOrder:vz,buttonBehaviours:Nl([zp("toolbar-button-events",[(s={onAction:e.onAction,getApi:t.getApi},ea(((e,t)=>{Fy(s,e)((t=>{Vs(e,fz,{buttonApi:t}),s.onAction(t)}))}))),Py(t,n),jy(t,n)]),Iy((()=>!e.enabled||o.isDisabled())),Vy()].concat(t.toolbarButtonBehaviours))});var s},cA=(e,t,o)=>lA(e,{toolbarButtonBehaviours:[].concat(o.length>0?[zp("toolbarButtonWith",o)]:[]),getApi:nA,onSetup:e.onSetup},t),dA=(e,t,o)=>gn(lA(e,{toolbarButtonBehaviours:[kp.config({}),jp.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(o.length>0?[zp("toolbarToggleButtonWith",o)]:[]),getApi:rA,onSetup:e.onSetup},t)),mA=(e,t,o)=>n=>gS((e=>t.fetch(e))).map((r=>E.from(wx(gn(Zw(da("menu-value"),r,(o=>{t.onItemAction(e(n),o)}),t.columns,t.presets,Fv.CLOSE_ON_EXECUTE,t.select.getOr(_),o),{movement:ex(t.columns,t.presets),menuBehaviours:xy("auto"!==t.columns?[]:[Ys(((e,o)=>{yy(e,4,Zv(t.presets)).each((({numRows:t,numColumns:o})=>{pp.setGridSize(e,t,o)}))}))])}))))),uA=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],gA=(e,t)=>(o,n,r)=>{const s=e(o).mapError((e=>Jn(e))).getOrDie();return t(s,n,r)},hA={button:gA(Wb,((e,t)=>{return o=e,n=t.backstage.shared.providers,cA(o,n,[]);var o,n})),togglebutton:gA(qb,((e,t)=>{return o=e,n=t.backstage.shared.providers,dA(o,n,[]);var o,n})),menubutton:gA(PM,((e,t)=>cO(e,"tox-tbtn",t.backstage,E.none()))),splitbutton:gA((e=>qn("SplitButton",jM,e)),((e,t)=>((e,t)=>{const o=da("channel-update-split-dropdown-display"),n=e=>({isEnabled:()=>!lg.isDisabled(e),setEnabled:t=>lg.set(e,!t),setIconFill:(t,o)=>{ki(e.element,'svg path[id="'+t+'"], rect[id="'+t+'"]').each((e=>{ft(e,"fill",o)}))},setActive:t=>{ft(e.element,"aria-pressed",t),ki(e.element,"span").each((o=>{e.getSystem().getByDom(o).each((e=>jp.set(e,t)))}))},isActive:()=>ki(e.element,"span").exists((t=>e.getSystem().getByDom(t).exists(jp.isOn)))}),r=Tr(w),s={getApi:n,onSetup:e.onSetup};return oA.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:i({"aria-pressed":!1},sA(e.tooltip,t.providers))},onExecute:t=>{e.onAction(n(t))},onItemExecute:(e,t,o)=>{},splitDropdownBehaviours:Nl([Ny(t.providers.isDisabled),Vy(),zp("split-dropdown-events",[Us(aA,Dp.focus),Py(s,r),jy(s,r)]),GS.config({})]),eventOrder:{[ks()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:mA(n,e,t.providers),parts:{menu:rb(0,e.columns,e.presets)},components:[oA.parts.button(iA(e.icon,e.text,E.none(),E.some(o),E.some([jp.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),oA.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:zf("chevron-down",t.providers.icons)},buttonBehaviours:Nl([Ny(t.providers.isDisabled),Vy(),Of()])}),oA.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})})(e,t.backstage.shared))),grouptoolbarbutton:gA((e=>qn("GroupToolbarButton",NM,e)),((e,t,o)=>{const n=o.ui.registry.getAll().buttons,r=e=>bA(o,{buttons:n,toolbar:e,allowToolbarGroups:!1},t,E.none()),s={[Ic]:t.backstage.shared.header.isPositionedAtTop()?Lc.TopToBottom:Lc.BottomToTop};if(Qf(o)===Af.floating)return((e,t,o,n)=>{const r=t.shared;return j_.sketch({lazySink:r.getSink,fetch:()=>gS((t=>{t(j(o(e.items),tD))})),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:iA(e.icon,e.text,e.tooltip,E.none(),E.none(),r.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n}}}})})(e,t.backstage,r,s);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})),styleSelectButton:(e,t)=>((e,t)=>{const o=i({type:"advanced"},t.styles);return AD(e,t,qD(e,o))})(e,t.backstage),fontsizeSelectButton:(e,t)=>((e,t)=>AD(e,t,GD(e)))(e,t.backstage),fontSelectButton:(e,t)=>((e,t)=>AD(e,t,PD(e)))(e,t.backstage),formatButton:(e,t)=>((e,t)=>AD(e,t,ND(e)))(e,t.backstage),alignMenuButton:(e,t)=>((e,t)=>AD(e,t,RD(e)))(e,t.backstage)},pA={styles:hA.styleSelectButton,fontsize:hA.fontsizeSelectButton,fontfamily:hA.fontSelectButton,blocks:hA.formatButton,align:hA.alignMenuButton},fA=e=>{const t=e.toolbar,o=e.buttons;return!1===t?[]:void 0===t||!0===t?(e=>{const t=j(uA,(t=>{const o=$(t.items,(t=>we(e,t)||we(pA,t)));return{name:t.name,items:o}}));return $(t,(e=>e.items.length>0))})(o):s(t)?(e=>{const t=e.split("|");return j(t,(e=>({items:e.trim().split(" ")})))})(t):(e=>y(e,(e=>we(e,"name")&&we(e,"items"))))(t)?t:[]},vA=(e,t,o,n,r,s)=>ye(t,o.toLowerCase()).orThunk((()=>s.bind((e=>le(e,(e=>ye(t,e+o.toLowerCase()))))))).fold((()=>ye(pA,o.toLowerCase()).map((t=>t(e,r))).orThunk((()=>E.none()))),(t=>"grouptoolbarbutton"!==t.type||n?((e,t,o)=>ye(hA,e.type).fold((()=>E.none()),(n=>E.some(n(e,t,o)))))(t,r,e):E.none())),bA=(e,t,o,n)=>{const r=fA(t),s=j(r,(r=>{const s=Y(r.items,(r=>0===r.trim().length?[]:vA(e,t.buttons,r,t.allowToolbarGroups,o,n).toArray()));return{title:E.from(e.translate(r.name)),items:s}}));return $(s,(e=>e.items.length>0))},yA=(e,t,o,n)=>{const r=t.outerContainer,a=o.toolbar,i=o.buttons;if(y(a,s)){const t=a.map((t=>{const r={toolbar:t,buttons:i,allowToolbarGroups:o.allowToolbarGroups};return bA(e,r,{backstage:n},E.none())}));hD.setToolbars(r,t)}else hD.setToolbar(r,bA(e,o,{backstage:n},E.none()))},wA=So(),xA=wA.os.isiOS()&&wA.os.version.major<=12;var SA=Object.freeze({__proto__:null,render:(e,t,o,n,r)=>{const s=Tr(0),a=t.outerContainer;CD(e);const i=Ve.fromDom(r.targetNode),l=lt(it(i));var c,d;c=i,d=t.mothership,lm(c,d,To),im(l,t.uiMothership),e.on("PostRender",(()=>{yA(e,t,o,n),s.set(e.getWin().innerWidth),hD.setMenubar(a,vD(e,o)),hD.setSidebar(a,o.sidebar),((e,t)=>{const o=e.dom;let n=e.getWin();const r=e.getDoc().documentElement,s=Tr(It(n.innerWidth,n.innerHeight)),a=Tr(It(r.offsetWidth,r.offsetHeight)),i=()=>{const t=s.get();t.left===n.innerWidth&&t.top===n.innerHeight||(s.set(It(n.innerWidth,n.innerHeight)),_w(e))},l=()=>{const t=e.getDoc().documentElement,o=a.get();o.left===t.offsetWidth&&o.top===t.offsetHeight||(a.set(It(t.offsetWidth,t.offsetHeight)),_w(e))},c=t=>((e,t)=>e.dispatch("ScrollContent",t))(e,t);o.bind(n,"resize",i),o.bind(n,"scroll",c);const d=fc(Ve.fromDom(e.getBody()),"load",l),m=t.uiMothership.element;e.on("hide",(()=>{kt(m,"display","none")})),e.on("show",(()=>{Et(m,"display")})),e.on("NodeChange",l),e.on("remove",(()=>{d.unbind(),o.unbind(n,"resize",i),o.unbind(n,"scroll",c),n=null}))})(e,t)}));const m=hD.getSocket(a).getOrDie("Could not find expected socket element");if(xA){zt(m.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const t=((e,t)=>{let o=null;return{cancel:()=>{u(o)||(clearTimeout(o),o=null)},throttle:(...n)=>{u(o)&&(o=setTimeout((()=>{o=null,e.apply(null,n)}),t))}}})((()=>{e.dispatch("ScrollContent")}),20),o=pc(m.element,"scroll",t.throttle);e.on("remove",o.unbind)}By(e,t),e.addCommand("ToggleSidebar",((t,o)=>{hD.toggleSidebar(a,o),e.dispatch("ToggleSidebar")})),e.addQueryValueHandler("ToggleSidebar",(()=>hD.whichSidebar(a)));const g=Qf(e);g!==Af.sliding&&g!==Af.floating||e.on("ResizeWindow ResizeEditor ResizeContent",(()=>{const o=e.getWin().innerWidth;o!==s.get()&&(hD.refreshToolbar(t.outerContainer),s.set(o))}));const h={setEnabled:e=>{Hy(t,!e)},isEnabled:()=>!lg.isDisabled(a)};return{iframeContainer:m.element.dom,editorContainer:a.element.dom,api:h}}});const CA=e=>/^[0-9\.]+(|px)$/i.test(""+e)?E.some(parseInt(""+e,10)):E.none(),kA=e=>b(e)?e+"px":e,zA=(e,t,o)=>{const n=t.filter((t=>e<t)),r=o.filter((t=>e>t));return n.or(r).getOr(e)},OA=e=>{const t=(e=>{const t=jf(e),o=$f(e),n=qf(e);return CA(t).map((e=>zA(e,o,n)))})(e);return t.getOr(jf(e))},TA=e=>{const t=Uf(e),o=Wf(e),n=Gf(e);return CA(t).map((e=>zA(e,o,n)))},{ToolbarLocation:MA,ToolbarMode:_A}=Bv,DA=(e,t,o,n,r)=>{const{uiMothership:s,outerContainer:a}=o,i=Vf.DOM,l=_v(e),c=Ev(e),d=Gf(e).or(TA(e)),m=n.shared.header,u=m.isPositionedAtTop,g=Qf(e),h=g===_A.sliding||g===_A.floating,p=Tr(!1),f=()=>p.get()&&!e.removed,v=e=>h?e.fold(S(0),(e=>e.components().length>1?Rt(e.components()[1].element):0)):0,b=()=>{s.broadcastOn([xm()],{})},y=(e=!1)=>{if(f()){if(l||(()=>{const e=d.getOrThunk((()=>{const e=CA(Tt(gt(),"margin-left")).getOr(0);return Wt(gt())-Pt(t).left+e}));kt(r.get().element,"max-width",e+"px")})(),h&&hD.refreshToolbar(a),l||(()=>{const e=hD.getToolbar(a),o=v(e),n=jo(t),s=u()?Math.max(n.y-Rt(r.get().element)+o,0):n.bottom;zt(a.element,{position:"absolute",top:Math.round(s)+"px",left:Math.round(n.x)+"px"})})(),c){const t=r.get();e?TM.reset(t):TM.refresh(t)}b()}},w=(o=!0)=>{if(l||!c||!f())return;const n=m.getDockingMode(),s=(o=>{switch(tv(e)){case MA.auto:const e=hD.getToolbar(a),n=v(e),r=Rt(o.element)-n,s=jo(t);if(s.y>r)return"top";{const e=Xe(t),o=Math.max(e.dom.scrollHeight,Rt(e));return s.bottom<o-r||Wo().bottom<s.bottom-r?"bottom":"top"}case MA.bottom:return"bottom";case MA.top:default:return"top"}})(r.get());s!==n&&((e=>{const t=r.get();TM.setModes(t,[e]),m.setDockingMode(e);const o=u()?Lc.TopToBottom:Lc.BottomToTop;ft(t.element,Ic,o)})(s),o&&y(!0))};return{isVisible:f,isPositionedAtTop:u,show:()=>{p.set(!0),kt(a.element,"display","flex"),i.addClass(e.getBody(),"mce-edit-focus"),Et(s.element,"display"),w(!1),y()},hide:()=>{p.set(!1),o.outerContainer&&(kt(a.element,"display","none"),i.removeClass(e.getBody(),"mce-edit-focus")),kt(s.element,"display","none")},update:y,updateMode:w,repositionPopups:b}},AA=(e,t)=>{const o=jo(e);return{pos:t?o.y:o.bottom,bounds:o}};var EA=Object.freeze({__proto__:null,render:(e,t,o,n,r)=>{const{mothership:s,uiMothership:a,outerContainer:i}=t,l=Tr(null),c=Ve.fromDom(r.targetNode),d=DA(e,c,t,n,l),m=rv(e);kD(e);const u=()=>{if(l.get())return void d.show();l.set(hD.getHeader(i).getOrDie());const r=Dv(e);im(r,s),im(r,a),yA(e,t,o,n),hD.setMenubar(i,vD(e,o)),d.show(),((e,t,o,n)=>{const r=Tr(AA(t,o.isPositionedAtTop())),s=n=>{const{pos:s,bounds:a}=AA(t,o.isPositionedAtTop()),{pos:i,bounds:l}=r.get(),c=a.height!==l.height||a.width!==l.width;r.set({pos:s,bounds:a}),c&&_w(e,n),o.isVisible()&&(i!==s?o.update(!0):c&&(o.updateMode(),o.repositionPopups()))};n||(e.on("activate",o.show),e.on("deactivate",o.hide)),e.on("SkinLoaded ResizeWindow",(()=>o.update(!0))),e.on("NodeChange keydown",(e=>{requestAnimationFrame((()=>s(e)))})),e.on("ScrollWindow",(()=>o.updateMode()));const a=uc();a.set(fc(Ve.fromDom(e.getBody()),"load",s)),e.on("remove",(()=>{a.clear()}))})(e,c,d,m),e.nodeChanged()};e.on("show",u),e.on("hide",d.hide),m||(e.on("focus",u),e.on("blur",d.hide)),e.on("init",(()=>{(e.hasFocus()||m)&&u()})),By(e,t);const g={show:()=>{u()},hide:()=>{d.hide()},setEnabled:e=>{Hy(t,!e)},isEnabled:()=>!lg.isDisabled(i)};return{editorContainer:i.element.dom,api:g}}});const HA="contexttoolbar-hide",BA=(e,t)=>Us(fz,((o,n)=>{const r=(e=>({hide:()=>Bs(e,vs()),getValue:()=>Im.getValue(e)}))(e.get(o));t.onAction(r,n.event.buttonApi)})),VA=(e,t,o)=>{const n={backstage:{shared:{providers:o}}};return"contextformtogglebutton"===t.type?((e,t,o)=>{const n=t.original,{primary:r}=n,s=c(n,["primary"]),a=Kn(qb(l(i({},s),{type:"togglebutton",onAction:w})));return dA(a,o.backstage.shared.providers,[BA(e,t)])})(e,t,n):((e,t,o)=>{const n=t.original,{primary:r}=n,s=c(n,["primary"]),a=Kn(Wb(l(i({},s),{type:"button",onAction:w})));return cA(a,o.backstage.shared.providers,[BA(e,t)])})(e,t,n)},RA=(e,t)=>{const o=e.label.fold((()=>({})),(e=>({"aria-label":e}))),n=bf(lS.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:o,selectOnFocus:!0,inputBehaviours:Nl([pp.config({mode:"special",onEnter:e=>r.findPrimary(e).map((e=>(Rs(e),!0))),onLeft:(e,t)=>(t.cut(),E.none()),onRight:(e,t)=>(t.cut(),E.none())})])})),r=((e,t,o)=>{const n=j(t,(t=>bf(VA(e,t,o))));return{asSpecs:()=>j(n,(e=>e.asSpec())),findPrimary:e=>le(t,((t,o)=>t.primary?E.from(n[o]).bind((t=>t.getOpt(e))).filter(O(lg.isDisabled)):E.none()))}})(n,e.commands,t);return[{title:E.none(),items:[n.asSpec()]},{title:E.none(),items:r.asSpecs()}]},LA=RA,NA=(e,t,o=.01)=>t.bottom-e.y>=o&&e.bottom-t.y>=o,IA=e=>{const t=(e=>{const t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){const o=nt(Ve.fromDom(e.startContainer),e.startOffset).element;return(Ie(o)?Ye(o):E.some(o)).filter(Ne).map((e=>e.dom.getBoundingClientRect())).getOr(t)}return t})(e.selection.getRng());if(e.inline){const e=Ho();return Po(e.left+t.left,e.top+t.top,t.width,t.height)}{const o=Uo(Ve.fromDom(e.getBody()));return Po(o.x+t.left,o.y+t.top,t.width,t.height)}},FA=(e,t,o,n=0)=>{const r=Ro(window),s=jo(Ve.fromDom(e.getContentAreaContainer())),a=xv(e)||kv(e)||Ov(e),{x:i,width:l}=((e,t,o)=>{const n=Math.max(e.x+o,t.x);return{x:n,width:Math.min(e.right-o,t.right)-n}})(s,r,n);if(e.inline&&!a)return Po(i,r.y,l,r.height);{const a=t.header.isPositionedAtTop(),{y:c,bottom:d}=((e,t,o,n,r,s)=>{const a=Ve.fromDom(e.getContainer()),i=ki(a,".tox-editor-header").getOr(a),l=jo(i),c=l.y>=t.bottom,d=n&&!c;if(e.inline&&d)return{y:Math.max(l.bottom+s,o.y),bottom:o.bottom};if(e.inline&&!d)return{y:o.y,bottom:Math.min(l.y-s,o.bottom)};const m="line"===r?jo(a):t;return d?{y:Math.max(l.bottom+s,o.y),bottom:Math.min(m.bottom-s,o.bottom)}:{y:Math.max(m.y+s,o.y),bottom:Math.min(l.y-s,o.bottom)}})(e,s,r,a,o,n);return Po(i,c,l,d-c)}},PA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},jA={maxHeightFunction:Mc(),maxWidthFunction:R_()},UA=e=>"node"===e,WA=(e,t,o,n,r)=>{const s=IA(e),a=n.lastElement().exists((e=>$e(o,e)));if(((e,t)=>{const o=e.selection.getRng(),n=nt(Ve.fromDom(o.startContainer),o.startOffset);return o.startContainer===o.endContainer&&o.startOffset===o.endOffset-1&&$e(n.element,t)})(e,o))return a?QO:KO;if(a)return((e,t,o)=>{const n=_t(e,"position");kt(e,"position",t);const r=o(e);return n.each((t=>kt(e,"position",t))),r})(t,n.getMode(),(()=>NA(s,jo(t))&&!n.isReposition()?tT:QO));return("fixed"===n.getMode()?r.y+Ho().top:r.y)+(Rt(t)+12)<=s.y?KO:XO},$A=(e,t,o,n)=>{const r=t=>(n,r,s,a,c)=>{const d=WA(e,a,t,o,c),m=l(i({},n),{y:c.y,height:c.height});return l(i({},d(m,r,s,a,c)),{alwaysFit:!0})},s=e=>UA(n)?[r(e)]:[];return t?{onLtr:e=>[Cl,bl,yl,wl,xl,Sl].concat(s(e)),onRtl:e=>[Cl,yl,bl,xl,wl,Sl].concat(s(e))}:{onLtr:e=>[Sl,Cl,wl,bl,xl,yl].concat(s(e)),onRtl:e=>[Sl,Cl,xl,yl,wl,bl].concat(s(e))}},GA=(e,t)=>{const o=$(t,(t=>t.predicate(e.dom))),{pass:n,fail:r}=W(o,(e=>"contexttoolbar"===e.type));return{contextToolbars:n,contextForms:r}},qA=(e,t,o)=>{const n=GA(e,t);if(n.contextForms.length>0)return E.some({elem:e,toolbars:[n.contextForms[0]]});{const t=GA(e,o);if(t.contextForms.length>0)return E.some({elem:e,toolbars:[t.contextForms[0]]});if(n.contextToolbars.length>0||t.contextToolbars.length>0){const o=(e=>{if(e.length<=1)return e;{const t=t=>I(e,(e=>e.position===t)),o=t=>$(e,(e=>e.position===t)),n=t("selection"),r=t("node");if(n||r){if(r&&n){const e=o("node"),t=j(o("selection"),(e=>l(i({},e),{position:"node"})));return e.concat(t)}return o(n?"selection":"node")}return o("line")}})(n.contextToolbars.concat(t.contextToolbars));return E.some({elem:e,toolbars:o})}return E.none()}},KA=(e,t,o)=>e(t)?E.none():Br(t,(e=>{if(Ne(e)){const{contextToolbars:t,contextForms:n}=GA(e,o.inNodeScope),r=n.length>0?n:(e=>{if(e.length<=1)return e;{const t=t=>K(e,(e=>e.position===t));return t("selection").orThunk((()=>t("node"))).orThunk((()=>t("line"))).map((e=>e.position)).fold((()=>[]),(t=>$(e,(e=>e.position===t))))}})(t);return r.length>0?E.some({elem:e,toolbars:r}):E.none()}return E.none()}),e),XA=(e,t)=>{const o={},n=[],r=[],s={},a={},c=(e,c)=>{const d=Kn(qn("ContextForm",ey,c));o[e]=d,d.launch.map((o=>{s["form:"+e]=l(i({},c.launch),{type:"contextformtogglebutton"===o.type?"togglebutton":"button",onAction:()=>{t(d)}})})),"editor"===d.scope?r.push(d):n.push(d),a[e]=d},d=(e,t)=>{var o;(o=t,qn("ContextToolbar",ty,o)).each((o=>{"editor"===t.scope?r.push(o):n.push(o),a[e]=o}))},m=ce(e);return U(m,(t=>{const o=e[t];"contextform"===o.type?c(t,o):"contexttoolbar"===o.type&&d(t,o)})),{forms:o,inNodeScope:n,inEditorScope:r,lookupTable:a,formNavigators:s}},JA=da("forward-slide"),YA=da("backward-slide"),ZA=da("change-slide-event"),QA="tox-pop--resizing",eE="tox-pop--transition",tE=(e,t,o,n)=>{const r=n.backstage,s=r.shared,a=So().deviceType.isTouch,l=gc(),c=gc(),d=gc(),m=fi((e=>{const t=Tr([]);return pf.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:e=>{t.set([]),pf.getContent(e).each((e=>{Et(e.element,"visibility")})),qa(e.element,QA),Et(e.element,"width")},inlineBehaviours:Nl([zp("context-toolbar-events",[Js(rs(),((e,t)=>{"width"===t.event.raw.propertyName&&(qa(e.element,QA),Et(e.element,"width"))})),Us(ZA,((e,t)=>{const o=e.element;Et(o,"width");const n=Wt(o);pf.setContent(e,t.event.contents),Ga(o,QA);const r=Wt(o);kt(o,"width",n+"px"),pf.getContent(e).each((e=>{t.event.focus.bind((e=>(Gl(e),Xl(o)))).orThunk((()=>(pp.focusIn(e),Kl(it(o)))))})),setTimeout((()=>{kt(e.element,"width",r+"px")}),0)})),Us(JA,((e,o)=>{pf.getContent(e).each((o=>{t.set(t.get().concat([{bar:o,focus:Kl(it(e.element))}]))})),Vs(e,ZA,{contents:o.event.forwardContents,focus:E.none()})})),Us(YA,((e,o)=>{ae(t.get()).each((o=>{t.set(t.get().slice(0,t.get().length-1)),Vs(e,ZA,{contents:vi(o.bar),focus:o.focus})}))}))]),pp.config({mode:"special",onEscape:o=>ae(t.get()).fold((()=>e.onEscape()),(e=>(Bs(o,YA),E.some(!0))))})]),lazySink:()=>qo.value(e.sink)})})({sink:o,onEscape:()=>(e.focus(),E.some(!0))})),u=()=>{const t=d.get().getOr("node"),o=UA(t)?1:0;return FA(e,s,t,o)},g=()=>!(e.removed||a()&&r.isContextMenuOpen()),h=()=>{if(g()){const t=u(),o=Se(d.get(),"node")?((e,t)=>t.filter(ut).map(Uo).getOrThunk((()=>IA(e))))(e,l.get()):IA(e);return t.height<=0||!NA(o,t)}return!0},p=()=>{l.clear(),c.clear(),d.clear(),pf.hide(m)},f=()=>{if(pf.isOpen(m)){const e=m.element;Et(e,"display"),h()?kt(e,"display","none"):(c.set(0),pf.reposition(m))}},v=t=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:Nl([pp.config({mode:"acyclic"}),zp("pop-dialog-wrap-events",[Ys((t=>{e.shortcuts.add("ctrl+F9","focus statusbar",(()=>pp.focusIn(t)))})),Zs((t=>{e.shortcuts.remove("ctrl+F9")}))])])}),b=Gt((()=>XA(t,(e=>{const t=y([e]);Vs(m,JA,{forwardContents:v(t)})})))),y=t=>{const{buttons:o}=e.ui.registry.getAll(),r=b(),a=i(i({},o),r.formNavigators),l=Qf(e)===Af.scrolling?Af.scrolling:Af.default,c=J(j(t,(t=>"contexttoolbar"===t.type?((t,o)=>bA(e,{buttons:t,toolbar:o.items,allowToolbarGroups:!1},n,E.some(["form:"])))(a,t):((e,t)=>LA(e,t))(t,s.providers))));return aD({type:l,uid:da("context-toolbar"),initGroups:c,onEscape:E.none,cyclicKeying:!0,providers:s.providers})},x=(t,n)=>{const r="node"===t?s.anchors.node(n):s.anchors.cursor(),i=((e,t,o,n)=>"line"===t?{bubble:Ec(12,0,PA),layouts:{onLtr:()=>[kl],onRtl:()=>[zl]},overrides:jA}:{bubble:Ec(0,12,PA,1/12),layouts:$A(e,o,n,t),overrides:jA})(e,t,a(),{lastElement:l.get,isReposition:()=>Se(c.get(),0),getMode:()=>Kd.getMode(o)});return gn(r,i)},S=(e,t)=>{if(C.cancel(),!g())return;const n=y(e),r=e[0].position,s=x(r,t);d.set(r),c.set(1);const a=m.element;Et(a,"display"),(e=>Se(ke(e,l.get(),$e),!0))(t)||(qa(a,eE),Kd.reset(o,m)),pf.showWithinBounds(m,v(n),{anchor:s,transition:{classes:[eE],mode:"placement"}},(()=>E.some(u()))),t.fold(l.clear,l.set),h()&&kt(a,"display","none")},C=Gz((()=>{if(e.hasFocus()&&!e.removed)if(Ka(m.element,eE))C.throttle();else{((e,t)=>{const o=Ve.fromDom(t.getBody()),n=e=>$e(e,o),r=Ve.fromDom(t.selection.getNode());return n(s=r)||Ge(o,s)?qA(r,e.inNodeScope,e.inEditorScope).orThunk((()=>KA(n,r,e))):E.none();var s})(b(),e).fold(p,(e=>{S(e.toolbars,E.some(e.elem))}))}}),17);e.on("init",(()=>{e.on("remove",p),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",f),e.on("click keyup focus SetContent",C.throttle),e.on(HA,p),e.on("contexttoolbar-show",(t=>{const o=b();ye(o.lookupTable,t.toolbarKey).each((o=>{S([o],ze(t.target!==e,t.target)),pf.getContent(m).each(pp.focusIn)}))})),e.on("focusout",(t=>{ff.setEditorTimeout(e,(()=>{Xl(o.element).isNone()&&Xl(m.element).isNone()&&p()}),0)})),e.on("SwitchMode",(()=>{e.mode.isReadOnly()&&p()})),e.on("AfterProgressState",(t=>{t.state?p():e.hasFocus()&&C.throttle()})),e.on("NodeChange",(e=>{Xl(m.element).fold(C.throttle,w)}))}))},oE={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},nE=(()=>{const e="[0-9]+",t="[eE][+-]?[0-9]+",o=e=>`(?:${e})?`,n=["Infinity","[0-9]+\\."+o(e)+o(t),"\\.[0-9]+"+o(t),e+o(t)].join("|");return new RegExp(`^(${`[+-]?(?:${n})`})(.*)$`)})(),rE=(e,t)=>E.from(nE.exec(e)).bind((e=>{const o=Number(e[1]),n=e[2];return((e,t)=>I(t,(t=>I(oE[t],(t=>e===t)))))(n,t)?E.some({value:o,unit:n}):E.none()})),sE=(e,t)=>{const o=()=>{const o=t.getOptions(e),n=t.getCurrent(e).map(t.hash),r=gc();return j(o,(o=>({type:"togglemenuitem",text:t.display(o),onSetup:s=>{const a=e=>{e&&(r.on((e=>e.setActive(!1))),r.set(s)),s.setActive(e)};a(Se(n,t.hash(o)));const i=t.watcher(e,o,a);return()=>{r.clear(),i()}},onAction:()=>t.setCurrent(e,o)})))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:e=>e(o()),onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:o,onSetup:t.onMenuSetup})},aE={name:"lineheight",text:"Line height",icon:"line-height",getOptions:Cv,hash:e=>((e,t)=>rE(e,t).map((({value:e,unit:t})=>e+t)))(e,["fixed","relative","empty"]).getOr(e),display:C,watcher:(e,t,o)=>e.formatter.formatChanged("lineheight",o,!1,{value:t}).unbind,getCurrent:e=>E.from(e.queryCommandValue("LineHeight")),setCurrent:(e,t)=>e.execCommand("LineHeight",!1,t)},iE=e=>{sE(e,aE),(e=>E.from(Yf(e)).map((t=>({name:"language",text:"Language",icon:"language",getOptions:S(t),hash:e=>h(e.customCode)?e.code:`${e.code}/${e.customCode}`,display:e=>e.title,watcher:(e,t,o)=>e.formatter.formatChanged("lang",o,!1,{value:t.code,customValue:t.customCode}).unbind,getCurrent:e=>{const t=Ve.fromDom(e.selection.getNode());return Vr(t,(e=>E.some(e).filter(Ne).bind((e=>yt(e,"lang").map((t=>({code:t,customCode:yt(e,"data-mce-lang").getOrUndefined(),title:""})))))))},setCurrent:(e,t)=>e.execCommand("Lang",!1,t),onToolbarSetup:t=>{const o=uc();return t.setActive(e.formatter.match("lang",{},void 0,!0)),o.set(e.formatter.formatChanged("lang",t.setActive,!0)),o.clear}}))))(e).each((t=>sE(e,t)))},lE=(e,t)=>{((e,t)=>{const o=DD(0,t,RD(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})})(e,t),((e,t)=>{const o=DD(0,t,PD(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate("Fonts"),getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})})(e,t),((e,t)=>{const o=i({type:"advanced"},t.styles),n=DD(0,t,qD(e,o));e.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>n.items.validateItems(n.getStyleItems())})})(e,t),((e,t)=>{const o=DD(0,t,ND(e));e.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})})(e,t),((e,t)=>{const o=DD(0,t,GD(e));e.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>o.items.validateItems(o.getStyleItems())})})(e,t)},cE=e=>OD(e,"NodeChange",(t=>{t.setEnabled(e.queryCommandState("outdent"))})),dE=e=>{(e=>{e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:cE(e),onAction:MD(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:MD(e,"indent")})})(e)},mE=(e,t)=>o=>{o.setActive(t.get());const n=e=>{t.set(e.state),o.setActive(e.state)};return e.on("PastePlainTextToggle",n),()=>e.off("PastePlainTextToggle",n)},uE=(e,t)=>()=>{e.execCommand("mceToggleFormat",!1,t)},gE=e=>{(e=>{sz.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],((t,o)=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:zD(e,t.name),onAction:uE(e,t.name)})}));for(let t=1;t<=6;t++){const o="h"+t;e.ui.registry.addToggleButton(o,{text:o.toUpperCase(),tooltip:"Heading "+t,onSetup:zD(e,o),onAction:uE(e,o)})}})(e),(e=>{sz.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:MD(e,t.action)})}))})(e),(e=>{sz.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:MD(e,t.action),onSetup:zD(e,t.name)})}))})(e)},hE=e=>{gE(e),(e=>{sz.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(t=>{e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:MD(e,t.action)})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:uE(e,"code")})})(e)},pE=(e,t)=>OD(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(o=>{o.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())})),fE=e=>{(e=>{e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:pE(e,"hasUndo"),onAction:MD(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:pE(e,"hasRedo"),onAction:MD(e,"redo")})})(e),(e=>{e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:pE(e,"hasUndo"),onAction:MD(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:pE(e,"hasRedo"),onAction:MD(e,"redo")})})(e)},vE=e=>OD(e,"VisualAid",(t=>{t.setActive(e.hasVisual)})),bE=e=>{(e=>{e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:MD(e,"mceToggleVisualAid")})})(e),(e=>{e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:vE(e),onAction:MD(e,"mceToggleVisualAid")})})(e)},yE=(e,t)=>{(e=>{U([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(t=>{e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:MD(e,t.cmd),onSetup:zD(e,t.name)})})),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:MD(e,"JustifyNone")})})(e),hE(e),lE(e,t),fE(e),(e=>{(e=>{e.addCommand("mceApplyTextcolor",((t,o)=>{((e,t,o)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.apply(t,{value:o}),e.nodeChanged()}))})(e,t,o)})),e.addCommand("mceRemoveTextcolor",(t=>{((e,t)=>{e.undoManager.transact((()=>{e.focus(),e.formatter.remove(t,{value:null},null,!0),e.nodeChanged()}))})(e,t)}))})(e);const t=Tr(Uw),o=Tr(Uw);Xw(e,"forecolor","forecolor","Text color",t),Xw(e,"backcolor","hilitecolor","Background color",o),Jw(e,"forecolor","forecolor","Text color"),Jw(e,"backcolor","hilitecolor","Background color")})(e),bE(e),dE(e),iE(e),(e=>{const t=Tr(yv(e)),o=()=>e.execCommand("mceTogglePlainTextPaste");e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:o,onSetup:mE(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:o,onSetup:mE(e,t)})})(e)},wE=e=>t=>t.options.get(e),xE=wE("contextmenu_never_use_native"),SE=wE("contextmenu_avoid_overlap"),CE=e=>{const t=e.ui.registry.getAll().contextMenus,o=e.options.get("contextmenu");return e.options.isSet("contextmenu")?o:$(o,(e=>we(t,e)))},kE=(e,t)=>({type:"makeshift",x:e,y:t}),zE=e=>"longpress"===e.type||0===e.type.indexOf("touch"),OE=(e,t)=>{const o=Vf.DOM.getPos(e);return((e,t,o)=>kE(e.x+t,e.y+o))(t,o.x,o.y)},TE=(e,t)=>"contextmenu"===t.type||"longpress"===t.type?e.inline?(e=>{if(zE(e)){const t=e.touches[0];return kE(t.pageX,t.pageY)}return kE(e.pageX,e.pageY)})(t):OE(e.getContentAreaContainer(),(e=>{if(zE(e)){const t=e.touches[0];return kE(t.clientX,t.clientY)}return kE(e.clientX,e.clientY)})(t)):ME(e),ME=e=>({type:"selection",root:Ve.fromDom(e.selection.getNode())}),_E=(e,t,o)=>{switch(o){case"node":return(e=>({type:"node",node:E.some(Ve.fromDom(e.selection.getNode())),root:Ve.fromDom(e.getBody())}))(e);case"point":return TE(e,t);case"selection":return ME(e)}},DE=(e,t,o,n,r,s)=>{const a=o(),i=_E(e,t,s);Dz(a,Fv.CLOSE_ON_EXECUTE,n,!1).map((e=>{t.preventDefault(),pf.showMenuAt(r,{anchor:i},{menu:{markers:tb("normal")},data:e})}))},AE={onLtr:()=>[Cl,bl,yl,wl,xl,Sl,KO,XO,qO,$O,GO,WO],onRtl:()=>[Cl,yl,bl,xl,wl,Sl,KO,XO,GO,WO,qO,$O]},EE={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},HE=(e,t,o,n,r,s,a)=>{const l=((e,t,o)=>{const n=_E(e,t,o);return i({bubble:Ec(0,"point"===o?12:0,EE),layouts:AE,overrides:{maxWidthFunction:R_(),maxHeightFunction:Mc()}},n)})(e,t,s);Dz(o,Fv.CLOSE_ON_EXECUTE,n,!0).map((o=>{t.preventDefault(),pf.showMenuWithinBounds(r,{anchor:l},{menu:{markers:tb("normal"),highlightImmediately:a},data:o,type:"horizontal"},(()=>E.some(FA(e,n.shared,"node"===s?"node":"selection")))),e.dispatch(HA)}))},BE=(e,t,o,n,r,s)=>{const a=So(),i=a.os.isiOS(),l=a.os.isMacOS(),c=a.os.isAndroid(),d=a.deviceType.isTouch(),m=()=>{const a=o();HE(e,t,a,n,r,s,!(c||i||l&&d))};if((l||i)&&"node"!==s){const o=()=>{(e=>{const t=e.selection.getRng(),o=()=>{ff.setEditorTimeout(e,(()=>{e.selection.setRng(t)}),10),s()};e.once("touchend",o);const n=e=>{e.preventDefault(),e.stopImmediatePropagation()};e.on("mousedown",n,!0);const r=()=>s();e.once("longpresscancel",r);const s=()=>{e.off("touchend",o),e.off("longpresscancel",r),e.off("mousedown",n)}})(e),m()};((e,t)=>{const o=e.selection;if(o.isCollapsed()||t.touches.length<1)return!1;{const n=t.touches[0],r=o.getRng();return yd(e.getWin(),ad.domRange(r)).exists((e=>e.left<=n.clientX&&e.right>=n.clientX&&e.top<=n.clientY&&e.bottom>=n.clientY))}})(e,t)?o():(e.once("selectionchange",o),e.once("touchend",(()=>e.off("selectionchange",o))))}else m()},VE=e=>s(e)?"|"===e:"separator"===e.type,RE={type:"separator"},LE=e=>{const t=e=>({text:e.text,icon:e.icon,enabled:e.enabled,shortcut:e.shortcut});if(s(e))return e;switch(e.type){case"separator":return RE;case"submenu":return l(i({type:"nestedmenuitem"},t(e)),{getSubmenuItems:()=>{const t=e.getSubmenuItems();return s(t)?t:j(t,LE)}});default:return l(i({type:"menuitem"},t(e)),{onAction:(o=e.onAction,()=>o())})}var o},NE=(e,t)=>{if(0===t.length)return e;const o=ae(e).filter((e=>!VE(e))).fold((()=>[]),(e=>[RE]));return e.concat(o).concat(t).concat([RE])},IE=(e,t)=>"longpress"!==t.type&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType),FE=(e,t)=>IE(e,t)?e.selection.getStart(!0):t.target,PE=(e,t,o)=>{const n=So().deviceType.isTouch,r=fi(pf.sketch({dom:{tag:"div"},lazySink:t,onEscape:()=>e.focus(),onShow:()=>o.setContextMenuState(!0),onHide:()=>o.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Nl([zp("dismissContextMenu",[Us(Os(),((t,o)=>{ym.close(t),e.focus()}))])])})),a=e=>pf.hide(r),i=t=>{if(xE(e)&&t.preventDefault(),((e,t)=>t.ctrlKey&&!xE(e))(e,t)||(e=>0===CE(e).length)(e))return;const a=((e,t)=>{const o=SE(e),n=IE(e,t)?"selection":"point";if(Ee(o)){const r=FE(e,t);return Sx(Ve.fromDom(r),o)?"node":n}return n})(e,t);(n()?BE:DE)(e,t,(()=>{const o=FE(e,t),n=e.ui.registry.getAll(),r=CE(e);return((e,t,o)=>{const n=q(t,((t,n)=>ye(e,n.toLowerCase()).map((e=>{const n=e.update(o);if(s(n))return NE(t,n.split(" "));if(n.length>0){const e=j(n,LE);return NE(t,e)}return t})).getOrThunk((()=>t.concat([n])))),[]);return n.length>0&&VE(n[n.length-1])&&n.pop(),n})(n.contextMenus,r,o)}),o,r,a)};e.on("init",(()=>{const t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(n()?"":" ResizeWindow");e.on(t,a),e.on("longpress contextmenu",i)}))},jE=Mr([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),UE=e=>t=>t.translate(-e.left,-e.top),WE=e=>t=>t.translate(e.left,e.top),$E=e=>(t,o)=>q(e,((e,t)=>t(e)),It(t,o)),GE=(e,t,o)=>e.fold($E([WE(o),UE(t)]),$E([UE(t)]),$E([])),qE=(e,t,o)=>e.fold($E([WE(o)]),$E([]),$E([WE(t)])),KE=(e,t,o)=>e.fold($E([]),$E([UE(o)]),$E([WE(t),UE(o)])),XE=(e,t,o)=>{const n=e.fold(((e,t)=>({position:E.some("absolute"),left:E.some(e+"px"),top:E.some(t+"px")})),((e,t)=>({position:E.some("absolute"),left:E.some(e-o.left+"px"),top:E.some(t-o.top+"px")})),((e,t)=>({position:E.some("fixed"),left:E.some(e+"px"),top:E.some(t+"px")})));return i({right:E.none(),bottom:E.none()},n)},JE=(e,t,o,n)=>{const r=(e,r)=>(s,a)=>{const i=e(t,o,n);return r(s.getOr(i.left),a.getOr(i.top))};return e.fold(r(KE,YE),r(qE,ZE),r(GE,QE))},YE=jE.offset,ZE=jE.absolute,QE=jE.fixed,eH=(e,t)=>{const o=bt(e,t);return h(o)?NaN:parseInt(o,10)},tH=(e,t,o,n)=>((e,t)=>{const o=e.element,n=eH(o,t.leftAttr),r=eH(o,t.topAttr);return isNaN(n)||isNaN(r)?E.none():E.some(It(n,r))})(e,t).fold((()=>o),(e=>QE(e.left+n.left,e.top+n.top))),oH=(e,t,o,n,r,s)=>{const a=tH(e,t,o,n),i=t.mustSnap?sH(e,t,a,r,s):aH(e,t,a,r,s),l=GE(a,r,s);return((e,t,o)=>{const n=e.element;ft(n,t.leftAttr,o.left+"px"),ft(n,t.topAttr,o.top+"px")})(e,t,l),i.fold((()=>({coord:QE(l.left,l.top),extra:E.none()})),(e=>({coord:e.output,extra:e.extra})))},nH=(e,t)=>{((e,t)=>{const o=e.element;xt(o,t.leftAttr),xt(o,t.topAttr)})(e,t)},rH=(e,t,o,n)=>le(e,(e=>{const r=e.sensor,s=((e,t,o,n,r,s)=>{const a=qE(e,r,s),i=qE(t,r,s);return Math.abs(a.left-i.left)<=o&&Math.abs(a.top-i.top)<=n})(t,r,e.range.left,e.range.top,o,n);return s?E.some({output:JE(e.output,t,o,n),extra:e.extra}):E.none()})),sH=(e,t,o,n,r)=>{const s=t.getSnapPoints(e);return rH(s,o,n,r).orThunk((()=>{const e=q(s,((e,t)=>{const s=t.sensor,a=((e,t,o,n,r,s)=>{const a=qE(e,r,s),i=qE(t,r,s),l=Math.abs(a.left-i.left),c=Math.abs(a.top-i.top);return It(l,c)})(o,s,t.range.left,t.range.top,n,r);return e.deltas.fold((()=>({deltas:E.some(a),snap:E.some(t)})),(o=>(a.left+a.top)/2<=(o.left+o.top)/2?{deltas:E.some(a),snap:E.some(t)}:e))}),{deltas:E.none(),snap:E.none()});return e.snap.map((e=>({output:JE(e.output,o,n,r),extra:e.extra})))}))},aH=(e,t,o,n,r)=>{const s=t.getSnapPoints(e);return rH(s,o,n,r)};var iH=Object.freeze({__proto__:null,snapTo:(e,t,o,n)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const t=qe(e.element),o=Ho(t),s=cM(r),a=((e,t,o)=>({coord:JE(e.output,e.output,t,o),extra:e.extra}))(n,o,s),i=XE(a.coord,0,s);Ot(r,i)}}});const lH="data-initial-z-index",cH=(e,t)=>{e.getSystem().addToGui(t),(e=>{Ye(e.element).filter(Ne).each((t=>{_t(t,"z-index").each((e=>{ft(t,lH,e)})),kt(t,"z-index",Tt(e.element,"z-index"))}))})(t)},dH=e=>{(e=>{Ye(e.element).filter(Ne).each((e=>{yt(e,lH).fold((()=>Et(e,"z-index")),(t=>kt(e,"z-index",t))),xt(e,lH)}))})(e),e.getSystem().removeFromGui(e)},mH=(e,t,o)=>e.getSystem().build(Vx.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:o}));var uH=vr("snaps",[tr("getSnapPoints"),$i("onSensor"),tr("leftAttr"),tr("topAttr"),br("lazyViewport",Wo),br("mustSnap",!1)]);const gH=[br("useFixed",_),tr("blockerClass"),br("getTarget",C),br("onDrag",w),br("repositionTarget",!0),br("onDrop",w),kr("getBounds",Wo),uH],hH=e=>{return(t=_t(e,"left"),o=_t(e,"top"),n=_t(e,"position"),r=(e,t,o)=>("fixed"===o?QE:YE)(parseInt(e,10),parseInt(t,10)),t.isSome()&&o.isSome()&&n.isSome()?E.some(r(t.getOrDie(),o.getOrDie(),n.getOrDie())):E.none()).getOrThunk((()=>{const t=Pt(e);return ZE(t.left,t.top)}));var t,o,n,r},pH=(e,t,o,n,r,s,a)=>((e,t,o,n,r)=>{const s=r.bounds,a=qE(t,o,n),i=cl(a.left,s.x,s.x+s.width-r.width),l=cl(a.top,s.y,s.y+s.height-r.height),c=ZE(i,l);return t.fold((()=>{const e=KE(c,o,n);return YE(e.left,e.top)}),S(c),(()=>{const e=GE(c,o,n);return QE(e.left,e.top)}))})(0,t.fold((()=>{const e=(t=o,a=s.left,i=s.top,t.fold(((e,t)=>YE(e+a,t+i)),((e,t)=>ZE(e+a,t+i)),((e,t)=>QE(e+a,t+i))));var t,a,i;const l=GE(e,n,r);return QE(l.left,l.top)}),(t=>{const a=oH(e,t,o,s,n,r);return a.extra.each((o=>{t.onSensor(e,o)})),a.coord})),n,r,a),fH=(e,t)=>({bounds:e.getBounds(),height:Lt(t.element),width:$t(t.element)}),vH=(e,t,o,n,r)=>{const s=o.update(n,r),a=o.getStartData().getOrThunk((()=>fH(t,e)));s.each((o=>{((e,t,o,n)=>{const r=t.getTarget(e.element);if(t.repositionTarget){const s=qe(e.element),a=Ho(s),i=cM(r),l=hH(r),c=pH(e,t.snaps,l,a,i,n,o),d=XE(c,0,i);Ot(r,d)}t.onDrag(e,r,n)})(e,t,a,o)}))},bH=(e,t,o,n)=>{t.each(dH),o.snaps.each((t=>{nH(e,t)}));const r=o.getTarget(e.element);n.reset(),o.onDrop(e,r)},yH=e=>(t,o)=>{const n=e=>{o.setStartData(fH(t,e))};return Fs([Us(Ss(),(e=>{o.getStartData().each((()=>n(e)))})),...e(t,o,n)])};var wH=Object.freeze({__proto__:null,getData:e=>E.from(It(e.x,e.y)),getDelta:(e,t)=>It(t.left-e.left,t.top-e.top)});const xH=(e,t,o)=>[Us($r(),((n,r)=>{if(0!==r.event.raw.button)return;r.stop();const s=()=>bH(n,E.some(l),e,t),a=Cx(s,200),i={drop:s,delayDrop:a.schedule,forceDrop:s,move:o=>{a.cancel(),vH(n,e,t,wH,o)}},l=mH(n,e.blockerClass,(e=>Fs([Us($r(),e.forceDrop),Us(Kr(),e.drop),Us(Gr(),((t,o)=>{e.move(o.event)})),Us(qr(),e.delayDrop)]))(i));o(n),cH(n,l)}))],SH=[...gH,Xi("dragger",{handlers:yH(xH)})];var CH=Object.freeze({__proto__:null,getData:e=>{const t=e.raw.touches;return 1===t.length?(e=>{const t=e[0];return E.some(It(t.clientX,t.clientY))})(t):E.none()},getDelta:(e,t)=>It(t.left-e.left,t.top-e.top)});const kH=(e,t,o)=>{const n=gc(),r=o=>{bH(o,n.get(),e,t),n.clear()};return[Us(Pr(),((s,a)=>{a.stop();const i=()=>r(s),l={drop:i,delayDrop:w,forceDrop:i,move:o=>{vH(s,e,t,CH,o)}},c=mH(s,e.blockerClass,(e=>Fs([Us(Pr(),e.forceDrop),Us(Ur(),e.drop),Us(Wr(),e.drop),Us(jr(),((t,o)=>{e.move(o.event)}))]))(l));n.set(c);o(s),cH(s,c)})),Us(jr(),((o,n)=>{n.stop(),vH(o,e,t,CH,n.event)})),Us(Ur(),((e,t)=>{t.stop(),r(e)})),Us(Wr(),r)]},zH=SH,OH=[...gH,Xi("dragger",{handlers:yH(kH)})],TH=[...gH,Xi("dragger",{handlers:yH(((e,t,o)=>[...xH(e,t,o),...kH(e,t,o)]))})];const MH=jl({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:zH,touch:OH,mouseOrTouch:TH}),name:"dragging",active:{events:(e,t)=>e.dragger.handlers(e,t)},extra:{snap:e=>({sensor:e.sensor,range:e.range,output:e.output,extra:E.from(e.extra)})},state:Object.freeze({__proto__:null,init:()=>{let e=E.none(),t=E.none();const o=S({});return Ma({readState:o,reset:()=>{e=E.none(),t=E.none()},update:(t,o)=>t.getData(o).bind((o=>((t,o)=>{const n=e.map((e=>t.getDelta(e,o)));return e=E.some(o),n})(t,o))),getStartData:()=>t,setStartData:e=>{t=E.some(e)}})}}),apis:iH}),_H=(e,t,o,n,r,s)=>e.fold((()=>MH.snap({sensor:ZE(o-20,n-20),range:It(r,s),output:ZE(E.some(o),E.some(n)),extra:{td:t}})),(e=>{const r=o-20,s=n-20,a=e.element.dom.getBoundingClientRect();return MH.snap({sensor:ZE(r,s),range:It(40,40),output:ZE(E.some(o-a.width/2),E.some(n-a.height/2)),extra:{td:t}})})),DH=(e,t,o)=>({getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(e,n)=>{const r=n.td;((e,t)=>e.exists((e=>$e(e,t))))(t.get(),r)||(t.set(r),o(r))},mustSnap:!0}),AH=e=>bf(vf.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Nl([MH.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),GS.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),EH=(e,t)=>{const o=Tr([]),n=Tr([]),r=Tr(!1),s=gc(),a=gc(),i=e=>{const o=Uo(e);return _H(m.getOpt(t),e,o.x,o.y,o.width,o.height)},l=e=>{const o=Uo(e);return _H(u.getOpt(t),e,o.right,o.bottom,o.width,o.height)},c=DH((()=>j(o.get(),(e=>i(e)))),s,(t=>{a.get().each((o=>{e.dispatch("TableSelectorChange",{start:t,finish:o})}))})),d=DH((()=>j(n.get(),(e=>l(e)))),a,(t=>{s.get().each((o=>{e.dispatch("TableSelectorChange",{start:o,finish:t})}))})),m=AH(c),u=AH(d),g=fi(m.asSpec()),h=fi(u.asSpec()),p=(t,o,n,r)=>{const s=n(o);MH.snapTo(t,s);((t,o,n,r)=>{const s=o.dom.getBoundingClientRect();Et(t.element,"display");const a=Je(Ve.fromDom(e.getBody())).dom.innerHeight,i=n(s),l=r(s,a);(i||l)&&kt(t.element,"display","none")})(t,o,(e=>e[r]<0),((e,t)=>e[r]>t))},f=e=>p(g,e,i,"top"),v=e=>p(h,e,l,"bottom");So().deviceType.isTouch()&&(e.on("TableSelectionChange",(e=>{r.get()||(om(t,g),om(t,h),r.set(!0)),s.set(e.start),a.set(e.finish),e.otherCells.each((t=>{o.set(t.upOrLeftCells),n.set(t.downOrRightCells),f(e.start),v(e.finish)}))})),e.on("ResizeEditor ResizeWindow ScrollContent",(()=>{s.get().each(f),a.get().each(v)})),e.on("TableSelectionClear",(()=>{r.get()&&(sm(g),sm(h),r.set(!1)),s.clear(),a.clear()})))};const HH=(e,t,o)=>{var n;const r=null!==(n=t.delimiter)&&void 0!==n?n:"",s=t=>q(t,((t,n,s)=>{const a=((t,n,r)=>vf.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":r,"aria-level":r+1}},components:[ui(t)],action:t=>{e.focus(),e.selection.select(n),e.nodeChanged()},buttonBehaviours:Nl([Ly(o.isDisabled),Vy()])}))(n.name,n.element,s);return 0===s?t.concat([a]):t.concat([{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[ui(` ${r} `)]},a])}),[]);return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Nl([pp.config({mode:"flow",selector:"div[role=button]"}),lg.config({disabled:o.isDisabled}),Vy(),jx.config({}),kp.config({}),zp("elementPathEvents",[Ys(((t,o)=>{e.shortcuts.add("alt+F11","focus statusbar elementpath",(()=>pp.focusIn(t))),e.on("NodeChange",(o=>{const n=(t=>{const o=[];let n=t.length;for(;n-- >0;){const s=t[n];if(1===s.nodeType&&"BR"!==(r=s).nodeName&&!r.getAttribute("data-mce-bogus")&&"bookmark"!==r.getAttribute("data-mce-type")){const t=e.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s});if(t.isDefaultPrevented()||o.push({name:t.name,element:s}),t.isPropagationStopped())break}}var r;return o})(o.parents),r=n.length>0?s(n):[];kp.set(t,r)}))}))])]),components:[]}};var BH,VH;(VH=BH||(BH={}))[VH.None=0]="None",VH[VH.Both=1]="Both",VH[VH.Vertical=2]="Vertical";const RH=(e,t,o)=>{const n=Ve.fromDom(e.getContainer()),r=((e,t,o,n,r)=>{const s={};return s.height=zA(n+t.top,$f(e),qf(e)),o===BH.Both&&(s.width=zA(r+t.left,Wf(e),Gf(e))),s})(e,t,o,Rt(n),Wt(n));me(r,((e,t)=>kt(n,t,kA(e)))),(e=>{e.dispatch("ResizeEditor")})(e)},LH=(e,t,o,n)=>{const r=It(20*o,20*n);return RH(e,r,t),E.some(!0)},NH=(e,t)=>{const o=(e=>{const t=bv(e);return!1===t?BH.None:"both"===t?BH.Both:BH.Vertical})(e);return o===BH.None?E.none():E.some(Mf("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},behaviours:[MH.config({mode:"mouse",repositionTarget:!1,onDrag:(t,n,r)=>RH(e,r,o),blockerClass:"tox-blocker"}),pp.config({mode:"special",onLeft:()=>LH(e,o,-1,0),onRight:()=>LH(e,o,1,0),onUp:()=>LH(e,o,0,-1),onDown:()=>LH(e,o,0,1)}),jx.config({}),Dp.config({})]},t.icons))},IH=(e,t)=>{const o=()=>{const o=[];return fv(e)&&o.push(HH(e,{},t)),e.hasPlugin("wordcount")&&o.push(((e,t)=>{const o=(e,o,n)=>kp.set(e,[ui(t.translate(["{0} "+n,o[n]]))]);return vf.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Nl([Ly(t.isDisabled),Vy(),jx.config({}),kp.config({}),Im.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),zp("wordcount-events",[ea((e=>{const t=Im.getValue(e),n="words"===t.mode?"characters":"words";Im.setValue(e,{mode:n,count:t.count}),o(e,t.count,n)})),Ys((t=>{e.on("wordCountUpdate",(e=>{const{mode:n}=Im.getValue(t);Im.setValue(t,{mode:n,count:e.wordCount}),o(t,e.wordCount,n)}))}))])]),eventOrder:{[gs()]:["disabling","alloy.base.behaviour","wordcount-events"]}})})(e,t)),vv(e)&&o.push({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":yf.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:Nl([Dp.config({})])}]}),o.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:o}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const n=o(),r=NH(e,t);return n.concat(r.toArray())})()}},FH=e=>e.get().getOrDie("UI has not been rendered"),PH=e=>{const t=e.inline,o=t?EA:SA,n=Ev(e)?LM:iM,r=gc(),s=gc(),a=gc(),l=gc(),c=So().deviceType.isTouch()?["tox-platform-touch"]:[],d=Tv(e),m=Qf(e),u=bf({dom:{tag:"div",classes:["tox-anchorbar"]}}),g=()=>s.get().bind(hD.getHeader),h=()=>qo.fromOption(r.get(),"UI has not been rendered"),p=()=>s.get().bind((e=>hD.getToolbar(e))).getOrDie("Could not find more toolbar element"),f=()=>s.get().bind((e=>hD.getThrobber(e))).getOrDie("Could not find throbber element"),v=KT(h,e,(()=>s.get().bind((e=>u.getOpt(e))).getOrDie("Could not find a anchor bar element"))),b=()=>{const o=(()=>{const t={attributes:{[Ic]:d?Lc.BottomToTop:Lc.TopToBottom}},o=hD.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:v,onEscape:()=>{e.focus()}}),n=hD.parts.toolbar(i({dom:{tag:"div",classes:["tox-toolbar"]},getSink:h,providers:v.shared.providers,onEscape:()=>{e.focus()},type:m,lazyToolbar:p,lazyHeader:()=>g().getOrDie("Could not find header element")},t)),r=hD.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:v.shared.providers,onEscape:()=>{e.focus()},type:m}),s=Ov(e),a=kv(e),l=xv(e);return hD.parts.header({dom:i({tag:"div",classes:["tox-editor-header"]},t),components:J([l?[o]:[],s?[r]:a?[n]:[],_v(e)?[]:[u.asSpec()]]),sticky:Ev(e),editor:e,sharedBackstage:v.shared})})(),n={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[hD.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),hD.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]},r=hD.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:v}),l=pv(e)&&!t?E.some(IH(e,v.shared.providers)):E.none(),f=J([d?[]:[o],t?[]:[n],d?[o]:[]]),b=J([[{dom:{tag:"div",classes:["tox-editor-container"]},components:f}],t?[]:l.toArray(),[r]]),y=Av(e),w=i(i({role:"application"},yf.isRtl()?{dir:"rtl"}:{}),y?{"aria-hidden":"true"}:{}),x=fi(hD.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(t?["tox-tinymce-inline"]:[]).concat(d?["tox-tinymce--toolbar-bottom"]:[]).concat(c),styles:i({visibility:"hidden"},y?{opacity:"0",border:"0"}:{}),attributes:w},components:b,behaviours:Nl([Vy(),lg.config({disableClass:"tox-tinymce--disabled"}),pp.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),S=Rx(x);return s.set(x),a.set(S),{mothership:S,outerContainer:x}},y=t=>{const o=kA(OA(e)),n=kA((e=>TA(e).getOr(Uf(e)))(e));return e.inline||(At("div","width",n)&&kt(t.element,"width",n),At("div","height",o)?kt(t.element,"height",o):kt(t.element,"height","400px")),o};return{getMothership:()=>FH(a),getUiMothership:()=>FH(l),backstage:v,renderUI:()=>{const{mothership:t,outerContainer:s}=b(),{uiMothership:a,sink:d}=(()=>{const t=Dv(e),o=$e(gt(),t)&&"grid"===Tt(t,"display"),s={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(c),attributes:i({},yf.isRtl()?{dir:"rtl"}:{})},behaviours:Nl([Kd.config({useFixed:()=>n.isDocked(g)})])},a={dom:{styles:{width:document.body.clientWidth+"px"}},events:Fs([Us(Cs(),(e=>{kt(e.element,"width",document.body.clientWidth+"px")}))])},d=fi(gn(s,o?a:{})),m=Rx(d);return r.set(d),l.set(m),{sink:d,uiMothership:m}})();ue(ev(e),((t,o)=>{e.ui.registry.addGroupToolbarButton(o,t)}));const{buttons:u,menuItems:p,contextToolbars:w,sidebars:x}=e.ui.registry.getAll(),S=zv(e),C={menuItems:p,menus:Hv(e),menubar:av(e),toolbar:S.getOrThunk((()=>iv(e))),allowToolbarGroups:m===Af.floating,buttons:u,sidebar:x};(t=>{e.addShortcut("alt+F9","focus menubar",(()=>{hD.focusMenubar(t)})),e.addShortcut("alt+F10","focus toolbar",(()=>{hD.focusToolbar(t)})),e.addCommand("ToggleToolbarDrawer",(()=>{hD.toggleToolbarDrawer(t)})),e.addQueryStateHandler("ToggleToolbarDrawer",(()=>hD.isToolbarDrawerToggled(t)))})(s),((e,t,o)=>{const n=(e,n)=>{U([t,o],(t=>{t.broadcastEvent(e,n)}))},r=(e,n)=>{U([t,o],(t=>{t.broadcastOn([e],n)}))},s=e=>r(wm(),{target:e.target}),a=Lo(),i=pc(a,"touchstart",s),l=pc(a,"touchmove",(e=>n(ws(),e))),c=pc(a,"touchend",(e=>n(xs(),e))),d=pc(a,"mousedown",s),m=pc(a,"mouseup",(e=>{0===e.raw.button&&r(Sm(),{target:e.target})})),u=e=>r(wm(),{target:Ve.fromDom(e.target)}),g=e=>{0===e.button&&r(Sm(),{target:Ve.fromDom(e.target)})},h=()=>{U(e.editorManager.get(),(t=>{e!==t&&t.dispatch("DismissPopups",{relatedTarget:e})}))},p=e=>n(Ss(),vc(e)),f=e=>{r(xm(),{}),n(Cs(),vc(e))},v=()=>r(xm(),{}),b=t=>{t.state&&r(wm(),{target:Ve.fromDom(e.getContainer())})},y=e=>{r(wm(),{target:Ve.fromDom(e.relatedTarget.getContainer())})};e.on("PostRender",(()=>{e.on("click",u),e.on("tap",u),e.on("mouseup",g),e.on("mousedown",h),e.on("ScrollWindow",p),e.on("ResizeWindow",f),e.on("ResizeEditor",v),e.on("AfterProgressState",b),e.on("DismissPopups",y)})),e.on("remove",(()=>{e.off("click",u),e.off("tap",u),e.off("mouseup",g),e.off("mousedown",h),e.off("ScrollWindow",p),e.off("ResizeWindow",f),e.off("ResizeEditor",v),e.off("AfterProgressState",b),e.off("DismissPopups",y),d.unbind(),i.unbind(),l.unbind(),c.unbind(),m.unbind()})),e.on("detach",(()=>{cm(t),cm(o),t.destroy(),o.destroy()}))})(e,t,a),n.setup(e,v.shared,g),yE(e,v),PE(e,h,v),(e=>{const{sidebars:t}=e.ui.registry.getAll();U(ce(t),(o=>{const n=t[o],r=()=>Se(E.from(e.queryCommandValue("ToggleSidebar")),o);e.ui.registry.addToggleButton(o,{icon:n.icon,tooltip:n.tooltip,onAction:t=>{e.execCommand("ToggleSidebar",!1,o),t.setActive(r())},onSetup:t=>{const o=()=>t.setActive(r());return e.on("ToggleSidebar",o),()=>{e.off("ToggleSidebar",o)}}})}))})(e),O_(e,f,v.shared),tE(e,w,d,{backstage:v}),EH(e,d);const k={mothership:t,uiMothership:a,outerContainer:s,sink:d},z={targetNode:e.getElement(),height:y(s)};return o.render(e,k,C,v,z)}}},jH=S([tr("lazySink"),dr("dragBlockClass"),kr("getBounds",Wo),br("useTabstopAt",D),br("eventOrder",{}),Fm("modalBehaviours",[pp]),Gi("onExecute"),Ki("onEscape")]),UH={sketch:C},WH=S([vu({name:"draghandle",overrides:(e,t)=>({behaviours:Nl([MH.config({mode:"mouse",getTarget:e=>Si(e,'[role="dialog"]').getOr(e),blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])})}),pu({schema:[tr("dom")],name:"title"}),pu({factory:UH,schema:[tr("dom")],name:"close"}),pu({factory:UH,schema:[tr("dom")],name:"body"}),vu({factory:UH,schema:[tr("dom")],name:"footer"}),fu({factory:{sketch:(e,t)=>l(i({},e),{dom:t.dom,components:t.components})},schema:[br("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),br("components",[])],name:"blocker"})]),$H=Wu({name:"ModalDialog",configFields:jH(),partFields:WH(),factory:(e,t,o,n)=>{const r=gc(),s=da("modal-events"),a=l(i({},e.eventOrder),{[ks()]:[s].concat(e.eventOrder["alloy.system.attached"]||[])});return{uid:e.uid,dom:e.dom,components:t,apis:{show:t=>{r.set(t);const o=e.lazySink(t).getOrDie(),s=n.blocker(),a=o.getSystem().build(l(i({},s),{components:s.components.concat([vi(t)]),behaviours:Nl([Dp.config({}),zp("dialog-blocker-events",[Js(Jr(),(()=>{pp.focusIn(t)}))])])}));om(o,a),pp.focusIn(t)},hide:e=>{r.clear(),Ye(e.element).each((t=>{e.getSystem().getByDom(t).each((e=>{sm(e)}))}))},getBody:t=>Du(t,e,"body"),getFooter:t=>Du(t,e,"footer"),setIdle:e=>{S_.unblock(e)},setBusy:(e,t)=>{S_.block(e,t)}},eventOrder:a,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:jm(e.modalBehaviours,[kp.config({}),pp.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt}),S_.config({getRoot:r.get}),zp(s,[Ys((t=>{((e,t)=>{const o=yt(e,"id").fold((()=>{const e=da("dialog-label");return ft(t,"id",e),e}),C);ft(e,"aria-labelledby",o)})(t.element,Du(t,e,"title").element),((e,t)=>{const o=E.from(bt(e,"id")).fold((()=>{const e=da("dialog-describe");return ft(t,"id",e),e}),C);ft(e,"aria-describedby",o)})(t.element,Du(t,e,"body").element)}))])])}},apis:{show:(e,t)=>{e.show(t)},hide:(e,t)=>{e.hide(t)},getBody:(e,t)=>e.getBody(t),getFooter:(e,t)=>e.getFooter(t),setBusy:(e,t,o)=>{e.setBusy(t,o)},setIdle:(e,t)=>{e.setIdle(t)}}}),GH=Dn([ub,gb].concat(ly)),qH=In,KH=[Ib("button"),Ob,Sr("align","end",["start","end"]),Bb,Hb,hr("buttonType",["primary","secondary"])],XH=[...KH,pb],JH=[sr("type",["submit","cancel","custom"]),...XH],YH=[sr("type",["menu"]),zb,Tb,Ob,cr("items",GH),...KH],ZH=Yn("type",{submit:JH,cancel:JH,custom:JH,menu:YH}),QH=[ub,pb,sr("level",["info","warn","error","success"]),vb,br("url","")],eB=Dn(QH),tB=[ub,pb,Hb,Ib("button"),Ob,Eb,hr("buttonType",["primary","secondary","toolbar"]),Bb],oB=Dn(tB),nB=[ub,gb],rB=nB.concat([Mb]),sB=nB.concat([hb,Hb]),aB=Dn(sB),iB=In,lB=rB.concat([Vb("auto")]),cB=Dn(lB),dB=Bn([bb,pb,vb]),mB=Dn(rB),uB=Nn,gB=Dn(rB),hB=Nn,pB=nB.concat([xr("tag","textarea"),rr("scriptId"),rr("scriptUrl"),((e,t)=>yr(e,t,jn))("settings",void 0)]),fB=nB.concat([xr("tag","textarea"),ar("init")]),vB=$n((e=>qn("customeditor.old",_n(fB),e).orThunk((()=>qn("customeditor.new",_n(pB),e))))),bB=Nn,yB=Dn(rB),wB=An(Cn),xB=e=>[ub,nr("columns"),e],SB=[ub,rr("html"),Sr("presets","presentation",["presentation","document"])],CB=Dn(SB),kB=rB.concat([Cr("sandboxed",!0)]),zB=Dn(kB),OB=Nn,TB=Dn(nB.concat([gr("height")])),MB=Dn([rr("url"),ur("zoom"),ur("cachedWidth"),ur("cachedHeight")]),_B=rB.concat([gr("inputMode"),gr("placeholder"),Cr("maximized",!1),Hb]),DB=Dn(_B),AB=Nn,EB=e=>[ub,hb,e],HB=[pb,bb],BB=[pb,cr("items",(VB=()=>RB,((e,t)=>{const o=Gt(t);return{extract:(e,t)=>o().extract(e,t),toString:()=>o().toString()}})(0,VB)))];var VB;const RB=En([Dn(HB),Dn(BB)]),LB=rB.concat([cr("items",RB),Hb]),NB=Dn(LB),IB=Nn,FB=rB.concat([lr("items",[pb,bb]),wr("size",1),Hb]),PB=Dn(FB),jB=Nn,UB=rB.concat([Cr("constrain",!0),Hb]),WB=Dn(UB),$B=Dn([rr("width"),rr("height")]),GB=nB.concat([hb,wr("min",0),wr("max",0)]),qB=Dn(GB),KB=Ln,XB=[ub,cr("header",Nn),cr("cells",An(Nn))],JB=Dn(XB),YB=rB.concat([gr("placeholder"),Cr("maximized",!1),Hb]),ZB=Dn(YB),QB=Nn,eV=rB.concat([Sr("filetype","file",["image","media","file"]),Hb]),tV=Dn(eV),oV=Dn([bb,Rb]),nV=e=>Zn("items","items",{tag:"required",process:{}},An($n((t=>qn(`Checking item of ${e}`,rV,t).fold((e=>qo.error(Jn(e))),(e=>qo.value(e))))))),rV=Tn((()=>{return Wn("type",{alertbanner:eB,bar:Dn((e=nV("bar"),[ub,e])),button:oB,checkbox:aB,colorinput:mB,colorpicker:gB,dropzone:yB,grid:Dn(xB(nV("grid"))),iframe:zB,input:DB,listbox:NB,selectbox:PB,sizeinput:WB,slider:qB,textarea:ZB,urlinput:tV,customeditor:vB,htmlpanel:CB,imagepreview:TB,collection:cB,label:Dn(EB(nV("label"))),table:JB,panel:aV});var e})),sV=[ub,br("classes",[]),cr("items",rV)],aV=Dn(sV),iV=[Ib("tab"),fb,cr("items",rV)],lV=[ub,lr("tabs",iV)],cV=Dn(lV),dV=XH,mV=ZH,uV=Dn([rr("title"),or("body",Wn("type",{panel:aV,tabpanel:cV})),xr("size","normal"),cr("buttons",mV),br("initialData",{}),kr("onAction",w),kr("onChange",w),kr("onSubmit",w),kr("onClose",w),kr("onCancel",w),kr("onTabChange",w)]),gV=Dn([sr("type",["cancel","custom"]),...dV]),hV=Dn([rr("title"),rr("url"),ur("height"),ur("width"),fr("buttons",gV),kr("onAction",w),kr("onCancel",w),kr("onClose",w),kr("onMessage",w)]),pV=e=>a(e)?[e].concat(Y(be(e),pV)):m(e)?Y(e,pV):[],fV=e=>s(e.type)&&s(e.name),vV={checkbox:iB,colorinput:uB,colorpicker:hB,dropzone:wB,input:AB,iframe:OB,imagepreview:MB,selectbox:jB,sizeinput:$B,slider:KB,listbox:IB,size:$B,textarea:QB,urlinput:oV,customeditor:bB,collection:dB,togglemenuitem:qH},bV=e=>{const t=(e=>$(pV(e),fV))(e),o=Y(t,(e=>(e=>E.from(vV[e.type]))(e).fold((()=>[]),(t=>[or(e.name,t)]))));return Dn(o)},yV=e=>({internalDialog:Kn(qn("dialog",uV,e)),dataValidator:bV(e),initialData:e.initialData}),wV={open:(e,t)=>{const o=yV(t);return e(o.internalDialog,o.initialData,o.dataValidator)},openUrl:(e,t)=>e(Kn(qn("dialog",hV,t))),redial:e=>yV(e)},xV=e=>{const t=[],o={};return me(e,((e,n)=>{e.fold((()=>{t.push(n)}),(e=>{o[n]=e}))})),t.length>0?qo.error(t):qo.value(o)},SV=(e,t,o)=>{const n=bf(Lk.sketch((n=>({dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:j(e.items,(e=>VO(n,e,t,o)))}))));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[n.asSpec()]}],behaviours:Nl([pp.config({mode:"acyclic",useTabstopAt:O(gz)}),Gk(n),Yk(n,{postprocess:e=>xV(e).fold((e=>({})),C)})])}},CV=Uu({name:"TabButton",configFields:[br("uid",void 0),tr("value"),Zn("dom","dom",vn((()=>({attributes:{role:"tab",id:da("aria"),"aria-selected":"false"}}))),Vn()),dr("action"),br("domModification",{}),Fm("tabButtonBehaviours",[Dp,pp,Im]),tr("view")],factory:(e,t)=>({uid:e.uid,dom:e.dom,components:e.components,events:$p(e.action),behaviours:jm(e.tabButtonBehaviours,[Dp.config({}),pp.config({mode:"execution",useSpace:!0,useEnter:!0}),Im.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification})}),kV=S([tr("tabs"),tr("dom"),br("clickToDismiss",!1),Fm("tabbarBehaviours",[yg,pp]),Ui(["tabClass","selectedClass"])]),zV=bu({factory:CV,name:"tabs",unit:"tab",overrides:e=>{const t=(e,t)=>{yg.dehighlight(e,t),Vs(e,As(),{tabbar:e,button:t})},o=(e,t)=>{yg.highlight(e,t),Vs(e,Ds(),{tabbar:e,button:t})};return{action:n=>{const r=n.getSystem().getByUid(e.uid).getOrDie(),s=yg.isHighlighted(r,n);(s&&e.clickToDismiss?t:s?w:o)(r,n)},domModification:{classes:[e.markers.tabClass]}}}}),OV=S([zV]),TV=Wu({name:"Tabbar",configFields:kV(),partFields:OV(),factory:(e,t,o,n)=>({uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:jm(e.tabbarBehaviours,[yg.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:(e,t)=>{ft(t.element,"aria-selected","true")},onDehighlight:(e,t)=>{ft(t.element,"aria-selected","false")}}),pp.config({mode:"flow",getInitial:e=>yg.getHighlighted(e).map((e=>e.element)),selector:"."+e.markers.tabClass,executeOnMove:!0})])})}),MV=Uu({name:"Tabview",configFields:[Fm("tabviewBehaviours",[kp])],factory:(e,t)=>({uid:e.uid,dom:e.dom,behaviours:jm(e.tabviewBehaviours,[kp.config({})]),domModification:{attributes:{role:"tabpanel"}}})}),_V=S([br("selectFirst",!0),$i("onChangeTab"),$i("onDismissTab"),br("tabs",[]),Fm("tabSectionBehaviours",[])]),DV=pu({factory:TV,schema:[tr("dom"),ir("markers",[tr("tabClass"),tr("selectedClass")])],name:"tabbar",defaults:e=>({tabs:e.tabs})}),AV=pu({factory:MV,name:"tabview"}),EV=S([DV,AV]),HV=Wu({name:"TabSection",configFields:_V(),partFields:EV(),factory:(e,t,o,n)=>{const r=(t,o)=>{_u(t,e,"tabbar").each((e=>{o(e).each(Rs)}))};return{uid:e.uid,dom:e.dom,components:t,behaviours:Pm(e.tabSectionBehaviours),events:Fs(J([e.selectFirst?[Ys(((e,t)=>{r(e,yg.getFirst)}))]:[],[Us(Ds(),((t,o)=>{(t=>{const o=Im.getValue(t);_u(t,e,"tabview").each((n=>{K(e.tabs,(e=>e.value===o)).each((o=>{const r=o.view();yt(t.element,"id").each((e=>{ft(n.element,"aria-labelledby",e)})),kp.set(n,r),e.onChangeTab(n,t,r)}))}))})(o.event.button)})),Us(As(),((t,o)=>{const n=o.event.button;e.onDismissTab(t,n)}))]])),apis:{getViewItems:t=>_u(t,e,"tabview").map((e=>kp.contents(e))).getOr([]),showTab:(e,t)=>{r(e,(e=>{const o=yg.getCandidates(e);return K(o,(e=>Im.getValue(e)===t)).filter((t=>!yg.isHighlighted(e,t)))}))}}}},apis:{getViewItems:(e,t)=>e.getViewItems(t),showTab:(e,t,o)=>{e.showTab(t,o)}}}),BV=(e,t)=>{kt(e,"height",t+"px"),kt(e,"flex-basis",t+"px")},VV=(e,t,o)=>{Si(e,'[role="dialog"]').each((e=>{ki(e,'[role="tablist"]').each((n=>{o.get().map((o=>(kt(t,"height","0"),kt(t,"flex-basis","0"),Math.min(o,((e,t,o)=>{const n=Xe(e).dom,r=Si(e,".tox-dialog-wrap").getOr(e);let s;s="fixed"===Tt(r,"position")?Math.max(n.clientHeight,window.innerHeight):Math.max(n.offsetHeight,n.scrollHeight);const a=Rt(t),i=t.dom.offsetLeft>=o.dom.offsetLeft+Wt(o)?Math.max(Rt(o),a):a,l=parseInt(Tt(e,"margin-top"),10)||0,c=parseInt(Tt(e,"margin-bottom"),10)||0;return s-(Rt(e)+l+c-i)})(e,t,n))))).each((e=>{BV(t,e)}))}))}))},RV=e=>ki(e,'[role="tabpanel"]'),LV=e=>{const t=(()=>{const t=gc(),o=[Ys((o=>{const n=o.element;RV(n).each((r=>{kt(r,"visibility","hidden"),o.getSystem().getByDom(r).toOptional().each((o=>{const n=((e,t,o)=>j(e,((n,r)=>{kp.set(o,e[r].view());const s=t.dom.getBoundingClientRect();return kp.set(o,[]),s.height})))(e,r,o),s=(e=>se(ne(e,((e,t)=>e>t?-1:e<t?1:0))))(n);s.fold(t.clear,t.set)})),VV(n,r,t),Et(r,"visibility"),((e,t)=>{se(e).each((e=>HV.showTab(t,e.value)))})(e,o),requestAnimationFrame((()=>{VV(n,r,t)}))}))})),Us(Cs(),(e=>{const o=e.element;RV(o).each((e=>{VV(o,e,t)}))})),Us(oS,((e,o)=>{const n=e.element;RV(n).each((e=>{const o=Kl(it(e));kt(e,"visibility","hidden");const r=_t(e,"height").map((e=>parseInt(e,10)));Et(e,"height"),Et(e,"flex-basis");const s=e.dom.getBoundingClientRect().height;r.forall((e=>s>e))?(t.set(s),VV(n,e,t)):r.each((t=>{BV(e,t)})),Et(e,"visibility"),o.each(Gl)}))}))];return{extraEvents:o,selectFirst:!1}})();return{smartTabHeight:t,naiveTabHeight:{extraEvents:[],selectFirst:!0}}},NV="send-data-to-section",IV="send-data-to-view",FV=(e,t,o)=>{const n=Tr({}),r=e=>{const t=Im.getValue(e),o=xV(t).getOr({}),r=n.get(),s=gn(r,o);n.set(s)},s=e=>{const t=n.get();Im.setValue(e,t)},a=Tr(null),i=j(e.tabs,(e=>({value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[ui(o.shared.providers.translate(e.title))],view:()=>[Lk.sketch((n=>({dom:{tag:"div",classes:["tox-form"]},components:j(e.items,(e=>VO(n,e,t,o))),formBehaviours:Nl([pp.config({mode:"acyclic",useTabstopAt:O(gz)}),zp("TabView.form.events",[Ys(s),Zs(r)]),Wl.config({channels:Ar([{key:NV,value:{onReceive:r}},{key:IV,value:{onReceive:s}}])})])})))]}))),l=LV(i).smartTabHeight;return HV.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(e,t,o)=>{const n=Im.getValue(t);Vs(e,tS,{name:n,oldName:a.get()}),a.set(n)},tabs:i,components:[HV.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[TV.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Nl([jx.config({})])}),HV.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:l.selectFirst,tabSectionBehaviours:Nl([zp("tabpanel",l.extraEvents),pp.config({mode:"acyclic"}),Ku.config({find:e=>se(HV.getViewItems(e))}),Qk(E.none(),(e=>(e.getSystem().broadcastOn([NV],{}),n.get())),((e,t)=>{n.set(t),e.getSystem().broadcastOn([IV],{})}))])})},PV=da("update-dialog"),jV=da("update-title"),UV=da("update-body"),WV=da("update-footer"),$V=da("body-send-message"),GV=(e,t,o,n,r)=>({dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:i(i({},o.map((e=>({id:e}))).getOr({})),r?{"aria-live":"polite"}:{})},components:[],behaviours:Nl([qk(0),YD.config({channel:`${UV}-${t}`,updateState:(e,t)=>E.some({isTabPanel:()=>"tabpanel"===t.body.type}),renderComponents:e=>{const t=e.body;return"tabpanel"===t.type?[FV(t,e.initialData,n)]:[SV(t,e.initialData,n)]},initialData:e})])}),qV=Lf.deviceType.isTouch(),KV=(e,t)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}),XV=(e,t)=>$H.parts.close(vf.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:Nl([jx.config({})])})),JV=()=>$H.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),YV=(e,t)=>$H.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:C_(`<p>${t.translate(e)}</p>`)}]}]}),ZV=e=>$H.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e}),QV=(e,t)=>[Vx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),Vx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})],eR=e=>{const t="tox-dialog",o=t+"-wrap",n=o+"__backdrop",r=t+"__disable-scroll";return $H.sketch({lazySink:e.lazySink,onEscape:t=>(e.onEscape(t),E.some(!0)),useTabstopAt:e=>!gz(e),dom:{tag:"div",classes:[t].concat(e.extraClasses),styles:i({position:"relative"},e.extraStyles)},components:[e.header,e.body,...e.footer.toArray()],parts:{blocker:{dom:C_(`<div class="${o}"></div>`),components:[{dom:{tag:"div",classes:qV?[n,n+"--opaque"]:[n]}}]}},dragBlockClass:o,modalBehaviours:Nl([Dp.config({}),zp("dialog-events",e.dialogEvents.concat([Js(Jr(),((e,t)=>{pp.focusIn(e)}))])),zp("scroll-lock",[Ys((()=>{Ga(gt(),r)})),Zs((()=>{qa(gt(),r)}))]),...e.extraBehaviours]),eventOrder:i({[gs()]:["dialog-events"],[ks()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[zs()]:["alloy.base.behaviour","dialog-events","scroll-lock"]},e.eventOrder)})},tR=e=>vf.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},components:[Mf("close",{tag:"div",classes:["tox-icon"]},e.icons)],action:e=>{Bs(e,Jx)}}),oR=(e,t,o,n)=>({dom:{tag:"div",classes:["tox-dialog__title"],attributes:i({},o.map((e=>({id:e}))).getOr({}))},components:[],behaviours:Nl([YD.config({channel:`${jV}-${t}`,initialData:e,renderComponents:e=>[ui(n.translate(e.title))]})])}),nR=()=>({dom:C_('<div class="tox-dialog__draghandle"></div>')}),rR=(e,t,o)=>((e,t,o)=>{const n=$H.parts.title(oR(e,t,E.none(),o)),r=$H.parts.draghandle(nR()),s=$H.parts.close(tR(o)),a=[n].concat(e.draggable?[r]:[]).concat([s]);return Vx.sketch({dom:C_('<div class="tox-dialog__header"></div>'),components:a})})({title:o.shared.providers.translate(e),draggable:o.dialog.isDraggableModal()},t,o.shared.providers),sR=(e,t,o)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":o.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:t,components:[{dom:C_('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),aR=(e,t,o)=>({onClose:()=>o.closeWindow(),onBlock:o=>{$H.setBusy(e(),((e,n)=>sR(o.message,n,t)))},onUnblock:()=>{$H.setIdle(e())}}),iR=(e,t,o,n)=>fi(eR(l(i({},e),{lazySink:n.shared.getSink,extraBehaviours:[YD.config({channel:`${PV}-${e.id}`,updateState:(e,t)=>E.some(t),initialData:t}),tz({}),...e.extraBehaviours],onEscape:e=>{Bs(e,Jx)},dialogEvents:o,eventOrder:{[us()]:[YD.name(),Wl.name()],[ks()]:["scroll-lock",YD.name(),"messages","dialog-events","alloy.base.behaviour"],[zs()]:["alloy.base.behaviour","dialog-events","messages",YD.name(),"scroll-lock"]}}))),lR=e=>j(e,(e=>"menu"===e.type?(e=>{const t=j(e.items,(e=>{const t=Tr(!1);return l(i({},e),{storage:t})}));return l(i({},e),{items:t})})(e):e)),cR=e=>q(e,((e,t)=>{if("menu"===t.type){return q(t.items,((e,t)=>(e[t.name]=t.storage,e)),e)}return e}),{}),dR=(e,t)=>[qs(Jr(),uz),e(Xx,((e,o)=>{t.onClose(),o.onClose()})),e(Jx,((e,t,o,n)=>{t.onCancel(e),Bs(n,Xx)})),Us(eS,((e,o)=>t.onUnblock())),Us(Qx,((e,o)=>t.onBlock(o.event)))],mR=(e,t)=>{const o=(t,o)=>Us(t,((t,r)=>{n(t,((n,s)=>{o(e(),n,r.event,t)}))})),n=(e,t)=>{YD.getState(e).get().each((o=>{t(o,e)}))};return[...dR(o,t),o(Yx,((e,t,o)=>{t.onAction(e,{name:o.name})}))]},uR=(e,t,o)=>{const n=(t,o)=>Us(t,((t,n)=>{r(t,((r,s)=>{o(e(),r,n.event,t)}))})),r=(e,t)=>{YD.getState(e).get().each((o=>{t(o.internalDialog,e)}))};return[...dR(n,t),n(Zx,((e,t)=>t.onSubmit(e))),n(Kx,((e,t,o)=>{t.onChange(e,{name:o.name})})),n(Yx,((e,t,n,r)=>{const s=()=>pp.focusIn(r),a=e=>wt(e,"disabled")||yt(e,"aria-disabled").exists((e=>"true"===e)),i=it(r.element),l=Kl(i);t.onAction(e,{name:n.name,value:n.value}),Kl(i).fold(s,(e=>{a(e)||l.exists((t=>Ge(e,t)&&a(t)))?s():o().toOptional().filter((t=>!Ge(t.element,e))).each(s)}))})),n(tS,((e,t,o)=>{t.onTabChange(e,{newTabName:o.name,oldTabName:o.oldName})})),Zs((t=>{const o=e();Im.setValue(t,o.getData())}))]},gR=(e,t)=>{const o=t.map((e=>e.footerButtons)).getOr([]),n=W(o,(e=>"start"===e.align)),r=(e,t)=>Vx.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${e}`]},components:j(t,(e=>e.memento.asSpec()))});return[r("start",n.pass),r("end",n.fail)]},hR=(e,t,o)=>({dom:C_('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Nl([YD.config({channel:`${WV}-${t}`,initialData:e,updateState:(e,t)=>{const n=j(t.buttons,(e=>{const t=bf(((e,t)=>fO(e,e.type,t))(e,o));return{name:e.name,align:e.align,memento:t}}));return E.some({lookupByName:t=>((e,t,o)=>K(t,(e=>e.name===o)).bind((t=>t.memento.getOpt(e))))(e,n,t),footerButtons:n})},renderComponents:gR})])}),pR=(e,t,o)=>$H.parts.footer(hR(e,t,o)),fR=(e,t)=>{if(e.getRoot().getSystem().isConnected()){const o=Ku.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return Lk.getField(o,t).orThunk((()=>{const o=e.getFooter();return YD.getState(o).get().bind((e=>e.lookupByName(t)))}))}return E.none()},vR=(e,t,o)=>{const n=t=>{const o=e.getRoot();o.getSystem().isConnected()&&t(o)},r={getData:()=>{const t=e.getRoot(),n=t.getSystem().isConnected()?e.getFormWrapper():t,r=Im.getValue(n),s=ue(o,(e=>e.get()));return i(i({},r),s)},setData:t=>{n((n=>{const s=r.getData(),a=gn(s,t),i=((e,t)=>{const o=e.getRoot();return YD.getState(o).get().map((e=>Kn(qn("data",e.dataValidator,t)))).getOr(t)})(e,a),l=e.getFormWrapper();Im.setValue(l,i),me(o,((e,t)=>{we(a,t)&&e.set(a[t])}))}))},setEnabled:(t,o)=>{fR(e,t).each(o?lg.enable:lg.disable)},focus:t=>{fR(e,t).each(Dp.focus)},block:e=>{if(!s(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");n((t=>{Vs(t,Qx,{message:e})}))},unblock:()=>{n((e=>{Bs(e,eS)}))},showTab:t=>{n((o=>{const n=e.getBody();YD.getState(n).get().exists((e=>e.isTabPanel()))&&Ku.getCurrent(n).each((e=>{HV.showTab(e,t)}))}))},redial:o=>{n((n=>{const s=e.getId(),a=t(o);n.getSystem().broadcastOn([`${PV}-${s}`],a),n.getSystem().broadcastOn([`${jV}-${s}`],a.internalDialog),n.getSystem().broadcastOn([`${UV}-${s}`],a.internalDialog),n.getSystem().broadcastOn([`${WV}-${s}`],a.internalDialog),r.setData(a.initialData)}))},close:()=>{n((e=>{Bs(e,Xx)}))}};return r},bR=(e,t,o)=>{const n=da("dialog"),r=e.internalDialog,s=rR(r.title,n,o),a=((e,t,o)=>{const n=GV(e,t,E.none(),o,!1);return $H.parts.body(n)})({body:r.body,initialData:r.initialData},n,o),i=lR(r.buttons),l=cR(i),c=pR({buttons:i},n,o),d=uR((()=>p),aR((()=>g),o.shared.providers,t),o.shared.getSink),m=(e=>{switch(e){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}})(r.size),u={id:n,header:s,body:a,footer:E.some(c),extraClasses:m,extraBehaviours:[],extraStyles:{}},g=iR(u,e,d,o),h={getId:S(n),getRoot:S(g),getBody:()=>$H.getBody(g),getFooter:()=>$H.getFooter(g),getFormWrapper:()=>{const e=$H.getBody(g);return Ku.getCurrent(e).getOr(e)}},p=vR(h,t.redial,l);return{dialog:g,instanceApi:p}},yR=(e,t,o,n)=>{const r=da("dialog"),s=da("dialog-label"),a=da("dialog-content"),i=e.internalDialog,l=bf(((e,t,o,n)=>Vx.sketch({dom:C_('<div class="tox-dialog__header"></div>'),components:[oR(e,t,E.some(o),n),nR(),tR(n)],containerBehaviours:Nl([MH.config({mode:"mouse",blockerClass:"blocker",getTarget:e=>zi(e,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))({title:i.title,draggable:!0},r,s,o.shared.providers)),c=bf(((e,t,o,n,r)=>GV(e,t,E.some(o),n,r))({body:i.body,initialData:i.initialData},r,a,o,n)),d=lR(i.buttons),m=cR(d),u=bf(((e,t,o)=>hR(e,t,o))({buttons:d},r,o)),g=uR((()=>p),{onBlock:e=>{S_.block(h,((t,n)=>sR(e.message,n,o.shared.providers)))},onUnblock:()=>{S_.unblock(h)},onClose:()=>t.closeWindow()},o.shared.getSink),h=fi({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:{role:"dialog","aria-labelledby":s,"aria-describedby":a}},eventOrder:{[us()]:[YD.name(),Wl.name()],[gs()]:["execute-on-form"],[ks()]:["reflecting","execute-on-form"]},behaviours:Nl([pp.config({mode:"cyclic",onEscape:e=>(Bs(e,Xx),E.some(!0)),useTabstopAt:e=>!gz(e)&&("button"!==Re(e)||"disabled"!==bt(e,"disabled"))}),YD.config({channel:`${PV}-${r}`,updateState:(e,t)=>E.some(t),initialData:e}),Dp.config({}),zp("execute-on-form",g.concat([Js(Jr(),((e,t)=>{pp.focusIn(e)}))])),S_.config({getRoot:()=>E.some(h)}),kp.config({}),tz({})]),components:[l.asSpec(),c.asSpec(),u.asSpec()]}),p=vR({getId:S(r),getRoot:S(h),getFooter:()=>u.get(h),getBody:()=>c.get(h),getFormWrapper:()=>{const e=c.get(h);return Ku.getCurrent(e).getOr(e)}},t.redial,m);return{dialog:h,instanceApi:p}};var wR=tinymce.util.Tools.resolve("tinymce.util.URI");const xR=["insertContent","setContent","execCommand","close","block","unblock"],SR=e=>a(e)&&-1!==xR.indexOf(e.mceAction),CR=(e,t,o,n)=>{const r=da("dialog"),l=rR(e.title,r,n),c=(e=>{const t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[dz({dom:{tag:"iframe",attributes:{src:e.url}},behaviours:Nl([jx.config({}),Dp.config({})])})]}],behaviours:Nl([pp.config({mode:"acyclic",useTabstopAt:O(gz)})])};return $H.parts.body(t)})(e),d=e.buttons.bind((e=>0===e.length?E.none():E.some(pR({buttons:e},r,n)))),m=mR((()=>w),aR((()=>y),n.shared.providers,t)),u=i(i({},e.height.fold((()=>({})),(e=>({height:e+"px","max-height":e+"px"})))),e.width.fold((()=>({})),(e=>({width:e+"px","max-width":e+"px"})))),h=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],p=new wR(e.url,{base_uri:new wR(window.location.href)}),f=`${p.protocol}://${p.host}${p.port?":"+p.port:""}`,v=uc(),b=[zp("messages",[Ys((()=>{const t=pc(Ve.fromDom(window),"message",(t=>{if(p.isSameOrigin(new wR(t.raw.origin))){const n=t.raw.data;SR(n)?((e,t,o)=>{switch(o.mceAction){case"insertContent":e.insertContent(o.content);break;case"setContent":e.setContent(o.content);break;case"execCommand":const n=!!g(o.ui)&&o.ui;e.execCommand(o.cmd,n,o.value);break;case"close":t.close();break;case"block":t.block(o.message);break;case"unblock":t.unblock()}})(o,w,n):(e=>!SR(e)&&a(e)&&we(e,"mceAction"))(n)&&e.onMessage(w,n)}}));v.set(t)})),Zs(v.clear)]),Wl.config({channels:{[$V]:{onReceive:(e,t)=>{ki(e.element,"iframe").each((e=>{e.dom.contentWindow.postMessage(t,f)}))}}}})],y=iR({id:r,header:l,body:c,footer:d,extraClasses:h,extraBehaviours:b,extraStyles:u},e,m,n),w=(e=>{const t=t=>{e.getSystem().isConnected()&&t(e)};return{block:e=>{if(!s(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t((t=>{Vs(t,Qx,{message:e})}))},unblock:()=>{t((e=>{Bs(e,eS)}))},close:()=>{t((e=>{Bs(e,Xx)}))},sendMessage:e=>{t((t=>{t.getSystem().broadcastOn([$V],e)}))}}})(y);return{dialog:y,instanceApi:w}},kR=(e,t,o)=>t&&o?[]:[TM.config({contextual:{lazyContext:()=>E.some(jo(Ve.fromDom(e.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})],zR=e=>{const t=e.backstage,o=e.editor,n=Ev(o),r=(e=>{const t=e.backstage.shared;return{open:(o,n)=>{const r=()=>{$H.hide(l),n()},s=bf(fO({name:"close-alert",text:"OK",primary:!0,buttonType:E.some("primary"),align:"end",enabled:!0,icon:E.none()},"cancel",e.backstage)),a=JV(),i=XV(r,t.providers),l=fi(eR({lazySink:()=>t.getSink(),header:KV(a,i),body:YV(o,t.providers),footer:E.some(ZV(QV([],[s.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Us(Jx,r)],eventOrder:{}}));$H.show(l);const c=s.get(l);Dp.focus(c)}}})(e),s=(e=>{const t=e.backstage.shared;return{open:(o,n)=>{const r=e=>{$H.hide(c),n(e)},s=bf(fO({name:"yes",text:"Yes",primary:!0,buttonType:E.some("primary"),align:"end",enabled:!0,icon:E.none()},"submit",e.backstage)),a=fO({name:"no",text:"No",primary:!1,buttonType:E.some("secondary"),align:"end",enabled:!0,icon:E.none()},"cancel",e.backstage),i=JV(),l=XV((()=>r(!1)),t.providers),c=fi(eR({lazySink:()=>t.getSink(),header:KV(i,l),body:YV(o,t.providers),footer:E.some(ZV(QV([],[a,s.asSpec()]))),onEscape:()=>r(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Us(Jx,(()=>r(!1))),Us(Zx,(()=>r(!0)))],eventOrder:{}}));$H.show(c);const d=s.get(c);Dp.focus(d)}}})(e),a=(e,n)=>wV.openUrl((e=>{const r=CR(e,{closeWindow:()=>{$H.hide(r.dialog),n(r.instanceApi)}},o,t);return $H.show(r.dialog),r.instanceApi}),e),c=(e,o)=>wV.open(((e,n,r)=>{const s=n,a=bR({dataValidator:r,initialData:s,internalDialog:e},{redial:wV.redial,closeWindow:()=>{$H.hide(a.dialog),o(a.instanceApi)}},t);return $H.show(a.dialog),a.instanceApi.setData(s),a.instanceApi}),e),d=(e,r,s,a)=>wV.open(((e,c,d)=>{const m=Kn(qn("data",d,c));const u=gc(),g=t.shared.header.isPositionedAtTop(),h=()=>u.on((e=>{pf.reposition(e),TM.refresh(e)})),p=yR({dataValidator:d,initialData:m,internalDialog:e},{redial:wV.redial,closeWindow:()=>{u.on(pf.hide),o.off("ResizeEditor",h),u.clear(),s(p.instanceApi)}},t,a),f=fi(pf.sketch(l(i({lazySink:t.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},g?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Nl([zp("window-manager-inline-events",[Us(Os(),((e,t)=>{Bs(p.dialog,Jx)}))]),...kR(o,n,g)]),isExtraPart:(e,t)=>(e=>Sx(e,".tox-alert-dialog")||Sx(e,".tox-confirm-dialog"))(t)})));return u.set(f),pf.showWithin(f,vi(p.dialog),{anchor:r},E.some(gt())),n&&g||(TM.refresh(f),o.on("ResizeEditor",h)),p.instanceApi.setData(m),pp.focusIn(p.dialog),p.instanceApi}),e);return{open:(e,o,n)=>void 0!==o&&"toolbar"===o.inline?d(e,t.shared.anchors.inlineDialog(),n,o.ariaAttrs):void 0!==o&&"cursor"===o.inline?d(e,t.shared.anchors.cursor(),n,o.ariaAttrs):c(e,n),openUrl:(e,t)=>a(e,t),alert:(e,t)=>{r.open(e,(()=>{t()}))},close:e=>{e.close()},confirm:(e,t)=>{s.open(e,(e=>{t(e)}))}}},OR=e=>{Ff(e),(e=>{const t=e.options.register;var o;t("color_map",{processor:e=>y(e,s)?{value:Lw(e),valid:!0}:{valid:!1,message:"Must be an array of strings."},default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_cols",{processor:"number",default:(o=Pw(e).length,Math.max(5,Math.ceil(Math.sqrt(o))))}),t("custom_colors",{processor:"boolean",default:!0})})(e),(e=>{const t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:e=>{return!1===e?{value:[],valid:!0}:s(e)||y(e,s)?{value:(t=e,s(t)?t.split(/[ ,]/):t),valid:!0}:{valid:!1,message:"Must be false or a string."};var t},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})})(e)};A.add("silver",(e=>{OR(e);const{getUiMothership:t,backstage:o,renderUI:n}=PH(e);xx(e,o.shared);const r=zR({editor:e,backstage:o});return{renderUI:n,getWindowManagerImpl:S(r),getNotificationManagerImpl:()=>((e,t,o)=>{const n=t.backstage.shared,r=()=>{const t=jo(Ve.fromDom(e.getContentAreaContainer())),o=Wo(),n=cl(o.x,t.x,t.right),r=cl(o.y,t.y,t.bottom),s=Math.max(t.right,o.right),a=Math.max(t.bottom,o.bottom);return E.some(Po(n,r,s-n,a-r))};return{open:(t,s)=>{const a=()=>{s(),pf.hide(d)},c=fi(Df.sketch({text:t.text,level:N(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:E.from(t.icon),closeButton:t.closeButton,onAction:a,iconProvider:n.providers.icons,translationProvider:n.providers.translate})),d=fi(pf.sketch(i({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:n.getSink,fireDismissalEventInstead:{}},n.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));o.add(d),t.timeout>0&&ff.setEditorTimeout(e,(()=>{a()}),t.timeout);const m={close:a,reposition:()=>{const t=vi(c),o={maxHeightFunction:Mc()},s=e.notificationManager.getNotifications();if(s[0]===m){const e=l(i({},n.anchors.banner()),{overrides:o});pf.showWithinBounds(d,t,{anchor:e},r)}else L(s,m).each((e=>{const n=s[e-1].getEl(),a={type:"node",root:gt(),node:E.some(Ve.fromDom(n)),overrides:o,layouts:{onRtl:()=>[Cl],onLtr:()=>[Cl]}};pf.showWithinBounds(d,t,{anchor:a},r)}))},text:e=>{Df.updateText(c,e)},settings:t,getEl:()=>c.element.dom,progressBar:{value:e=>{Df.updateProgress(c,e)}}};return m},close:e=>{e.close()},getArgs:e=>e.settings}})(e,{backstage:o},t())}}))}(),tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 01-1-1v-5c0-.6-.4-1-1-1a1 1 0 00-1 1v5c0 .6-.4 1-1 1a1 1 0 01-1-1V9H4a1 1 0 110-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 00-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 10-1.4-1.4L12 13.6 5.7 7.3z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 001.4-1.4L12 6.6l-7.7 7.7a1 1 0 001.4 1.4L12 9.4l6.3 6.3z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5L13 7H5a1 1 0 110-2h9.2zm4 0h.8a1 1 0 010 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h6.8zm4 0H19a1 1 0 010 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 010-2h4.4zm4 0H19a1 1 0 010 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 010-2h2zm4 0h8a1 1 0 010 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="M5.6 13l12 6a1 1 0 001.4-1V6a1 1 0 00-1.4-.9l-12 6a1 1 0 000 1.8z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="M18.5 13l-12 6A1 1 0 015 18V6a1 1 0 011.4-.9l12 6a1 1 0 010 1.8z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 01-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 00-1 1z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 01-.7-.3A1 1 0 0111 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 01-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3h-1a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 01-.7.3H5a1 1 0 01-.7-.3A1 1 0 014 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 01-.8.3 1 1 0 01-.6-.3l-.8-.7a1 1 0 01-.3-.8c0-.2.1-.5.3-.7a1 1 0 011.4 0zm-10-7l-.7-.8a1 1 0 01-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.8-.3zm10 0a1 1 0 01-.8.3 1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 010 1.4l-.8.8a1 1 0 01-.6.3 1 1 0 01-.8-.3 1 1 0 01-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 013.7 2.4 4 4 0 010 3.2A4 4 0 0112 16a4 4 0 01-3.7-2.4 4 4 0 010-3.2A4 4 0 0112 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 11-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 01-1.4 1.4L13 13.4V20a1 1 0 01-2 0v-6.6z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 110 14.8 7.4 7.4 0 010-14.8zM12 3a9 9 0 100 18 9 9 0 000-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="M15.7 2l1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 01-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2zM18 12l-4.5-4L9 12h9zM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 01-2-2v-5h2zm8-7V4h6a2 2 0 012 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1l.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="M13 11l-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="M18.4 8l1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 01-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8zm1.6 7l-3-3-3 3h6z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 01-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 01-1 .7h-.2a.7.7 0 01-.7-1l4-12a1 1 0 012 0l4 12a.7.7 0 01-.8 1h-.2a1 1 0 01-1-.7l-.8-2.6zm-.3-1.5l-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 01-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 00-.5-.1 1 1 0 00-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 00-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 001.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 00-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 00-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 01-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 01-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 110-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8a1 1 0 010 2h-8a1 1 0 010-2zM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 010-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 011.6 1.2l-8 12a1 1 0 01-1.5.1l-5-5a1 1 0 111.4-1.4l4.1 4.1 7.4-11z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 010-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 010-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 010-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 010-1.1L6 5 2.2 1.3z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 010-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 01-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 01-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 011.5-1.5l3.8 3.9 3.8-3.9a1 1 0 011.5 1.5z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 01-.8 2 2.8 2.8 0 01.8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 01-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 01-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 01.8-2 2.8 2.8 0 01-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 01-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 01-.5-.5V17a3 3 0 001-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0118 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 01-3.7 3 5.7 5.7 0 01-3.2 0A5.9 5.9 0 017.6 18a6.2 6.2 0 01-1.4-2.6 6.7 6.7 0 010-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 012.3-4A20 20 0 0112 4a26.4 26.4 0 013.2 3.4 18.2 18.2 0 012.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 00-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 01-1.3 3 5.3 5.3 0 01-2.3 1.5 4.9 4.9 0 01-2 .1 4.3 4.3 0 002.4.8 4 4 0 002-.6 4 4 0 001.5-1.5z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 000 18 1.5 1.5 0 001.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 005-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3-4a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm5 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm3 4a1.5 1.5 0 110-3 1.5 1.5 0 010 3z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3L3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/><path d="M13 10h2a1 1 0 010 2h-2v2a1 1 0 01-2 0v-2H9a1 1 0 010-2h2V8a1 1 0 012 0v2z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 00-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 01-3-3V6a3 3 0 013-3h14a3 3 0 013 3v10a3 3 0 01-3 3h-6.4L7 23z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-6 8a6 6 0 006 6V6a6 6 0 00-6 6z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 00-2 2v11h2V5h10V3zm1 4a2 2 0 012 2v10a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 01-1-1v-2H7V9H5a1 1 0 110-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0110.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 012 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 017 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7zm12.3 5h-3v10h3v-10zM8 13.8h-.3l-.4.2a2.8 2.8 0 00-.7.4v.1a2.8 2.8 0 00-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 00.8-.3 2.4 2.4 0 00.7-.7 2.5 2.5 0 00.3-.8 1.5 1.5 0 000-.8 1 1 0 00-.2-.4 1 1 0 00-.5-.2H8zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zM7 5.8h-.4a1 1 0 00-.5.3 1 1 0 00-.2.5v.7a2.5 2.5 0 00.3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 000-.8 2.6 2.6 0 00-.3-.8A2.5 2.5 0 007.7 6l-.4-.1H7z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l2 2V3h14zM8.5 15.3h-.3a2.6 2.6 0 00-.8.4 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3L9 18V18l.4-.4.2-.4.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2h-.5zm7 0H15a1 1 0 00-.4.3 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4a2.8 2.8 0 00.5.7h.1a2.8 2.8 0 00.8.6l.4.1h.7l.5-.2.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3h-.3zM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4zm8.5-7.1h-11v2h11v-2z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 01-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 018.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 010-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 010 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 00-.2-.5 1 1 0 00-.4-.2 1.6 1.6 0 00-.8 0 2.6 2.6 0 00-.8.3 2.5 2.5 0 00-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 00.8-.3 2.8 2.8 0 001-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 00-.3-.8 2.4 2.4 0 00-.7-.7 2.5 2.5 0 00-.8-.3 1.5 1.5 0 00-.8 0 1 1 0 00-.4.2 1 1 0 00-.2.5 1.5 1.5 0 000 .7v.4l.3.4.3.4a2.8 2.8 0 00.8.5l.4.1h.7l.5-.2z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7zm-2 2h-3v12h3V8zm-2-6v2H8v15H6V2h7z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16zm-2 2H8v3h12v-3zm-1-6v2H4v5H2V7h17z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 01-2 2h-7a2 2 0 01-2-2V9c0-1.2.9-2 2-2h7a2 2 0 012 2v2z"/><path d="M17 14h1a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1h-1a1 1 0 010-2h1v-1a1 1 0 012 0v1z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19.8 8.8l-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5zm-2-.2l1-.9v-.3l-2.2-2.2a.3.3 0 00-.3 0l-1 1L18 8.5zm-1 1l-2.5-2.4-6 6 2.5 2.5 6-6zm-7 7.1l-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 00-2-2H7v2h11v9zM6 17h15a1 1 0 010 2h-1v1a1 1 0 01-2 0v-1H6a2 2 0 01-2-2V7H3a1 1 0 110-2h1V4a1 1 0 112 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0119 6zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 008 19h3zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 00-4 4.5h2.2zm-3.4 0a12 12 0 012.8-4 12 12 0 00-5 4h2.2z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 010 .8l-5.6 4A.5.5 0 019 16V8a.5.5 0 01.8-.4z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 00-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 100 16 8 8 0 000-16zm0 14.5a6.5 6.5 0 110-13 6.5 6.5 0 010 13z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3L18 7v1h-5V5H7v14h9a1 1 0 012 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3z"/><path d="M16.4 9.2a1 1 0 011.4.2l2.4 3.6-2.4 3.6a1 1 0 01-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 01.2-1.4z"/></g></svg>',fill:'<svg width="24" height="26"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 002.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 002-2c0-1.3-2-3.5-2-3.5z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 00-2 2zm14-2v2h2a2 2 0 00-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 002-2h-2v2z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5zm8 4v2h2v-2h-2zm4-14H7a2 2 0 00-2 2v3h2V6h10v3h2V6a2 2 0 00-2-2zm2 14h-2v2a2 2 0 002-2zM3 11v2h18v-2H3zm6 7v2h2v-2H9zm8-4v2h2v-2h-2zM5 18c0 1.1.9 2 2 2v-2H5z" fill-rule="nonzero"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 00-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 010 2h-4v11a1 1 0 01-2 0V7H7a1 1 0 110-2h10z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 110-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 11-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 111.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 110-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 110 1.7H5a.9.9 0 01-.9-.9v-4.4a.9.9 0 111.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 01-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 010 1.8H7l3 2.9-1.3 1.2z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="M5 15.7l2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7zM5 18V19h3l1.8-1.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 01-1-1V7c0-.6.4-1 1-1zm6 7a2 2 0 110-4 2 2 0 010 4zM4.5 4h15a.5.5 0 110 1h-15a.5.5 0 010-1zm2-2h11a.5.5 0 110 1h-11a.5.5 0 010-1z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 00-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 01.6.5l.1.3a8.5 8.5 0 01.3.6l1.9 4.6 2-5.2a1 1 0 011-.6.5.5 0 01.5.6L13 14v2.8a.7.7 0 01-1.4 0z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 00-6 9 6.3 6.3 0 001.4 2l1 1a6.3 6.3 0 003.6 1 6.5 6.5 0 006-9 6.3 6.3 0 00-1.4-2l-1-1a6.3 6.3 0 00-3.6-1zM12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4z"/><path d="M9.6 9.7a.7.7 0 01-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 00-.8.8.8.8 0 01-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 012.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 01-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 100-4 2 2 0 000 4z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 015.7 2.3A8 8 0 1112 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 001.8-2.9 6.3 6.3 0 00-.1-4.1 5.8 5.8 0 00-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 00-3.9 1.8 6.3 6.3 0 00-1.3 6 6.2 6.2 0 001.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 014 11c0-1 .2-1.9.6-2.7A7 7 0 016.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 015.7 2 7 7 0 011.7 2.3 6 6 0 01.2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 01-3.6 2.5v.5z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 100-14 7 7 0 000 14zm0 2a9 9 0 110-18 9 9 0 010 18z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 00-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3L16.5 18a5.8 5.8 0 01-3.1 1.9 6.1 6.1 0 01-5.5-1.6A5.8 5.8 0 016 14v-.3l.1-1.2A13.9 13.9 0 017.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 00.2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 00-3-4.2L12 6a26.1 26.1 0 00-2.2 2.5l-1-1a20.9 20.9 0 012.9-3.3L12 4l1 .8a22.2 22.2 0 014 5.4c.6 1.2 1 2.4 1 3.6z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 110 18 9 9 0 010-18zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 003.2-2.1l-.2-.2a6 6 0 00-1-.6zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 01-2-2.8zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 01-.3-2zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1zm3-1.4l-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 00-1.3-3.5zm-9 0l2 .2V5.5a9 9 0 00-2 2.2zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 00-2-2.3zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 011.9-2.5zm4.4 0l.1.1a10 10 0 011.8 2.4l1.1-.7a7.5 7.5 0 00-3-1.8z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zm0 4a1 1 0 01.1 2H13a1 1 0 01-.1-2H21zM7 3.6l3.7 3.7a1 1 0 01-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 011.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 011.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 01-1.3 0h-.1a1 1 0 010-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2.1 2a2 2 0 102.7 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2-2a2 2 0 10-2.6-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 26a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6zM11 36a2 2 0 100-4 2 2 0 000 4zm0 1a3 3 0 110-6 3 3 0 010 6z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8l-1.6 1v-1.1l1.6-1h1.2V17zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6zM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3zM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4zM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3zM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM37.1 34.6L34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 00-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33zm0 10v-1.2h-1.3V26H33zm0 10v-1.2h-1.3V36H33z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M39.3 17l-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3zm-1.6-4.7l-.7 2.3h1.6l-.8-2.3zM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26zM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3zm0 10v-1.2H33V27h-1.3zm0 10v-1.2H33V37h-1.3z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 00-.3-.7A1 1 0 0013 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 017.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 011.2-1.6l3 2a1 1 0 010 1.6l-3 2a1 1 0 11-1.2-1.6z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm12 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2zm-6 0a2 2 0 00-2 2c0 1.1.9 2 2 2a2 2 0 002-2 2 2 0 00-2-2z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 00-2 2v14c0 1.1.9 2 2 2h10a2 2 0 002-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 110-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 01-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 010-2zm0-6h8a1 1 0 010 2H6a1 1 0 110-2zm13-1v3.5a.5.5 0 11-1 0V5h-.5a.5.5 0 110-1H19zm-1 8.8l.2.2h1.3a.5.5 0 110 1h-1.6a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2h-1.3a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 010-1h1.2a.3.3 0 100-.6h-1.3a.4.4 0 110-.8h1.3a.3.3 0 000-.6h-1.2a.5.5 0 110-1H19c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 110-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 01-.5-.5V5h-.5a.5.5 0 010-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 01-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 00-.2-.2H4.5a.5.5 0 01-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 010-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 110-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 110-1H6c.6 0 1 .4 1 1z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 010-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 11-4.3 16.9l1.5-1.5A7 7 0 1013 6h-1z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 110-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 010-2zm-5 4h12a1 1 0 010 2H7a1 1 0 010-2zm1.6-3.8a1 1 0 01-1.2 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 011.2 1.6L6.8 12l1.8 1.2z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 010-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1zM6 22a1 1 0 01-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 01-1-1v-5H7v5c0 .6-.4 1-1 1z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm8 7v12h-6V8h6zm-1.5 1.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm-2 7v12H4V8h6zM8.5 9.5h-3v9h3v-9zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 11v5H8v-5h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 012.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0112 1zm10 7v5H8V8h14zm-1.5 1.5h-11v2h11v-2zM12 3a1 1 0 100 2 1 1 0 000-2z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 01-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 01-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0112 1a3 3 0 012.8 2H18a2 2 0 012 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 00-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5L8 20H3v-3l3.5-3.5a2 2 0 010-3L14 3l1 1-7.3 7.3a1 1 0 000 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 01-2.8 0l-.1-.1z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 01.1 2H13v6a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H11V5c0-.6.4-1 1-1z"/></svg>',preferences:'<svg width="24" height="24"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 01-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 01-1.4 0l-1.5-1.2a6.2 6.2 0 01-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 01-1-.9l-.2-1.9a5.8 5.8 0 01-1.5-.6l-1.5 1.2a1 1 0 01-1.4 0l-.7-.7a1 1 0 010-1.4l1.2-1.5a6.2 6.2 0 01-.6-1.5l-1.9-.2a1 1 0 01-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 01.6-1.5L5.2 7.3a1 1 0 010-1.4l.7-.7a1 1 0 011.4 0l1.5 1.2a6.2 6.2 0 011.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 011.5.6l1.5-1.2a1 1 0 011.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 01.6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 100-6 3 3 0 000 6z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 002.1-2.8 15.7 15.7 0 00-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 00-6.7 3.2A16.2 16.2 0 003.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 012.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 01-2.8-3.7 1 1 0 010-1zm12-3.3a2 2 0 102.7 2.6 4 4 0 11-2.6-2.6z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 00-3 3v6h2v3h14v-3h2v-6a3 3 0 00-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 00-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 00.8 1.3z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 11-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 111.4-1.4l5 5a1 1 0 010 1.4l-5 5a1 1 0 01-1.4-1.4l3.3-3.3z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M5 22.1l-1.2-4.7v-.2a1 1 0 011-1l5 .4a1 1 0 11-.2 2l-2.2-.2a7.8 7.8 0 008.4.2 7.5 7.5 0 003.5-6.4 1 1 0 112 0 9.5 9.5 0 01-4.5 8 9.9 9.9 0 01-10.2 0l.4 1.4a1 1 0 11-2 .5zM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 00-9.5-1 7.5 7.5 0 00-3.6 7 1 1 0 01-2 0 9.5 9.5 0 014.5-8.6 10 10 0 0110.9.3l-.3-1a1 1 0 012-.5l1.1 4.8a1 1 0 01-1 1.2l-5-.4a1 1 0 01-.9-1z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 010 .2l-2.6 10a1 1 0 01-1 .8h-.2a.8.8 0 01-.8-1l2.6-10H8a1 1 0 110-2h9a1 1 0 010 2h-3.8zM5 18h7a1 1 0 010 2H5a1 1 0 010-2zm13 1.5L16.5 18 15 19.5a.7.7 0 01-1-1l1.5-1.5-1.5-1.5a.7.7 0 011-1l1.5 1.5 1.5-1.5a.7.7 0 011 1L17.5 17l1.5 1.5a.7.7 0 01-1 1z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 010 2h-1v9a3 3 0 01-3 3H9a3 3 0 01-3-3V9H5a1 1 0 110-2h3V6a3 3 0 013-3h2a3 3 0 013 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 00-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 012 0v4a1 1 0 01-2 0v-4zm4 0a1 1 0 012 0v4a1 1 0 01-2 0v-4z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 119 2l-7 7A.5.5 0 111 8l7-7zM8.1 5.1A.5.5 0 119 6l-3 3A.5.5 0 115 8l3-3z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 01-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-6a1 1 0 01-.7-.3 1 1 0 01-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 01-.7.3 1 1 0 01-.7-.3A1 1 0 014 11V5z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z"/><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 010 2H3a1 1 0 01-1-1V5a1 1 0 112 0v3l2.5-2.4a9.2 9.2 0 0110.8-1.5A9 9 0 0113.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 111.3-1.5 7.2 7.2 0 0011.6-3.7 7 7 0 00-3.5-7.7A7.2 7.2 0 008 7L4.7 10z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 012 0v6c0 .6-.4 1-1 1h-6a1 1 0 010-2h4.3L16 7A7.2 7.2 0 007.7 6a7 7 0 003 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 011.4 1.5A9.2 9.2 0 012.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 014.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L8 5zm12 11.2a1 1 0 11-1 1.6l-3-2a1 1 0 010-1.6l3-2a1 1 0 111 1.6L18.4 15l1.8 1.2z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 10-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 10-1.4-1.4L13 11.6V4a1 1 0 00-2 0v7.6z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 00-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 00-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 002-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm3.6 10.9L7 12.3a.7.7 0 00-1 1L9.6 17 18 8.6a.7.7 0 000-1 .7.7 0 00-1 0l-7.4 7.3z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V8H5a1 1 0 110-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V13H5a1 1 0 010-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6V18H5a1 1 0 010-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 010-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7zM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 00-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 01-.7-.3 1 1 0 01-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 01-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 017 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z"/><path d="M5 11h14a1 1 0 010 2H5a1 1 0 010-2z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 00-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 01-1.3 1.3l-.6.6h2.6V19z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2v-8c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8zm-2 2H5v5h6V6z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 012 2v7h-8v-2h6V6h-6V4z" opacity=".2"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8 0h-6v5h6v-5zm-8-7H5v5h6V6z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v12h14V6z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v7h-8v7H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 9H5v5h6v-5zm8-7h-6v5h6V6zm-8 0H5v5h6V6z"/><path d="M18 20l-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3 .2-2.3 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2zm.3.5l1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6zm-4.7 1.8l1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 6v12h14V6H5z"/><path d="M14.4 8.6l1 1-2.3 2.4 2.3 2.4-1 1-2.4-2.3-2.4 2.3-1-1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 01-2 0V6h-8v12h8v-1a1 1 0 012 0v2c0 .5-.4 1-.9 1H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h15zM9 13H5v5h4v-5zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H17v2a1 1 0 01-2 .1V13h-2a1 1 0 01-.1-2H15V9c0-.6.4-1 1-1zM9 6H5v5h4V6z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H4a1 1 0 01-1-1v-2a1 1 0 012 0v1h8V6H5v1a1 1 0 11-2 0V5c0-.6.4-1 1-1h15zm0 9h-4v5h4v-5zM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 01.1 2H9v2a1 1 0 01-2 .1V13H5a1 1 0 01-.1-2H7V9c0-.6.4-1 1-1zm11-2h-4v5h4V6z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 110 2H5v6h14V6h-1a1 1 0 010-2h2c.6 0 1 .4 1 1v13a2 2 0 01-2 2H5a2 2 0 01-2-2V5c0-.6.4-1 1-1h2zm5 10H5v4h6v-4zm8 0h-6v4h6v-4zM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 010 2h-2v2a1 1 0 01-2 .1V8H9a1 1 0 010-2h2V4c0-.6.4-1 1-1z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 01.1 2H13v2a1 1 0 01-2 .1V18H9a1 1 0 01-.1-2H11v-2c0-.6.4-1 1-1zm6 7a1 1 0 010-2h1v-6H5v6h1a1 1 0 010 2H4a1 1 0 01-1-1V6c0-1.1.9-2 2-2h14a2 2 0 012 2v13c0 .5-.4 1-.9 1H18zM11 6H5v4h6V6zm8 0h-6v4h6V6z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm0 9h-4v5h4v-5zm-6 0H9v5h4v-5zm0-7H9v5h4V6zm6 0h-4v5h4V6z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15.5V18h3v-2.5H5zm14-5h-9V18h9v-7.5zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6zm-8 7.5h3v-3H5v3z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 00-2 2v13c0 1.1.9 2 2 2h12a2 2 0 002-2V6a2 2 0 00-2-2H6zm0 12h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 11h8v3H6v-3zm11 0c.6 0 1 .4 1 1v1a1 1 0 01-2 0v-1c0-.6.4-1 1-1zM6 6h8v3H6V6zm11 0c.6 0 1 .4 1 1v1a1 1 0 11-2 0V7c0-.6.4-1 1-1z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 012 2v13a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2h12zm0 12h-8v3h8v-3zM7 16a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8v-3zM7 11a1 1 0 00-1 1v1a1 1 0 002 0v-1c0-.6-.4-1-1-1zm11-5h-8v3h8V6zM7 6a1 1 0 00-1 1v1a1 1 0 102 0V7c0-.6-.4-1-1-1z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 15v3h6v-3H5zm14 0h-6v3h6v-3zm0-9h-6v3h6V6zM5 9h6V6H5v3z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM8 15.5H5V18h3v-2.5zm11-5h-9V18h9v-7.5zm-2.5 1l1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2zm-8.5-1H5v3h3v-3zM19 6h-4v2.5h4V6zM8 6H5v2.5h3V6zm5 0h-3v2.5h3V6z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zm-8 11H5v3h6v-3zm8 0h-6v3h6v-3zm0-5h-6v3h6v-3zM5 13h6v-3H5v3z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2V6c0-1.1.9-2 2-2h14zM5 14v4h6v-4H5zm14 0h-6v4h6v-4zm0-6h-6v4h6V8zM5 12h6V8H5v4z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14zM9 16v-4a5 5 0 116 0v4h4a2 2 0 012 2v3H3v-3c0-1.1.9-2 2-2h4zm4 0v-5l.8-.6a3 3 0 10-3.6 0l.8.6v5h2z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 111 0V6H15v1.6a8 8 0 11-6 0zm-2.6 5.3a.5.5 0 00.3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 013.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 00-4.1 3.7z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 01-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 01-.5.6h-.8a.5.5 0 01-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 00.5.6h1.6a.5.5 0 00.5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 110-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 110-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 010-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 010-1l3.1-3A12.4 12.4 0 016.7 9H8a10.1 10.1 0 001.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 110-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 01-1 2.4 13.5 13.5 0 01-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 01-.4.7 1 1 0 01-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 01-1 .7.5.5 0 01-.4-.7l2.7-7.4a1 1 0 012 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 01-.4 1.8l-1 1.4a5.3 5.3 0 01-5.5 1 5 5 0 01-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 01-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 002.2.8 3.4 3.4 0 002.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 010-2z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 01-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 11-1.4 1.4l-5-5a1 1 0 010-1.4l5-5a1 1 0 011.4 1.4L6.4 8z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 011.4 1.4l-2 2a2 2 0 102.6 2.8l4.8-4.8a1 1 0 000-1.4 1 1 0 111.4-1.3 2.9 2.9 0 010 4L9.6 20a3.9 3.9 0 01-5.5-5.5l2-2zm11.6-.6a1 1 0 01-1.4-1.4l2.1-2a2 2 0 10-2.7-2.8L11 10.3a1 1 0 000 1.4A1 1 0 119.6 13a2.9 2.9 0 010-4L14.4 4a3.9 3.9 0 015.5 5.5l-2 2zM7.6 6.3a.8.8 0 01-1 1.1L3.3 4.2a.7.7 0 111-1l3.2 3.1zM5.1 8.6a.8.8 0 010 1.5H3a.8.8 0 010-1.5H5zm5-3.5a.8.8 0 01-1.5 0V3a.8.8 0 011.5 0V5zm6 11.8a.8.8 0 011-1l3.2 3.2a.8.8 0 01-1 1L16 17zm-2.2 2a.8.8 0 011.5 0V21a.8.8 0 01-1.5 0V19zm5-3.5a.7.7 0 110-1.5H21a.8.8 0 010 1.5H19z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 00-.3-.7A1 1 0 0016 7h-2a1 1 0 00-.7.3 1 1 0 00-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 01-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 010-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6c0-1.1.9-2 2-2zm0 1a1 1 0 00-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 012 0v3c0 .6-.4 1-1 1H5a1 1 0 01-1-1v-3a1 1 0 012 0v2h12zM11 6.4L8.7 8.7a1 1 0 01-1.4-1.4l4-4a1 1 0 011.4 0l4 4a1 1 0 11-1.4 1.4L13 6.4V16a1 1 0 01-2 0V6.4z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 110-24 12 12 0 010 24zm-8.7-5.3a11 11 0 0017.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 011.2 1.5l-.1.1-4.1 3-4-3a1 1 0 011-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8l4 2.9a1 1 0 01-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 01-1-1v-4l-2 1.3a1 1 0 01-1.2-.1l-.1-.1a1 1 0 01.1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2zm-4 0v2a2 2 0 01-2-2h2zm8 0v2h-2v-2h2zm8 0a2 2 0 01-2 2v-2h2zm-4 0v2h-2v-2h2zM15 7a1 1 0 010 2v7a1 1 0 01-2 0V9h-1v7a1 1 0 01-2 0v-4a2.5 2.5 0 01-.2-5H15zM5 15v2H3v-2h2zm16 0v2h-2v-2h2zM5 11v2H3v-2h2zm16 0v2h-2v-2h2zM5 7v2H3V7h2zm16 0v2h-2V7h2zM5 3v2H3c0-1.1.9-2 2-2zm8 0v2h-2V3h2zm6 0a2 2 0 012 2h-2V3zM9 3v2H7V3h2zm8 0v2h-2V3h2z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 010 2h-1v11a1 1 0 01-2 0V7h-2v11a1 1 0 01-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 016.8 10a3.3 3.3 0 010-2.8 3.4 3.4 0 011.8-1.8L10 5z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 00-.3-.7 1 1 0 00-.7-.3 1 1 0 00-.7.3 1 1 0 00-.3.7l.3 4h1.4z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-1-9a1 1 0 012 0v6a1 1 0 01-2 0V8zm-2 4a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 111.4-1.4l4.3 4.4a1 1 0 01-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 100-12 6 6 0 000 12zm-3-5a1 1 0 010-2h6a1 1 0 010 2H8z" fill-rule="nonzero"/></svg>'}}),function(){var e=tinymce.util.Tools.resolve("tinymce.ModelManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=r=e,n=(s=String).prototype,n.isPrototypeOf(o)||(null===(a=r.constructor)||void 0===a?void 0:a.name)===s.name)?"string":t;var o,n;var r,s,a})(t)===e,o=e=>t=>typeof t===e,n=t("string"),r=t("object"),s=t("array"),a=(c=null,e=>c===e);var c;const d=o("boolean"),m=e=>!(e=>null==e)(e),u=o("function"),g=o("number"),h=()=>{},p=e=>()=>e,f=e=>e,v=(e,t)=>e===t;function b(e,...t){return(...o)=>{const n=t.concat(o);return e.apply(null,n)}}const y=e=>t=>!e(t),w=e=>e(),x=p(!1),S=p(!0);class C{constructor(e,t){this.tag=e,this.value=t}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return m(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const k=Array.prototype.slice,z=Array.prototype.indexOf,O=Array.prototype.push,T=(e,t)=>((e,t)=>z.call(e,t))(e,t)>-1,M=(e,t)=>{for(let o=0,n=e.length;o<n;o++){if(t(e[o],o))return!0}return!1},_=(e,t)=>{const o=[];for(let n=0;n<e;n++)o.push(t(n));return o},D=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},A=(e,t)=>{for(let o=0,n=e.length;o<n;o++){t(e[o],o)}},E=(e,t)=>{const o=[],n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];(t(s,r)?o:n).push(s)}return{pass:o,fail:n}},H=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t(r,n)&&o.push(r)}return o},B=(e,t,o)=>(((e,t)=>{for(let o=e.length-1;o>=0;o--)t(e[o],o)})(e,((e,n)=>{o=t(o,e,n)})),o),V=(e,t,o)=>(A(e,((e,n)=>{o=t(o,e,n)})),o),R=(e,t)=>((e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t(r,n))return C.some(r);if(o(r,n))break}return C.none()})(e,t,x),L=(e,t)=>{for(let o=0,n=e.length;o<n;o++){if(t(e[o],o))return C.some(o)}return C.none()},N=e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!s(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);O.apply(t,e[o])}return t},I=(e,t)=>N(D(e,t)),F=(e,t)=>{for(let o=0,n=e.length;o<n;++o){if(!0!==t(e[o],o))return!1}return!0},P=(e,t)=>{const o={};for(let n=0,r=e.length;n<r;n++){const r=e[n];o[String(r)]=t(r,n)}return o},j=(e,t)=>t>=0&&t<e.length?C.some(e[t]):C.none(),U=e=>j(e,0),W=e=>j(e,e.length-1),$=(e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return C.none()},G=Object.keys,q=Object.hasOwnProperty,K=(e,t)=>{const o=G(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}},X=(e,t)=>J(e,((e,o)=>({k:o,v:t(e,o)}))),J=(e,t)=>{const o={};return K(e,((e,n)=>{const r=t(e,n);o[r.k]=r.v})),o},Y=(e,t)=>{const o={};var n;return((e,t,o,n)=>{K(e,((e,r)=>{(t(e,r)?o:n)(e,r)}))})(e,t,(n=o,(e,t)=>{n[t]=e}),h),o},Z=(e,t)=>{const o=[];return K(e,((e,n)=>{o.push(t(e,n))})),o},Q=e=>Z(e,f),ee=(e,t)=>q.call(e,t);"undefined"!=typeof window?window:Function("return this;")();const te=e=>e.dom.nodeName.toLowerCase(),oe=e=>e.dom.nodeType,ne=e=>t=>oe(t)===e,re=e=>8===oe(e)||"#comment"===te(e),se=ne(1),ae=ne(3),ie=ne(9),le=ne(11),ce=e=>t=>se(t)&&te(t)===e,de=(e,t,o)=>{if(!(n(o)||d(o)||g(o)))throw new Error("Attribute value was not simple");e.setAttribute(t,o+"")},me=(e,t,o)=>{de(e.dom,t,o)},ue=(e,t)=>{const o=e.dom;K(t,((e,t)=>{de(o,t,e)}))},ge=(e,t)=>{const o=e.dom.getAttribute(t);return null===o?void 0:o},he=(e,t)=>C.from(ge(e,t)),pe=(e,t)=>{e.dom.removeAttribute(t)},fe=e=>V(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),ve=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},be={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){throw new Error("HTML does not have a single root node")}return ve(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return ve(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return ve(o)},fromDom:ve,fromPoint:(e,t,o)=>C.from(e.dom.elementFromPoint(t,o)).map(ve)},ye=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},we=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,xe=(e,t)=>{const o=void 0===t?document:t.dom;return we(o)?C.none():C.from(o.querySelector(e)).map(be.fromDom)},Se=(e,t)=>e.dom===t.dom,Ce=(e,t)=>{const o=e.dom,n=t.dom;return o!==n&&o.contains(n)},ke=ye,ze=e=>be.fromDom(e.dom.ownerDocument),Oe=e=>ie(e)?e:ze(e),Te=e=>C.from(e.dom.parentNode).map(be.fromDom),Me=(e,t)=>{const o=u(t)?t:x;let n=e.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=be.fromDom(e);if(r.push(t),!0===o(t))break;n=e}return r},_e=e=>C.from(e.dom.previousSibling).map(be.fromDom),De=e=>C.from(e.dom.nextSibling).map(be.fromDom),Ae=e=>D(e.dom.childNodes,be.fromDom),Ee=(e,t)=>{const o=e.dom.childNodes;return C.from(o[t]).map(be.fromDom)},He=(e,t)=>{Te(e).each((o=>{o.dom.insertBefore(t.dom,e.dom)}))},Be=(e,t)=>{De(e).fold((()=>{Te(e).each((e=>{Re(e,t)}))}),(e=>{He(e,t)}))},Ve=(e,t)=>{const o=(e=>Ee(e,0))(e);o.fold((()=>{Re(e,t)}),(o=>{e.dom.insertBefore(t.dom,o.dom)}))},Re=(e,t)=>{e.dom.appendChild(t.dom)},Le=(e,t)=>{He(e,t),Re(t,e)},Ne=(e,t)=>{A(t,((o,n)=>{const r=0===n?e:t[n-1];Be(r,o)}))},Ie=(e,t)=>{A(t,(t=>{Re(e,t)}))},Fe=e=>{e.dom.textContent="",A(Ae(e),(e=>{Pe(e)}))},Pe=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},je=e=>{const t=Ae(e);t.length>0&&Ne(e,t),Pe(e)},Ue=(e,t)=>be.fromDom(e.dom.cloneNode(t)),We=e=>Ue(e,!1),$e=e=>Ue(e,!0),Ge=(e,t)=>{const o=be.fromTag(t),n=fe(e);return ue(o,n),o},qe=["tfoot","thead","tbody","colgroup"],Ke=(e,t,o)=>({element:e,rowspan:t,colspan:o}),Xe=(e,t,o)=>({element:e,cells:t,section:o}),Je=(e,t,o)=>({element:e,isNew:t,isLocked:o}),Ye=(e,t,o,n)=>({element:e,cells:t,section:o,isNew:n}),Ze=u(Element.prototype.attachShadow)&&u(Node.prototype.getRootNode),Qe=p(Ze),et=Ze?e=>be.fromDom(e.dom.getRootNode()):Oe,tt=e=>{const t=et(e);return le(o=t)&&m(o.dom.host)?C.some(t):C.none();var o},ot=e=>be.fromDom(e.dom.host),nt=e=>m(e.dom.shadowRoot),rt=e=>{const t=ae(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const o=t.ownerDocument;return tt(be.fromDom(t)).fold((()=>o.body.contains(t)),(n=rt,r=ot,e=>n(r(e))));var n,r},st=e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return be.fromDom(t)},at=(e,t)=>{let o=[];return A(Ae(e),(e=>{t(e)&&(o=o.concat([e])),o=o.concat(at(e,t))})),o},it=(e,t,o)=>((e,t,o)=>H(Me(e,o),t))(e,(e=>ye(e,t)),o),lt=(e,t)=>((e,t)=>H(Ae(e),t))(e,(e=>ye(e,t))),ct=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return we(o)?[]:D(o.querySelectorAll(e),be.fromDom)})(t,e);var dt=(e,t,o,n,r)=>e(o,n)?C.some(o):u(r)&&r(o)?C.none():t(o,n,r);const mt=(e,t,o)=>{let n=e.dom;const r=u(o)?o:x;for(;n.parentNode;){n=n.parentNode;const e=be.fromDom(n);if(t(e))return C.some(e);if(r(e))break}return C.none()},ut=(e,t,o)=>mt(e,(e=>ye(e,t)),o),gt=(e,t)=>((e,t)=>R(e.dom.childNodes,(e=>t(be.fromDom(e)))).map(be.fromDom))(e,(e=>ye(e,t))),ht=(e,t)=>xe(t,e),pt=(e,t,o)=>dt(((e,t)=>ye(e,t)),ut,e,t,o),ft=(e,t,o=v)=>e.exists((e=>o(e,t))),vt=e=>{const t=[],o=e=>{t.push(e)};for(let n=0;n<e.length;n++)e[n].each(o);return t},bt=(e,t)=>e?C.some(t):C.none(),yt=(e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t,wt=(e,t)=>-1!==e.indexOf(t),xt=(e,t)=>yt(e,t,0),St=(e,t)=>yt(e,t,e.length-t.length),Ct=(kt=/^\s+|\s+$/g,e=>e.replace(kt,""));var kt;const zt=e=>e.length>0,Ot=e=>void 0!==e.style&&u(e.style.getPropertyValue),Tt=(e,t,o)=>{if(!n(o))throw new Error("CSS value must be a string: "+o);Ot(e)&&e.style.setProperty(t,o)},Mt=(e,t,o)=>{const n=e.dom;Tt(n,t,o)},_t=(e,t)=>{const o=e.dom;K(t,((e,t)=>{Tt(o,t,e)}))},Dt=(e,t)=>{const o=e.dom,n=window.getComputedStyle(o).getPropertyValue(t);return""!==n||rt(e)?n:At(o,t)},At=(e,t)=>Ot(e)?e.style.getPropertyValue(t):"",Et=(e,t)=>{const o=e.dom,n=At(o,t);return C.from(n).filter((e=>e.length>0))},Ht=(e,t)=>{((e,t)=>{Ot(e)&&e.style.removeProperty(t)})(e.dom,t),ft(he(e,"style").map(Ct),"")&&pe(e,"style")},Bt=(e,t,o=0)=>he(e,t).map((e=>parseInt(e,10))).getOr(o),Vt=(e,t)=>Bt(e,t,1),Rt=e=>ce("col")(e)?Bt(e,"span",1)>1:Vt(e,"colspan")>1,Lt=e=>Vt(e,"rowspan")>1,Nt=(e,t)=>parseInt(Dt(e,t),10),It=p(10),Ft=p(10),Pt=(e,t)=>jt(e,t,S),jt=(e,t,o)=>I(Ae(e),(e=>ye(e,t)?o(e)?[e]:[]:jt(e,t,o))),Ut=(e,t)=>((e,t,o=x)=>o(t)?C.none():T(e,te(t))?C.some(t):ut(t,e.join(","),(e=>ye(e,"table")||o(e))))(["td","th"],e,t),Wt=e=>Pt(e,"th,td"),$t=e=>ye(e,"colgroup")?lt(e,"col"):I(Kt(e),(e=>lt(e,"col"))),Gt=(e,t)=>pt(e,"table",t),qt=e=>Pt(e,"tr"),Kt=e=>Gt(e).fold(p([]),(e=>lt(e,"colgroup"))),Xt=(e,t)=>D(e,(e=>{if("colgroup"===te(e)){const t=D($t(e),(e=>{const t=Bt(e,"span",1);return Ke(e,1,t)}));return Xe(e,t,"colgroup")}{const o=D(Wt(e),(e=>{const t=Bt(e,"rowspan",1),o=Bt(e,"colspan",1);return Ke(e,t,o)}));return Xe(e,o,t(e))}})),Jt=e=>Te(e).map((e=>{const t=te(e);return(e=>T(qe,e))(t)?t:"tbody"})).getOr("tbody"),Yt=e=>{const t=qt(e),o=[...Kt(e),...t];return Xt(o,Jt)},Zt=e=>{let t,o=!1;return(...n)=>(o||(o=!0,t=e.apply(null,n)),t)},Qt=()=>eo(0,0),eo=(e,t)=>({major:e,minor:t}),to={nu:eo,detect:(e,t)=>{const o=String(t).toLowerCase();return 0===e.length?Qt():((e,t)=>{const o=((e,t)=>{for(let o=0;o<e.length;o++){const n=e[o];if(n.test(t))return n}})(e,t);if(!o)return{major:0,minor:0};const n=e=>Number(t.replace(o,"$"+e));return eo(n(1),n(2))})(e,o)},unknown:Qt},oo=(e,t)=>{const o=String(t).toLowerCase();return R(e,(e=>e.search(o)))},no=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ro=e=>t=>wt(t,e),so=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>wt(e,"edge/")&&wt(e,"chrome")&&wt(e,"safari")&&wt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,no],search:e=>wt(e,"chrome")&&!wt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>wt(e,"msie")||wt(e,"trident")},{name:"Opera",versionRegexes:[no,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ro("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ro("firefox")},{name:"Safari",versionRegexes:[no,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(wt(e,"safari")||wt(e,"mobile/"))&&wt(e,"applewebkit")}],ao=[{name:"Windows",search:ro("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>wt(e,"iphone")||wt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ro("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ro("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ro("linux"),versionRegexes:[]},{name:"Solaris",search:ro("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ro("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ro("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],io={browsers:p(so),oses:p(ao)},lo="Edge",co="Chromium",mo="Opera",uo="Firefox",go="Safari",ho=e=>{const t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isEdge:n(lo),isChromium:n(co),isIE:n("IE"),isOpera:n(mo),isFirefox:n(uo),isSafari:n(go)}},po={unknown:()=>ho({current:void 0,version:to.unknown()}),nu:ho,edge:p(lo),chromium:p(co),ie:p("IE"),opera:p(mo),firefox:p(uo),safari:p(go)},fo="Windows",vo="Android",bo="Linux",yo="macOS",wo="Solaris",xo="FreeBSD",So="ChromeOS",Co=e=>{const t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isWindows:n(fo),isiOS:n("iOS"),isAndroid:n(vo),isMacOS:n(yo),isLinux:n(bo),isSolaris:n(wo),isFreeBSD:n(xo),isChromeOS:n(So)}},ko={unknown:()=>Co({current:void 0,version:to.unknown()}),nu:Co,windows:p(fo),ios:p("iOS"),android:p(vo),linux:p(bo),macos:p(yo),solaris:p(wo),freebsd:p(xo),chromeos:p(So)},zo=(e,t,o)=>{const n=io.browsers(),r=io.oses(),s=t.bind((e=>((e,t)=>$(t.brands,(t=>{const o=t.brand.toLowerCase();return R(e,(e=>{var t;return o===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:to.nu(parseInt(t.version,10),0)})))})))(n,e))).orThunk((()=>((e,t)=>oo(e,t).map((e=>{const o=to.detect(e.versionRegexes,t);return{current:e.name,version:o}})))(n,e))).fold(po.unknown,po.nu),a=((e,t)=>oo(e,t).map((e=>{const o=to.detect(e.versionRegexes,t);return{current:e.name,version:o}})))(r,e).fold(ko.unknown,ko.nu),i=((e,t,o,n)=>{const r=e.isiOS()&&!0===/ipad/i.test(o),s=e.isiOS()&&!r,a=e.isiOS()||e.isAndroid(),i=a||n("(pointer:coarse)"),l=r||!s&&a&&n("(min-device-width:768px)"),c=s||a&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(o),m=!c&&!l&&!d;return{isiPad:p(r),isiPhone:p(s),isTablet:p(l),isPhone:p(c),isTouch:p(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:p(d),isDesktop:p(m)}})(a,s,e,o);return{browser:s,os:a,deviceType:i}},Oo=e=>window.matchMedia(e).matches;let To=Zt((()=>zo(navigator.userAgent,C.from(navigator.userAgentData),Oo)));const Mo=()=>To(),_o=(e,t)=>{const o=o=>{const n=t(o);if(n<=0||null===n){const t=Dt(o,e);return parseFloat(t)||0}return n},n=(e,t)=>V(t,((t,o)=>{const n=Dt(e,o),r=void 0===n?0:parseInt(n,10);return isNaN(r)?t:t+r}),0);return{set:(t,o)=>{if(!g(o)&&!o.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+o);const n=t.dom;Ot(n)&&(n.style[e]=o+"px")},get:o,getOuter:o,aggregate:n,max:(e,t,o)=>{const r=n(e,o);return t>r?t-r:0}}},Do=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?C.none():C.some(t)})(e).getOr(t),Ao=(e,t,o)=>Do(Dt(e,t),o),Eo=(e,t)=>{const o=e.dom,n=o.getBoundingClientRect().width||o.offsetWidth;return"border-box"===t?n:((e,t,o,n)=>t-Ao(e,`padding-${o}`,0)-Ao(e,`padding-${n}`,0)-Ao(e,`border-${o}-width`,0)-Ao(e,`border-${n}-width`,0))(e,n,"left","right")},Ho=_o("width",(e=>e.dom.offsetWidth)),Bo=e=>Ho.get(e),Vo=e=>Ho.getOuter(e),Ro=e=>Eo(e,"content-box"),Lo=e=>Ao(e,"width",e.dom.offsetWidth),No=(e,t,o)=>{const n=e.cells,r=n.slice(0,t),s=n.slice(t),a=r.concat(o).concat(s);return Po(e,a)},Io=(e,t,o)=>No(e,t,[o]),Fo=(e,t,o)=>{e.cells[t]=o},Po=(e,t)=>Ye(e.element,t,e.section,e.isNew),jo=(e,t)=>e.cells[t],Uo=(e,t)=>jo(e,t).element,Wo=e=>e.cells.length,$o=e=>{const t=E(e,(e=>"colgroup"===e.section));return{rows:t.fail,cols:t.pass}},Go=(e,t,o)=>{const n=D(e.cells,o);return Ye(t(e.element),n,e.section,!0)},qo="data-snooker-locked-cols",Ko=e=>he(e,qo).bind((e=>C.from(e.match(/\d+/g)))).map((e=>P(e,S))),Xo=e=>{const t=V($o(e).rows,((e,t)=>(A(t.cells,((t,o)=>{t.isLocked&&(e[o]=!0)})),e)),{});return((e,t)=>{const o=k.call(e,0);return o.sort(t),o})(Z(t,((e,t)=>parseInt(t,10))))},Jo=(e,t)=>e+","+t,Yo=(e,t)=>{const o=I(e.all,(e=>e.cells));return H(o,t)},Zo=e=>{const t={},o=[],n=U(e).map((e=>e.element)).bind(Gt).bind(Ko).getOr({});let r=0,s=0,a=0;const{pass:i,fail:l}=E(e,(e=>"colgroup"===e.section));A(l,(e=>{const i=[];A(e.cells,(e=>{let o=0;for(;void 0!==t[Jo(a,o)];)o++;const r=(l=n,c=o.toString(),ee(l,c)&&void 0!==l[c]&&null!==l[c]);var l,c;const d=((e,t,o,n,r,s)=>({element:e,rowspan:t,colspan:o,row:n,column:r,isLocked:s}))(e.element,e.rowspan,e.colspan,a,o,r);for(let n=0;n<e.colspan;n++)for(let r=0;r<e.rowspan;r++){const e=o+n,i=Jo(a+r,e);t[i]=d,s=Math.max(s,e+1)}i.push(d)})),r++,o.push(Xe(e.element,i,e.section)),a++}));const{columns:c,colgroups:d}=W(i).map((e=>{const t=(e=>{const t={};let o=0;return A(e.cells,(e=>{const n=e.colspan;_(n,(r=>{const s=o+r;t[s]=((e,t,o)=>({element:e,colspan:t,column:o}))(e.element,n,s)})),o+=n})),t})(e),o=((e,t)=>({element:e,columns:t}))(e.element,Q(t));return{colgroups:[o],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),m=((e,t)=>({rows:e,columns:t}))(r,s);return{grid:m,access:t,all:o,columns:c,colgroups:d}},Qo={fromTable:e=>{const t=Yt(e);return Zo(t)},generate:Zo,getAt:(e,t,o)=>C.from(e.access[Jo(t,o)]),findItem:(e,t,o)=>{const n=Yo(e,(e=>o(t,e.element)));return n.length>0?C.some(n[0]):C.none()},filterItems:Yo,justCells:e=>I(e.all,(e=>e.cells)),justColumns:e=>Q(e.columns),hasColumns:e=>G(e.columns).length>0,getColumnAt:(e,t)=>C.from(e.columns[t])},en=(e,t=S)=>{const o=e.grid,n=_(o.columns,f),r=_(o.rows,f);return D(n,(o=>tn((()=>I(r,(t=>Qo.getAt(e,t,o).filter((e=>e.column===o)).toArray()))),(e=>1===e.colspan&&t(e.element)),(()=>Qo.getAt(e,0,o)))))},tn=(e,t,o)=>{const n=e();return R(n,t).orThunk((()=>C.from(n[0]).orThunk(o))).map((e=>e.element))},on=e=>{const t=e.grid,o=_(t.rows,f),n=_(t.columns,f);return D(o,(t=>tn((()=>I(n,(o=>Qo.getAt(e,t,o).filter((e=>e.row===t)).fold(p([]),(e=>[e]))))),(e=>1===e.rowspan),(()=>Qo.getAt(e,t,0)))))},nn=(e,t)=>{if(t<0||t>=e.length-1)return C.none();const o=e[t].fold((()=>{const o=(e=>{const t=k.call(e,0);return t.reverse(),t})(e.slice(0,t));return $(o,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>C.some({value:e,delta:0}))),n=e[t+1].fold((()=>{const o=e.slice(t+1);return $(o,((e,t)=>e.map((e=>({value:e,delta:t+1})))))}),(e=>C.some({value:e,delta:1})));return o.bind((e=>n.map((t=>{const o=t.delta+e.delta;return Math.abs(t.value-e.value)/o}))))},rn=(e,t)=>o=>"rtl"===sn(o)?t:e,sn=e=>"rtl"===Dt(e,"direction")?"rtl":"ltr",an=_o("height",(e=>{const t=e.dom;return rt(e)?t.getBoundingClientRect().height:t.offsetHeight})),ln=e=>an.get(e),cn=e=>an.getOuter(e),dn=e=>Ao(e,"height",e.dom.offsetHeight),mn=(e,t)=>({left:e,top:t,translate:(o,n)=>mn(e+o,t+n)}),un=mn,gn=(e,t)=>void 0!==e?e:void 0!==t?t:0,hn=e=>{const t=e.dom.ownerDocument,o=t.body,n=t.defaultView,r=t.documentElement;if(o===e.dom)return un(o.offsetLeft,o.offsetTop);const s=gn(null==n?void 0:n.pageYOffset,r.scrollTop),a=gn(null==n?void 0:n.pageXOffset,r.scrollLeft),i=gn(r.clientTop,o.clientTop),l=gn(r.clientLeft,o.clientLeft);return pn(e).translate(a-l,s-i)},pn=e=>{const t=e.dom,o=t.ownerDocument.body;return o===t?un(o.offsetLeft,o.offsetTop):rt(e)?(e=>{const t=e.getBoundingClientRect();return un(t.left,t.top)})(t):un(0,0)},fn=(e,t)=>({row:e,y:t}),vn=(e,t)=>({col:e,x:t}),bn=e=>hn(e).left+Vo(e),yn=e=>hn(e).left,wn=(e,t)=>vn(e,yn(t)),xn=(e,t)=>vn(e,bn(t)),Sn=e=>hn(e).top,Cn=(e,t)=>fn(e,Sn(t)),kn=(e,t)=>fn(e,Sn(t)+cn(t)),zn=(e,t,o)=>{if(0===o.length)return[];const n=D(o.slice(1),((t,o)=>t.map((t=>e(o,t))))),r=o[o.length-1].map((e=>t(o.length-1,e)));return n.concat([r])},On={delta:f,positions:e=>zn(Cn,kn,e),edge:Sn},Tn=rn({delta:f,edge:yn,positions:e=>zn(wn,xn,e)},{delta:e=>-e,edge:bn,positions:e=>zn(xn,wn,e)}),Mn={delta:(e,t)=>Tn(t).delta(e,t),positions:(e,t)=>Tn(t).positions(e,t),edge:e=>Tn(e).edge(e)},_n={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Dn=(()=>{const e="[0-9]+",t="[eE][+-]?[0-9]+",o=e=>`(?:${e})?`,n=["Infinity","[0-9]+\\."+o(e)+o(t),"\\.[0-9]+"+o(t),e+o(t)].join("|");return new RegExp(`^(${`[+-]?(?:${n})`})(.*)$`)})(),An=(e,t)=>C.from(Dn.exec(e)).bind((e=>{const o=Number(e[1]),n=e[2];return((e,t)=>M(t,(t=>M(_n[t],(t=>e===t)))))(n,t)?C.some({value:o,unit:n}):C.none()})),En=/(\d+(\.\d+)?)%/,Hn=/(\d+(\.\d+)?)px|em/,Bn=ce("col"),Vn=(e,t,o)=>{const n=(r=e,C.from(r.dom.parentElement).map(be.fromDom)).getOrThunk((()=>st(ze(e))));var r;return t(e)/o(n)*100},Rn=(e,t)=>{Mt(e,"width",t+"px")},Ln=(e,t)=>{Mt(e,"width",t+"%")},Nn=(e,t)=>{Mt(e,"height",t+"px")},In=(e,t,o,n)=>{const r=parseFloat(e);return St(e,"%")&&"table"!==te(t)?((e,t,o,n)=>{const r=Gt(e).map((e=>{const n=o(e);return Math.floor(t/100*n)})).getOr(t);return n(e,r),r})(t,r,o,n):r},Fn=e=>{const t=(e=>dn(e)+"px")(e);return t?In(t,e,ln,Nn):ln(e)},Pn=(e,t)=>Et(e,t).orThunk((()=>he(e,t).map((e=>e+"px")))),jn=e=>Pn(e,"width"),Un=e=>Vn(e,Bo,Ro),Wn=e=>Bn(e)?Bo(e):Lo(e),$n=e=>((e,t,o)=>o(e)/Vt(e,t))(e,"rowspan",Fn),Gn=(e,t,o)=>{Mt(e,"width",t+o)},qn=e=>Vn(e,Bo,Ro)+"%",Kn=p(En),Xn=ce("col"),Jn=e=>jn(e).getOrThunk((()=>Wn(e)+"px")),Yn=e=>{return(t=e,Pn(t,"height")).getOrThunk((()=>$n(e)+"px"));var t},Zn=(e,t,o,n,r,s)=>e.filter(n).fold((()=>s(nn(o,t))),(e=>r(e))),Qn=(e,t,o,n)=>{const r=en(e),s=Qo.hasColumns(e)?(e=>D(Qo.justColumns(e),(e=>C.from(e.element))))(e):r,a=[C.some(Mn.edge(t))].concat(D(Mn.positions(r,t),(e=>e.map((e=>e.x))))),i=y(Rt);return D(s,((e,t)=>Zn(e,t,a,i,(e=>{if((e=>{const t=Mo().browser,o=t.isChromium()||t.isFirefox();return!Xn(e)||o})(e))return o(e);{const e=(s=r[t],l=f,null!=s?l(s):C.none());return Zn(e,t,a,i,(e=>n(C.some(Bo(e)))),n)}var s,l}),n)))},er=e=>e.map((e=>e+"px")).getOr(""),tr=(e,t,o)=>Qn(e,t,Wn,(e=>e.getOrThunk(o.minCellWidth))),or=(e,t,o,n,r)=>{const s=on(e),a=[C.some(o.edge(t))].concat(D(o.positions(s,t),(e=>e.map((e=>e.y)))));return D(s,((e,t)=>Zn(e,t,a,y(Lt),n,r)))},nr=(e,t)=>()=>rt(e)?t(e):parseFloat(Et(e,"width").getOr("0")),rr=e=>{const t=nr(e,Bo),o=p(0);return{width:t,pixelWidth:t,getWidths:(t,o)=>tr(t,e,o),getCellDelta:o,singleColumnWidth:p([0]),minCellWidth:o,setElementWidth:h,adjustTableWidth:h,isRelative:!0,label:"none"}},sr=e=>{const t=nr(e,(e=>parseFloat(qn(e)))),o=nr(e,Bo);return{width:t,pixelWidth:o,getWidths:(t,o)=>((e,t,o)=>Qn(e,t,Un,(e=>e.fold((()=>o.minCellWidth()),(e=>e/o.pixelWidth()*100)))))(t,e,o),getCellDelta:e=>e/o()*100,singleColumnWidth:(e,t)=>[100-e],minCellWidth:()=>It()/o()*100,setElementWidth:Ln,adjustTableWidth:o=>{const n=t();Ln(e,n+o/100*n)},isRelative:!0,label:"percent"}},ar=e=>{const t=nr(e,Bo);return{width:t,pixelWidth:t,getWidths:(t,o)=>tr(t,e,o),getCellDelta:f,singleColumnWidth:(e,t)=>[Math.max(It(),e+t)-e],minCellWidth:It,setElementWidth:Rn,adjustTableWidth:o=>{const n=t()+o;Rn(e,n)},isRelative:!1,label:"pixel"}},ir=e=>jn(e).fold((()=>rr(e)),(t=>((e,t)=>null!==Kn().exec(t)?sr(e):ar(e))(e,t))),lr=ar,cr=sr,dr=(e,t,o)=>{const n=e[o].element,r=be.fromTag("td");Re(r,be.fromTag("br"));(t?Re:Ve)(n,r)},mr=(e,t)=>{const o=e=>ye(e.element,t),n=$e(e),r=Yt(n),s=ir(e),a=Qo.generate(r),i=((e,t)=>{const o=e.grid.columns;let n=e.grid.rows,r=o,s=0,a=0;const i=[],l=[];return K(e.access,(e=>{if(i.push(e),t(e)){l.push(e);const t=e.row,o=t+e.rowspan-1,i=e.column,c=i+e.colspan-1;t<n?n=t:o>s&&(s=o),i<r?r=i:c>a&&(a=c)}})),((e,t,o,n,r,s)=>({minRow:e,minCol:t,maxRow:o,maxCol:n,allCells:r,selectedCells:s}))(n,r,s,a,i,l)})(a,o),l="th:not("+t+"),td:not("+t+")",c=jt(n,"th,td",(e=>ye(e,l)));A(c,Pe),((e,t,o,n)=>{const r=H(e,(e=>"colgroup"!==e.section)),s=t.grid.columns,a=t.grid.rows;for(let i=0;i<a;i++){let e=!1;for(let a=0;a<s;a++)i<o.minRow||i>o.maxRow||a<o.minCol||a>o.maxCol||(Qo.getAt(t,i,a).filter(n).isNone()?dr(r,e,i):e=!0)}})(r,a,i,o);const d=((e,t,o,n)=>{if(0===n.minCol&&t.grid.columns===n.maxCol+1)return 0;const r=tr(t,e,o),s=V(r,((e,t)=>e+t),0),a=V(r.slice(n.minCol,n.maxCol+1),((e,t)=>e+t),0)/s*o.pixelWidth()-o.pixelWidth();return o.getCellDelta(a)})(e,Qo.fromTable(e),s,i);return((e,t,o,n)=>{K(o.columns,(e=>{(e.column<t.minCol||e.column>t.maxCol)&&Pe(e.element)}));const r=H(Pt(e,"tr"),(e=>0===e.dom.childElementCount));A(r,Pe),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||A(Pt(e,"th,td"),(e=>{pe(e,"rowspan"),pe(e,"colspan")})),pe(e,qo),pe(e,"data-snooker-col-series"),ir(e).adjustTableWidth(n)})(n,i,a,d),n},ur=((e,t)=>{const o=t=>e(t)?C.from(t.dom.nodeValue):C.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},getOption:o,set:(o,n)=>{if(!e(o))throw new Error("Can only set raw "+t+" value of a "+t+" node");o.dom.nodeValue=n}}})(ae,"text"),gr=e=>ur.get(e),hr=e=>ur.getOption(e),pr=(e,t)=>ur.set(e,t),fr=e=>"img"===te(e)?1:hr(e).fold((()=>Ae(e).length),(e=>e.length)),vr=["img","br"],br=e=>hr(e).filter((e=>0!==e.trim().length||e.indexOf("")>-1)).isSome()||T(vr,te(e)),yr=e=>((e,t)=>{const o=e=>{for(let n=0;n<e.childNodes.length;n++){const r=be.fromDom(e.childNodes[n]);if(t(r))return C.some(r);const s=o(e.childNodes[n]);if(s.isSome())return s}return C.none()};return o(e.dom)})(e,br),wr=e=>xr(e,br),xr=(e,t)=>{const o=e=>{const n=Ae(e);for(let r=n.length-1;r>=0;r--){const e=n[r];if(t(e))return C.some(e);const s=o(e);if(s.isSome())return s}return C.none()};return o(e)},Sr={scope:["row","col"]},Cr=e=>()=>{const t=be.fromTag("td",e.dom);return Re(t,be.fromTag("br",e.dom)),t},kr=e=>()=>be.fromTag("col",e.dom),zr=e=>()=>be.fromTag("colgroup",e.dom),Or=e=>()=>be.fromTag("tr",e.dom),Tr=(e,t,o)=>{const n=((e,t)=>{const o=Ge(e,t),n=Ae($e(e));return Ie(o,n),o})(e,t);return K(o,((e,t)=>{null===e?pe(n,t):me(n,t,e)})),n},Mr=e=>e,_r=(e,t,o)=>{const n=(e,t)=>{((e,t)=>{const o=e.dom,n=t.dom;Ot(o)&&Ot(n)&&(n.style.cssText=o.style.cssText)})(e.element,t),Ht(t,"height"),1!==e.colspan&&Ht(t,"width")};return{col:o=>{const r=be.fromTag(te(o.element),t.dom);return n(o,r),e(o.element,r),r},colgroup:zr(t),row:Or(t),cell:r=>{const s=be.fromTag(te(r.element),t.dom),a=o.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),i=a.length>0?((e,t,o)=>yr(e).map((n=>{const r=o.join(","),s=it(n,r,(t=>Se(t,e)));return B(s,((e,t)=>{const o=We(t);return pe(o,"contenteditable"),Re(e,o),o}),t)})).getOr(t))(r.element,s,a):s;var l,c;return Re(i,be.fromTag("br")),n(r,s),l=r.element,c=s,K(Sr,((e,t)=>he(l,t).filter((t=>T(e,t))).each((e=>me(c,t,e))))),e(r.element,s),s},replace:Tr,colGap:kr(t),gap:Cr(t)}},Dr=e=>({col:kr(e),colgroup:zr(e),row:Or(e),cell:Cr(e),replace:Mr,colGap:kr(e),gap:Cr(e)}),Ar=e=>be.fromDom(e.getBody()),Er=e=>t=>Se(t,Ar(e)),Hr=e=>{pe(e,"data-mce-style");const t=e=>pe(e,"data-mce-style");A(Wt(e),t),A($t(e),t),A(qt(e),t)},Br=e=>be.fromDom(e.selection.getStart()),Vr=e=>e.getBoundingClientRect().width,Rr=e=>e.getBoundingClientRect().height,Lr=(e,t)=>{const o=t.column,n=t.column+t.colspan-1,r=t.row,s=t.row+t.rowspan-1;return o<=e.finishCol&&n>=e.startCol&&r<=e.finishRow&&s>=e.startRow},Nr=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Ir=(e,t,o)=>{const n=Qo.findItem(e,t,Se),r=Qo.findItem(e,o,Se);return n.bind((e=>r.map((t=>{return o=e,n=t,r=Math.min(o.row,n.row),s=Math.min(o.column,n.column),a=Math.max(o.row+o.rowspan-1,n.row+n.rowspan-1),i=Math.max(o.column+o.colspan-1,n.column+n.colspan-1),{startRow:r,startCol:s,finishRow:a,finishCol:i};var o,n,r,s,a,i}))))},Fr=(e,t,o)=>Ir(e,t,o).bind((t=>((e,t)=>{let o=!0;const n=b(Nr,t);for(let r=t.startRow;r<=t.finishRow;r++)for(let s=t.startCol;s<=t.finishCol;s++)o=o&&Qo.getAt(e,r,s).exists(n);return o?C.some(t):C.none()})(e,t))),Pr=(e,t,o)=>Ir(e,t,o).map((t=>{const o=Qo.filterItems(e,b(Lr,t));return D(o,(e=>e.element))})),jr=(e,t)=>Qo.findItem(e,t,((e,t)=>Ce(t,e))).map((e=>e.element)),Ur=(e,t,o)=>Gt(e).bind((n=>((e,t,o,n)=>Qo.findItem(e,t,Se).bind((t=>{const r=o>0?t.row+t.rowspan-1:t.row,s=n>0?t.column+t.colspan-1:t.column;return Qo.getAt(e,r+o,s+n).map((e=>e.element))})))(Gr(n),e,t,o))),Wr=(e,t,o)=>{const n=Gr(e);return Pr(n,t,o)},$r=(e,t,o,n,r)=>{const s=Gr(e),a=Se(e,o)?C.some(t):jr(s,t),i=Se(e,r)?C.some(n):jr(s,n);return a.bind((e=>i.bind((t=>Pr(s,e,t)))))},Gr=Qo.fromTable;var qr=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Kr=()=>({up:p({selector:ut,closest:pt,predicate:mt,all:Me}),down:p({selector:ct,predicate:at}),styles:p({get:Dt,getRaw:Et,set:Mt,remove:Ht}),attrs:p({get:ge,set:me,remove:pe,copyTo:(e,t)=>{const o=fe(e);ue(t,o)}}),insert:p({before:He,after:Be,afterAll:Ne,append:Re,appendAll:Ie,prepend:Ve,wrap:Le}),remove:p({unwrap:je,remove:Pe}),create:p({nu:be.fromTag,clone:e=>be.fromDom(e.dom.cloneNode(!1)),text:be.fromText}),query:p({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:_e,nextSibling:De}),property:p({children:Ae,name:te,parent:Te,document:e=>Oe(e).dom,isText:ae,isComment:re,isElement:se,isSpecial:e=>{const t=te(e);return T(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>se(e)?he(e,"lang"):C.none(),getText:gr,setText:pr,isBoundary:e=>!!se(e)&&("body"===te(e)||T(qr,te(e))),isEmptyTag:e=>!!se(e)&&T(["br","img","hr","input"],te(e)),isNonEditable:e=>se(e)&&"false"===ge(e,"contenteditable")}),eq:Se,is:ke});const Xr=(e,t,o,n)=>{const r=t(e,o);return B(n,((o,n)=>{const r=t(e,n);return Jr(e,o,r)}),r)},Jr=(e,t,o)=>t.bind((t=>o.filter(b(e.eq,t)))),Yr=(e,t,o)=>o.length>0?((e,t,o,n)=>n(e,t,o[0],o.slice(1)))(e,t,o,Xr):C.none(),Zr=(e,t,o,n=x)=>{const r=[t].concat(e.up().all(t)),s=[o].concat(e.up().all(o)),a=e=>L(e,n).fold((()=>e),(t=>e.slice(0,t+1))),i=a(r),l=a(s),c=R(i,(t=>M(l,((e,t)=>b(e.eq,t))(e,t))));return{firstpath:i,secondpath:l,shared:c}},Qr=Kr(),es=(e,t)=>Yr(Qr,((t,o)=>e(o)),t),ts=e=>ut(e,"table"),os=(e,t,o)=>{const n=e=>t=>void 0!==o&&o(t)||Se(t,e);return Se(e,t)?C.some({boxes:C.some([e]),start:e,finish:t}):ts(e).bind((r=>ts(t).bind((s=>{if(Se(r,s))return C.some({boxes:Wr(r,e,t),start:e,finish:t});if(Ce(r,s)){const o=it(t,"td,th",n(r)),a=o.length>0?o[o.length-1]:t;return C.some({boxes:$r(r,e,r,t,s),start:e,finish:a})}if(Ce(s,r)){const o=it(e,"td,th",n(s)),a=o.length>0?o[o.length-1]:e;return C.some({boxes:$r(s,e,r,t,s),start:e,finish:a})}return((e,t,o)=>Zr(Qr,e,t,o))(e,t).shared.bind((a=>pt(a,"table",o).bind((o=>{const a=it(t,"td,th",n(o)),i=a.length>0?a[a.length-1]:t,l=it(e,"td,th",n(o)),c=l.length>0?l[l.length-1]:e;return C.some({boxes:$r(o,e,r,t,s),start:c,finish:i})}))))}))))},ns=(e,t)=>{const o=ct(e,t);return o.length>0?C.some(o):C.none()},rs=(e,t,o)=>ht(e,t).bind((t=>ht(e,o).bind((e=>es(ts,[t,e]).map((o=>({first:t,last:e,table:o}))))))),ss=(e,t,o,n,r)=>((e,t)=>R(e,(e=>ye(e,t))))(e,r).bind((e=>Ur(e,t,o).bind((e=>((e,t)=>ut(e,"table").bind((o=>ht(o,t).bind((t=>os(t,e).bind((e=>e.boxes.map((t=>({boxes:t,start:e.start,finish:e.finish}))))))))))(e,n))))),as=(e,t)=>ns(e,t),is=(e,t,o)=>rs(e,t,o).bind((t=>{const o=t=>Se(e,t),n="thead,tfoot,tbody,table",r=ut(t.first,n,o),s=ut(t.last,n,o);return r.bind((e=>s.bind((o=>Se(e,o)?((e,t,o)=>{const n=Gr(e);return Fr(n,t,o)})(t.table,t.first,t.last):C.none()))))})),ls=f,cs=e=>{const t=(e,t)=>he(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&F(e,(e=>t(e,"rowspan")||t(e,"colspan")))?C.some(e):C.none()},ds=(e,t,o)=>t.length<=1?C.none():is(e,o.firstSelectedSelector,o.lastSelectedSelector).map((e=>({bounds:e,cells:t}))),ms="data-mce-selected",us="data-mce-first-selected",gs="data-mce-last-selected",hs={selected:ms,selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:us,firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:gs,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},ps=(e,t,o)=>({element:o,mergable:ds(t,e,hs),unmergable:cs(e),selection:ls(e)}),fs=e=>(t,o)=>{const n=te(t),r="col"===n||"colgroup"===n?Gt(s=t).bind((e=>as(e,hs.firstSelectedSelector))).fold(p(s),(e=>e[0])):t;var s;return pt(r,e,o)},vs=fs("th,td,caption"),bs=fs("th,td"),ys=e=>{return t=e.model.table.getSelectedCells(),D(t,be.fromDom);var t},ws=(e,t)=>{e.on("BeforeGetContent",(t=>{const o=o=>{t.preventDefault(),(e=>Gt(e[0]).map((e=>{const t=mr(e,"[data-mce-selected]");return Hr(t),[t]})))(o).each((o=>{t.content="text"===t.format?(e=>D(e,(e=>e.dom.innerText)).join(""))(o):((e,t)=>D(t,(t=>e.selection.serializer.serialize(t.dom,{}))).join(""))(e,o)}))};if(!0===t.selection){const t=(e=>H(ys(e),(e=>ye(e,hs.selectedSelector))))(e);t.length>=1&&o(t)}})),e.on("BeforeSetContent",(o=>{if(!0===o.selection&&!0===o.paste){const n=ys(e);U(n).each((n=>{Gt(n).each((r=>{const s=H(((e,t)=>{const o=(t||document).createElement("div");return o.innerHTML=e,Ae(be.fromDom(o))})(o.content),(e=>"meta"!==te(e))),a=ce("table");if(1===s.length&&a(s[0])){o.preventDefault();const a=be.fromDom(e.getDoc()),i=Dr(a),l=((e,t,o)=>({element:e,clipboard:t,generators:o}))(n,s[0],i);t.pasteCells(r,l).each((()=>{e.focus()}))}}))}))}}))},xs=(e,t)=>({element:e,offset:t}),Ss=(e,t,o)=>e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?o(t).bind((t=>Ss(e,t,o).orThunk((()=>C.some(t))))):C.none(),Cs=(e,t)=>{if(e.property().isText(t))return e.property().getText(t).length;return e.property().children(t).length},ks=(e,t)=>{const o=Ss(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(o))return xs(o,Cs(e,o));const n=e.property().children(o);return n.length>0?ks(e,n[n.length-1]):xs(o,Cs(e,o))},zs=ks,Os=Kr(),Ts=(e,t)=>{if(!Rt(e)){jn(e).bind((e=>An(e,["fixed","relative","empty"]))).each((o=>{const n=o.value/2;Gn(e,n,o.unit),Gn(t,n,o.unit)}))}},Ms=e=>D(e,p(0)),_s=(e,t,o,n,r)=>r(e.slice(0,t)).concat(n).concat(r(e.slice(o))),Ds=e=>(t,o,n,r)=>{if(e(n)){const e=Math.max(r,t[o]-Math.abs(n)),s=Math.abs(e-t[o]);return n>=0?s:-s}return n},As=Ds((e=>e<0)),Es=Ds(S),Hs=()=>{const e=(e,t,o,n)=>{const r=(100+o)/100,s=Math.max(n,(e[t]+o)/r);return D(e,((e,o)=>(o===t?s:e/r)-e))},t=(t,o,n,r,s,a)=>a?e(t,o,r,s):((e,t,o,n,r)=>{const s=As(e,t,n,r);return _s(e,t,o+1,[s,0],Ms)})(t,o,n,r,s);return{resizeTable:(e,t)=>e(t),clampTableDelta:As,calcLeftEdgeDeltas:t,calcMiddleDeltas:(e,o,n,r,s,a,i)=>t(e,n,r,s,a,i),calcRightEdgeDeltas:(t,o,n,r,s,a)=>{if(a)return e(t,n,r,s);{const e=As(t,n,r,s);return Ms(t.slice(0,n)).concat([e])}},calcRedestributedWidths:(e,t,o,n)=>{if(n){const n=(t+o)/t,r=D(e,(e=>e/n));return{delta:100*n-100,newSizes:r}}return{delta:o,newSizes:e}}}},Bs=()=>{const e=(e,t,o,n,r)=>{const s=Es(e,n>=0?o:t,n,r);return _s(e,t,o+1,[s,-s],Ms)};return{resizeTable:(e,t,o)=>{o&&e(t)},clampTableDelta:(e,t,o,n,r)=>{if(r){if(o>=0)return o;{const t=V(e,((e,t)=>e+t-n),0);return Math.max(-t,o)}}return As(e,t,o,n)},calcLeftEdgeDeltas:e,calcMiddleDeltas:(t,o,n,r,s,a)=>e(t,n,r,s,a),calcRightEdgeDeltas:(e,t,o,n,r,s)=>{if(s)return Ms(e);{const t=n/e.length;return D(e,p(t))}},calcRedestributedWidths:(e,t,o,n)=>({delta:0,newSizes:e})}},Vs=e=>Qo.fromTable(e).grid,Rs=ce("th"),Ls=e=>F(e,(e=>Rs(e.element))),Ns=(e,t)=>e&&t?"sectionCells":e?"section":"cells",Is=e=>{const t="thead"===e.section,o=ft(Fs(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||o?{type:"header",subType:Ns(t,o)}:{type:"body"}},Fs=e=>{const t=H(e,(e=>Rs(e.element)));return 0===t.length?C.some("td"):t.length===e.length?C.some("th"):C.none()},Ps=(e,t,o)=>Je(o(e.element,t),!0,e.isLocked),js=(e,t)=>e.section!==t?Ye(e.element,e.cells,t,e.isNew):e,Us=()=>({transformRow:js,transformCell:(e,t,o)=>{const n=o(e.element,t),r="td"!==te(n)?((e,t)=>{const o=Ge(e,t);Be(e,o);const n=Ae(e);return Ie(o,n),Pe(e),o})(n,"td"):n;return Je(r,e.isNew,e.isLocked)}}),Ws=()=>({transformRow:js,transformCell:Ps}),$s=()=>({transformRow:(e,t)=>js(e,"thead"===t?"tbody":t),transformCell:Ps}),Gs=(e,t)=>{const o=(e=>$(e.all,(e=>{const t=Is(e);return"header"===t.type?C.from(t.subType):C.none()})))(Qo.fromTable(e)).getOr(t);switch(o){case"section":return Us();case"sectionCells":return Ws();case"cells":return $s()}},qs=Us,Ks=Ws,Xs=$s,Js=()=>({transformRow:f,transformCell:Ps}),Ys=e=>pt(e,"[contenteditable]"),Zs=(e,t=!1)=>rt(e)?e.dom.isContentEditable:Ys(e).fold(p(t),(e=>"true"===Qs(e))),Qs=e=>e.dom.contentEditable,ea=(e,t,o,n)=>{o===n?pe(e,t):me(e,t,o)},ta=(e,t,o)=>{W(lt(e,t)).fold((()=>Ve(e,o)),(e=>Be(e,o)))},oa=(e,t)=>{const o=[],n=[],r=e=>D(e,(e=>{e.isNew&&o.push(e.element);const t=e.element;return Fe(t),A(e.cells,(e=>{e.isNew&&n.push(e.element),ea(e.element,"colspan",e.colspan,1),ea(e.element,"rowspan",e.rowspan,1),Re(t,e.element)})),t})),s=e=>I(e,(e=>D(e.cells,(e=>(ea(e.element,"span",e.colspan,1),e.element))))),a=(t,o)=>{const n=((e,t)=>{const o=gt(e,t).getOrThunk((()=>{const o=be.fromTag(t,ze(e).dom);return"thead"===t?ta(e,"caption,colgroup",o):"colgroup"===t?ta(e,"caption",o):Re(e,o),o}));return Fe(o),o})(e,o),a=("colgroup"===o?s:r)(t);Ie(n,a)},i=(t,o)=>{t.length>0?a(t,o):(t=>{gt(e,t).each(Pe)})(o)},l=[],c=[],d=[],m=[];return A(t,(e=>{switch(e.section){case"thead":l.push(e);break;case"tbody":c.push(e);break;case"tfoot":d.push(e);break;case"colgroup":m.push(e)}})),i(m,"colgroup"),i(l,"thead"),i(c,"tbody"),i(d,"tfoot"),{newRows:o,newCells:n}},na=(e,t)=>{if(0===e.length)return 0;const o=e[0];return L(e,(e=>!t(o.element,e.element))).getOr(e.length)},ra=(e,t,o,n)=>{const r=((e,t)=>e[t])(e,t),s="colgroup"===r.section,a=na(r.cells.slice(o),n),i=s?1:na(((e,t)=>D(e,(e=>jo(e,t))))(e.slice(t),o),n);return{colspan:a,rowspan:i}},sa=(e,t)=>{const o=D(e,(e=>D(e.cells,x)));return D(e,((n,r)=>{const s=I(n.cells,((n,s)=>{if(!1===o[r][s]){const d=ra(e,r,s,t);return((e,t,n,r)=>{for(let s=e;s<e+n;s++)for(let e=t;e<t+r;e++)o[s][e]=!0})(r,s,d.rowspan,d.colspan),[(a=n.element,i=d.rowspan,l=d.colspan,c=n.isNew,{element:a,rowspan:i,colspan:l,isNew:c})]}return[];var a,i,l,c}));return a=n.element,i=s,l=n.section,c=n.isNew,{element:a,cells:i,section:l,isNew:c};var a,i,l,c}))},aa=(e,t,o)=>{const n=[];A(e.colgroups,(r=>{const s=[];for(let n=0;n<e.grid.columns;n++){const r=Qo.getColumnAt(e,n).map((e=>Je(e.element,o,!1))).getOrThunk((()=>Je(t.colGap(),!0,!1)));s.push(r)}n.push(Ye(r.element,s,"colgroup",o))}));for(let r=0;r<e.grid.rows;r++){const s=[];for(let n=0;n<e.grid.columns;n++){const a=Qo.getAt(e,r,n).map((e=>Je(e.element,o,e.isLocked))).getOrThunk((()=>Je(t.gap(),!0,!1)));s.push(a)}const a=e.all[r],i=Ye(a.element,s,a.section,o);n.push(i)}return n},ia=e=>sa(e,Se),la=(e,t)=>$(e.all,(e=>R(e.cells,(e=>Se(t,e.element))))),ca=(e,t,o)=>{const n=D(t.selection,(t=>Ut(t).bind((t=>la(e,t))).filter(o))),r=vt(n);return bt(r.length>0,r)},da=(e,t,o,n,r)=>(s,a,i,l)=>{const c=Qo.fromTable(s),d=C.from(null==l?void 0:l.section).getOrThunk(Js);return t(c,a).map((t=>{const o=((e,t)=>aa(e,t,!1))(c,i),n=e(o,t,Se,r(i),d),s=Xo(n.grid);return{info:t,grid:ia(n.grid),cursor:n.cursor,lockedColumns:s}})).bind((e=>{const t=oa(s,e.grid),r=C.from(null==l?void 0:l.sizing).getOrThunk((()=>ir(s))),a=C.from(null==l?void 0:l.resize).getOrThunk(Bs);return o(s,e.grid,e.info,{sizing:r,resize:a,section:d}),n(s),pe(s,qo),e.lockedColumns.length>0&&me(s,qo,e.lockedColumns.join(",")),C.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))},ma=(e,t)=>ca(e,t,S).map((e=>({cells:e,generators:t.generators,clipboard:t.clipboard}))),ua=(e,t)=>ca(e,t,S),ga=(e,t)=>ca(e,t,(e=>!e.isLocked)),ha=(e,t)=>F(t,(t=>((e,t)=>la(e,t).exists((e=>!e.isLocked)))(e,t))),pa=(e,t,o,n)=>{const r=$o(e).rows;let s=!0;for(let a=0;a<r.length;a++)for(let e=0;e<Wo(r[0]);e++){const i=r[a],l=jo(i,e),c=o(l.element,t);c&&!s?Fo(i,e,Je(n(),!0,l.isLocked)):c&&(s=!1)}return e},fa=(e,t,o,n)=>{const r=$o(e).rows;if(t>0&&t<r.length){const e=((e,t)=>V(e,((e,o)=>M(e,(e=>t(e.element,o.element)))?e:e.concat([o])),[]))(r[t-1].cells,o);A(e,(e=>{let s=C.none();for(let a=t;a<r.length;a++)for(let t=0;t<Wo(r[0]);t++){const i=r[a],l=jo(i,t);o(l.element,e.element)&&(s.isNone()&&(s=C.some(n())),s.each((e=>{Fo(i,t,Je(e,!0,l.isLocked))})))}}))}return e},va=e=>{const t=t=>t(e),o=p(e),n=()=>r,r={tag:!0,inner:e,fold:(t,o)=>o(e),isValue:S,isError:x,map:t=>ya.value(t(e)),mapError:n,bind:t,exists:t,forall:t,getOr:o,or:n,getOrThunk:o,orThunk:n,getOrDie:o,each:t=>{t(e)},toOptional:()=>C.some(e)};return r},ba=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(t,o)=>t(e),isValue:x,isError:S,map:t,mapError:t=>ya.error(t(e)),bind:t,exists:x,forall:S,getOr:f,or:f,getOrThunk:w,orThunk:w,getOrDie:(n=String(e),()=>{throw new Error(n)}),each:h,toOptional:C.none};var n;return o},ya={value:va,error:ba,fromOption:(e,t)=>e.fold((()=>ba(t)),va)},wa=(e,t)=>({rowDelta:0,colDelta:Wo(e[0])-Wo(t[0])}),xa=(e,t)=>({rowDelta:e.length-t.length,colDelta:0}),Sa=(e,t,o,n)=>{const r="colgroup"===t.section?o.col:o.cell;return _(e,(e=>Je(r(),!0,n(e))))},Ca=(e,t,o,n)=>{const r=e[e.length-1];return e.concat(_(t,(()=>{const e="colgroup"===r.section?o.colgroup:o.row,t=Go(r,e,f),s=Sa(t.cells.length,t,o,(e=>ee(n,e.toString())));return Po(t,s)})))},ka=(e,t,o,n)=>D(e,(e=>{const r=Sa(t,e,o,x);return No(e,n,r)})),za=(e,t,o)=>{const n=t.colDelta<0?ka:f,r=t.rowDelta<0?Ca:f,s=Xo(e),a=Wo(e[0]),i=M(s,(e=>e===a-1)),l=n(e,Math.abs(t.colDelta),o,i?a-1:a),c=Xo(l);return r(l,Math.abs(t.rowDelta),o,P(c,S))},Oa=(e,t,o,n)=>{const r=b(n,jo(e[t],o).element),s=e[t];return e.length>1&&Wo(s)>1&&(o>0&&r(Uo(s,o-1))||o<s.cells.length-1&&r(Uo(s,o+1))||t>0&&r(Uo(e[t-1],o))||t<e.length-1&&r(Uo(e[t+1],o)))},Ta=(e,t,o)=>H(o,(o=>o>=e.column&&o<=Wo(t[0])+e.column)),Ma=(e,t,o,n,r)=>{const s=Xo(t),a=((e,t,o)=>{const n=Wo(t[0]),r=$o(t).cols.length+e.row,s=_(n-e.column,(t=>t+e.column));return{row:r,column:R(s,(e=>F(o,(t=>t!==e)))).getOr(n-1)}})(e,t,s),c=$o(o).rows,d=Ta(a,c,s),m=((e,t,o)=>{if(e.row>=t.length||e.column>Wo(t[0]))return ya.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);const n=t.slice(e.row),r=n[0].cells.slice(e.column),s=Wo(o[0]),a=o.length;return ya.value({rowDelta:n.length-a,colDelta:r.length-s})})(a,t,c);return m.map((e=>{const o=l(i({},e),{colDelta:e.colDelta-d.length}),s=za(t,o,n),m=Xo(s),u=Ta(a,c,m);return((e,t,o,n,r,s)=>{const a=e.row,i=e.column,l=a+o.length,c=i+Wo(o[0])+s.length,d=P(s,S);for(let m=a;m<l;m++){let e=0;for(let s=i;s<c;s++){if(d[s]){e++;continue}Oa(t,m,s,r)&&pa(t,Uo(t[m],s),r,n.cell);const l=s-i-e,c=jo(o[m-a],l),u=c.element,g=n.replace(u);Fo(t[m],s,Je(g,!0,c.isLocked))}}return t})(a,s,c,n,r,u)}))},_a=(e,t,o,n,r)=>{((e,t,o,n)=>{t>0&&t<e[0].cells.length&&A(e,(e=>{const r=e.cells[t-1],s=e.cells[t];o(s.element,r.element)&&Fo(e,t,Je(n(),!0,s.isLocked))}))})(t,e,r,n.cell);const s=xa(o,t),a=za(o,s,n),i=xa(t,a),l=za(t,i,n);return D(l,((t,o)=>No(t,e,a[o].cells)))},Da=(e,t,o,n,r)=>{fa(t,e,r,n.cell);const s=Xo(t),a=wa(t,o),c=l(i({},a),{colDelta:a.colDelta-s.length}),d=za(t,c,n),{cols:m,rows:u}=$o(d),g=Xo(d),h=wa(o,t),p=l(i({},h),{colDelta:h.colDelta+g.length}),f=(v=n,b=g,D(o,(e=>V(b,((t,o)=>{const n=Sa(1,e,v,S)[0];return Io(t,o,n)}),e))));var v,b;const y=za(f,p,n);return[...m,...u.slice(0,e),...y,...u.slice(e,u.length)]},Aa=(e,t,o,n,r)=>{const{rows:s,cols:a}=$o(e),i=s.slice(0,t),l=s.slice(t);return[...a,...i,((e,t,o,n)=>Go(e,(e=>n(e,o)),t))(s[o],((e,o)=>t>0&&t<s.length&&n(Uo(s[t-1],o),Uo(s[t],o))?jo(s[t],o):Je(r(e.element,n),!0,e.isLocked)),n,r),...l]},Ea=(e,t,o,n,r)=>D(e,(e=>{const s=t>0&&t<Wo(e)&&n(Uo(e,t-1),Uo(e,t)),a=((e,t,o,n,r,s,a)=>{if("colgroup"!==o&&n)return jo(e,t);{const t=jo(e,r);return Je(a(t.element,s),!0,!1)}})(e,t,e.section,s,o,n,r);return Io(e,t,a)})),Ha=(e,t,o,n)=>((e,t,o,n)=>void 0!==Uo(e[t],o)&&t>0&&n(Uo(e[t-1],o),Uo(e[t],o)))(e,t,o,n)||((e,t,o)=>t>0&&o(Uo(e,t-1),Uo(e,t)))(e[t],o,n),Ba=(e,t,o,n)=>{const r=e=>(e=>"row"===e?Lt(t):Rt(t))(e)?`${e}group`:e;if(e)return Rs(t)?r(o):null;if(n&&Rs(t)){return r("row"===o?"col":"row")}return null},Va=(e,t,o)=>Je(o(e.element,t),!0,e.isLocked),Ra=(e,t,o,n,r,s,a)=>D(e,((e,i)=>((e,t)=>{const o=e.cells,n=D(o,t);return Ye(e.element,n,e.section,e.isNew)})(e,((e,l)=>{if((e=>M(t,(t=>o(e.element,t.element))))(e)){const t=a(e,i,l)?r(e,o,n):e;return s(t,i,l).each((e=>{var o,n;o=t.element,n={scope:C.from(e)},K(n,((e,t)=>{e.fold((()=>{pe(o,t)}),(e=>{de(o.dom,t,e)}))}))})),t}return e})))),La=(e,t,o)=>I(e,((n,r)=>Ha(e,r,t,o)?[]:[jo(n,t)])),Na=(e,t,o,n,r)=>{const s=$o(e).rows,a=I(t,(e=>La(s,e,n))),i=D(s,(e=>Ls(e.cells))),l=((e,t)=>F(t,f)&&Ls(e)?S:(e,o,n)=>!("th"===te(e.element)&&t[o]))(a,i),c=((e,t)=>(o,n)=>C.some(Ba(e,o.element,"row",t[n])))(o,i);return Ra(e,a,n,r,Va,c,l)},Ia=(e,t,o,n,r,s,a)=>{const{cols:i,rows:l}=$o(e),c=l[t[0]],d=I(t,(e=>((e,t,o)=>{const n=e[t];return I(n.cells,((n,r)=>Ha(e,t,r,o)?[]:[n]))})(l,e,r))),m=D(c.cells,((e,t)=>Ls(La(l,t,r)))),u=[...l];A(t,(e=>{u[e]=a.transformRow(l[e],o)}));const g=[...i,...u],h=((e,t)=>F(t,f)&&Ls(e.cells)?S:(e,o,n)=>!("th"===te(e.element)&&t[n]))(c,m),p=((e,t)=>(o,n,r)=>C.some(Ba(e,o.element,"col",t[r])))(n,m);return Ra(g,d,r,s,a.transformCell,p,h)},Fa=(e,t,o,n)=>{const r=$o(e).rows,s=D(t,(e=>jo(r[e.row],e.column)));return Ra(e,s,o,n,Va,C.none,S)},Pa=e=>{if(!s(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],o={};return A(e,((n,r)=>{const a=G(n);if(1!==a.length)throw new Error("one and only one name per case");const i=a[0],l=n[i];if(void 0!==o[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!s(l))throw new Error("case arguments must be an array");t.push(i),o[i]=(...o)=>{const n=o.length;if(n!==l.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+l.length+" ("+l+"), got "+n);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[r].apply(null,o)},match:e=>{const n=G(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!F(t,(e=>T(n,e))))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,o)},log:e=>{}}}})),o},ja=Pa([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ua=i({},ja),Wa=(e,t,o,n,r)=>{const s=e.slice(0),a=((e,t)=>0===e.length?Ua.none():1===e.length?Ua.only(0):0===t?Ua.left(0,1):t===e.length-1?Ua.right(t-1,t):t>0&&t<e.length-1?Ua.middle(t-1,t,t+1):Ua.none())(e,t),i=p(D(s,p(0)));return a.fold(i,(e=>n.singleColumnWidth(s[e],o)),((e,t)=>r.calcLeftEdgeDeltas(s,e,t,o,n.minCellWidth(),n.isRelative)),((e,t,a)=>r.calcMiddleDeltas(s,e,t,a,o,n.minCellWidth(),n.isRelative)),((e,t)=>r.calcRightEdgeDeltas(s,e,t,o,n.minCellWidth(),n.isRelative)))},$a=(e,t,o)=>{let n=0;for(let r=e;r<t;r++)n+=void 0!==o[r]?o[r]:0;return n},Ga=(e,t)=>Qo.hasColumns(e)?((e,t)=>{const o=Qo.justColumns(e);return D(o,((e,o)=>({element:e.element,width:t[o],colspan:e.colspan})))})(e,t):((e,t)=>{const o=Qo.justCells(e);return D(o,(e=>{const o=$a(e.column,e.column+e.colspan,t);return{element:e.element,width:o,colspan:e.colspan}}))})(e,t),qa=(e,t,o)=>{const n=Ga(e,t);A(n,(e=>{o.setElementWidth(e.element,e.width)}))},Ka=(e,t,o,n,r)=>{const s=Qo.fromTable(e),a=r.getCellDelta(t),i=r.getWidths(s,r),l=o===s.grid.columns-1,c=n.clampTableDelta(i,o,a,r.minCellWidth(),l),d=Wa(i,o,c,r,n),m=D(d,((e,t)=>e+i[t]));qa(s,m,r),n.resizeTable(r.adjustTableWidth,c,l)},Xa=(e,t,o,n)=>{const r=Qo.fromTable(e),s=((e,t,o)=>or(e,t,o,$n,(e=>e.getOrThunk(Ft))))(r,e,n),a=D(s,((e,n)=>o===n?Math.max(t+e,Ft()):e)),i=((e,t)=>{const o=Qo.justCells(e);return D(o,(e=>{const o=$a(e.row,e.row+e.rowspan,t);return{element:e.element,height:o,rowspan:e.rowspan}}))})(r,a),l=((e,t)=>D(e.all,((e,o)=>({element:e.element,height:t[o]}))))(r,a);A(l,(e=>{Nn(e.element,e.height)})),A(i,(e=>{Nn(e.element,e.height)}));const c=B(a,((e,t)=>e+t),0);Nn(e,c)},Ja=e=>V(e,((e,t)=>M(e,(e=>e.column===t.column))?e:e.concat([t])),[]).sort(((e,t)=>e.column-t.column)),Ya=ce("col"),Za=ce("colgroup"),Qa=e=>"tr"===te(e)||Za(e),ei=e=>({element:e,colspan:Bt(e,"colspan",1),rowspan:Bt(e,"rowspan",1)}),ti=e=>he(e,"scope").map((e=>e.substr(0,3))),oi=(e,t=ei)=>{const o=o=>{if(Qa(o))return Za((r={element:o}).element)?e.colgroup(r):e.row(r);{const r=o,s=(t=>Ya(t.element)?e.col(t):e.cell(t))(t(r));return n=C.some({item:r,replacement:s}),s}var r};let n=C.none();return{getOrInit:(e,t)=>n.fold((()=>o(e)),(n=>t(e,n.item)?n.replacement:o(e)))}},ni=e=>t=>{const o=[],n=n=>{const r="td"===e?{scope:null}:{},s=t.replace(n,e,r);return o.push({item:n,sub:s}),s};return{replaceOrInit:(e,t)=>{if(Qa(e)||Ya(e))return e;{const r=e;return((e,t)=>R(o,(o=>t(o.item,e))))(r,t).fold((()=>n(r)),(o=>t(e,o.item)?o.sub:n(r)))}}}},ri=e=>({unmerge:t=>{const o=ti(t);return o.each((e=>me(t,"scope",e))),()=>{const n=e.cell({element:t,colspan:1,rowspan:1});return Ht(n,"width"),Ht(t,"width"),o.each((e=>me(n,"scope",e))),n}},merge:e=>(Ht(e[0],"width"),(()=>{const t=vt(D(e,ti));if(0===t.length)return C.none();{const e=t[0],o=["row","col"];return M(t,(t=>t!==e&&T(o,t)))?C.none():C.from(e)}})().fold((()=>pe(e[0],"scope")),(t=>me(e[0],"scope",t+"group"))),p(e[0]))}),si=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],ai=Kr(),ii=e=>((e,t)=>{const o=e.property().name(t);return T(si,o)})(ai,e),li=e=>((e,t)=>{const o=e.property().name(t);return T(["ol","ul"],o)})(ai,e),ci=e=>{return t=e,T(["br","img","hr","input"],ai.property().name(t));var t},di=e=>{const t=ce("br"),o=e=>wr(e).bind((o=>{const n=De(o).map((e=>!!ii(e)||!!ci(e)&&"img"!==te(e))).getOr(!1);return Te(o).map((r=>!0===n||(e=>"li"===te(e)||mt(e,li).isSome())(r)||t(o)||ii(r)&&!Se(e,r)?[]:[be.fromTag("br")]))})).getOr([]),n=(()=>{const n=I(e,(e=>{const n=Ae(e);return(e=>F(e,(e=>t(e)||ae(e)&&0===gr(e).trim().length)))(n)?[]:n.concat(o(e))}));return 0===n.length?[be.fromTag("br")]:n})();Fe(e[0]),Ie(e[0],n)},mi=e=>Zs(e,!0),ui=e=>{0===Wt(e).length&&Pe(e)},gi=(e,t)=>({grid:e,cursor:t}),hi=(e,t,o)=>{var n,r;const s=$o(e).rows;return C.from(null===(r=null===(n=s[t])||void 0===n?void 0:n.cells[o])||void 0===r?void 0:r.element).filter(mi).orThunk((()=>(e=>$(e,(e=>$(e.cells,(e=>{const t=e.element;return bt(mi(t),t)})))))(s)))},pi=(e,t,o)=>{const n=hi(e,t,o);return gi(e,n)},fi=e=>V(e,((e,t)=>M(e,(e=>e.row===t.row))?e:e.concat([t])),[]).sort(((e,t)=>e.row-t.row)),vi=(e,t)=>(o,n,r,s,a)=>{const i=fi(n),l=D(i,(e=>e.row)),c=Ia(o,l,e,t,r,s.replaceOrInit,a);return pi(c,n[0].row,n[0].column)},bi=vi("thead",!0),yi=vi("tbody",!1),wi=vi("tfoot",!1),xi=(e,t,o)=>{const n=(r=e,s=o.section,Xt(r,(()=>s)));var r,s;const a=Qo.generate(n);return aa(a,t,!0)},Si=(e,t,o,n)=>((e,t,o,n)=>{const r=Qo.generate(t),s=n.getWidths(r,n);qa(r,s,n)})(0,t,0,n.sizing),Ci=(e,t,o,n)=>((e,t,o,n,r)=>{const s=Qo.generate(t),a=n.getWidths(s,n),i=n.pixelWidth(),{newSizes:l,delta:c}=r.calcRedestributedWidths(a,i,o.pixelDelta,n.isRelative);qa(s,l,n),n.adjustTableWidth(c)})(0,t,o,n.sizing,n.resize),ki=(e,t)=>M(t,(e=>0===e.column&&e.isLocked)),zi=(e,t)=>M(t,(t=>t.column+t.colspan>=e.grid.columns&&t.isLocked)),Oi=(e,t)=>{const o=en(e),n=Ja(t);return V(n,((e,t)=>e+o[t.column].map(Vo).getOr(0)),0)},Ti=e=>(t,o)=>ua(t,o).filter((o=>!(e?ki:zi)(t,o))).map((e=>({details:e,pixelDelta:Oi(t,e)}))),Mi=e=>(t,o)=>ma(t,o).filter((o=>!(e?ki:zi)(t,o.cells))),_i=ni("th"),Di=ni("td"),Ai=da(((e,t,o,n)=>{const r=t[0].row,s=fi(t),a=B(s,((e,t)=>({grid:Aa(e.grid,r,t.row+e.delta,o,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return pi(a,r,t[0].column)}),ua,h,h,oi),Ei=da(((e,t,o,n)=>{const r=fi(t),s=r[r.length-1],a=s.row+s.rowspan,i=B(r,((e,t)=>Aa(e,a,t.row,o,n.getOrInit)),e);return pi(i,a,t[0].column)}),ua,h,h,oi),Hi=da(((e,t,o,n)=>{const r=t.details,s=Ja(r),a=s[0].column,i=B(s,((e,t)=>({grid:Ea(e.grid,a,t.column+e.delta,o,n.getOrInit),delta:e.delta+1})),{grid:e,delta:0}).grid;return pi(i,r[0].row,a)}),Ti(!0),Ci,h,oi),Bi=da(((e,t,o,n)=>{const r=t.details,s=r[r.length-1],a=s.column+s.colspan,i=Ja(r),l=B(i,((e,t)=>Ea(e,a,t.column,o,n.getOrInit)),e);return pi(l,r[0].row,a)}),Ti(!1),Ci,h,oi),Vi=da(((e,t,o,n)=>{const r=Ja(t.details),s=((e,t)=>I(e,(e=>{const o=e.cells,n=B(t,((e,t)=>t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e),o);return n.length>0?[Ye(e.element,n,e.section,e.isNew)]:[]})))(e,D(r,(e=>e.column))),a=s.length>0?s[0].cells.length-1:0;return pi(s,r[0].row,Math.min(r[0].column,a))}),((e,t)=>ga(e,t).map((t=>({details:t,pixelDelta:-Oi(e,t)})))),Ci,ui,oi),Ri=da(((e,t,o,n)=>{const r=fi(t),s=((e,t,o)=>{const{rows:n,cols:r}=$o(e);return[...r,...n.slice(0,t),...n.slice(o+1)]})(e,r[0].row,r[r.length-1].row),a=s.length>0?s.length-1:0;return pi(s,Math.min(t[0].row,a),t[0].column)}),ua,h,ui,oi),Li=da(((e,t,o,n)=>{const r=Ja(t),s=D(r,(e=>e.column)),a=Na(e,s,!0,o,n.replaceOrInit);return pi(a,t[0].row,t[0].column)}),ga,h,h,_i),Ni=da(((e,t,o,n)=>{const r=Ja(t),s=D(r,(e=>e.column)),a=Na(e,s,!1,o,n.replaceOrInit);return pi(a,t[0].row,t[0].column)}),ga,h,h,Di),Ii=da(bi,ga,h,h,_i),Fi=da(yi,ga,h,h,Di),Pi=da(wi,ga,h,h,Di),ji=da(((e,t,o,n)=>{const r=Fa(e,t,o,n.replaceOrInit);return pi(r,t[0].row,t[0].column)}),ga,h,h,_i),Ui=da(((e,t,o,n)=>{const r=Fa(e,t,o,n.replaceOrInit);return pi(r,t[0].row,t[0].column)}),ga,h,h,Di),Wi=da(((e,t,o,n)=>{const r=t.cells;di(r);const s=((e,t,o,n)=>{const r=$o(e).rows;if(0===r.length)return e;for(let s=t.startRow;s<=t.finishRow;s++)for(let e=t.startCol;e<=t.finishCol;e++){const t=r[s],o=jo(t,e).isLocked;Fo(t,e,Je(n(),!1,o))}return e})(e,t.bounds,0,n.merge(r));return gi(s,C.from(r[0]))}),((e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>ha(e,t.cells)))),Si,h,ri),$i=da(((e,t,o,n)=>{const r=B(t,((e,t)=>pa(e,t,o,n.unmerge(t))),e);return gi(r,C.from(t[0]))}),((e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>ha(e,t)))),Si,h,ri),Gi=da(((e,t,o,n)=>{const r=((e,t)=>{const o=Qo.fromTable(e);return aa(o,t,!0)})(t.clipboard,t.generators),s=(a=t.row,i=t.column,{row:a,column:i});var a,i;return Ma(s,e,r,t.generators,o).fold((()=>gi(e,C.some(t.element))),(e=>pi(e,t.row,t.column)))}),((e,t)=>Ut(t.element).bind((o=>la(e,o).map((e=>l(i({},e),{generators:t.generators,clipboard:t.clipboard})))))),Si,h,oi),qi=da(((e,t,o,n)=>{const r=$o(e).rows,s=t.cells[0].column,a=r[t.cells[0].row],i=xi(t.clipboard,t.generators,a),l=_a(s,e,i,t.generators,o);return pi(l,t.cells[0].row,t.cells[0].column)}),Mi(!0),h,h,oi),Ki=da(((e,t,o,n)=>{const r=$o(e).rows,s=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,a=r[t.cells[0].row],i=xi(t.clipboard,t.generators,a),l=_a(s,e,i,t.generators,o);return pi(l,t.cells[0].row,t.cells[0].column)}),Mi(!1),h,h,oi),Xi=da(((e,t,o,n)=>{const r=$o(e).rows,s=t.cells[0].row,a=r[s],i=xi(t.clipboard,t.generators,a),l=Da(s,e,i,t.generators,o);return pi(l,t.cells[0].row,t.cells[0].column)}),ma,h,h,oi),Ji=da(((e,t,o,n)=>{const r=$o(e).rows,s=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,a=r[t.cells[0].row],i=xi(t.clipboard,t.generators,a),l=Da(s,e,i,t.generators,o);return pi(l,t.cells[0].row,t.cells[0].column)}),ma,h,h,oi),Yi=(e,t)=>{const o=Qo.fromTable(e);return ua(o,t).bind((e=>{const t=e[e.length-1],n=e[0].column,r=t.column+t.colspan,s=N(D(o.all,(e=>H(e.cells,(e=>e.column>=n&&e.column<r)))));return Fs(s)})).getOr("")},Zi=(e,t)=>{const o=Qo.fromTable(e);return ua(o,t).bind(Fs).getOr("")},Qi=(e,t)=>{const o=Qo.fromTable(e);return ua(o,t).bind((e=>{const t=e[e.length-1],n=e[0].row,r=t.row+t.rowspan;return(e=>{const t=D(e,(e=>Is(e).type)),o=T(t,"header"),n=T(t,"footer");if(o||n){const e=T(t,"body");return!o||e||n?o||e||!n?C.none():C.some("footer"):C.some("header")}return C.some("body")})(o.all.slice(n,r))})).getOr("")},el=(e,t)=>e.dispatch("NewRow",{node:t}),tl=(e,t)=>e.dispatch("NewCell",{node:t}),ol=(e,t,o)=>{e.dispatch("TableModified",l(i({},o),{table:t}))},nl={structure:!1,style:!0},rl={structure:!0,style:!1},sl={structure:!0,style:!0},al=e=>t=>t.options.get(e),il=e=>C.from(e.options.get("table_clone_elements")),ll=al("table_header_type"),cl=al("table_column_resizing"),dl=e=>"preservetable"===cl(e),ml=e=>"resizetable"===cl(e),ul=al("table_sizing_mode"),gl=e=>"relative"===ul(e),hl=e=>"fixed"===ul(e),pl=e=>"responsive"===ul(e),fl=al("table_resize_bars"),vl=al("table_default_attributes"),bl=e=>{const t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:((e,t)=>{var o;if(hl(e)){const n=e.dom,r=null!==(o=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==o?o:e.getBody(),s=Ro(be.fromDom(r));return l(i({},t),{width:s+"px"})}return pl(e)?Y(t,((e,t)=>"width"!==t)):t})(e,o)},yl=al("table_use_colgroups"),wl=(e,t)=>gl(e)?cr(t):hl(e)?lr(t):ir(t),xl=(e,t,o)=>{const n=e=>"table"===te(Ar(e)),r=il(e),s=ml(e)?h:Ts,a=t=>{switch(ll(e)){case"section":return qs();case"sectionCells":return Ks();case"cells":return Xs();default:return Gs(t,"section")}},i=(t,n)=>n.cursor.fold((()=>{const n=Wt(t);return U(n).filter(rt).map((n=>{o.clearSelectedCells(t.dom);const r=e.dom.createRng();return r.selectNode(n.dom),e.selection.setRng(r),me(n,"data-mce-selected","1"),r}))}),(n=>{const r=zs(Os,n);const s=e.dom.createRng();return s.setStart(r.element.dom,r.offset),s.setEnd(r.element.dom,r.offset),e.selection.setRng(s),o.clearSelectedCells(t.dom),C.some(s)})),l=(o,n,s,l)=>(c,d,m=!1)=>{Hr(c);const u=be.fromDom(e.getDoc()),g=_r(s,u,r),h={sizing:wl(e,c),resize:ml(e)?Hs():Bs(),section:a(c)};return n(c)?o(c,d,g,h).bind((o=>{t.refresh(c.dom),A(o.newRows,(t=>{el(e,t.dom)})),A(o.newCells,(t=>{tl(e,t.dom)}));const n=i(c,o);return rt(c)&&(Hr(c),m||ol(e,c.dom,l)),n.map((e=>({rng:e,effect:l})))})):C.none()};return{deleteRow:l(Ri,(t=>!1===n(e)||Vs(t).rows>1),h,rl),deleteColumn:l(Vi,(t=>!1===n(e)||Vs(t).columns>1),h,rl),insertRowsBefore:l(Ai,S,h,rl),insertRowsAfter:l(Ei,S,h,rl),insertColumnsBefore:l(Hi,S,s,rl),insertColumnsAfter:l(Bi,S,s,rl),mergeCells:l(Wi,S,h,rl),unmergeCells:l($i,S,h,rl),pasteColsBefore:l(qi,S,h,rl),pasteColsAfter:l(Ki,S,h,rl),pasteRowsBefore:l(Xi,S,h,rl),pasteRowsAfter:l(Ji,S,h,rl),pasteCells:l(Gi,S,h,sl),makeCellsHeader:l(ji,S,h,rl),unmakeCellsHeader:l(Ui,S,h,rl),makeColumnsHeader:l(Li,S,h,rl),unmakeColumnsHeader:l(Ni,S,h,rl),makeRowsHeader:l(Ii,S,h,rl),makeRowsBody:l(Fi,S,h,rl),makeRowsFooter:l(Pi,S,h,rl),getTableRowType:Qi,getTableCellType:Zi,getTableColType:Yi}},Sl=(e,t,o)=>{const n=Bt(e,t,1);1===o||n<=1?pe(e,t):me(e,t,Math.min(o,n))},Cl=(e,t)=>{const o=Qo.fromTable(e);return ga(o,t).map((e=>{const t=e[e.length-1],n=e[0].column,r=t.column+t.colspan,s=((e,t,o)=>{if(Qo.hasColumns(e)){const n=H(Qo.justColumns(e),(e=>e.column>=t&&e.column<o)),r=D(n,(e=>{const n=$e(e.element);return Sl(n,"span",o-t),n})),s=be.fromTag("colgroup");return Ie(s,r),[s]}return[]})(o,n,r),a=((e,t,o)=>D(e.all,(e=>{const n=H(e.cells,(e=>e.column>=t&&e.column<o)),r=D(n,(e=>{const n=$e(e.element);return Sl(n,"colspan",o-t),n})),s=be.fromTag("tr");return Ie(s,r),s})))(o,n,r);return[...s,...a]}))},kl=(e,t,o)=>{const n=Qo.fromTable(e);return ua(n,t).bind((e=>{const t=aa(n,o,!1),r=$o(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),s=I(r,(e=>{const t=H(e.cells,(e=>!e.isLocked));return t.length>0?[l(i({},e),{cells:t})]:[]})),a=ia(s);return bt(a.length>0,a)})).map((e=>D(e,(e=>{const t=We(e.element);return A(e.cells,(e=>{const o=$e(e.element);ea(o,"colspan",e.colspan,1),ea(o,"rowspan",e.rowspan,1),Re(t,o)})),t}))))},zl=Pa([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ol=(e,t,o)=>{const n=o.substring(0,o.length-e.length),r=parseFloat(n);return n===r.toString()?t(r):zl.invalid(o)},Tl=l(i({},zl),{from:e=>St(e,"%")?Ol("%",zl.percent,e):St(e,"px")?Ol("px",zl.pixels,e):zl.invalid(e)}),Ml=(e,t,o)=>e.fold((()=>t),(e=>((e,t,o)=>{const n=o/t;return D(e,(e=>Tl.from(e).fold((()=>e),(e=>e*n+"px"),(e=>e/100*o+"px"))))})(t,o,e)),(e=>((e,t)=>D(e,(e=>Tl.from(e).fold((()=>e),(e=>e/t*100+"%"),(e=>e+"%")))))(t,o))),_l=(e,t,o)=>{const n=Tl.from(o),r=F(e,(e=>"0px"===e))?((e,t)=>{const o=e.fold((()=>p("")),(e=>p(e/t+"px")),(()=>p(100/t+"%")));return _(t,o)})(n,e.length):Ml(n,e,t);return Al(r)},Dl=(e,t)=>0===e.length?t:B(e,((e,t)=>Tl.from(t).fold(p(0),f,f)+e),0),Al=e=>{if(0===e.length)return e;const t=B(e,((e,t)=>{const o=Tl.from(t).fold((()=>({value:t,remainder:0})),(e=>((e,t)=>{const o=Math.floor(e);return{value:o+t,remainder:e-o}})(e,"px")),(e=>({value:e+"%",remainder:0})));return{output:[o.value].concat(e.output),remainder:e.remainder+o.remainder}}),{output:[],remainder:0}),o=t.output;return o.slice(0,o.length-1).concat([(n=o[o.length-1],r=Math.round(t.remainder),Tl.from(n).fold(p(n),(e=>e+r+"px"),(e=>e+r+"%")))]);var n,r},El=Tl.from,Hl=e=>El(e).fold(p("px"),p("px"),p("%")),Bl=(e,t,o)=>{const n=Qo.fromTable(e),r=n.all,s=Qo.justCells(n),a=Qo.justColumns(n);t.each((t=>{const o=Hl(t),r=Bo(e),i=((e,t)=>Qn(e,t,Jn,er))(n,e),l=_l(i,r,t);Qo.hasColumns(n)?((e,t,o)=>{A(t,((t,n)=>{const r=Dl([e[n]],It());Mt(t.element,"width",r+o)}))})(l,a,o):((e,t,o)=>{A(t,(t=>{const n=e.slice(t.column,t.colspan+t.column),r=Dl(n,It());Mt(t.element,"width",r+o)}))})(l,s,o),Mt(e,"width",t)})),o.each((t=>{const o=Hl(t),a=ln(e),i=((e,t,o)=>or(e,t,o,Yn,er))(n,e,On);((e,t,o,n)=>{A(o,(t=>{const o=e.slice(t.row,t.rowspan+t.row),r=Dl(o,Ft());Mt(t.element,"height",r+n)})),A(t,((t,o)=>{Mt(t.element,"height",e[o])}))})(_l(i,a,t),r,s,o),Mt(e,"height",t)}))},Vl=e=>jn(e).exists((e=>En.test(e))),Rl=e=>jn(e).exists((e=>Hn.test(e))),Ll=e=>jn(e).isNone(),Nl=e=>{pe(e,"width")},Il=e=>{const t=qn(e);Bl(e,C.some(t),C.none()),Nl(e)},Fl=e=>{const t=(e=>Bo(e)+"px")(e);Bl(e,C.some(t),C.none()),Nl(e)},Pl=e=>{Ht(e,"width");const t=$t(e),o=t.length>0?t:Wt(e);A(o,(e=>{Ht(e,"width"),Nl(e)})),Nl(e)},jl={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ul=e=>{const t=be.fromTag("colgroup");return _(e,(()=>Re(t,be.fromTag("col")))),t},Wl=(e,t,o,n)=>_(e,(e=>((e,t,o,n)=>{const r=be.fromTag("tr");for(let s=0;s<e;s++){const e=n<t||s<o?be.fromTag("th"):be.fromTag("td");s<o&&me(e,"scope","row"),n<t&&me(e,"scope","col"),Re(e,be.fromTag("br")),Re(r,e)}return r})(t,o,n,e))),$l=(e,t)=>{e.selection.select(t.dom,!0),e.selection.collapse(!0)},Gl=(e,t,o,r,s)=>{const a=bl(e),i={styles:a,attributes:vl(e),colGroups:yl(e)};return e.undoManager.ignore((()=>{const n=((e,t,o,n,r,s=jl)=>{const a=be.fromTag("table"),i="cells"!==r;_t(a,s.styles),ue(a,s.attributes),s.colGroups&&Re(a,Ul(t));const l=Math.min(e,o);if(i&&o>0){const e=be.fromTag("thead");Re(a,e);const s=Wl(o,t,"sectionCells"===r?l:0,n);Ie(e,s)}const c=be.fromTag("tbody");Re(a,c);const d=Wl(i?e-l:e,t,i?0:o,n);return Ie(c,d),a})(o,t,s,r,ll(e),i);me(n,"data-mce-id","__mce");const a=(e=>{const t=be.fromTag("div"),o=be.fromDom(e.dom.cloneNode(!0));return Re(t,o),(e=>e.dom.innerHTML)(t)})(n);e.insertContent(a),e.addVisual()})),ht(Ar(e),'table[data-mce-id="__mce"]').map((t=>{var o;return hl(e)?Fl(t):pl(e)?Pl(t):(gl(e)||(o=a.width,n(o)&&-1!==o.indexOf("%")))&&Il(t),Hr(t),pe(t,"data-mce-id"),((e,t)=>{A(ct(t,"tr"),(t=>{el(e,t.dom),A(ct(t,"th,td"),(t=>{tl(e,t.dom)}))}))})(e,t),((e,t)=>{ht(t,"td,th").each(b($l,e))})(e,t),t.dom})).getOr(null)};var ql=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Kl="x-tinymce/dom-table-",Xl=Kl+"rows",Jl=Kl+"columns",Yl=e=>{const t=ql.FakeClipboardItem(e);ql.write([t])},Zl=e=>{var t;const o=null!==(t=ql.read())&&void 0!==t?t:[];return $(o,(t=>C.from(t.getType(e))))},Ql=e=>{Zl(e).isSome()&&ql.clear()},ec=e=>{e.fold(oc,(e=>Yl({[Xl]:e})))},tc=()=>Zl(Xl),oc=()=>Ql(Xl),nc=e=>{e.fold(sc,(e=>Yl({[Jl]:e})))},rc=()=>Zl(Jl),sc=()=>Ql(Jl),ac=e=>vs(Br(e),Er(e)),ic=(e,t)=>{const o=Er(e),s=e=>Gt(e,o),a=t=>(e=>bs(Br(e),Er(e)))(e).bind((e=>s(e).map((o=>t(o,e))))),i=t=>{e.focus()},l=(t,o=!1)=>a(((n,r)=>{const s=ps(ys(e),n,r);t(n,s,o).each(i)})),c=()=>a(((t,o)=>{const n=ps(ys(e),t,o),r=_r(h,be.fromDom(e.getDoc()),C.none());return kl(t,n,r)})),d=()=>a(((t,o)=>{const n=ps(ys(e),t,o);return Cl(t,n)})),m=(t,o)=>o().each((o=>{const n=D(o,(e=>$e(e)));a(((o,r)=>{const s=Dr(be.fromDom(e.getDoc())),a=((e,t,o,n)=>({selection:ls(e),clipboard:o,generators:n}))(ys(e),0,n,s);t(o,a).each(i)}))})),u=e=>(t,o)=>{return(n=o,r="type",ee(n,r)?C.from(n[r]):C.none()).each((t=>{l(e(t),o.no_events)}));var n,r};K({mceTableSplitCells:()=>l(t.unmergeCells),mceTableMergeCells:()=>l(t.mergeCells),mceTableInsertRowBefore:()=>l(t.insertRowsBefore),mceTableInsertRowAfter:()=>l(t.insertRowsAfter),mceTableInsertColBefore:()=>l(t.insertColumnsBefore),mceTableInsertColAfter:()=>l(t.insertColumnsAfter),mceTableDeleteCol:()=>l(t.deleteColumn),mceTableDeleteRow:()=>l(t.deleteRow),mceTableCutCol:()=>d().each((e=>{nc(e),l(t.deleteColumn)})),mceTableCutRow:()=>c().each((e=>{ec(e),l(t.deleteRow)})),mceTableCopyCol:()=>d().each((e=>nc(e))),mceTableCopyRow:()=>c().each((e=>ec(e))),mceTablePasteColBefore:()=>m(t.pasteColsBefore,rc),mceTablePasteColAfter:()=>m(t.pasteColsAfter,rc),mceTablePasteRowBefore:()=>m(t.pasteRowsBefore,tc),mceTablePasteRowAfter:()=>m(t.pasteRowsAfter,tc),mceTableDelete:()=>ac(e).each((t=>{Gt(t,o).filter(y(o)).each((t=>{const o=be.fromText("");if(Be(t,o),Pe(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{const t=e.dom.createRng();t.setStart(o.dom,0),t.setEnd(o.dom,0),e.selection.setRng(t),e.nodeChanged()}}))})),mceTableCellToggleClass:(t,o)=>{a((t=>{const n=ys(e),r=F(n,(t=>e.formatter.match("tablecellclass",{value:o},t.dom)))?e.formatter.remove:e.formatter.apply;A(n,(e=>r("tablecellclass",{value:o},e.dom))),ol(e,t.dom,nl)}))},mceTableToggleClass:(t,o)=>{a((t=>{e.formatter.toggle("tableclass",{value:o},t.dom),ol(e,t.dom,nl)}))},mceTableToggleCaption:()=>{ac(e).each((t=>{Gt(t,o).each((o=>{gt(o,"caption").fold((()=>{const t=be.fromTag("caption");var n,r;Re(t,be.fromText("Caption")),r=t,Ee(n=o,0).fold((()=>{Re(n,r)}),(e=>{He(e,r)})),e.selection.setCursorLocation(t.dom,0)}),(n=>{ce("caption")(t)&&xe("td",o).each((t=>e.selection.setCursorLocation(t.dom,0))),Pe(n)})),ol(e,o.dom,rl)}))}))},mceTableSizingMode:(t,n)=>(t=>ac(e).each((n=>{pl(e)||hl(e)||gl(e)||Gt(n,o).each((o=>{"relative"!==t||Vl(o)?"fixed"!==t||Rl(o)?"responsive"!==t||Ll(o)||Pl(o):Fl(o):Il(o),Hr(o),ol(e,o.dom,rl)}))})))(n),mceTableCellType:u((e=>"th"===e?t.makeCellsHeader:t.unmakeCellsHeader)),mceTableColType:u((e=>"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader)),mceTableRowType:u((e=>{switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},((t,o)=>e.addCommand(o,t))),e.addCommand("mceInsertTable",((t,o)=>{((e,t,o,n={})=>{const r=e=>g(e)&&e>0;if(r(t)&&r(o)){const r=n.headerRows||0,s=n.headerColumns||0;return Gl(e,o,t,s,r)}})(e,o.rows,o.columns,o.options)})),e.addCommand("mceTableApplyCellStyle",((t,o)=>{const a=e=>"tablecell"+e.toLowerCase().replace("-","");if(!r(o))return;const i=ys(e);if(0===i.length)return;const l=Y(o,((t,o)=>e.formatter.has(a(o))&&n(t)));(e=>{for(const t in e)if(q.call(e,t))return!1;return!0})(l)||(K(l,((t,o)=>{const n=a(o);A(i,(o=>{""===t?e.formatter.remove(n,{value:null},o.dom,!0):e.formatter.apply(n,{value:t},o.dom)}))})),s(i[0]).each((t=>ol(e,t.dom,nl))))}))},lc=Pa([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cc={before:lc.before,on:lc.on,after:lc.after,cata:(e,t,o,n)=>e.fold(t,o,n),getStart:e=>e.fold(f,f,f)},dc=(e,t)=>({selection:e,kill:t}),mc=(e,t)=>{const o=e.document.createRange();return o.selectNode(t.dom),o},uc=(e,t)=>{const o=e.document.createRange();return gc(o,t),o},gc=(e,t)=>e.selectNodeContents(t.dom),hc=(e,t,o)=>{const n=e.document.createRange();var r;return r=n,t.fold((e=>{r.setStartBefore(e.dom)}),((e,t)=>{r.setStart(e.dom,t)}),(e=>{r.setStartAfter(e.dom)})),((e,t)=>{t.fold((t=>{e.setEndBefore(t.dom)}),((t,o)=>{e.setEnd(t.dom,o)}),(t=>{e.setEndAfter(t.dom)}))})(n,o),n},pc=(e,t,o,n,r)=>{const s=e.document.createRange();return s.setStart(t.dom,o),s.setEnd(n.dom,r),s},fc=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}),vc=Pa([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bc=(e,t,o)=>t(be.fromDom(o.startContainer),o.startOffset,be.fromDom(o.endContainer),o.endOffset),yc=(e,t)=>{const o=((e,t)=>t.match({domRange:e=>({ltr:p(e),rtl:C.none}),relative:(t,o)=>({ltr:Zt((()=>hc(e,t,o))),rtl:Zt((()=>C.some(hc(e,o,t))))}),exact:(t,o,n,r)=>({ltr:Zt((()=>pc(e,t,o,n,r))),rtl:Zt((()=>C.some(pc(e,n,r,t,o))))})}))(e,t);return((e,t)=>{const o=t.ltr();if(o.collapsed)return t.rtl().filter((e=>!1===e.collapsed)).map((e=>vc.rtl(be.fromDom(e.endContainer),e.endOffset,be.fromDom(e.startContainer),e.startOffset))).getOrThunk((()=>bc(0,vc.ltr,o)));return bc(0,vc.ltr,o)})(0,o)},wc=(e,t)=>yc(e,t).match({ltr:(t,o,n,r)=>{const s=e.document.createRange();return s.setStart(t.dom,o),s.setEnd(n.dom,r),s},rtl:(t,o,n,r)=>{const s=e.document.createRange();return s.setStart(n.dom,r),s.setEnd(t.dom,o),s}});vc.ltr,vc.rtl;const xc=(e,t,o,n)=>({start:e,soffset:t,finish:o,foffset:n}),Sc=(e,t,o,n)=>({start:cc.on(e,t),finish:cc.on(o,n)}),Cc=(e,t)=>{const o=wc(e,t);return xc(be.fromDom(o.startContainer),o.startOffset,be.fromDom(o.endContainer),o.endOffset)},kc=Sc,zc=(e,t,o,n,r)=>Se(o,n)?C.none():os(o,n,t).bind((t=>{const n=t.boxes.getOr([]);return n.length>1?(r(e,n,t.start,t.finish),C.some(dc(C.some(kc(o,0,o,fr(o))),!0))):C.none()})),Oc=(e,t)=>({item:e,mode:t}),Tc=(e,t,o,n=Mc)=>e.property().parent(t).map((e=>Oc(e,n))),Mc=(e,t,o,n=_c)=>o.sibling(e,t).map((e=>Oc(e,n))),_c=(e,t,o,n=_c)=>{const r=e.property().children(t);return o.first(r).map((e=>Oc(e,n)))},Dc=[{current:Tc,next:Mc,fallback:C.none()},{current:Mc,next:_c,fallback:C.some(Tc)},{current:_c,next:_c,fallback:C.some(Mc)}],Ac=(e,t,o,n,r=Dc)=>R(r,(e=>e.current===o)).bind((o=>o.current(e,t,n,o.next).orThunk((()=>o.fallback.bind((o=>Ac(e,t,o,n))))))),Ec=()=>({sibling:(e,t)=>e.query().prevSibling(t),first:e=>e.length>0?C.some(e[e.length-1]):C.none()}),Hc=()=>({sibling:(e,t)=>e.query().nextSibling(t),first:e=>e.length>0?C.some(e[0]):C.none()}),Bc=(e,t,o,n,r,s)=>Ac(e,t,n,r).bind((t=>s(t.item)?C.none():o(t.item)?C.some(t.item):Bc(e,t.item,o,t.mode,r,s))),Vc=e=>t=>0===e.property().children(t).length,Rc=(e,t,o,n)=>Bc(e,t,o,Mc,Ec(),n),Lc=(e,t,o,n)=>Bc(e,t,o,Mc,Hc(),n),Nc=Kr(),Ic=(e,t)=>((e,t,o)=>Rc(e,t,Vc(e),o))(Nc,e,t),Fc=(e,t)=>((e,t,o)=>Lc(e,t,Vc(e),o))(Nc,e,t),Pc=Pa([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),jc=e=>pt(e,"tr"),Uc=l(i({},Pc),{verify:(e,t,o,n,r,s,a)=>pt(n,"td,th",a).bind((o=>pt(t,"td,th",a).map((t=>Se(o,t)?Se(n,o)&&fr(o)===r?s(t):Pc.none("in same cell"):es(jc,[o,t]).fold((()=>((e,t,o)=>{const n=e.getRect(t),r=e.getRect(o);return r.right>n.left&&r.left<n.right})(e,t,o)?Pc.success():s(t)),(e=>s(t))))))).getOr(Pc.none("default")),cata:(e,t,o,n,r)=>e.fold(t,o,n,r)}),Wc=(e,t)=>L(e,b(Se,t)),$c=ce("br"),Gc=(e,t,o)=>t(e,o).bind((e=>ae(e)&&0===gr(e).trim().length?Gc(e,t,o):C.some(e))),qc=(e,t,o,n)=>((e,t)=>Ee(e,t).filter($c).orThunk((()=>Ee(e,t-1).filter($c))))(t,o).bind((t=>n.traverse(t).fold((()=>Gc(t,n.gather,e).map(n.relative)),(e=>(e=>Te(e).bind((t=>{const o=Ae(t);return Wc(o,e).map((n=>((e,t,o,n)=>({parent:e,children:t,element:o,index:n}))(t,o,e,n)))})))(e).map((e=>cc.on(e.parent,e.index))))))),Kc=(e,t,o,n)=>{const r=$c(t)?((e,t,o)=>o.traverse(t).orThunk((()=>Gc(t,o.gather,e))).map(o.relative))(e,t,n):qc(e,t,o,n);return r.map((e=>({start:e,finish:e})))},Xc=(e,t)=>({left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}),Jc=(e,t)=>({left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}),Yc=(e,t,o)=>({left:e.left+t,top:e.top+o,right:e.right+t,bottom:e.bottom+o}),Zc=e=>({left:e.left,top:e.top,right:e.right,bottom:e.bottom}),Qc=(e,t)=>C.some(e.getRect(t)),ed=(e,t,o)=>se(t)?Qc(e,t).map(Zc):ae(t)?((e,t,o)=>o>=0&&o<fr(t)?e.getRangedRect(t,o,t,o+1):o>0?e.getRangedRect(t,o-1,t,o):C.none())(e,t,o).map(Zc):C.none(),td=(e,t)=>se(t)?Qc(e,t).map(Zc):ae(t)?e.getRangedRect(t,0,t,fr(t)).map(Zc):C.none(),od=Pa([{none:[]},{retry:["caret"]}]),nd=(e,t,o)=>{return(n=t,r=ii,dt(((e,t)=>t(e)),mt,n,r,s)).fold(x,(t=>td(e,t).exists((e=>((e,t)=>e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right)(o,e)))));var n,r,s},rd={point:e=>e.bottom,adjuster:(e,t,o,n,r)=>{const s=Xc(r,5);return Math.abs(o.bottom-n.bottom)<1||o.top>r.bottom?od.retry(s):o.top===r.bottom?od.retry(Xc(r,1)):nd(e,t,r)?od.retry(Yc(s,5,0)):od.none()},move:Xc,gather:Fc},sd=(e,t,o,n,r)=>0===r?C.some(n):((e,t,o)=>e.elementFromPoint(t,o).filter((e=>"table"===te(e))).isSome())(e,n.left,t.point(n))?((e,t,o,n,r)=>sd(e,t,o,t.move(n,5),r))(e,t,o,n,r-1):e.situsFromPoint(n.left,t.point(n)).bind((s=>s.start.fold(C.none,(s=>td(e,s).bind((a=>t.adjuster(e,s,a,o,n).fold(C.none,(n=>sd(e,t,o,n,r-1))))).orThunk((()=>C.some(n)))),C.none))),ad=(e,t,o)=>{const n=e.move(o,5),r=sd(t,e,o,n,100).getOr(n);return((e,t,o)=>e.point(t)>o.getInnerHeight()?C.some(e.point(t)-o.getInnerHeight()):e.point(t)<0?C.some(-e.point(t)):C.none())(e,r,t).fold((()=>t.situsFromPoint(r.left,e.point(r))),(o=>(t.scrollBy(0,o),t.situsFromPoint(r.left,e.point(r)-o))))},id={tryUp:b(ad,{point:e=>e.top,adjuster:(e,t,o,n,r)=>{const s=Jc(r,5);return Math.abs(o.top-n.top)<1||o.bottom<r.top?od.retry(s):o.bottom===r.top?od.retry(Jc(r,1)):nd(e,t,r)?od.retry(Yc(s,5,0)):od.none()},move:Jc,gather:Ic}),tryDown:b(ad,rd),getJumpSize:p(5)},ld=(e,t,o)=>e.getSelection().bind((n=>Kc(t,n.finish,n.foffset,o).fold((()=>C.some(xs(n.finish,n.foffset))),(r=>{const s=e.fromSitus(r);return(e=>Uc.cata(e,(e=>C.none()),(()=>C.none()),(e=>C.some(xs(e,0))),(e=>C.some(xs(e,fr(e))))))(Uc.verify(e,n.finish,n.foffset,s.finish,s.foffset,o.failure,t))})))),cd=(e,t,o,n,r,s)=>0===s?C.none():ud(e,t,o,n,r).bind((a=>{const i=e.fromSitus(a),l=Uc.verify(e,o,n,i.finish,i.foffset,r.failure,t);return Uc.cata(l,(()=>C.none()),(()=>C.some(a)),(a=>Se(o,a)&&0===n?dd(e,o,n,Jc,r):cd(e,t,a,0,r,s-1)),(a=>Se(o,a)&&n===fr(a)?dd(e,o,n,Xc,r):cd(e,t,a,fr(a),r,s-1)))})),dd=(e,t,o,n,r)=>ed(e,t,o).bind((t=>md(e,r,n(t,id.getJumpSize())))),md=(e,t,o)=>{const n=Mo().browser;return n.isChromium()||n.isSafari()||n.isFirefox()?t.retry(e,o):C.none()},ud=(e,t,o,n,r)=>ed(e,o,n).bind((t=>md(e,r,t))),gd=(e,t)=>{return mt(e,(e=>Te(e).exists((e=>Se(e,t)))),o).isSome();var o},hd=(e,t,o,n,r)=>pt(n,"td,th",t).bind((n=>pt(n,"table",t).bind((s=>gd(r,s)?((e,t,o)=>ld(e,t,o).bind((n=>cd(e,t,n.element,n.offset,o,20).map(e.fromSitus))))(e,t,o).bind((e=>pt(e.finish,"td,th",t).map((t=>({start:n,finish:t,range:e}))))):C.none())))),pd=(e,t,o,n,r,s)=>s(n,t).orThunk((()=>hd(e,t,o,n,r).map((e=>{const t=e.range;return dc(C.some(kc(t.start,t.soffset,t.finish,t.foffset)),!0)})))),fd=(e,t)=>pt(e,"tr",t).bind((e=>pt(e,"table",t).bind((o=>{const n=ct(o,"tr");return Se(e,n[0])?((e,t,o)=>Rc(Nc,e,t,o))(o,(e=>wr(e).isSome()),t).map((e=>{const t=fr(e);return dc(C.some(kc(e,t,e,t)),!0)})):C.none()})))),vd=(e,t)=>pt(e,"tr",t).bind((e=>pt(e,"table",t).bind((o=>{const n=ct(o,"tr");return Se(e,n[n.length-1])?((e,t,o)=>Lc(Nc,e,t,o))(o,(e=>yr(e).isSome()),t).map((e=>dc(C.some(kc(e,0,e,0)),!0))):C.none()})))),bd=(e,t,o,n,r,s,a)=>hd(e,o,n,r,s).bind((e=>zc(t,o,e.start,e.finish,a))),yd=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},wd=()=>{const e=(e=>{const t=yd(C.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(C.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(C.some(e))}}})(h);return l(i({},e),{on:t=>e.get().each(t)})},xd=(e,t)=>pt(e,"td,th",t),Sd={traverse:De,gather:Fc,relative:cc.before,retry:id.tryDown,failure:Uc.failedDown},Cd={traverse:_e,gather:Ic,relative:cc.before,retry:id.tryUp,failure:Uc.failedUp},kd=e=>t=>t===e,zd=kd(38),Od=kd(40),Td=e=>e>=37&&e<=40,Md={isBackward:kd(37),isForward:kd(39)},_d={isBackward:kd(39),isForward:kd(37)},Dd=Pa([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ad={domRange:Dd.domRange,relative:Dd.relative,exact:Dd.exact,exactFromRange:e=>Dd.exact(e.start,e.soffset,e.finish,e.foffset),getWin:e=>{const t=(e=>e.match({domRange:e=>be.fromDom(e.startContainer),relative:(e,t)=>cc.getStart(e),exact:(e,t,o,n)=>e}))(e);return o=t,be.fromDom(Oe(o).dom.defaultView);var o},range:xc},Ed=(e,t,o)=>{var n,r;return C.from(null===(r=(n=e.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(n,t,o)).bind((t=>{if(null===t.offsetNode)return C.none();const o=e.dom.createRange();return o.setStart(t.offsetNode,t.offset),o.collapse(),C.some(o)}))},Hd=(e,t,o)=>{var n,r;return C.from(null===(r=(n=e.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(n,t,o))},Bd=document.caretPositionFromPoint?Ed:document.caretRangeFromPoint?Hd:C.none,Vd=(e,t)=>{const o=te(e);return"input"===o?cc.after(e):T(["br","img"],o)?0===t?cc.before(e):cc.after(e):cc.on(e,t)},Rd=(e,t,o,n)=>{const r=((e,t,o,n)=>{const r=ze(e).dom.createRange();return r.setStart(e.dom,t),r.setEnd(o.dom,n),r})(e,t,o,n),s=Se(e,o)&&t===n;return r.collapsed&&!s},Ld=e=>C.from(e.getSelection()),Nd=(e,t)=>{Ld(e).each((e=>{e.removeAllRanges(),e.addRange(t)}))},Id=(e,t,o,n,r)=>{const s=pc(e,t,o,n,r);Nd(e,s)},Fd=(e,t)=>yc(e,t).match({ltr:(t,o,n,r)=>{Id(e,t,o,n,r)},rtl:(t,o,n,r)=>{Ld(e).each((s=>{if(s.setBaseAndExtent)s.setBaseAndExtent(t.dom,o,n.dom,r);else if(s.extend)try{((e,t,o,n,r,s)=>{t.collapse(o.dom,n),t.extend(r.dom,s)})(0,s,t,o,n,r)}catch(a){Id(e,n,r,t,o)}else Id(e,n,r,t,o)}))}}),Pd=(e,t,o,n,r)=>{const s=((e,t,o,n)=>{const r=Vd(e,t),s=Vd(o,n);return Ad.relative(r,s)})(t,o,n,r);Fd(e,s)},jd=(e,t,o)=>{const n=((e,t)=>{const o=e.fold(cc.before,Vd,cc.after),n=t.fold(cc.before,Vd,cc.after);return Ad.relative(o,n)})(t,o);Fd(e,n)},Ud=e=>{if(e.rangeCount>0){const t=e.getRangeAt(0),o=e.getRangeAt(e.rangeCount-1);return C.some(xc(be.fromDom(t.startContainer),t.startOffset,be.fromDom(o.endContainer),o.endOffset))}return C.none()},Wd=e=>{if(null===e.anchorNode||null===e.focusNode)return Ud(e);{const t=be.fromDom(e.anchorNode),o=be.fromDom(e.focusNode);return Rd(t,e.anchorOffset,o,e.focusOffset)?C.some(xc(t,e.anchorOffset,o,e.focusOffset)):Ud(e)}},$d=(e,t,o=!0)=>{const n=(o?uc:mc)(e,t);Nd(e,n)},Gd=e=>(e=>Ld(e).filter((e=>e.rangeCount>0)).bind(Wd))(e).map((e=>Ad.exact(e.start,e.soffset,e.finish,e.foffset))),qd=(e,t)=>(e=>{const t=e.getClientRects(),o=t.length>0?t[0]:e.getBoundingClientRect();return o.width>0||o.height>0?C.some(o).map(fc):C.none()})(wc(e,t)),Kd=(e,t,o)=>((e,t,o)=>{const n=be.fromDom(e.document);return Bd(n,t,o).map((e=>xc(be.fromDom(e.startContainer),e.startOffset,be.fromDom(e.endContainer),e.endOffset)))})(e,t,o),Xd=e=>({elementFromPoint:(t,o)=>be.fromPoint(be.fromDom(e.document),t,o),getRect:e=>e.dom.getBoundingClientRect(),getRangedRect:(t,o,n,r)=>{const s=Ad.exact(t,o,n,r);return qd(e,s)},getSelection:()=>Gd(e).map((t=>Cc(e,t))),fromSitus:t=>{const o=Ad.relative(t.start,t.finish);return Cc(e,o)},situsFromPoint:(t,o)=>Kd(e,t,o).map((e=>Sc(e.start,e.soffset,e.finish,e.foffset))),clearSelection:()=>{(e=>{Ld(e).each((e=>e.removeAllRanges()))})(e)},collapseSelection:(t=!1)=>{Gd(e).each((o=>o.fold((e=>e.collapse(t)),((o,n)=>{const r=t?o:n;jd(e,r,r)}),((o,n,r,s)=>{const a=t?o:r,i=t?n:s;Pd(e,a,i,a,i)}))))},setSelection:t=>{Pd(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:(t,o)=>{jd(e,t,o)},selectNode:t=>{$d(e,t,!1)},selectContents:t=>{$d(e,t)},getInnerHeight:()=>e.innerHeight,getScrollY:()=>(e=>{const t=void 0!==e?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return un(o,n)})(be.fromDom(e.document)).top,scrollBy:(t,o)=>{((e,t,o)=>{const n=(void 0!==o?o.dom:document).defaultView;n&&n.scrollBy(e,t)})(t,o,be.fromDom(e.document))}}),Jd=(e,t)=>({rows:e,cols:t}),Yd=(e,t,o,n)=>{const r=((e,t,o,n)=>{const r=wd(),s=r.clear,a=s=>{r.on((r=>{n.clearBeforeUpdate(t),xd(s.target,o).each((a=>{os(r,a,o).each((o=>{const r=o.boxes.getOr([]);if(1===r.length){const o=r[0],a="false"===Qs(o),i=ft(Ys(s.target),o,Se);a&&i&&(n.selectRange(t,r,o,o),e.selectContents(o))}else r.length>1&&(n.selectRange(t,r,o.start,o.finish),e.selectContents(a))}))}))}))};return{clearstate:s,mousedown:e=>{n.clear(t),xd(e.target,o).each(r.set)},mouseover:e=>{a(e)},mouseup:e=>{a(e),s()}}})(Xd(e),t,o,n);return{clearstate:r.clearstate,mousedown:r.mousedown,mouseover:r.mouseover,mouseup:r.mouseup}},Zd=(e,t,o,n)=>{const r=Xd(e),s=()=>(n.clear(t),C.none());return{keydown:(e,a,i,l,c,d)=>{const m=e.raw,u=m.which,g=!0===m.shiftKey;return ns(t,n.selectedSelector).fold((()=>(Td(u)&&!g&&n.clearBeforeUpdate(t),Od(u)&&g?b(bd,r,t,o,Sd,l,a,n.selectRange):zd(u)&&g?b(bd,r,t,o,Cd,l,a,n.selectRange):Od(u)?b(pd,r,o,Sd,l,a,vd):zd(u)?b(pd,r,o,Cd,l,a,fd):C.none)),(e=>{const o=o=>()=>{const s=$(o,(o=>((e,t,o,n,r)=>ss(n,e,t,r.firstSelectedSelector,r.lastSelectedSelector).map((e=>(r.clearBeforeUpdate(o),r.selectRange(o,e.boxes,e.start,e.finish),e.boxes))))(o.rows,o.cols,t,e,n)));return s.fold((()=>rs(t,n.firstSelectedSelector,n.lastSelectedSelector).map((e=>{const o=Od(u)||d.isForward(u)?cc.after:cc.before;return r.setRelativeSelection(cc.on(e.first,0),o(e.table)),n.clear(t),dc(C.none(),!0)}))),(e=>C.some(dc(C.none(),!0))))};return Od(u)&&g?o([Jd(1,0)]):zd(u)&&g?o([Jd(-1,0)]):d.isBackward(u)&&g?o([Jd(0,-1),Jd(-1,0)]):d.isForward(u)&&g?o([Jd(0,1),Jd(1,0)]):Td(u)&&!g?s:C.none}))()},keyup:(e,r,s,a,i)=>ns(t,n.selectedSelector).fold((()=>{const l=e.raw,c=l.which;return!0===l.shiftKey&&Td(c)?((e,t,o,n,r,s,a)=>Se(o,r)&&n===s?C.none():pt(o,"td,th",t).bind((o=>pt(r,"td,th",t).bind((n=>zc(e,t,o,n,a))))))(t,o,r,s,a,i,n.selectRange):C.none()}),C.none)}},Qd=(e,t)=>{const o=ge(e,t);return void 0===o||""===o?[]:o.split(" ")},em=e=>void 0!==e.dom.classList,tm=(e,t)=>((e,t,o)=>{const n=Qd(e,t).concat([o]);return me(e,t,n.join(" ")),!0})(e,"class",t),om=(e,t)=>{em(e)?e.dom.classList.add(t):tm(e,t)},nm=(e,t)=>em(e)&&e.dom.classList.contains(t),rm=(e,t,o)=>{const n=t=>{pe(t,e.selected),pe(t,e.firstSelected),pe(t,e.lastSelected)},r=t=>{me(t,e.selected,"1")},s=e=>{a(e),o()},a=t=>{const o=ct(t,`${e.selectedSelector},${e.firstSelectedSelector},${e.lastSelectedSelector}`);A(o,n)};return{clearBeforeUpdate:a,clear:s,selectRange:(o,n,a,i)=>{s(o),A(n,r),me(a,e.firstSelected,"1"),me(i,e.lastSelected,"1"),t(n,a,i)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},sm=()=>({tag:"none"}),am=e=>({tag:"multiple",elements:e}),im=e=>({tag:"single",element:e}),lm=(e,t,o)=>{const n=Qo.fromTable(e);return ua(n,t).map((e=>{const t=aa(n,o,!1),{rows:r}=$o(t),s=((e,t)=>{const o=e.slice(0,t[t.length-1].row+1),n=ia(o);return I(n,(e=>{const o=e.cells.slice(0,t[t.length-1].column+1);return D(o,(e=>e.element))}))})(r,e),a=((e,t)=>{const o=e.slice(t[0].row+t[0].rowspan-1,e.length),n=ia(o);return I(n,(e=>{const o=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return D(o,(e=>e.element))}))})(r,e);return{upOrLeftCells:s,downOrRightCells:a}}))},cm=e=>{const t=be.fromDom((e=>{if(Qe()&&m(e.target)){const t=be.fromDom(e.target);if(se(t)&&nt(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return U(t)}}return C.from(e.target)})(e).getOr(e.target)),o=()=>e.stopPropagation(),n=()=>e.preventDefault(),r=(s=n,a=o,(...e)=>s(a.apply(null,e)));var s,a;return((e,t,o,n,r,s,a)=>({target:e,x:t,y:o,stop:n,prevent:r,kill:s,raw:a}))(t,e.clientX,e.clientY,o,n,r,e)},dm=(e,t,o,n,r)=>{const s=((e,t)=>o=>{e(o)&&t(cm(o))})(o,n);return e.dom.addEventListener(t,s,r),{unbind:b(mm,e,t,s,r)}},mm=(e,t,o,n)=>{e.dom.removeEventListener(t,o,n)},um=S,gm=(e,t,o)=>((e,t,o,n)=>dm(e,t,o,n,!1))(e,t,um,o),hm=cm,pm=e=>!1===nm(be.fromDom(e.target),"ephox-snooker-resizer-bar"),fm=(e,t)=>{const o=(n=()=>be.fromDom(e.getBody()),r=()=>bs(Br(e),Er(e)),s=hs.selectedSelector,{get:()=>as(n(),s).fold((()=>r().fold(sm,im)),am)});var n,r,s;const a=rm(hs,((t,o,n)=>{Gt(o).each((r=>{const s=il(e),a=_r(h,be.fromDom(e.getDoc()),s),i=ys(e),l=lm(r,{selection:i},a);((e,t,o,n,r)=>{e.dispatch("TableSelectionChange",{cells:t,start:o,finish:n,otherCells:r})})(e,t,o,n,l)}))}),(()=>(e=>{e.dispatch("TableSelectionClear")})(e)));e.on("init",(o=>{const n=e.getWin(),r=Ar(e),s=Er(e),i=Yd(n,r,s,a),l=Zd(n,r,s,a),c=((e,t,o,n)=>{const r=Xd(e);return(e,s)=>{n.clearBeforeUpdate(t),os(e,s,o).each((e=>{const o=e.boxes.getOr([]);n.selectRange(t,o,e.start,e.finish),r.selectContents(s),r.collapseSelection()}))}})(n,r,s,a);e.on("TableSelectorChange",(e=>c(e.start,e.finish)));const d=(t,o)=>{(e=>!0===e.raw.shiftKey)(t)&&(o.kill&&t.kill(),o.selection.each((t=>{const o=Ad.relative(t.start,t.finish),r=wc(n,o);e.selection.setRng(r)})))},m=e=>0===e.button,u=(()=>{const e=yd(be.fromDom(r)),t=yd(0);return{touchEnd:o=>{const n=be.fromDom(o.target);if(ce("td")(n)||ce("th")(n)){const r=e.get(),s=t.get();Se(r,n)&&o.timeStamp-s<300&&(o.preventDefault(),c(n,n))}e.set(n),t.set(o.timeStamp)}}})();e.on("dragstart",(e=>{i.clearstate()})),e.on("mousedown",(e=>{m(e)&&pm(e)&&i.mousedown(hm(e))})),e.on("mouseover",(e=>{var t;void 0!==(t=e).buttons&&0==(1&t.buttons)||!pm(e)||i.mouseover(hm(e))})),e.on("mouseup",(e=>{m(e)&&pm(e)&&i.mouseup(hm(e))})),e.on("touchend",u.touchEnd),e.on("keyup",(t=>{const o=hm(t);if(o.raw.shiftKey&&Td(o.raw.which)){const t=e.selection.getRng(),n=be.fromDom(t.startContainer),r=be.fromDom(t.endContainer);l.keyup(o,n,t.startOffset,r,t.endOffset).each((e=>{d(o,e)}))}})),e.on("keydown",(o=>{const n=hm(o);t.hide();const r=e.selection.getRng(),s=be.fromDom(r.startContainer),a=be.fromDom(r.endContainer),i=rn(Md,_d)(be.fromDom(e.selection.getStart()));l.keydown(n,s,r.startOffset,a,r.endOffset,i).each((e=>{d(n,e)})),t.show()})),e.on("NodeChange",(()=>{const t=e.selection,o=be.fromDom(t.getStart()),n=be.fromDom(t.getEnd());es(Gt,[o,n]).fold((()=>a.clear(r)),h)}))})),e.on("PreInit",(()=>{e.serializer.addTempAttr(hs.firstSelected),e.serializer.addTempAttr(hs.lastSelected)}));return{getSelectedCells:()=>((e,t,o,n)=>{switch(e.tag){case"none":return t();case"single":return n(e.element);case"multiple":return o(e.elements)}})(o.get(),p([]),(e=>D(e,(e=>e.dom))),(e=>[e.dom])),clearSelectedCells:e=>a.clear(be.fromDom(e))}},vm=e=>{let t=[];return{bind:e=>{if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:e=>{t=H(t,(t=>t!==e))},trigger:(...o)=>{const n={};A(e,((e,t)=>{n[e]=o[t]})),A(t,(e=>{e(n)}))}}},bm=e=>({registry:X(e,(e=>({bind:e.bind,unbind:e.unbind}))),trigger:X(e,(e=>e.trigger))}),ym=e=>e.slice(0).sort(),wm=(e,t,o)=>{if(0===t.length)throw new Error("You must specify at least one required field.");return((e,t)=>{if(!s(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");A(t,(t=>{if(!n(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))})("required",t),(e=>{const t=ym(e);R(t,((e,o)=>o<t.length-1&&e===t[o+1])).each((e=>{throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))})(t),n=>{const r=G(n);F(t,(e=>T(r,e)))||((e,t)=>{throw new Error("All required keys ("+ym(e).join(", ")+") were not specified. Specified keys were: "+ym(t).join(", ")+".")})(t,r),e(t,r);const s=H(t,(e=>!o.validate(n[e],e)));return s.length>0&&((e,t)=>{throw new Error("All values need to be of type: "+t+". Keys ("+ym(e).join(", ")+") were not.")})(s,o.label),n}},xm=(e,t)=>{const o=H(t,(t=>!T(e,t)));o.length>0&&(e=>{throw new Error("Unsupported keys for object: "+ym(e).join(", "))})(o)},Sm=e=>((e,t)=>wm(e,t,{validate:u,label:"function"}))(xm,e),Cm=Sm(["compare","extract","mutate","sink"]),km=Sm(["element","start","stop","destroy"]),zm=Sm(["forceDrop","drop","move","delayDrop"]),Om=()=>{let e=C.none();const t=bm({move:vm(["info"])});return{onEvent:(o,n)=>{n.extract(o).each((o=>{const r=((t,o)=>{const n=e.map((e=>t.compare(e,o)));return e=C.some(o),n})(n,o);r.each((e=>{t.trigger.move(e)}))}))},reset:()=>{e=C.none()},events:t.registry}},Tm=()=>{const e=(()=>{const e=bm({move:vm(["info"])});return{onEvent:h,reset:h,events:e.registry}})(),t=Om();let o=e;return{on:()=>{o.reset(),o=t},off:()=>{o.reset(),o=e},isOn:()=>o===t,onEvent:(e,t)=>{o.onEvent(e,t)},events:t.events}},Mm=(e,t,o)=>{let n=!1;const r=bm({start:vm([]),stop:vm([])}),s=Tm(),i=()=>{d.stop(),s.isOn()&&(s.off(),r.trigger.stop())},l=((e,t)=>{let o=null;const n=()=>{a(o)||(clearTimeout(o),o=null)};return{cancel:n,throttle:(...r)=>{n(),o=setTimeout((()=>{o=null,e.apply(null,r)}),t)}}})(i,200);s.events.move.bind((o=>{t.mutate(e,o.info)}));const c=e=>(...t)=>{n&&e.apply(null,t)},d=t.sink(zm({forceDrop:i,drop:c(i),move:c((e=>{l.cancel(),s.onEvent(e,t)})),delayDrop:c(l.throttle)}),o);return{element:d.element,go:e=>{d.start(e),s.on(),r.trigger.start()},on:()=>{n=!0},off:()=>{n=!1},destroy:()=>{d.destroy()},events:r.registry}},_m=e=>{const t=e.replace(/\./g,"-");return{resolve:e=>t+"-"+e}},Dm=_m("ephox-dragster").resolve;var Am=Cm({compare:(e,t)=>un(t.left-e.left,t.top-e.top),extract:e=>C.some(un(e.x,e.y)),sink:(e,t)=>{const o=(e=>{const t=i({layerClass:Dm("blocker")},e),o=be.fromTag("div");return me(o,"role","presentation"),_t(o,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),om(o,Dm("blocker")),om(o,t.layerClass),{element:p(o),destroy:()=>{Pe(o)}}})(t),n=gm(o.element(),"mousedown",e.forceDrop),r=gm(o.element(),"mouseup",e.drop),s=gm(o.element(),"mousemove",e.move),a=gm(o.element(),"mouseout",e.delayDrop);return km({element:o.element,start:e=>{Re(e,o.element())},stop:()=>{Pe(o.element())},destroy:()=>{o.destroy(),r.unbind(),s.unbind(),a.unbind(),n.unbind()}})},mutate:(e,t)=>{e.mutate(t.left,t.top)}});const Em=_m("ephox-snooker").resolve,Hm=()=>{const e=bm({drag:vm(["xDelta","yDelta","target"])});let t=C.none();const o=(()=>{const e=bm({drag:vm(["xDelta","yDelta"])});return{mutate:(t,o)=>{e.trigger.drag(t,o)},events:e.registry}})();o.events.drag.bind((o=>{t.each((t=>{e.trigger.drag(o.xDelta,o.yDelta,t)}))}));return{assign:e=>{t=C.some(e)},get:()=>t,mutate:o.mutate,events:e.registry}},Bm=Em("resizer-bar"),Vm=Em("resizer-rows"),Rm=Em("resizer-cols"),Lm=e=>{const t=ct(e.parent(),"."+Bm);A(t,Pe)},Nm=(e,t,o)=>{const n=e.origin();A(t,(t=>{t.each((t=>{const r=o(n,t);om(r,Bm),Re(e.parent(),r)}))}))},Im=(e,t,o,n)=>{Nm(e,t,((e,t)=>{const r=((e,t,o,n,r)=>{const s=be.fromTag("div");return _t(s,{position:"absolute",left:t-n/2+"px",top:o+"px",height:r+"px",width:n+"px"}),ue(s,{"data-column":e,role:"presentation"}),s})(t.col,t.x-e.left,o.top-e.top,7,n);return om(r,Rm),r}))},Fm=(e,t,o,n)=>{Nm(e,t,((e,t)=>{const r=((e,t,o,n,r)=>{const s=be.fromTag("div");return _t(s,{position:"absolute",left:t+"px",top:o-r/2+"px",height:r+"px",width:n+"px"}),ue(s,{"data-row":e,role:"presentation"}),s})(t.row,o.left-e.left,t.y-e.top,n,7);return om(r,Vm),r}))},Pm=(e,t,o,n,r)=>{const s=hn(o),a=t.isResizable,i=n.length>0?On.positions(n,o):[],l=i.length>0?((e,t)=>I(e.all,((e,o)=>t(e.element)?[o]:[])))(e,a):[],c=H(i,((e,t)=>M(l,(e=>t===e))));Fm(t,c,s,Vo(o));const d=r.length>0?Mn.positions(r,o):[],m=d.length>0?((e,t)=>{const o=[];return _(e.grid.columns,(n=>{Qo.getColumnAt(e,n).map((e=>e.element)).forall(t)&&o.push(n)})),H(o,(o=>{const n=Qo.filterItems(e,(e=>e.column===o));return F(n,(e=>t(e.element)))}))})(e,a):[],u=H(d,((e,t)=>M(m,(e=>t===e))));Im(t,u,s,cn(o))},jm=(e,t)=>{if(Lm(e),e.isResizable(t)){const o=Qo.fromTable(t),n=on(o),r=en(o);Pm(o,e,t,n,r)}},Um=(e,t)=>{const o=ct(e.parent(),"."+Bm);A(o,t)},Wm=e=>{Um(e,(e=>{Mt(e,"display","none")}))},$m=e=>{Um(e,(e=>{Mt(e,"display","block")}))},Gm=Em("resizer-bar-dragging"),qm=e=>{const t=Hm(),o=((e,t={})=>{var o;const n=null!==(o=t.mode)&&void 0!==o?o:Am;return Mm(e,n,t)})(t,{});let n=C.none();const r=(e,t)=>C.from(ge(e,t));t.events.drag.bind((e=>{r(e.target,"data-row").each((t=>{const o=Nt(e.target,"top");Mt(e.target,"top",o+e.yDelta+"px")})),r(e.target,"data-column").each((t=>{const o=Nt(e.target,"left");Mt(e.target,"left",o+e.xDelta+"px")}))}));const s=(e,t)=>Nt(e,t)-Bt(e,"data-initial-"+t,0);o.events.stop.bind((()=>{t.get().each((t=>{n.each((o=>{r(t,"data-row").each((e=>{const n=s(t,"top");pe(t,"data-initial-top"),d.trigger.adjustHeight(o,n,parseInt(e,10))})),r(t,"data-column").each((e=>{const n=s(t,"left");pe(t,"data-initial-left"),d.trigger.adjustWidth(o,n,parseInt(e,10))})),jm(e,o)}))}))}));const a=(n,r)=>{d.trigger.startAdjust(),t.assign(n),me(n,"data-initial-"+r,Nt(n,r)),om(n,Gm),Mt(n,"opacity","0.2"),o.go(e.parent())},i=gm(e.parent(),"mousedown",(e=>{var t;t=e.target,nm(t,Vm)&&a(e.target,"top"),(e=>nm(e,Rm))(e.target)&&a(e.target,"left")})),l=t=>Se(t,e.view()),c=gm(e.view(),"mouseover",(t=>{var o;(o=t.target,pt(o,"table",l).filter(Zs)).fold((()=>{rt(t.target)&&Lm(e)}),(t=>{n=C.some(t),jm(e,t)}))})),d=bm({adjustHeight:vm(["table","delta","row"]),adjustWidth:vm(["table","delta","column"]),startAdjust:vm([])});return{destroy:()=>{i.unbind(),c.unbind(),o.destroy(),Lm(e)},refresh:t=>{jm(e,t)},on:o.on,off:o.off,hideBars:b(Wm,e),showBars:b($m,e),events:d.registry}},Km=(e,t,o)=>{const n=On,r=Mn,s=qm(e),a=bm({beforeResize:vm(["table","type"]),afterResize:vm(["table","type"]),startDrag:vm([])});return s.events.adjustHeight.bind((e=>{const t=e.table;a.trigger.beforeResize(t,"row");const o=n.delta(e.delta,t);Xa(t,o,e.row,n),a.trigger.afterResize(t,"row")})),s.events.startAdjust.bind((e=>{a.trigger.startDrag()})),s.events.adjustWidth.bind((e=>{const n=e.table;a.trigger.beforeResize(n,"col");const s=r.delta(e.delta,n),i=o(n);Ka(n,s,e.column,t,i),a.trigger.afterResize(n,"col")})),{on:s.on,off:s.off,refreshBars:s.refresh,hideBars:s.hideBars,showBars:s.showBars,destroy:s.destroy,events:a.registry}},Xm=(e,t)=>{const o=ie(e)?(e=>be.fromDom(Oe(e).dom.documentElement))(e):e;return{parent:p(o),view:p(e),origin:p(un(0,0)),isResizable:t}},Jm=(e,t,o)=>({parent:p(t),view:p(e),origin:p(un(0,0)),isResizable:o}),Ym=()=>{const e=be.fromTag("div");return _t(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Re(st(be.fromDom(document)),e),e},Zm=e=>m(e)&&"TABLE"===e.tagName,Qm="bar-",eu=e=>"false"!==ge(e,"data-mce-resize"),tu=e=>{const t=wd(),o=wd(),n=wd();let r,s;const a=t=>wl(e,t),i=()=>dl(e)?Bs():Hs(),l=(t,o,n)=>{const l=St(o,"e");if(""===s&&Il(t),n!==r&&""!==s){Mt(t,"width",s);const o=i(),c=a(t),d=dl(e)||l?(e=>Vs(e).columns)(t)-1:0;Ka(t,n-r,d,o,c)}else if(/^(\d+(\.\d+)?)%$/.test(s)){const e=parseFloat(s.replace("%",""));Mt(t,"width",n*e/r+"%")}(e=>/^(\d+(\.\d+)?)px$/.test(e))(s)&&(e=>{const t=Qo.fromTable(e);Qo.hasColumns(t)||A(Wt(e),(e=>{const t=Dt(e,"width");Mt(e,"width",t),pe(e,"width")}))})(t)},c=()=>{o.on((e=>{e.destroy()})),n.on((t=>{((e,t)=>{e.inline&&Pe(t.parent())})(e,t)}))};e.on("init",(()=>{const r=((e,t)=>e.inline?Jm(be.fromDom(e.getBody()),Ym(),t):Xm(be.fromDom(e.getDoc()),t))(e,eu);if(n.set(r),(e=>{const t=e.options.get("object_resizing");return T(t.split(","),"table")})(e)&&fl(e)){const n=i(),s=Km(r,n,a);s.on(),s.events.startDrag.bind((o=>{t.set(e.selection.getRng())})),s.events.beforeResize.bind((t=>{const o=t.table.dom;((e,t,o,n,r)=>{e.dispatch("ObjectResizeStart",{target:t,width:o,height:n,origin:r})})(e,o,Vr(o),Rr(o),Qm+t.type)})),s.events.afterResize.bind((o=>{const n=o.table,r=n.dom;Hr(n),t.on((t=>{e.selection.setRng(t),e.focus()})),((e,t,o,n,r)=>{e.dispatch("ObjectResized",{target:t,width:o,height:n,origin:r})})(e,r,Vr(r),Rr(r),Qm+o.type),e.undoManager.add()})),o.set(s)}})),e.on("ObjectResizeStart",(t=>{const o=t.target;if(Zm(o)){const n=be.fromDom(o);A(e.dom.select(".mce-clonedresizable"),(t=>{e.dom.addClass(t,"mce-"+cl(e)+"-columns")})),!Rl(n)&&hl(e)?Fl(n):!Vl(n)&&gl(e)&&Il(n),Ll(n)&&xt(t.origin,Qm)&&Il(n),r=t.width,s=pl(e)?"":((e,t)=>{const o=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return C.from(o).filter(zt)})(e,o).getOr("")}})),e.on("ObjectResized",(t=>{const o=t.target;if(Zm(o)){const n=be.fromDom(o),r=t.origin;xt(r,"corner-")&&l(n,r,t.width),Hr(n),ol(e,n.dom,nl)}})),e.on("SwitchMode",(()=>{o.on((t=>{e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("remove",(()=>{c()}));return{refresh:e=>{o.on((t=>t.refreshBars(be.fromDom(e))))},hide:()=>{o.on((e=>e.hideBars()))},show:()=>{o.on((e=>e.showBars()))}}},ou=e=>{(e=>{const t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:e=>{const t=T(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse",width:"100%"}}),t("table_column_resizing",{processor:e=>{const t=T(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0})})(e);const t=tu(e),o=fm(e,t),n=xl(e,t,o);return ic(e,n),((e,t)=>{const o=Er(e),n=t=>bs(Br(e)).bind((n=>Gt(n,o).map((o=>{const r=ps(ys(e),o,n);return t(o,r)})))).getOr("");K({mceTableRowType:()=>n(t.getTableRowType),mceTableCellType:()=>n(t.getTableCellType),mceTableColType:()=>n(t.getTableColType)},((t,o)=>e.addQueryValueHandler(o,t)))})(e,n),ws(e,n),{getSelectedCells:o.getSelectedCells,clearSelectedCells:o.clearSelectedCells}},nu=e=>({table:ou(e)});e.add("dom",nu)}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.util.VK");const o=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=r=e,n=(s=String).prototype,n.isPrototypeOf(o)||(null===(a=r.constructor)||void 0===a?void 0:a.name)===s.name)?"string":t;var o,n;var r,s,a})(t)===e,n=e=>t=>typeof t===e,r=o("string"),s=o("object"),a=o("array"),c=(d=null,e=>d===e);var d;const m=n("boolean"),u=n("function"),g=(e,t)=>{if(a(e)){for(let o=0,n=e.length;o<n;++o)if(!t(e[o]))return!1;return!0}return!1},h=()=>{},p=(e,t)=>e===t;class f{constructor(e,t){this.tag=e,this.value=t}static some(e){return new f(!0,e)}static none(){return f.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?f.some(e(this.value)):f.none()}bind(e){return this.tag?e(this.value):f.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:f.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(e=>null==e)(e)?f.none():f.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}f.singletonNone=new f(!1);const v=Array.prototype.indexOf,b=Array.prototype.push,y=(e,t)=>((e,t)=>v.call(e,t))(e,t)>-1,w=e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!a(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);b.apply(t,e[o])}return t},x=(e,t)=>w(((e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n})(e,t)),S=(e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return f.none()},C=(e,t,o=p)=>e.exists((e=>o(e,t))),k=e=>{const t=[],o=e=>{t.push(e)};for(let n=0;n<e.length;n++)e[n].each(o);return t},z=(e,t)=>e?f.some(t):f.none(),O=e=>t=>t.options.get(e),T=O("link_assume_external_targets"),M=O("link_context_toolbar"),_=O("link_list"),D=O("link_default_target"),A=O("link_default_protocol"),E=O("link_target_list"),H=O("link_rel_list"),B=O("link_class_list"),V=O("link_title"),R=O("allow_unsafe_link_target"),L=O("link_quicklink");var N=tinymce.util.Tools.resolve("tinymce.util.Tools");const I=e=>r(e.value)?e.value:"",F=(e,t)=>{const o=[];return N.each(e,(e=>{const n=(e=>r(e.text)?e.text:r(e.title)?e.title:"")(e);if(void 0!==e.menu){const r=F(e.menu,t);o.push({text:n,items:r})}else{const r=t(e);o.push({text:n,value:r})}})),o},P=(e=I)=>t=>f.from(t).map((t=>F(t,e))),j={sanitize:e=>P(I)(e),sanitizeWith:P,createUi:(e,t)=>o=>({name:e,type:"listbox",label:t,items:o}),getValue:I},U=Object.keys,W=Object.hasOwnProperty,$=(e,t,o,n)=>(((e,t)=>{const o=U(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}})(e,((e,r)=>{(t(e,r)?o:n)(e,r)})),{}),G=(e,t)=>W.call(e,t);var q=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),K=tinymce.util.Tools.resolve("tinymce.util.URI");const X=e=>e&&"a"===e.nodeName.toLowerCase(),J=e=>X(e)&&!!Q(e),Y=(e,t)=>{if(e.collapsed)return[];{const o=e.cloneContents(),n=new q(o.firstChild,o),r=[];let s=o.firstChild;do{t(s)&&r.push(s)}while(s=n.next());return r}},Z=e=>/^\w+:/i.test(e),Q=e=>{const t=e.getAttribute("data-mce-href");return t||e.getAttribute("href")},ee=(e,t)=>{const o=["noopener"],n=e?e.split(/\s+/):[],r=e=>e.filter((e=>-1===N.inArray(o,e))),s=t?(a=r(a=n)).length>0?a.concat(o):o:r(n);var a;return s.length>0?(e=>N.trim(e.sort().join(" ")))(s):""},te=(e,t)=>(t=t||e.selection.getNode(),se(t)?e.dom.select("a[href]",t)[0]:e.dom.getParent(t,"a[href]")),oe=(e,t)=>(e=>e.replace(/\uFEFF/g,""))(t?t.innerText||t.textContent:e.getContent({format:"text"})),ne=e=>N.grep(e,J).length>0,re=e=>{const t=e.schema.getTextInlineElements();return 0===Y(e.selection.getRng(),(e=>1===e.nodeType&&!X(e)&&!G(t,e.nodeName.toLowerCase()))).length},se=e=>e&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className),ae=(e,t)=>{const o=i({},t);if(0===H(e).length&&!R(e)){const e=ee(o.rel,"_blank"===o.target);o.rel=e||null}var n,r;return f.from(o.target).isNone()&&!1===E(e)&&(o.target=D(e)),o.href=(n=o.href,"http"!==(r=T(e))&&"https"!==r||Z(n)?n:r+"://"+n),o},ie=(e,t,o)=>{const n=e.selection.getNode(),r=te(e,n),s=ae(e,(e=>{return t=["title","rel","class","target"],o=(t,o)=>(e[o].each((e=>{t[o]=e.length>0?e:null})),t),n={href:e.href},((e,t)=>{for(let o=0,n=e.length;o<n;o++)t(e[o],o)})(t,((e,t)=>{n=o(n,e,t)})),n;var t,o,n})(o));e.undoManager.transact((()=>{o.href===t.href&&t.attach(),r?(e.focus(),((e,t,o,n)=>{o.each((e=>{G(t,"innerText")?t.innerText=e:t.textContent=e})),e.dom.setAttribs(t,n),e.selection.select(t)})(e,r,o.text,s)):((e,t,o,n)=>{se(t)?ue(e,t,n):o.fold((()=>{e.execCommand("mceInsertLink",!1,n)}),(t=>{e.insertContent(e.dom.createHTML("a",n,e.dom.encode(t)))}))})(e,n,o.text,s)}))},le=e=>{const{class:t,href:o,rel:n,target:r,text:s,title:a}=e;return((e,t)=>{const o={};var n;return $(e,t,(n=o,(e,t)=>{n[t]=e}),h),o})({class:t.getOrNull(),href:o,rel:n.getOrNull(),target:r.getOrNull(),text:s.getOrNull(),title:a.getOrNull()},((e,t)=>!1===c(e)))},ce=(e,t,o)=>{const n=((e,t)=>{const o=e.options.get,n={allow_html_data_urls:o("allow_html_data_urls"),allow_script_urls:o("allow_script_urls"),allow_svg_data_urls:o("allow_svg_data_urls")},r=t.href;return l(i({},t),{href:K.isDomSafe(r,"a",n)?r:""})})(e,o);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,le(n)):ie(e,t,n)},de=e=>{e.hasPlugin("rtc",!0)?e.execCommand("unlink"):(e=>{e.undoManager.transact((()=>{const t=e.selection.getNode();se(t)?me(e,t):(e=>{const t=e.dom,o=e.selection,n=o.getBookmark(),r=o.getRng().cloneRange(),s=t.getParent(r.startContainer,"a[href]",e.getBody()),a=t.getParent(r.endContainer,"a[href]",e.getBody());s&&r.setStartBefore(s),a&&r.setEndAfter(a),o.setRng(r),e.execCommand("unlink"),o.moveToBookmark(n)})(e),e.focus()}))})(e)},me=(e,t)=>{const o=e.dom.select("img",t)[0];if(o){const n=e.dom.getParents(o,"a[href]",t)[0];n&&(n.parentNode.insertBefore(o,n),e.dom.remove(n))}},ue=(e,t,o)=>{const n=e.dom.select("img",t)[0];if(n){const t=e.dom.create("a",o);n.parentNode.insertBefore(t,n),t.appendChild(n)}},ge=e=>{return G(t=e,o="items")&&void 0!==t[o]&&null!==t[o];var t,o},he=(e,t)=>S(t,(t=>ge(t)?he(e,t.items):z(t.value===e,t))),pe=(e,t,o,n)=>{const r=n[t],s=e.length>0;return void 0!==r?he(r,o).map((t=>({url:{value:t.value,meta:{text:s?e:t.text,attach:h}},text:s?e:t.text}))):f.none()},fe=(e,t)=>{const o={text:e.text,title:e.title},n=e=>{const t=(n=e.url,z(o.text.length<=0,f.from(n.meta.text).getOr(n.value)));var n;const r=(e=>z(o.title.length<=0,f.from(e.meta.title).getOr("")))(e.url);return t.isSome()||r.isSome()?f.some(i(i({},t.map((e=>({text:e}))).getOr({})),r.map((e=>({title:e}))).getOr({}))):f.none()},r=(e,n)=>{const r=(s=t,a=n.name,"link"===a?s.link:"anchor"===a?s.anchor:f.none()).getOr([]);var s,a;return pe(o.text,n.name,r,e)};return{onChange:(e,t)=>{const s=t.name;return"url"===s?n(e()):y(["anchor","link"],s)?r(e(),t):"text"===s||"title"===s?(o[s]=e()[s],f.none()):f.none()}}};var ve=tinymce.util.Tools.resolve("tinymce.util.Delay");const be=e=>{const t=e.href;return t.indexOf("@")>0&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?f.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:e=>l(i({},e),{href:"mailto:"+t})}):f.none()},ye=(e,t)=>{return S([be,(o=T(e),n=A(e),e=>{const t=e.href;return 1===o&&!Z(t)||0===o&&/^\s*www(\.|\d\.)/i.test(t)?f.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${n}:// prefix?`,preprocess:e=>l(i({},e),{href:n+"://"+t})}):f.none()})],(e=>e(t))).fold((()=>Promise.resolve(t)),(o=>new Promise((n=>{((e,t,o)=>{const n=e.selection.getRng();ve.setEditorTimeout(e,(()=>{e.windowManager.confirm(t,(t=>{e.selection.setRng(n),o(t)}))}))})(e,o.message,(e=>{n(e?o.preprocess(t):t)}))}))));var o,n},we=e=>{const t=e.dom.select("a:not([href])"),o=x(t,(e=>{const t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]}));return o.length>0?f.some([{text:"None",value:""}].concat(o)):f.none()},xe=e=>{const t=B(e);return t.length>0?j.sanitize(t):f.none()},Se=e=>{try{return f.some(JSON.parse(e))}catch(t){return f.none()}},Ce=e=>{const t=t=>e.convertURL(t.value||t.url,"href"),o=_(e);return new Promise((e=>{r(o)?fetch(o).then((e=>e.ok?e.text().then(Se):Promise.reject())).then(e,(()=>e(f.none()))):u(o)?o((t=>e(f.some(t)))):e(f.from(o))})).then((e=>e.bind(j.sanitizeWith(t)).map((e=>{if(e.length>0){return[{text:"None",value:""}].concat(e)}return e}))))},ke=(e,t)=>{const o=H(e);if(o.length>0){const n=C(t,"_blank"),r=e=>ee(j.getValue(e),n);return(!1===R(e)?j.sanitizeWith(r):j.sanitize)(o)}return f.none()},ze=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Oe=e=>{const t=E(e);return a(t)?j.sanitize(t).orThunk((()=>f.some(ze))):!1===t?f.none():f.some(ze)},Te=(e,t,o)=>{const n=e.getAttrib(t,o);return null!==n&&n.length>0?f.some(n):f.none()},Me=(e,t)=>Ce(e).then((o=>{const n=((e,t)=>{const o=e.dom,n=re(e)?f.some(oe(e.selection,t)):f.none(),r=t?f.some(o.getAttrib(t,"href")):f.none(),s=t?f.from(o.getAttrib(t,"target")):f.none(),a=Te(o,t,"rel"),i=Te(o,t,"class");return{url:r,text:n,title:Te(o,t,"title"),target:s,rel:a,linkClass:i}})(e,t);return{anchor:n,catalogs:{targets:Oe(e),rels:ke(e,n.target),classes:xe(e),anchor:we(e),link:o},optNode:f.from(t),flags:{titleEnabled:V(e)}}})),_e=e=>{const t=(e=>{const t=te(e);return Me(e,t)})(e);t.then((t=>{const o=((e,t)=>o=>{const n=o.getData();if(!n.url.value)return de(e),void o.close();const r=e=>f.from(n[e]).filter((o=>!C(t.anchor[e],o))),s={href:n.url.value,text:r("text"),target:r("target"),rel:r("rel"),class:r("linkClass"),title:r("title")},a={href:n.url.value,attach:void 0!==n.url.meta&&n.url.meta.attach?n.url.meta.attach:h};ye(e,s).then((t=>{ce(e,a,t)})),o.close()})(e,t);return((e,t,o)=>{const n=e.anchor.text.map((()=>({name:"text",type:"input",label:"Text to display"}))).toArray(),r=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],s=((e,t)=>{const o=e.anchor,n=o.url.getOr("");return{url:{value:n,meta:{original:{value:n}}},text:o.text.getOr(""),title:o.title.getOr(""),anchor:n,link:n,rel:o.rel.getOr(""),target:o.target.or(t).getOr(""),linkClass:o.linkClass.getOr("")}})(e,f.from(D(o))),a=e.catalogs,i=fe(s,a);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:w([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],n,r,k([a.anchor.map(j.createUi("anchor","Anchors")),a.rels.map(j.createUi("rel","Rel")),a.targets.map(j.createUi("target","Open link in...")),a.link.map(j.createUi("link","Link list")),a.classes.map(j.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:s,onChange:(e,{name:t})=>{i.onChange(e.getData,{name:t}).each((t=>{e.setData(t)}))},onSubmit:t}})(t,o,e)})).then((t=>{e.windowManager.open(t)}))},De=e=>{const t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";const o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),((e,t)=>{document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)})(t,o)},Ae=(e,t)=>e.dom.getParent(t,"a[href]"),Ee=e=>Ae(e,e.selection.getStart()),He=(e,t)=>{if(t){const o=Q(t);if(/^#/.test(o)){const t=e.dom.select(o);t.length&&e.selection.scrollIntoView(t[0],!0)}else De(t.href)}},Be=e=>()=>{_e(e)},Ve=e=>()=>{He(e,Ee(e))},Re=(e,t)=>(e.on("NodeChange",t),()=>e.off("NodeChange",t)),Le=e=>t=>{const o=()=>t.setActive(!e.mode.isReadOnly()&&null!==te(e,e.selection.getNode()));return o(),Re(e,o)},Ne=e=>t=>{const o=()=>t.setEnabled(null!==te(e,e.selection.getNode()));return o(),Re(e,o)},Ie=e=>t=>{const o=t=>{return ne(t)||(o=e.selection.getRng(),Y(o,J).length>0);var o},n=e.dom.getParents(e.selection.getStart());return t.setEnabled(o(n)),Re(e,(e=>t.setEnabled(o(e.parents))))},Fe=e=>{const t=t=>{const o=e.selection.getNode();return t.setEnabled(null!==te(e,o)),h};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Le(e)},label:"Link",predicate:t=>!!te(e,t)&&M(e),initValue:()=>{const t=te(e);return t?Q(t):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:t=>{const o=e.selection.getNode();return t.setActive(!!te(e,o)),Le(e)(t)},onAction:t=>{const o=t.getValue(),n=(t=>{const o=te(e),n=re(e);if(!o&&n){const n=oe(e.selection,o);return f.some(n.length>0?n:t)}return f.none()})(o);ce(e,{href:o,attach:h},{href:o,text:n,title:f.none(),rel:f.none(),target:f.none(),class:f.none()}),e.selection.collapse(!1),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:t=>{de(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:t=>{Ve(e)(),t.hide()}}]})};e.add("link",(e=>{(e=>{const t=e.options.register;t("link_assume_external_targets",{processor:e=>{const t=r(e)||m(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:e=>r(e)||u(e)||g(e,s)}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:e=>m(e)||g(e,s),default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})})(e),(e=>{e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Be(e),onSetup:Le(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ve(e),onSetup:Ne(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>de(e),onSetup:Ie(e)})})(e),(e=>{e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ve(e),onSetup:Ne(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Be(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>de(e),onSetup:Ie(e)})})(e),(e=>{e.ui.registry.addContextMenu("link",{update:t=>ne(e.dom.getParents(t,"a"))?"link unlink openlink":"link"})})(e),Fe(e),(e=>{e.on("click",(o=>{const n=Ae(e,o.target);n&&t.metaKeyPressed(o)&&(o.preventDefault(),He(e,n))})),e.on("keydown",(t=>{const o=Ee(e);o&&13===t.keyCode&&(e=>!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey)(t)&&(t.preventDefault(),He(e,o))}))})(e),(e=>{e.addCommand("mceLink",(()=>{L(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Be(e)()}))})(e),(e=>{e.addShortcut("Meta+K","",(()=>{e.execCommand("mceLink")}))})(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=Object.getPrototypeOf,o=(e,t,o)=>{var n;return!!o(e,t.prototype)||(null===(n=e.constructor)||void 0===n?void 0:n.name)===t.name},n=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&o(e,String,((e,t)=>t.isPrototypeOf(e)))?"string":t})(t)===e,r=e=>t=>typeof t===e,s=n("string"),a=n("object"),c=e=>((e,n)=>a(e)&&o(e,n,((e,o)=>t(e)===o)))(e,Object),d=n("array"),m=(u=null,e=>u===e);var u;const g=r("boolean"),h=e=>!(e=>null==e)(e),p=r("function"),f=r("number"),v=()=>{};class b{constructor(e,t){this.tag=e,this.value=t}static some(e){return new b(!0,e)}static none(){return b.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?b.some(e(this.value)):b.none()}bind(e){return this.tag?e(this.value):b.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:b.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return h(e)?b.some(e):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const y=Object.keys,w=Object.hasOwnProperty,x=(e,t,o,n)=>(((e,t)=>{const o=y(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}})(e,((e,r)=>{(t(e,r)?o:n)(e,r)})),{}),S=(e,t)=>w.call(e,t),C=Array.prototype.push,k=e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!d(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);C.apply(t,e[o])}return t},z=e=>((e,t)=>t>=0&&t<e.length?b.some(e[t]):b.none())(e,0);"undefined"!=typeof window?window:Function("return this;")();const O=(e,t,o)=>{((e,t,o)=>{if(!(s(o)||g(o)||f(o)))throw new Error("Attribute value was not simple");e.setAttribute(t,o+"")})(e.dom,t,o)},T=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},M={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){throw new Error("HTML does not have a single root node")}return T(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return T(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return T(o)},fromDom:T,fromPoint:(e,t,o)=>b.from(e.dom.elementFromPoint(t,o)).map(T)};var _=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),D=tinymce.util.Tools.resolve("tinymce.util.URI");const A=e=>e.length>0,E=e=>t=>t.options.get(e),H=e=>{const t=e.options.register;t("image_dimensions",{processor:"boolean",default:!0}),t("image_advtab",{processor:"boolean",default:!1}),t("image_uploadtab",{processor:"boolean",default:!0}),t("image_prepend_url",{processor:"string",default:""}),t("image_class_list",{processor:"object[]"}),t("image_description",{processor:"boolean",default:!0}),t("image_title",{processor:"boolean",default:!1}),t("image_caption",{processor:"boolean",default:!1}),t("image_list",{processor:e=>{const t=!1===e||s(e)||((e,t)=>{if(d(e)){for(let o=0,n=e.length;o<n;++o)if(!t(e[o]))return!1;return!0}return!1})(e,a)||p(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},B=E("image_dimensions"),V=E("image_advtab"),R=E("image_uploadtab"),L=E("image_prepend_url"),N=E("image_class_list"),I=E("image_description"),F=E("image_title"),P=E("image_caption"),j=E("image_list"),U=E("a11y_advanced_options"),W=E("automatic_uploads"),$=(e,t)=>Math.max(parseInt(e,10),parseInt(t,10)),G=e=>(e&&(e=e.replace(/px$/,"")),e),q=e=>(e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e),K=e=>"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder")),X=(e,t)=>{const o=e.options.get;return D.isDomSafe(t,"img",{allow_html_data_urls:o("allow_html_data_urls"),allow_script_urls:o("allow_script_urls"),allow_svg_data_urls:o("allow_svg_data_urls")})},J=_.DOM,Y=e=>e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?G(e.style.marginLeft):"",Z=e=>e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?G(e.style.marginTop):"",Q=e=>e.style.borderWidth?G(e.style.borderWidth):"",ee=(e,t)=>e.hasAttribute(t)?e.getAttribute(t):"",te=(e,t)=>e.style[t]?e.style[t]:"",oe=e=>null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName,ne=(e,t,o)=>{""===o?e.removeAttribute(t):e.setAttribute(t,o)},re=e=>{oe(e)?(e=>{const t=e.parentNode;J.insertAfter(e,t),J.remove(t)})(e):(e=>{const t=J.create("figure",{class:"image"});J.insertAfter(t,e),t.appendChild(e),t.appendChild(J.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"})(e)},se=(e,t)=>{const o=e.getAttribute("style"),n=t(null!==o?o:"");n.length>0?(e.setAttribute("style",n),e.setAttribute("data-mce-style",n)):e.removeAttribute("style")},ae=(e,t)=>(e,o,n)=>{e.style[o]?(e.style[o]=q(n),se(e,t)):ne(e,o,n)},ie=(e,t)=>e.style[t]?G(e.style[t]):ee(e,t),le=(e,t)=>{const o=q(t);e.style.marginLeft=o,e.style.marginRight=o},ce=(e,t)=>{const o=q(t);e.style.marginTop=o,e.style.marginBottom=o},de=(e,t)=>{const o=q(t);e.style.borderWidth=o},me=(e,t)=>{e.style.borderStyle=t},ue=e=>"FIGURE"===e.nodeName,ge=e=>0===J.getAttrib(e,"alt").length&&"presentation"===J.getAttrib(e,"role"),he=e=>ge(e)?"":ee(e,"alt"),pe=(e,t)=>{const o=document.createElement("img");return ne(o,"style",t.style),(Y(o)||""!==t.hspace)&&le(o,t.hspace),(Z(o)||""!==t.vspace)&&ce(o,t.vspace),(Q(o)||""!==t.border)&&de(o,t.border),((e=>te(e,"borderStyle"))(o)||""!==t.borderStyle)&&me(o,t.borderStyle),e(o.getAttribute("style"))},fe=(e,t)=>({src:ee(t,"src"),alt:he(t),title:ee(t,"title"),width:ie(t,"width"),height:ie(t,"height"),class:ee(t,"class"),style:e(ee(t,"style")),caption:oe(t),hspace:Y(t),vspace:Z(t),border:Q(t),borderStyle:te(t,"borderStyle"),isDecorative:ge(t)}),ve=(e,t,o,n,r)=>{o[n]!==t[n]&&r(e,n,o[n])},be=(e,t,o)=>{if(o){J.setAttrib(e,"role","presentation");const t=M.fromDom(e);O(t,"alt","")}else{if(m(t)){const t=M.fromDom(e);n="alt",t.dom.removeAttribute(n)}else{const o=M.fromDom(e);O(o,"alt",t)}"presentation"===J.getAttrib(e,"role")&&J.setAttrib(e,"role","")}var n},ye=(e,t)=>(o,n,r)=>{e(o,r),se(o,t)},we=(e,t,o)=>{const n=fe(e,o);ve(o,n,t,"caption",((e,t,o)=>re(e))),ve(o,n,t,"src",ne),ve(o,n,t,"title",ne),ve(o,n,t,"width",ae(0,e)),ve(o,n,t,"height",ae(0,e)),ve(o,n,t,"class",ne),ve(o,n,t,"style",ye(((e,t)=>ne(e,"style",t)),e)),ve(o,n,t,"hspace",ye(le,e)),ve(o,n,t,"vspace",ye(ce,e)),ve(o,n,t,"border",ye(de,e)),ve(o,n,t,"borderStyle",ye(me,e)),((e,t,o)=>{o.alt===t.alt&&o.isDecorative===t.isDecorative||be(e,o.alt,o.isDecorative)})(o,n,t)},xe=(e,t)=>{const o=(e=>{if(e.margin){const t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e})(e.dom.styles.parse(t)),n=e.dom.styles.parse(e.dom.styles.serialize(o));return e.dom.styles.serialize(n)},Se=e=>{const t=e.selection.getNode(),o=e.dom.getParent(t,"figure.image");return o?e.dom.select("img",o)[0]:t&&("IMG"!==t.nodeName||K(t))?null:t},Ce=(e,t)=>{const o=e.dom,n=((e,t)=>{const o={};var n;return x(e,t,(n=o,(e,t)=>{n[t]=e}),v),o})(e.schema.getTextBlockElements(),((t,o)=>!e.schema.isValidChild(o,"figure"))),r=o.getParent(t.parentNode,(e=>{return t=n,o=e.nodeName,S(t,o)&&void 0!==t[o]&&null!==t[o];var t,o}),e.getBody());return r?o.split(r,t):t},ke=(e,t)=>{const o=((e,t)=>{const o=document.createElement("img");if(we(e,l(i({},t),{caption:!1}),o),be(o,t.alt,t.isDecorative),t.caption){const e=J.create("figure",{class:"image"});return e.appendChild(o),e.appendChild(J.create("figcaption",{contentEditable:"true"},"Caption")),e.contentEditable="false",e}return o})((t=>xe(e,t)),t);e.dom.setAttrib(o,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(o.outerHTML);const n=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(n,"data-mce-id",null),ue(n)){const t=Ce(e,n);e.selection.select(t)}else e.selection.select(n)},ze=(e,t)=>{const o=Se(e);if(we((t=>xe(e,t)),t,o),((e,t)=>{e.dom.setAttrib(t,"src",t.getAttribute("src"))})(e,o),ue(o.parentNode)){const t=o.parentNode;Ce(e,t),e.selection.select(o.parentNode)}else e.selection.select(o),((e,t,o)=>{const n=()=>{o.onload=o.onerror=null,e.selection&&(e.selection.select(o),e.nodeChanged())};o.onload=()=>{t.width||t.height||!B(e)||e.dom.setAttribs(o,{width:String(o.clientWidth),height:String(o.clientHeight)}),n()},o.onerror=n})(e,t,o)},Oe=(e,t)=>{const o=Se(e);if(o){const n=fe((t=>xe(e,t)),o),r=i(i({},n),t),s=((e,t)=>{const o=t.src;return l(i({},t),{src:X(e,o)?o:""})})(e,r);r.src?ze(e,s):((e,t)=>{if(t){const o=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(o),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}})(e,o)}else t.src&&ke(e,i(i({},{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),t))},Te=(Me=(e,t)=>c(e)&&c(t)?Te(e,t):t,(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const t={};for(let o=0;o<e.length;o++){const n=e[o];for(const e in n)S(n,e)&&(t[e]=Me(t[e],n[e]))}return t});var Me,_e=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),De=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ae=e=>s(e.value)?e.value:"",Ee=(e,t)=>{const o=[];return De.each(e,(e=>{const n=(e=>s(e.text)?e.text:s(e.title)?e.title:"")(e);if(void 0!==e.menu){const r=Ee(e.menu,t);o.push({text:n,items:r})}else{const r=t(e);o.push({text:n,value:r})}})),o},He=(e=Ae)=>t=>t?b.from(t).map((t=>Ee(t,e))):b.none(),Be=(e,t)=>((e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return b.none()})(e,(e=>(e=>S(e,"items"))(e)?Be(e.items,t):e.value===t?b.some(e):b.none())),Ve=He,Re=e=>He(Ae)(e),Le=(e,t)=>e.bind((e=>Be(e,t))),Ne=e=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}),Ie=e=>{const t=Ve((t=>e.convertURL(t.value||t.url,"src"))),o=new Promise((o=>{((e,t)=>{const o=j(e);s(o)?fetch(o).then((e=>{e.ok&&e.json().then(t)})):p(o)?o(t):t(o)})(e,(e=>{o(t(e).map((e=>k([[{text:"None",value:""}],e]))))}))})),n=Re(N(e)),r=V(e),a=R(e),i=(e=>A(e.options.get("images_upload_url")))(e),l=(e=>h(e.options.get("images_upload_handler")))(e),c=(e=>{const t=Se(e);return t?fe((t=>xe(e,t)),t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}})(e),d=I(e),m=F(e),u=B(e),g=P(e),f=U(e),v=W(e),y=b.some(L(e)).filter((e=>s(e)&&e.length>0));return o.then((e=>({image:c,imageList:e,classList:n,hasAdvTab:r,hasUploadTab:a,hasUploadUrl:i,hasUploadHandler:l,hasDescription:d,hasImageTitle:m,hasDimensions:u,hasImageCaption:g,prependURL:y,hasAccessibilityOptions:f,automaticUploads:v})))},Fe=e=>{const t=e.imageList.map((e=>({name:"images",type:"listbox",label:"Image list",items:e}))),o={name:"alt",type:"input",label:"Alternative description",enabled:!(e.hasAccessibilityOptions&&e.image.isDecorative)},n=e.classList.map((e=>({name:"classes",type:"listbox",label:"Class",items:e})));return k([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[o]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[l(i({},(r=e.classList.isSome()&&e.hasImageCaption,r?{type:"grid",columns:2}:{type:"panel"})),{items:k([n.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])})]]);var r},Pe=e=>({title:"General",name:"general",items:Fe(e)}),je=Fe,Ue=e=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}),We=e=>({src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}),$e=(e,t)=>({src:e.src.value,alt:0===e.alt.length&&t?null:e.alt,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}),Ge=(e,t)=>{const o=t.getData();((e,t)=>/^(?:[a-zA-Z]+:)?\/\//.test(t)?b.none():e.prependURL.bind((e=>t.substring(0,e.length)!==e?b.some(e+t):b.none())))(e,o.src.value).each((e=>{t.setData({src:{value:e,meta:o.src.meta}})}))},qe=(e,t)=>{const o=t.getData(),n=o.src.meta;if(void 0!==n){const r=Te({},o);((e,t,o)=>{e.hasDescription&&s(o.alt)&&(t.alt=o.alt),e.hasAccessibilityOptions&&(t.isDecorative=o.isDecorative||t.isDecorative||!1),e.hasImageTitle&&s(o.title)&&(t.title=o.title),e.hasDimensions&&(s(o.width)&&(t.dimensions.width=o.width),s(o.height)&&(t.dimensions.height=o.height)),s(o.class)&&Le(e.classList,o.class).each((e=>{t.classes=e.value})),e.hasImageCaption&&g(o.caption)&&(t.caption=o.caption),e.hasAdvTab&&(s(o.style)&&(t.style=o.style),s(o.vspace)&&(t.vspace=o.vspace),s(o.border)&&(t.border=o.border),s(o.hspace)&&(t.hspace=o.hspace),s(o.borderstyle)&&(t.borderstyle=o.borderstyle))})(e,r,n),t.setData(r)}},Ke=(e,t,o,n)=>{Ge(t,n),qe(t,n),((e,t,o,n)=>{const r=n.getData(),s=r.src.value,a=r.src.meta||{};a.width||a.height||!t.hasDimensions||(A(s)?e.imageSize(s).then((e=>{o.open&&n.setData({dimensions:e})})).catch((e=>{})):n.setData({dimensions:{width:"",height:""}}))})(e,t,o,n),((e,t,o)=>{const n=o.getData(),r=Le(e.imageList,n.src.value);t.prevImage=r,o.setData({images:r.map((e=>e.value)).getOr("")})})(t,o,n)},Xe=(e,t,o,n)=>{const r=n.getData();n.block("Uploading image"),z(r.fileinput).fold((()=>{n.unblock()}),(r=>{const s=URL.createObjectURL(r),a=()=>{n.unblock(),URL.revokeObjectURL(s)},i=r=>{n.setData({src:{value:r,meta:{}}}),n.showTab("general"),Ke(e,t,o,n)};var l;(l=r,new Promise(((e,t)=>{const o=new FileReader;o.onload=()=>{e(o.result)},o.onerror=()=>{t(o.error.message)},o.readAsDataURL(l)}))).then((o=>{const l=e.createBlobCache(r,s,o);t.automaticUploads?e.uploadImage(l).then((e=>{i(e.url),a()})).catch((t=>{a(),e.alertErr(t)})):(e.addToBlobCache(l),i(l.blobUri()),n.unblock())}))}))},Je=(e,t,o)=>(n,r)=>{"src"===r.name?Ke(e,t,o,n):"images"===r.name?((e,t,o,n)=>{const r=n.getData(),s=Le(t.imageList,r.images);s.each((e=>{""===r.alt||o.prevImage.map((e=>e.text===r.alt)).getOr(!1)?""===e.value?n.setData({src:e,alt:o.prevAlt}):n.setData({src:e,alt:e.text}):n.setData({src:e})})),o.prevImage=s,Ke(e,t,o,n)})(e,t,o,n):"alt"===r.name?o.prevAlt=n.getData().alt:"fileinput"===r.name?Xe(e,t,o,n):"isDecorative"===r.name&&n.setEnabled("alt",!n.getData().isDecorative)},Ye=e=>()=>{e.open=!1},Ze=e=>{if(e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler){return{type:"tabpanel",tabs:k([[Pe(e)],e.hasAdvTab?[Ne(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[Ue(e)]:[]])}}return{type:"panel",items:je(e)}},Qe=(e,t,o)=>n=>{const r=Te(We(t.image),n.getData()),s=l(i({},r),{style:pe(o.normalizeCss,$e(r,!1))});e.execCommand("mceUpdateImage",!1,$e(s,t.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),n.close()},et=e=>t=>X(e,t)?(e=>new Promise((t=>{const o=document.createElement("img"),n=e=>{o.onload=o.onerror=null,o.parentNode&&o.parentNode.removeChild(o),t(e)};o.onload=()=>{const e={width:$(o.width,o.clientWidth),height:$(o.height,o.clientHeight)};n(Promise.resolve(e))},o.onerror=()=>{n(Promise.reject(`Failed to get image dimensions for: ${e}`))};const r=o.style;r.visibility="hidden",r.position="fixed",r.bottom=r.left="0px",r.width=r.height="auto",document.body.appendChild(o),o.src=e})))(e.documentBaseURI.toAbsolute(t)).then((e=>({width:String(e.width),height:String(e.height)}))):Promise.resolve({width:"",height:""}),tt=e=>(t,o,n)=>e.editorUpload.blobCache.create({blob:t,blobUri:o,name:t.name?t.name.replace(/\.[^\.]+$/,""):null,filename:t.name,base64:n.split(",")[1]}),ot=e=>t=>{e.editorUpload.blobCache.add(t)},nt=e=>t=>{e.windowManager.alert(t)},rt=e=>t=>xe(e,t),st=e=>t=>e.dom.parseStyle(t),at=e=>(t,o)=>e.dom.serializeStyle(t,o),it=e=>t=>_e(e).upload([t],!1).then((e=>0===e.length?Promise.reject("Failed to upload image"):!1===e[0].status?Promise.reject(e[0].error.message):e[0])),lt=e=>{const t={imageSize:et(e),addToBlobCache:ot(e),createBlobCache:tt(e),alertErr:nt(e),normalizeCss:rt(e),parseStyle:st(e),serializeStyle:at(e),uploadImage:it(e)};return{open:()=>{Ie(e).then((o=>{const n=(e=>({prevImage:Le(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}))(o);return{title:"Insert/Edit Image",size:"normal",body:Ze(o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:We(o.image),onSubmit:Qe(e,o,t),onChange:Je(t,o,n),onClose:Ye(n)}})).then(e.windowManager.open)}}},ct=e=>{const t=e.attr("class");return t&&/\bimage\b/.test(t)},dt=e=>t=>{let o=t.length;const n=t=>{t.attr("contenteditable",e?"true":null)};for(;o--;){const r=t[o];ct(r)&&(r.attr("contenteditable",e?"false":null),De.each(r.getAll("figcaption"),n))}};e.add("image",(e=>{H(e),(e=>{e.on("PreInit",(()=>{e.parser.addNodeFilter("figure",dt(!0)),e.serializer.addNodeFilter("figure",dt(!1))}))})(e),(e=>{e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:lt(e).open,onSetup:t=>(t.setActive(h(Se(e))),e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",t.setActive).unbind)}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:lt(e).open}),e.ui.registry.addContextMenu("image",{update:e=>ue(e)||"IMG"===e.nodeName&&!K(e)?["image"]:[]})})(e),(e=>{e.addCommand("mceImage",lt(e).open),e.addCommand("mceUpdateImage",((t,o)=>{e.undoManager.transact((()=>Oe(e,o)))}))})(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=r=e,n=(s=String).prototype,n.isPrototypeOf(o)||(null===(a=r.constructor)||void 0===a?void 0:a.name)===s.name)?"string":t;var o,n;var r,s,a})(t)===e,o=e=>t=>typeof t===e,n=t("string"),r=t("object"),s=t("array"),a=o("boolean"),l=o("function"),c=o("number"),d=()=>{},m=(e,t)=>e===t,u=e=>t=>!e(t),g=(h=!1,()=>h);var h;class p{constructor(e,t){this.tag=e,this.value=t}static some(e){return new p(!0,e)}static none(){return p.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?p.some(e(this.value)):p.none()}bind(e){return this.tag?e(this.value):p.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:p.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(e=>null==e)(e)?p.none():p.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}p.singletonNone=new p(!1);const f=Array.prototype.slice,v=Array.prototype.indexOf,b=Array.prototype.push,y=(e,t)=>{return o=e,n=t,v.call(o,n)>-1;var o,n},w=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},x=(e,t)=>{for(let o=0,n=e.length;o<n;o++){t(e[o],o)}},S=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t(r,n)&&o.push(r)}return o},C=(e,t,o)=>(x(e,((e,n)=>{o=t(o,e,n)})),o),k=(e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t(r,n))return p.some(r);if(o(r,n))break}return p.none()},z=(e,t)=>k(e,t,g),O=(e,t)=>(e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!s(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);b.apply(t,e[o])}return t})(w(e,t)),T=e=>{const t=f.call(e,0);return t.reverse(),t},M=(e,t)=>t>=0&&t<e.length?p.some(e[t]):p.none(),_=e=>M(e,0),D=e=>M(e,e.length-1),A=(e,t)=>{const o=[],n=l(t)?e=>((e,t)=>{for(let o=0,n=e.length;o<n;o++)if(t(e[o],o))return!0;return!1})(o,(o=>t(o,e))):e=>y(o,e);for(let r=0,s=e.length;r<s;r++){const t=e[r];n(t)||o.push(t)}return o},E=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},H={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){throw new Error("HTML does not have a single root node")}return E(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return E(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return E(o)},fromDom:E,fromPoint:(e,t,o)=>p.from(e.dom.elementFromPoint(t,o)).map(E)},B=(e,t)=>e.dom===t.dom,V=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}};"undefined"!=typeof window?window:Function("return this;")();const R=e=>e.dom.nodeName.toLowerCase(),L=(N=1,e=>(e=>e.dom.nodeType)(e)===N);var N;const I=e=>t=>L(t)&&R(t)===e,F=e=>p.from(e.dom.parentNode).map(H.fromDom),P=e=>w(e.dom.childNodes,H.fromDom),j=(e,t)=>{const o=e.dom.childNodes;return p.from(o[t]).map(H.fromDom)},U=e=>j(e,0),W=e=>j(e,e.dom.childNodes.length-1),$=(e,t)=>{F(e).each((o=>{o.dom.insertBefore(t.dom,e.dom)}))},G=(e,t)=>{const o=(e=>p.from(e.dom.nextSibling).map(H.fromDom))(e);o.fold((()=>{F(e).each((e=>{q(e,t)}))}),(e=>{$(e,t)}))},q=(e,t)=>{e.dom.appendChild(t.dom)},K=(e,t)=>{x(t,(t=>{q(e,t)}))},X=e=>{e.dom.textContent="",x(P(e),(e=>{J(e)}))},J=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)};var Y=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Z=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Q=tinymce.util.Tools.resolve("tinymce.util.VK");const ee=Object.keys,te=(e,t)=>{const o=ee(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}},oe=(e,t)=>{const o={};var n;return((e,t,o,n)=>{te(e,((e,r)=>{(t(e,r)?o:n)(e,r)}))})(e,t,(n=o,(e,t)=>{n[t]=e}),d),o},ne=(e,t)=>{const o=e.dom;te(t,((e,t)=>{((e,t,o)=>{if(!(n(o)||a(o)||c(o)))throw new Error("Attribute value was not simple");e.setAttribute(t,o+"")})(o,t,e)}))},re=e=>C(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}),se=e=>((e,t)=>H.fromDom(e.dom.cloneNode(t)))(e,!0),ae=(e,t)=>{const o=((e,t)=>{const o=H.fromTag(t),n=re(e);return ne(o,n),o})(e,t);G(e,o);const n=P(e);return K(o,n),J(e),o};var ie=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),le=tinymce.util.Tools.resolve("tinymce.util.Tools");const ce=e=>t=>t&&t.nodeName.toLowerCase()===e,de=e=>t=>t&&e.test(t.nodeName),me=e=>e&&3===e.nodeType,ue=de(/^(OL|UL|DL)$/),ge=de(/^(OL|UL)$/),he=ce("ol"),pe=de(/^(LI|DT|DD)$/),fe=de(/^(DT|DD)$/),ve=de(/^(TH|TD)$/),be=ce("br"),ye=(e,t)=>t&&!!e.schema.getTextBlockElements()[t.nodeName],we=(e,t)=>e&&e.nodeName in t,xe=(e,t,o)=>{const n=e.isEmpty(t);return!(o&&e.select("span[data-mce-type=bookmark]",t).length>0)&&n},Se=(e,t)=>e.isChildOf(t,e.getRoot()),Ce=e=>t=>t.options.get(e),ke=Ce("lists_indent_on_tab"),ze=Ce("forced_root_block"),Oe=Ce("forced_root_block_attrs"),Te=(e,t)=>{const o=e.dom,n=e.schema.getBlockElements(),r=o.createFragment(),s=ze(e),a=Oe(e);let i,l,c;for(l=o.create(s,a),we(t.firstChild,n)||r.appendChild(l);i=t.firstChild;){const e=i.nodeName;c||"SPAN"===e&&"bookmark"===i.getAttribute("data-mce-type")||(c=!0),we(i,n)?(r.appendChild(i),l=null):(l||(l=o.create(s,a),r.appendChild(l)),l.appendChild(i))}return c||l.appendChild(o.create("br",{"data-mce-bogus":"1"})),r},Me=ie.DOM,_e=(e,t,o)=>{const n=Me.select('span[data-mce-type="bookmark"]',t),r=Te(e,o),s=Me.createRng();s.setStartAfter(o),s.setEndAfter(t);const a=s.extractContents();for(let l=a.firstChild;l;l=l.firstChild)if("LI"===l.nodeName&&e.dom.isEmpty(l)){Me.remove(l);break}var i;e.dom.isEmpty(a)||Me.insertAfter(a,t),Me.insertAfter(r,t),xe(e.dom,o.parentNode)&&(i=o.parentNode,le.each(n,(e=>{i.parentNode.insertBefore(e,o.parentNode)})),Me.remove(i)),Me.remove(o),xe(e.dom,t)&&Me.remove(t)},De=I("dd"),Ae=I("dt"),Ee=e=>{Ae(e)&&ae(e,"dd")},He=(e,t,o)=>{x(o,"Indent"===t?Ee:t=>((e,t)=>{De(t)?ae(t,"dt"):Ae(t)&&F(t).each((o=>_e(e,o.dom,t.dom)))})(e,t))},Be=(e,t)=>{if(me(e))return{container:e,offset:t};const o=Y.getNode(e,t);return me(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&me(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&me(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},Ve=e=>{const t=e.cloneRange(),o=Be(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const n=Be(e.endContainer,e.endOffset);return t.setEnd(n.container,n.offset),t},Re=(e,t)=>{const o=t||e.selection.getStart(!0);return e.dom.getParent(o,"OL,UL,DL",Ie(e,o))},Le=e=>{const t=Re(e),o=e.selection.getSelectedBlocks();return((e,t)=>e&&1===t.length&&t[0]===e)(t,o)?(e=>S(e.querySelectorAll("ol,ul,dl"),ue))(t):S(o,(e=>ue(e)&&t!==e))},Ne=e=>{const t=e.selection.getSelectedBlocks();return S(((e,t)=>{const o=le.map(t,(t=>e.dom.getParent(t,"li,dd,dt",Ie(e,t))||t));return A(o)})(e,t),pe)},Ie=(e,t)=>{const o=e.dom.getParents(t,"TD,TH");return o.length>0?o[0]:e.getBody()},Fe=(e,t)=>{const o=e.dom.getParents(t,"ol,ul",Ie(e,t));return D(o)},Pe=e=>{const t=(e=>{const t=Fe(e,e.selection.getStart()),o=S(e.selection.getSelectedBlocks(),ge);return t.toArray().concat(o)})(e);return je(e,t)},je=(e,t)=>{const o=w(t,(t=>Fe(e,t).getOr(t)));return A(o)},Ue=(e,t,o=m)=>e.exists((e=>o(e,t))),We=(e,t,o)=>e.isSome()&&t.isSome()?p.some(o(e.getOrDie(),t.getOrDie())):p.none(),$e=(e,t,o)=>e.dispatch("ListMutation",{action:t,element:o}),Ge=(qe=/^\s+|\s+$/g,e=>e.replace(qe,""));var qe;const Ke=(e,t,o)=>{if(!n(o))throw new Error("CSS value must be a string: "+o);(e=>void 0!==e.style&&l(e.style.getPropertyValue))(e)&&e.style.setProperty(t,o)},Xe=(e,t,o)=>{const n=e.dom;Ke(n,t,o)},Je=(e,t)=>{q(e.item,t.list)},Ye=(e,t)=>{const o={list:H.fromTag(t,e),item:H.fromTag("li",e)};return q(o.list,o.item),o},Ze=(e,t,o)=>{const n=t.slice(0,o.depth);return D(n).each((t=>{const n=((e,t,o)=>{const n=H.fromTag("li",e);return ne(n,t),K(n,o),n})(e,o.itemAttributes,o.content);((e,t)=>{q(e.list,t),e.item=t})(t,n),((e,t)=>{R(e.list)!==t.listType&&(e.list=ae(e.list,t.listType)),ne(e.list,t.listAttributes)})(t,o)})),n},Qe=(e,t,o)=>{const n=((e,t,o)=>{const n=[];for(let r=0;r<o;r++)n.push(Ye(e,t.listType));return n})(e,o,o.depth-t.length);var r;return(e=>{for(let t=1;t<e.length;t++)Je(e[t-1],e[t])})(n),((e,t)=>{for(let o=0;o<e.length-1;o++)Xe(e[o].item,"list-style-type","none");D(e).each((e=>{ne(e.list,t.listAttributes),ne(e.item,t.itemAttributes),K(e.item,t.content)}))})(n,o),r=n,We(D(t),_(r),Je),t.concat(n)},et=e=>V(e,"OL,UL"),tt=e=>U(e).exists(et),ot=e=>e.depth>0,nt=e=>e.isSelected,rt=e=>{const t=P(e),o=W(e).exists(et)?t.slice(0,-1):t;return w(o,se)},st=e=>(x(e,((t,o)=>{((e,t)=>{const o=e[t].depth,n=e=>e.depth===o&&!e.dirty,r=e=>e.depth<o;return k(T(e.slice(0,t)),n,r).orThunk((()=>k(e.slice(t+1),n,r)))})(e,o).fold((()=>{t.dirty&&(e=>{e.listAttributes=oe(e.listAttributes,((e,t)=>"start"!==t))})(t)}),(e=>{return n=e,(o=t).listType=n.listType,void(o.listAttributes=i({},n.listAttributes));var o,n}))})),e),at=(e,t,o,n)=>U(n).filter(et).fold((()=>{t.each((e=>{B(e.start,n)&&o.set(!0)}));const r=((e,t,o)=>F(e).filter(L).map((n=>({depth:t,dirty:!1,isSelected:o,content:rt(e),itemAttributes:re(e),listAttributes:re(n),listType:R(n)}))))(n,e,o.get());t.each((e=>{B(e.end,n)&&o.set(!1)}));const s=W(n).filter(et).map((n=>it(e,t,o,n))).getOr([]);return r.toArray().concat(s)}),(n=>it(e,t,o,n))),it=(e,t,o,n)=>O(P(n),(n=>(et(n)?it:at)(e+1,t,o,n))),lt=(e,t)=>{const o=st(t);return w(o,(t=>{const o=((e,t)=>{const o=(t||document).createDocumentFragment();return x(e,(e=>{o.appendChild(e.dom)})),H.fromDom(o)})(t.content);return H.fromDom(Te(e,o.dom))}))},ct=(e,t)=>{const o=st(t);return((e,t)=>{const o=C(t,((t,o)=>o.depth>t.length?Qe(e,t,o):Ze(e,t,o)),[]);return _(o).map((e=>e.list))})(e.contentDocument,o).toArray()},dt=(e,t,o)=>{const n=((e,t)=>{const o=(e=>{let t=!1;return{get:()=>t,set:e=>{t=e}}})();return w(e,(e=>({sourceList:e,entries:it(0,t,o,e)})))})(t,(e=>{const t=w(Ne(e),H.fromDom);return We(z(t,u(tt)),z(T(t),u(tt)),((e,t)=>({start:e,end:t})))})(e));x(n,(t=>{((e,t)=>{x(S(e,nt),(e=>((e,t)=>{switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0})(t,e)))})(t.entries,o);const n=((e,t)=>O(((e,t)=>{if(0===e.length)return[];{let o=t(e[0]);const n=[];let r=[];for(let s=0,a=e.length;s<a;s++){const a=e[s],i=t(a);i!==o&&(n.push(r),r=[]),o=i,r.push(a)}return 0!==r.length&&n.push(r),n}})(t,ot),(t=>_(t).exists(ot)?ct(e,t):lt(e,t))))(e,t.entries);var r;x(n,(t=>{$e(e,"Indent"===o?"IndentList":"OutdentList",t.dom)})),r=t.sourceList,x(n,(e=>{$(r,e)})),J(t.sourceList)}))},mt=(e,t)=>{const o=w(Pe(e),H.fromDom),n=w((e=>S(Ne(e),fe))(e),H.fromDom);let r=!1;if(o.length||n.length){const s=e.selection.getBookmark();dt(e,o,t),He(e,t,n),e.selection.moveToBookmark(s),e.selection.setRng(Ve(e.selection.getRng())),e.nodeChanged(),r=!0}return r},ut=e=>mt(e,"Indent"),gt=e=>mt(e,"Outdent"),ht=e=>mt(e,"Flatten");var pt=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const ft=ie.DOM,vt=e=>{const t={},o=o=>{let n=e[o?"startContainer":"endContainer"],r=e[o?"startOffset":"endOffset"];if(1===n.nodeType){const e=ft.create("span",{"data-mce-type":"bookmark"});n.hasChildNodes()?(r=Math.min(r,n.childNodes.length-1),o?n.insertBefore(e,n.childNodes[r]):ft.insertAfter(e,n.childNodes[r])):n.appendChild(e),n=e,r=0}t[o?"startContainer":"endContainer"]=n,t[o?"startOffset":"endOffset"]=r};return o(!0),e.collapsed||o(),t},bt=e=>{const t=t=>{let o;let n=o=e[t?"startContainer":"endContainer"],r=e[t?"startOffset":"endOffset"];n&&(1===n.nodeType&&(r=(e=>{let t=e.parentNode.firstChild,o=0;for(;t;){if(t===e)return o;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||o++,t=t.nextSibling}return-1})(n),n=n.parentNode,ft.remove(o),!n.hasChildNodes()&&ft.isBlock(n)&&n.appendChild(ft.create("br"))),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=r)};t(!0),t();const o=ft.createRng();return o.setStart(e.startContainer,e.startOffset),e.endContainer&&o.setEnd(e.endContainer,e.endOffset),Ve(o)},yt=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},wt=e=>/\btox\-/.test(e.className),xt=(e,t,o)=>{const n=e=>{const n=k(e.parents,ue,ve).filter((e=>e.nodeName===t&&!wt(e))).isSome();o(n)},r=e.dom.getParents(e.selection.getNode());return n({parents:r}),e.on("NodeChange",n),()=>e.off("NodeChange",n)},St=(e,t)=>{le.each(t,((t,o)=>{e.setAttribute(o,t)}))},Ct=(e,t,o)=>{((e,t,o)=>{const n=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(t,"list-style-type",n)})(e,t,o),((e,t,o)=>{St(t,o["list-attributes"]),le.each(e.select("li",t),(e=>{St(e,o["list-item-attributes"])}))})(e,t,o)},kt=(e,t,o,n)=>{let r=t[o?"startContainer":"endContainer"];const s=t[o?"startOffset":"endOffset"];for(1===r.nodeType&&(r=r.childNodes[Math.min(s,r.childNodes.length-1)]||r),!o&&be(r.nextSibling)&&(r=r.nextSibling);r.parentNode!==n;){if(ye(e,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},zt=(e,t,o)=>{const n=e.selection.getRng();let r="LI";const s=Ie(e,e.selection.getStart(!0)),a=e.dom;if("false"===a.getContentEditable(e.selection.getNode()))return;"DL"===(t=t.toUpperCase())&&(r="DT");const i=vt(n),l=((e,t,o)=>{const n=[],r=e.dom,s=kt(e,t,!0,o),a=kt(e,t,!1,o);let i;const l=[];for(let c=s;c&&(l.push(c),c!==a);c=c.nextSibling);return le.each(l,(t=>{if(ye(e,t))return n.push(t),void(i=null);if(r.isBlock(t)||be(t))return be(t)&&r.remove(t),void(i=null);const s=t.nextSibling;pt.isBookmarkNode(t)&&(ue(s)||ye(e,s)||!s&&t.parentNode===o)?i=null:(i||(i=r.create("p"),t.parentNode.insertBefore(i,t),n.push(i)),i.appendChild(t))})),n})(e,n,s);le.each(l,(n=>{let s;const i=n.previousSibling,l=n.parentNode;pe(l)||(i&&ue(i)&&i.nodeName===t&&((e,t,o)=>{const n=e.getStyle(t,"list-style-type");let r=o?o["list-style-type"]:"";return r=null===r?"":r,n===r})(a,i,o)?(s=i,n=a.rename(n,r),i.appendChild(n)):(s=a.create(t),n.parentNode.insertBefore(s,n),s.appendChild(n),n=a.rename(n,r)),((e,t,o)=>{le.each(o,(o=>e.setStyle(t,o,"")))})(a,n,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Ct(a,s,o),Tt(e.dom,s))})),e.selection.setRng(bt(i))},Ot=(e,t,o)=>{return((e,t)=>e&&t&&ue(e)&&e.nodeName===t.nodeName)(t,o)&&((e,t,o)=>e.getStyle(t,"list-style-type",!0)===e.getStyle(o,"list-style-type",!0))(e,t,o)&&(n=o,t.className===n.className);var n},Tt=(e,t)=>{let o,n;if(o=t.nextSibling,Ot(e,t,o)){for(;n=o.firstChild;)t.appendChild(n);e.remove(o)}if(o=t.previousSibling,Ot(e,t,o)){for(;n=o.lastChild;)t.insertBefore(n,t.firstChild);e.remove(o)}},Mt=(e,t,o,n,r)=>{const s=ue(t);if(s&&t.nodeName===n&&!_t(r))ht(e);else{zt(e,n,r);const a=vt(e.selection.getRng()),i=s?[t,...o]:o;le.each(i,(t=>{((e,t,o,n)=>{if(t.nodeName!==o){const r=e.dom.rename(t,o);Ct(e.dom,r,n),$e(e,yt(o),r)}else Ct(e.dom,t,n),$e(e,yt(o),t)})(e,t,n,r)})),e.selection.setRng(bt(a))}},_t=e=>"list-style-type"in e,Dt=(e,t,o)=>{const n=Re(e),s=Le(e),a=r(o)?o:{};s.length>0?Mt(e,n,s,t,a):((e,t,o,n)=>{if(t!==e.getBody())if(t)if(t.nodeName!==o||_t(n)||wt(t)){const r=vt(e.selection.getRng());Ct(e.dom,t,n);const s=e.dom.rename(t,o);Tt(e.dom,s),e.selection.setRng(bt(r)),zt(e,o,n),$e(e,yt(o),s)}else ht(e);else zt(e,o,n),$e(e,yt(o),t)})(e,n,t,a)},At=ie.DOM,Et=(e,t)=>{const o=le.grep(e.select("ol,ul",t));le.each(o,(t=>{((e,t)=>{const o=t.parentNode;if("LI"===o.nodeName&&o.firstChild===t){const n=o.previousSibling;n&&"LI"===n.nodeName?(n.appendChild(t),xe(e,o)&&At.remove(o)):At.setStyle(o,"listStyleType","none")}if(ue(o)){const e=o.previousSibling;e&&"LI"===e.nodeName&&e.appendChild(t)}})(e,t)}))},Ht=(e,t,o,n)=>{let r=t.startContainer;const s=t.startOffset;if(me(r)&&(o?s<r.data.length:s>0))return r;const a=e.schema.getNonEmptyElements();1===r.nodeType&&(r=Y.getNode(r,s));const i=new Z(r,n);for(o&&((e,t)=>!!be(t)&&e.isBlock(t.nextSibling)&&!be(t.previousSibling))(e.dom,r)&&i.next();r=i[o?"next":"prev2"]();){if("LI"===r.nodeName&&!r.hasChildNodes())return r;if(a[r.nodeName])return r;if(me(r)&&r.data.length>0)return r}},Bt=(e,t)=>{const o=t.childNodes;return 1===o.length&&!ue(o[0])&&e.isBlock(o[0])},Vt=(e,t,o)=>{let n;const r=Bt(e,o)?o.firstChild:o;if(((e,t)=>{Bt(e,t)&&e.remove(t.firstChild,!0)})(e,t),!xe(e,t,!0))for(;n=t.firstChild;)r.appendChild(n)},Rt=(e,t,o)=>{let n;const r=t.parentNode;if(!Se(e,t)||!Se(e,o))return;ue(o.lastChild)&&(n=o.lastChild),r===o.lastChild&&be(r.previousSibling)&&e.remove(r.previousSibling);const s=o.lastChild;s&&be(s)&&t.hasChildNodes()&&e.remove(s),xe(e,o,!0)&&X(H.fromDom(o)),Vt(e,t,o),n&&o.appendChild(n);const a=((e,t)=>{const o=e.dom,n=t.dom;return o!==n&&o.contains(n)})(H.fromDom(o),H.fromDom(t))?e.getParents(t,ue,o):[];e.remove(t),x(a,(t=>{xe(e,t)&&t!==e.getRoot()&&e.remove(t)}))},Lt=(e,t,o,n)=>{const r=e.dom;if(r.isEmpty(n))((e,t,o)=>{X(H.fromDom(o)),Rt(e.dom,t,o),e.selection.setCursorLocation(o,0)})(e,o,n);else{const s=vt(t);Rt(r,o,n),e.selection.setRng(bt(s))}},Nt=(e,t)=>{const o=e.dom,n=e.selection,r=n.getStart(),s=Ie(e,r),a=o.getParent(n.getStart(),"LI",s);if(a){const r=a.parentNode;if(r===e.getBody()&&xe(o,r))return!0;const i=Ve(n.getRng()),l=o.getParent(Ht(e,i,t,s),"LI",s);if(l&&l!==a)return e.undoManager.transact((()=>{var o;t?Lt(e,i,l,a):(o=a).parentNode.firstChild===o?gt(e):((e,t,o,n)=>{const r=vt(t);Rt(e.dom,o,n);const s=bt(r);e.selection.setRng(s)})(e,i,a,l)})),!0;if(!l&&!t&&0===i.startOffset&&0===i.endOffset)return e.undoManager.transact((()=>{ht(e)})),!0}return!1},It=(e,t)=>Nt(e,t)||((e,t)=>{const o=e.dom,n=e.selection.getStart(),r=Ie(e,n),s=o.getParent(n,o.isBlock,r);if(s&&o.isEmpty(s)){const n=Ve(e.selection.getRng()),a=o.getParent(Ht(e,n,t,r),"LI",r);if(a)return e.undoManager.transact((()=>{((e,t,o)=>{const n=e.getParent(t.parentNode,e.isBlock,o);e.remove(t),n&&e.isEmpty(n)&&e.remove(n)})(o,s,r),Tt(o,a.parentNode),e.selection.select(a,!0),e.selection.collapse(t)})),!0}return!1})(e,t),Ft=(e,t)=>e.selection.isCollapsed()?It(e,t):(e=>{const t=e.selection.getStart(),o=Ie(e,t);return!!(e.dom.getParent(t,"LI,DT,DD",o)||Ne(e).length>0)&&(e.undoManager.transact((()=>{e.execCommand("Delete"),Et(e.dom,e.getBody())})),!0)})(e),Pt=e=>{const t=T(Ge(e).split("")),o=w(t,((e,t)=>{const o=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*o}));return C(o,((e,t)=>e+t),0)},jt=e=>{if(--e<0)return"";{const t=e%26,o=Math.floor(e/26);return jt(o)+String.fromCharCode("A".charCodeAt(0)+t)}},Ut=e=>{const t=parseInt(e.start,10);return Ue(e.listStyleType,"upper-alpha")?jt(t):Ue(e.listStyleType,"lower-alpha")?jt(t).toLowerCase():e.start},Wt=e=>{const t=Re(e);he(t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:Ut({start:e.dom.getAttrib(t,"start","1"),listStyleType:p.some(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:t=>{(e=>{switch((e=>/^[0-9]+$/.test(e)?2:/^[A-Z]+$/.test(e)?0:(e=>/^[a-z]+$/.test(e))(e)?1:e.length>0?4:3)(e)){case 2:return p.some({listStyleType:p.none(),start:e});case 0:return p.some({listStyleType:p.some("upper-alpha"),start:Pt(e).toString()});case 1:return p.some({listStyleType:p.some("lower-alpha"),start:Pt(e).toString()});case 3:return p.some({listStyleType:p.none(),start:""});case 4:return p.none()}})(t.getData().start).each((t=>{e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})},$t=(e,t)=>()=>{const o=Re(e);return o&&o.nodeName===t},Gt=e=>{e.addCommand("mceListProps",(()=>{Wt(e)}))},qt=e=>{e.on("BeforeExecCommand",(t=>{const o=t.command.toLowerCase();"indent"===o?ut(e):"outdent"===o&&gt(e)})),e.addCommand("InsertUnorderedList",((t,o)=>{Dt(e,"UL",o)})),e.addCommand("InsertOrderedList",((t,o)=>{Dt(e,"OL",o)})),e.addCommand("InsertDefinitionList",((t,o)=>{Dt(e,"DL",o)})),e.addCommand("RemoveList",(()=>{ht(e)})),Gt(e),e.addCommand("mceListUpdate",((t,o)=>{r(o)&&((e,t)=>{const o=Re(e);e.undoManager.transact((()=>{r(t.styles)&&e.dom.setStyles(o,t.styles),r(t.attrs)&&te(t.attrs,((t,n)=>e.dom.setAttrib(o,n,t)))}))})(e,o)})),e.addQueryStateHandler("InsertUnorderedList",$t(e,"UL")),e.addQueryStateHandler("InsertOrderedList",$t(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",$t(e,"DL"))},Kt=e=>{ke(e)&&(e=>{e.on("keydown",(t=>{t.keyCode!==Q.TAB||Q.metaKeyPressed(t)||e.undoManager.transact((()=>{(t.shiftKey?gt(e):ut(e))&&t.preventDefault()}))}))})(e),(e=>{e.on("keydown",(t=>{t.keyCode===Q.BACKSPACE?Ft(e,!1)&&t.preventDefault():t.keyCode===Q.DELETE&&Ft(e,!0)&&t.preventDefault()}))})(e)};e.add("lists",(e=>((e=>{(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})})(e),!1===e.hasPlugin("rtc",!0)?(Kt(e),qt(e)):Gt(e),(e=>{const t=t=>()=>e.execCommand(t);e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:t=>xt(e,"OL",t.setActive)}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:t=>xt(e,"UL",t.setActive)}))})(e),(e=>{const t={text:"List properties...",icon:"ordered-list",onAction:()=>e.execCommand("mceListProps"),onSetup:t=>xt(e,"OL",t.setEnabled)};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:t=>{const o=Re(e,t);return he(o)?["listprops"]:[]}})})(e),(e=>({backspaceDelete:t=>{Ft(e,t)}}))(e))))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t)=>{const o=((e,t)=>e.dispatch("insertCustomChar",{chr:t}))(e,t).chr;e.execCommand("mceInsertContent",!1,o)},o=(n="array",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=n=e,(r=String).prototype.isPrototypeOf(o)||(null===(s=n.constructor)||void 0===s?void 0:s.name)===r.name)?"string":t;var o,n,r,s})(e)===n);var n;const r=(s=null,e=>s===e);var s;const a=(e=>t=>typeof t===e)("function"),i=(l=!1,()=>l);var l;class c{constructor(e,t){this.tag=e,this.value=t}static some(e){return new c(!0,e)}static none(){return c.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?c.some(e(this.value)):c.none()}bind(e){return this.tag?e(this.value):c.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:c.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(e=>null==e)(e)?c.none():c.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}c.singletonNone=new c(!1);const d=Array.prototype.push,m=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},u=(e,t)=>((e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t(r,n))return c.some(r);if(o(r,n))break}return c.none()})(e,t,i),g=(e,t)=>(e=>{const t=[];for(let n=0,r=e.length;n<r;++n){if(!o(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);d.apply(t,e[n])}return t})(m(e,t));var h=tinymce.util.Tools.resolve("tinymce.util.Tools");const p=e=>t=>t.options.get(e),f=p("charmap"),v=p("charmap_append"),b=h.isArray,y="User Defined",w=e=>{return b(e)?(t=e,h.grep(t,(e=>b(e)&&2===e.length))):"function"==typeof e?e():[];var t},x=e=>{const t=((e,t)=>{const o=f(e);o&&(t=[{name:y,characters:w(o)}]);const n=v(e);if(n){const e=h.grep(t,(e=>e.name===y));return e.length?(e[0].characters=[].concat(e[0].characters).concat(w(n)),t):t.concat({name:y,characters:w(n)})}return t})(e,[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}]);return t.length>1?[{name:"All",characters:g(t,(e=>e.characters))}].concat(t):t},S=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},C=(e,t)=>-1!==e.indexOf(t),k=String.fromCodePoint,z=(e,t)=>{const o=[],n=t.toLowerCase();return((e,t)=>{for(let o=0,n=e.length;o<n;o++)t(e[o],o)})(e.characters,(e=>{((e,t,o)=>!!C(k(e).toLowerCase(),o)||C(t.toLowerCase(),o)||C(t.toLowerCase().replace(/\s+/g,""),o))(e[0],e[1],n)&&o.push(e)})),m(o,(e=>({text:e[1],value:k(e[0]),icon:k(e[0])})))},O="pattern",T=(e,o)=>{const n=()=>[{label:"Search",type:"input",name:O},{type:"collection",name:"results"}],s=1===o.length?S(y):S("All"),a=((e,t)=>{let o=null;const n=()=>{r(o)||(clearTimeout(o),o=null)};return{cancel:n,throttle:(...r)=>{n(),o=setTimeout((()=>{o=null,e.apply(null,r)}),t)}}})((e=>{const t=e.getData().pattern;((e,t)=>{u(o,(e=>e.name===s.get())).each((o=>{const n=z(o,t);e.setData({results:n})}))})(e,t)}),40),i={title:"Special Character",size:"normal",body:1===o.length?{type:"panel",items:n()}:{type:"tabpanel",tabs:m(o,(e=>({title:e.name,name:e.name,items:n()})))},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{pattern:"",results:z(o[0],"")},onAction:(o,n)=>{"results"===n.name&&(t(e,n.value),o.close())},onTabChange:(e,t)=>{s.set(t.newTabName),a.throttle(e)},onChange:(e,t)=>{t.name===O&&a.throttle(e)}};e.windowManager.open(i).focus(O)};e.add("charmap",(e=>{(e=>{const t=e.options.register,n=e=>a(e)||o(e);t("charmap",{processor:n}),t("charmap_append",{processor:n})})(e);const n=x(e);return((e,t)=>{e.addCommand("mceShowCharmap",(()=>{T(e,t)}))})(e,n),(e=>{e.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:()=>e.execCommand("mceShowCharmap")}),e.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:()=>e.execCommand("mceShowCharmap")})})(e),((e,t)=>{e.ui.registry.addAutocompleter("charmap",{ch:":",columns:"auto",minChars:2,fetch:(e,o)=>new Promise(((o,n)=>{o(z(t,e))})),onAction:(t,o,n)=>{e.selection.setRng(o),e.insertContent(n),t.hide()}})})(e,n[0]),(e=>({getCharMap:()=>x(e),insertChar:o=>{t(e,o)}}))(e)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=r=e,n=(s=String).prototype,n.isPrototypeOf(o)||(null===(a=r.constructor)||void 0===a?void 0:a.name)===s.name)?"string":t;var o,n;var r,s,a})(t)===e,o=e=>t=>typeof t===e,n=t("string"),r=t("array"),s=o("boolean"),a=(c=void 0,e=>c===e);var c;const d=e=>!(e=>null==e)(e),m=o("function"),u=o("number"),g=()=>{},h=e=>()=>e,p=e=>e,f=(e,t)=>e===t;function v(e,...t){return(...o)=>{const n=t.concat(o);return e.apply(null,n)}}const b=h(!1),y=h(!0);class w{constructor(e,t){this.tag=e,this.value=t}static some(e){return new w(!0,e)}static none(){return w.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?w.some(e(this.value)):w.none()}bind(e){return this.tag?e(this.value):w.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:w.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?w.some(e):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const x=Object.keys,S=Object.hasOwnProperty,C=(e,t)=>{const o=x(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}},k=(e,t)=>{const o={};var n;return((e,t,o,n)=>{C(e,((e,r)=>{(t(e,r)?o:n)(e,r)}))})(e,t,(n=o,(e,t)=>{n[t]=e}),g),o},z=e=>((e,t)=>{const o=[];return C(e,((e,n)=>{o.push(t(e,n))})),o})(e,p),O=e=>x(e).length,T=(e,t)=>M(e,t)?w.from(e[t]):w.none(),M=(e,t)=>S.call(e,t),_=(e,t)=>M(e,t)&&void 0!==e[t]&&null!==e[t],D=Array.prototype.indexOf,A=Array.prototype.push,E=(e,t)=>((e,t)=>D.call(e,t))(e,t)>-1,H=(e,t)=>{for(let o=0,n=e.length;o<n;o++){if(t(e[o],o))return!0}return!1},B=(e,t)=>{const o=[];for(let n=0;n<e;n++)o.push(t(n));return o},V=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},R=(e,t)=>{for(let o=0,n=e.length;o<n;o++){t(e[o],o)}},L=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t(r,n)&&o.push(r)}return o},N=(e,t,o)=>(R(e,((e,n)=>{o=t(o,e,n)})),o),I=(e,t)=>((e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t(r,n))return w.some(r);if(o(r,n))break}return w.none()})(e,t,b),F=(e,t)=>(e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!r(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);A.apply(t,e[o])}return t})(V(e,t)),P=(e,t)=>{for(let o=0,n=e.length;o<n;++o){if(!0!==t(e[o],o))return!1}return!0},j=(e,t)=>t>=0&&t<e.length?w.some(e[t]):w.none(),U=(e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return w.none()},W=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},$={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){throw new Error("HTML does not have a single root node")}return W(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return W(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return W(o)},fromDom:W,fromPoint:(e,t,o)=>w.from(e.dom.elementFromPoint(t,o)).map(W)};"undefined"!=typeof window?window:Function("return this;")();const G=e=>e.dom.nodeName.toLowerCase(),q=e=>e.dom.nodeType,K=e=>t=>q(t)===e,X=e=>8===q(e)||"#comment"===G(e),J=K(1),Y=K(3),Z=K(9),Q=K(11),ee=e=>t=>J(t)&&G(t)===e,te=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},oe=e=>1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount,ne=(e,t)=>e.dom===t.dom,re=te,se=e=>{return Z(e)?e:(t=e,$.fromDom(t.dom.ownerDocument));var t},ae=e=>w.from(e.dom.parentNode).map($.fromDom),ie=(e,t)=>{const o=m(t)?t:b;let n=e.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=$.fromDom(e);if(r.push(t),!0===o(t))break;n=e}return r},le=e=>w.from(e.dom.previousSibling).map($.fromDom),ce=e=>w.from(e.dom.nextSibling).map($.fromDom),de=e=>V(e.dom.childNodes,$.fromDom),me=e=>((e,t)=>{const o=e.dom.childNodes;return w.from(o[t]).map($.fromDom)})(e,0),ue=m(Element.prototype.attachShadow)&&m(Node.prototype.getRootNode)?e=>$.fromDom(e.dom.getRootNode()):se,ge=e=>{const t=ue(e);return Q(o=t)&&d(o.dom.host)?w.some(t):w.none();var o},he=e=>$.fromDom(e.dom.host),pe=e=>{const t=Y(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const o=t.ownerDocument;return ge($.fromDom(t)).fold((()=>o.body.contains(t)),(n=pe,r=he,e=>n(r(e))));var n,r},fe=(e,t)=>{let o=[];return R(de(e),(e=>{t(e)&&(o=o.concat([e])),o=o.concat(fe(e,t))})),o},ve=(e,t)=>((e,t)=>L(de(e),t))(e,(e=>te(e,t))),be=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return oe(o)?[]:V(o.querySelectorAll(e),$.fromDom)})(t,e);const ye=(e,t,o)=>{let n=e.dom;const r=m(o)?o:b;for(;n.parentNode;){n=n.parentNode;const e=$.fromDom(n);if(t(e))return w.some(e);if(r(e))break}return w.none()},we=(e,t,o)=>ye(e,(e=>te(e,t)),o),xe=(e,t)=>((e,t)=>I(e.dom.childNodes,(e=>t($.fromDom(e)))).map($.fromDom))(e,(e=>te(e,t))),Se=(e,t)=>((e,t)=>{const o=void 0===t?document:t.dom;return oe(o)?w.none():w.from(o.querySelector(e)).map($.fromDom)})(t,e),Ce=(e,t,o)=>((e,t,o,n,r)=>e(o,n)?w.some(o):m(r)&&r(o)?w.none():t(o,n,r))(((e,t)=>te(e,t)),we,e,t,o),ke=(e,t,o)=>{if(!(n(o)||s(o)||u(o)))throw new Error("Attribute value was not simple");e.setAttribute(t,o+"")},ze=(e,t,o)=>{ke(e.dom,t,o)},Oe=(e,t)=>{const o=e.dom.getAttribute(t);return null===o?void 0:o},Te=(e,t)=>w.from(Oe(e,t)),Me=(e,t)=>{e.dom.removeAttribute(t)},_e=(e,t,o=f)=>e.exists((e=>o(e,t))),De=(e,t,o)=>e.isSome()&&t.isSome()?w.some(o(e.getOrDie(),t.getOrDie())):w.none(),Ae=(e,t)=>((e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t)(e,t,0),Ee=(He=/^\s+|\s+$/g,e=>e.replace(He,""));var He;const Be=e=>e.length>0,Ve=e=>void 0!==e.style&&m(e.style.getPropertyValue),Re=(e,t,o)=>{((e,t,o)=>{if(!n(o))throw new Error("CSS value must be a string: "+o);Ve(e)&&e.style.setProperty(t,o)})(e.dom,t,o)},Le=(e,t)=>{const o=e.dom,n=window.getComputedStyle(o).getPropertyValue(t);return""!==n||pe(e)?n:Ne(o,t)},Ne=(e,t)=>Ve(e)?e.style.getPropertyValue(t):"",Ie=(e,t)=>{const o=e.dom,n=Ne(o,t);return w.from(n).filter((e=>e.length>0))},Fe=(e,t)=>{((e,t)=>{Ve(e)&&e.style.removeProperty(t)})(e.dom,t),_e(Te(e,"style").map(Ee),"")&&Me(e,"style")},Pe=(e,t,o=0)=>Te(e,t).map((e=>parseInt(e,10))).getOr(o),je=(e,t)=>Ue(e,t,y),Ue=(e,t,o)=>F(de(e),(e=>te(e,t)?o(e)?[e]:[]:Ue(e,t,o))),We=["tfoot","thead","tbody","colgroup"],$e=(e,t,o)=>({element:e,rowspan:t,colspan:o}),Ge=(e,t,o)=>({element:e,cells:t,section:o}),qe=(e,t)=>((e,t,o=b)=>o(t)?w.none():E(e,G(t))?w.some(t):we(t,e.join(","),(e=>te(e,"table")||o(e))))(["td","th"],e,t),Ke=(e,t)=>Ce(e,"table",t),Xe=e=>je(e,"tr"),Je=e=>Ke(e).fold(h([]),(e=>ve(e,"colgroup"))),Ye=(e,t)=>V(e,(e=>{if("colgroup"===G(e)){const t=V(te(o=e,"colgroup")?ve(o,"col"):F(Je(o),(e=>ve(e,"col"))),(e=>{const t=Pe(e,"span",1);return $e(e,1,t)}));return Ge(e,t,"colgroup")}{const o=V((e=>je(e,"th,td"))(e),(e=>{const t=Pe(e,"rowspan",1),o=Pe(e,"colspan",1);return $e(e,t,o)}));return Ge(e,o,t(e))}var o})),Ze=e=>ae(e).map((e=>{const t=G(e);return(e=>E(We,e))(t)?t:"tbody"})).getOr("tbody"),Qe=e=>Te(e,"data-snooker-locked-cols").bind((e=>w.from(e.match(/\d+/g)))).map((e=>((e,t)=>{const o={};for(let n=0,r=e.length;n<r;n++){const r=e[n];o[String(r)]=t(r,n)}return o})(e,y))),et=(e,t)=>e+","+t,tt=(e,t)=>{const o=F(e.all,(e=>e.cells));return L(o,t)},ot=e=>{const t={},o=[];var n;const r=(n=e,j(n,0)).map((e=>e.element)).bind(Ke).bind(Qe).getOr({});let s=0,a=0,i=0;const{pass:l,fail:c}=((e,t)=>{const o=[],n=[];for(let r=0,s=e.length;r<s;r++){const s=e[r];(t(s,r)?o:n).push(s)}return{pass:o,fail:n}})(e,(e=>"colgroup"===e.section));R(c,(e=>{const n=[];R(e.cells,(e=>{let o=0;for(;void 0!==t[et(i,o)];)o++;const s=_(r,o.toString()),l=((e,t,o,n,r,s)=>({element:e,rowspan:t,colspan:o,row:n,column:r,isLocked:s}))(e.element,e.rowspan,e.colspan,i,o,s);for(let n=0;n<e.colspan;n++)for(let r=0;r<e.rowspan;r++){const e=o+n,s=et(i+r,e);t[s]=l,a=Math.max(a,e+1)}n.push(l)})),s++,o.push(Ge(e.element,n,e.section)),i++}));const{columns:d,colgroups:m}=(e=>j(e,e.length-1))(l).map((e=>{const t=(e=>{const t={};let o=0;return R(e.cells,(e=>{const n=e.colspan;B(n,(r=>{const s=o+r;t[s]=((e,t,o)=>({element:e,colspan:t,column:o}))(e.element,n,s)})),o+=n})),t})(e),o=((e,t)=>({element:e,columns:t}))(e.element,z(t));return{colgroups:[o],columns:t}})).getOrThunk((()=>({colgroups:[],columns:{}}))),u=((e,t)=>({rows:e,columns:t}))(s,a);return{grid:u,access:t,all:o,columns:d,colgroups:m}},nt=e=>{const t=(e=>{const t=Xe(e),o=[...Je(e),...t];return Ye(o,Ze)})(e);return ot(t)},rt=(e,t,o)=>w.from(e.access[et(t,o)]),st=(e,t,o)=>{const n=tt(e,(e=>o(t,e.element)));return n.length>0?w.some(n[0]):w.none()},at=e=>F(e.all,(e=>e.cells)),it=(e,t)=>w.from(e.columns[t]);var lt=tinymce.util.Tools.resolve("tinymce.util.Tools");const ct=(e,t,o)=>((t,n)=>{for(let r=0;r<n.length;r++){const s=e.getStyle(n[r],o);if(void 0===t&&(t=s),t!==s)return""}return t})(undefined,e.select("td,th",t)),dt=(e,t,o)=>{o&&e.formatter.apply("align"+o,{},t)},mt=(e,t)=>{lt.each("left center right".split(" "),(o=>{e.formatter.remove("align"+o,{},t)}))},ut=(e,t,o)=>{e.dispatch("TableModified",l(i({},o),{table:t}))},gt=(e,t)=>(e=>{const t=parseFloat(e);return isNaN(t)?w.none():w.some(t)})(e).getOr(t),ht=(e,t,o)=>gt(Le(e,t),o),pt=(e,t)=>{const o=e.dom,n=o.getBoundingClientRect().width||o.offsetWidth;return"border-box"===t?n:((e,t,o,n)=>t-ht(e,`padding-${o}`,0)-ht(e,`padding-${n}`,0)-ht(e,`border-${o}-width`,0)-ht(e,`border-${n}-width`,0))(e,n,"left","right")},ft=e=>pt(e,"content-box");var vt=tinymce.util.Tools.resolve("tinymce.Env");const bt=B(5,(e=>{const t=`${e+1}px`;return{title:t,value:t}})),yt=V(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(e=>({title:e,value:e.toLowerCase()}))),wt=e=>t=>t.options.get(e),xt=wt("table_sizing_mode"),St=wt("table_border_widths"),Ct=wt("table_border_styles"),kt=wt("table_default_attributes"),zt=wt("table_cell_advtab"),Ot=wt("table_row_advtab"),Tt=wt("table_advtab"),Mt=wt("table_appearance_options"),_t=wt("table_grid"),Dt=wt("table_style_by_css"),At=wt("table_cell_class_list"),Et=wt("table_row_class_list"),Ht=wt("table_class_list"),Bt=wt("table_toolbar"),Vt=wt("table_background_color_map"),Rt=wt("table_border_color_map"),Lt=e=>"fixed"===xt(e),Nt=e=>"responsive"===xt(e),It=e=>{const t=e.options,o=t.get("table_default_styles");return t.isSet("table_default_styles")?o:((e,t)=>{var o;if(Lt(e)){const n=e.dom,r=null!==(o=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==o?o:e.getBody(),s=ft($.fromDom(r));return l(i({},t),{width:s+"px"})}return Nt(e)?k(t,((e,t)=>"width"!==t)):t})(e,o)},Ft=e=>t=>ne(t,(e=>$.fromDom(e.getBody()))(e)),Pt=e=>/^\d+(\.\d+)?$/.test(e)?e+"px":e,jt=e=>$.fromDom(e.selection.getStart()),Ut=(e,t)=>t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow,Wt=(e,t,o)=>{const n=st(e,t,ne),r=st(e,o,ne);return n.bind((e=>r.map((t=>{return o=e,n=t,r=Math.min(o.row,n.row),s=Math.min(o.column,n.column),a=Math.max(o.row+o.rowspan-1,n.row+n.rowspan-1),i=Math.max(o.column+o.colspan-1,n.column+n.colspan-1),{startRow:r,startCol:s,finishRow:a,finishCol:i};var o,n,r,s,a,i}))))},$t=(e,t,o)=>Wt(e,t,o).bind((t=>((e,t)=>{let o=!0;const n=v(Ut,t);for(let r=t.startRow;r<=t.finishRow;r++)for(let s=t.startCol;s<=t.finishCol;s++)o=o&&rt(e,r,s).exists(n);return o?w.some(t):w.none()})(e,t))),Gt=nt,qt=(e,t)=>{ae(e).each((o=>{o.dom.insertBefore(t.dom,e.dom)}))},Kt=(e,t)=>{ce(e).fold((()=>{ae(e).each((e=>{Jt(e,t)}))}),(e=>{qt(e,t)}))},Xt=(e,t)=>{me(e).fold((()=>{Jt(e,t)}),(o=>{e.dom.insertBefore(t.dom,o.dom)}))},Jt=(e,t)=>{e.dom.appendChild(t.dom)},Yt=(e,t)=>{qt(e,t),Jt(t,e)},Zt=(e,t)=>{R(t,((o,n)=>{const r=0===n?e:t[n-1];Kt(r,o)}))},Qt=(e,t)=>{R(t,(t=>{Jt(e,t)}))},eo=e=>{const t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},to=e=>{const t=de(e);t.length>0&&Zt(e,t),eo(e)},oo=((e,t)=>{const o=t=>e(t)?w.from(t.dom.nodeValue):w.none();return{get:n=>{if(!e(n))throw new Error("Can only get "+t+" value of a "+t+" node");return o(n).getOr("")},getOption:o,set:(o,n)=>{if(!e(o))throw new Error("Can only set raw "+t+" value of a "+t+" node");o.dom.nodeValue=n}}})(Y,"text"),no=e=>oo.get(e),ro=(e,t)=>oo.set(e,t);var so=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];const ao=(e,t,o,n)=>{const r=t(e,o);return s=(o,n)=>{const r=t(e,n);return io(e,o,r)},a=r,((e,t)=>{for(let o=e.length-1;o>=0;o--)t(e[o],o)})(n,((e,t)=>{a=s(a,e,t)})),a;var s,a},io=(e,t,o)=>t.bind((t=>o.filter(v(e.eq,t)))),lo=(e,t,o)=>o.length>0?((e,t,o,n)=>n(e,t,o[0],o.slice(1)))(e,t,o,ao):w.none(),co={up:h({selector:we,closest:Ce,predicate:ye,all:ie}),down:h({selector:be,predicate:fe}),styles:h({get:Le,getRaw:Ie,set:Re,remove:Fe}),attrs:h({get:Oe,set:ze,remove:Me,copyTo:(e,t)=>{((e,t)=>{const o=e.dom;C(t,((e,t)=>{ke(o,t,e)}))})(t,N(e.dom.attributes,((e,t)=>(e[t.name]=t.value,e)),{}))}}),insert:h({before:qt,after:Kt,afterAll:Zt,append:Jt,appendAll:Qt,prepend:Xt,wrap:Yt}),remove:h({unwrap:to,remove:eo}),create:h({nu:$.fromTag,clone:e=>$.fromDom(e.dom.cloneNode(!1)),text:$.fromText}),query:h({comparePosition:(e,t)=>e.dom.compareDocumentPosition(t.dom),prevSibling:le,nextSibling:ce}),property:h({children:de,name:G,parent:ae,document:e=>se(e).dom,isText:Y,isComment:X,isElement:J,isSpecial:e=>{const t=G(e);return E(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:e=>J(e)?Te(e,"lang"):w.none(),getText:no,setText:ro,isBoundary:e=>!!J(e)&&("body"===G(e)||E(so,G(e))),isEmptyTag:e=>!!J(e)&&E(["br","img","hr","input"],G(e)),isNonEditable:e=>J(e)&&"false"===Oe(e,"contenteditable")}),eq:ne,is:re},mo=e=>we(e,"table"),uo=(e,t,o)=>Se(e,t).bind((t=>Se(e,o).bind((e=>{return(o=mo,n=[t,e],lo(co,((e,t)=>o(t)),n)).map((o=>({first:t,last:e,table:o})));var o,n})))),go=(e,t)=>((e,t)=>{const o=be(e,t);return o.length>0?w.some(o):w.none()})(e,t),ho=(e,t,o)=>uo(e,t,o).bind((t=>{const o=t=>ne(e,t),n="thead,tfoot,tbody,table",r=we(t.first,n,o),s=we(t.last,n,o);return r.bind((e=>s.bind((o=>ne(e,o)?((e,t,o)=>{const n=Gt(e);return $t(n,t,o)})(t.table,t.first,t.last):w.none()))))})),po=e=>V(e,$.fromDom),fo="data-mce-selected",vo="data-mce-first-selected",bo="data-mce-last-selected",yo={selected:fo,selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:vo,firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:bo,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},wo=e=>(t,o)=>{const n=G(t),r="col"===n||"colgroup"===n?Ke(s=t).bind((e=>go(e,yo.firstSelectedSelector))).fold(h(s),(e=>e[0])):t;var s;return Ce(r,e,o)},xo=wo("th,td,caption"),So=wo("th,td"),Co=e=>po(e.model.table.getSelectedCells()),ko=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],zo=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Oo=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,To=e=>{return(t=e,o="#",Ae(t,o)?((e,t)=>e.substring(t))(t,o.length):t).toUpperCase();var t,o},Mo=e=>(e=>zo.test(e)||Oo.test(e))(e)?w.some({value:To(e)}):w.none(),_o=e=>{const t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},Do=e=>(e=>({value:e}))(_o(e.red)+_o(e.green)+_o(e.blue)),Ao=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Eo=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Ho=(e,t,o,n)=>({red:e,green:t,blue:o,alpha:n}),Bo=(e,t,o,n)=>{const r=parseInt(e,10),s=parseInt(t,10),a=parseInt(o,10),i=parseFloat(n);return Ho(r,s,a,i)},Vo=e=>{if("transparent"===e)return w.some(Ho(0,0,0,0));const t=Ao.exec(e);if(null!==t)return w.some(Bo(t[1],t[2],t[3],"1"));const o=Eo.exec(e);return null!==o?w.some(Bo(o[1],o[2],o[3],o[4])):w.none()},Ro=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}},Lo=()=>(e=>{const t=Ro(w.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(w.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:e=>{o(),t.set(w.some(e))}}})((e=>e.unbind())),No=(e,t,o)=>n=>{const r=Lo(),s=!Be(o);const a=()=>{const a=Co(e),i=n=>e.formatter.match(t,{value:o},n.dom,s);s?(n.setActive(!H(a,i)),r.set(e.formatter.formatChanged(t,(e=>n.setActive(!e)),!0))):(n.setActive(P(a,i)),r.set(e.formatter.formatChanged(t,n.setActive,!1,{value:o})))};return e.initialized?a():e.on("init",a),r.clear},Io=e=>_(e,"menu"),Fo=e=>V(e,(e=>{const t=e.text||e.title;return Io(e)?{text:t,items:Fo(e.menu)}:{text:t,value:e.value}})),Po=(e,t,o,n)=>V(t,(t=>{const r=t.text||t.title;return Io(t)?{type:"nestedmenuitem",text:r,getSubmenuItems:()=>Po(e,t.menu,o,n)}:{text:r,type:"togglemenuitem",onAction:()=>n(t.value),onSetup:No(e,o,t.value)}})),jo=(e,t)=>o=>{e.execCommand("mceTableApplyCellStyle",!1,{[t]:o})},Uo=e=>F(e,(e=>Io(e)?[l(i({},e),{menu:Uo(e.menu)})]:Be(e.value)?[e]:[])),Wo=(e,t,o,n)=>r=>r(Po(e,t,o,n)),$o=(e,t,o)=>{const n=V(t,(e=>{return{text:e.title,value:"#"+(t=e.value,Mo(t).orThunk((()=>Vo(t).map(Do))).getOrThunk((()=>{const e=document.createElement("canvas");e.height=1,e.width=1;const o=e.getContext("2d");o.clearRect(0,0,e.width,e.height),o.fillStyle="#FFFFFF",o.fillStyle=t,o.fillRect(0,0,1,1);const n=o.getImageData(0,0,1,1).data,r=n[0],s=n[1],a=n[2],i=n[3];return Do(Ho(r,s,a,i))}))).value,type:"choiceitem"};var t}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:n.length>0?n:void 0,allowCustomColors:!1},onAction:t=>{const n="remove"===t.value?"":t.value;e.execCommand("mceTableApplyCellStyle",!1,{[o]:n})}}]},Go=e=>()=>{const t="header"===e.queryCommandValue("mceTableRowType")?"body":"header";e.execCommand("mceTableRowType",!1,{type:t})},qo=e=>()=>{const t="th"===e.queryCommandValue("mceTableColType")?"td":"th";e.execCommand("mceTableColType",!1,{type:t})},Ko=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ko}],Xo=e=>Ko.concat((e=>{const t=Fo(At(e));return t.length>0?w.some({name:"class",type:"listbox",label:"Class",items:t}):w.none()})(e).toArray()),Jo=(e,t)=>{const o=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Fo(Ct(e)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===t?[{name:"borderwidth",type:"input",label:"Border width"}].concat(o):o}},Yo=e=>(t,o)=>{const n=t.dom;return{setAttrib:(t,r)=>{e&&!r||n.setAttrib(o,t,r)},setStyle:(t,r)=>{e&&!r||n.setStyle(o,t,r)},setFormat:(n,r)=>{e&&!r||(""===r?t.formatter.remove(n,{value:null},o,!0):t.formatter.apply(n,{value:r},o))}}},Zo={normal:Yo(!1),ifTruthy:Yo(!0)},Qo=ee("th"),en=(e,t)=>e&&t?"sectionCells":e?"section":"cells",tn=e=>{const t=L(e,(e=>Qo(e.element)));return 0===t.length?w.some("td"):t.length===e.length?w.some("th"):w.none()},on=e=>{const t=V(e,(e=>(e=>{const t="thead"===e.section,o=_e(tn(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||o?{type:"header",subType:en(t,o)}:{type:"body"}})(e).type)),o=E(t,"header"),n=E(t,"footer");if(o||n){const e=E(t,"body");return!o||e||n?o||e||!n?w.none():w.some("footer"):w.some("header")}return w.some("body")},nn=(e,t)=>U(e.all,(e=>I(e.cells,(e=>ne(t,e.element))))),rn=(e,t,o)=>{const n=(e=>{const t=[],o=e=>{t.push(e)};for(let n=0;n<e.length;n++)e[n].each(o);return t})(V(t.selection,(t=>qe(t).bind((t=>nn(e,t))).filter(o))));return r=n.length>0,s=n,r?w.some(s):w.none();var r,s},sn=(e,t)=>rn(e,t,y),an=(e,t)=>P(t,(t=>((e,t)=>nn(e,t).exists((e=>!e.isLocked)))(e,t))),ln=(e,t)=>((e,t)=>t.mergable)(0,t).filter((t=>an(e,t.cells))),cn=(e,t)=>((e,t)=>t.unmergable)(0,t).filter((t=>an(e,t))),dn=(e=>{if(!r(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");const t=[],o={};return R(e,((n,s)=>{const a=x(n);if(1!==a.length)throw new Error("one and only one name per case");const i=a[0],l=n[i];if(void 0!==o[i])throw new Error("duplicate key detected:"+i);if("cata"===i)throw new Error("cannot have a case named cata (sorry)");if(!r(l))throw new Error("case arguments must be an array");t.push(i),o[i]=(...o)=>{const n=o.length;if(n!==l.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+l.length+" ("+l+"), got "+n);return{fold:(...t)=>{if(t.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+t.length);return t[s].apply(null,o)},match:e=>{const n=x(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!P(t,(e=>E(n,e))))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[i].apply(null,o)},log:e=>{}}}})),o})([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]);i({},dn);const mn=(e,t)=>{const o=nt(e);return sn(o,t).bind((e=>{const t=e[e.length-1],n=e[0].row,r=t.row+t.rowspan,s=o.all.slice(n,r);return on(s)})).getOr("")},un=e=>{return Ae(e,"rgb")?Vo(t=e).map(Do).map((e=>"#"+e.value)).getOr(t):e;var t},gn=e=>{const t=$.fromDom(e);return{borderwidth:Ie(t,"border-width").getOr(""),borderstyle:Ie(t,"border-style").getOr(""),bordercolor:Ie(t,"border-color").map(un).getOr(""),backgroundcolor:Ie(t,"background-color").map(un).getOr("")}},hn=e=>{const t=e[0],o=e.slice(1);return R(o,(e=>{R(x(t),(o=>{C(e,((e,n)=>{const r=t[o];""!==r&&o===n&&r!==e&&(t[o]="")}))}))})),t},pn=(e,t,o,n)=>I(e,(e=>!a(o.formatter.matchNode(n,t+e)))).getOr(""),fn=v(pn,["left","center","right"],"align"),vn=v(pn,["top","middle","bottom"],"valign"),bn=e=>Ke($.fromDom(e)).map((t=>{const o={selection:po(e.cells)};return mn(t,o)})).getOr(""),yn=(e,t)=>{const o=nt(e),n=at(o),r=L(n,(e=>H(t,(t=>ne(e.element,t)))));return V(r,(e=>({element:e.element.dom,column:it(o,e.column).map((e=>e.element.dom))})))},wn=(e,t,o)=>{const n=1===t.length;R(t,(t=>{const r=t.element,s=n?Zo.normal(e,r):Zo.ifTruthy(e,r);((e,t,o)=>{e.setAttrib("scope",o.scope),e.setAttrib("class",o.class),e.setStyle("height",Pt(o.height)),t.setStyle("width",Pt(o.width))})(s,t.column.map((t=>n?Zo.normal(e,t):Zo.ifTruthy(e,t))).getOr(s),o),zt(e)&&((e,t)=>{e.setFormat("tablecellbackgroundcolor",t.backgroundcolor),e.setFormat("tablecellbordercolor",t.bordercolor),e.setFormat("tablecellborderstyle",t.borderstyle),e.setFormat("tablecellborderwidth",Pt(t.borderwidth))})(s,o),n&&(mt(e,r),((e,t)=>{lt.each("top middle bottom".split(" "),(o=>{e.formatter.remove("valign"+o,{},t)}))})(e,r)),o.halign&&dt(e,r,o.halign),o.valign&&((e,t,o)=>{o&&e.formatter.apply("valign"+o,{},t)})(e,r,o.valign)}))},xn=(e,t,o,n)=>{const r=n.getData();n.close(),e.undoManager.transact((()=>{((e,t,o,n)=>{const r=k(n,((e,t)=>o[t]!==e));O(r)>0&&t.length>=1&&Ke(t[0]).each((o=>{const s=yn(o,t),a=O(k(r,((e,t)=>"scope"!==t&&"celltype"!==t)))>0,i=M(r,"celltype");(a||M(r,"scope"))&&wn(e,s,n),i&&((e,t)=>{e.execCommand("mceTableCellType",!1,{type:t.celltype,no_events:!0})})(e,n),ut(e,o.dom,{structure:i,style:a})}))})(e,t,o,r),e.focus()}))},Sn=(e,t)=>{const o=Ke(t[0]).map((o=>V(yn(o,t),(t=>((e,t,o,n)=>{const r=e.dom,s=n.getOr(t),a=(e,t)=>r.getStyle(e,t)||r.getAttrib(e,t);return i({width:a(s,"width"),height:a(t,"height"),scope:r.getAttrib(t,"scope"),celltype:(l=t,l.nodeName.toLowerCase()),class:r.getAttrib(t,"class",""),halign:fn(e,t),valign:vn(e,t)},o?gn(t):{});var l})(e,t.element,zt(e),t.column)))));return hn(o.getOrDie())},Cn=e=>{const t=Co(e);if(0===t.length)return;const o=Sn(e,t),n={type:"tabpanel",tabs:[{title:"General",name:"general",items:Xo(e)},Jo(e,"cell")]},r={type:"panel",items:[{type:"grid",columns:2,items:Xo(e)}]};e.windowManager.open({title:"Cell Properties",size:"normal",body:zt(e)?n:r,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o,onSubmit:v(xn,e,t,o)})},kn=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],zn=e=>kn.concat((e=>{const t=Fo(Et(e));return t.length>0?w.some({name:"class",type:"listbox",label:"Class",items:t}):w.none()})(e).toArray()),On=(e,t,o,n)=>{const r=1===t.length;R(t,(t=>{const s=r?Zo.normal(e,t):Zo.ifTruthy(e,t);((e,t)=>{e.setAttrib("class",t.class),e.setStyle("height",Pt(t.height))})(s,o),Ot(e)&&((e,t)=>{e.setStyle("background-color",t.backgroundcolor),e.setStyle("border-color",t.bordercolor),e.setStyle("border-style",t.borderstyle)})(s,o),o.align!==n.align&&(mt(e,t),dt(e,t,o.align))}))},Tn=(e,t,o,n)=>{const r=n.getData();n.close(),e.undoManager.transact((()=>{((e,t,o,n)=>{const r=k(n,((e,t)=>o[t]!==e));if(O(r)>0){const s=M(r,"type"),a=!s||O(r)>1;a&&On(e,t,n,o),s&&((e,t)=>{e.execCommand("mceTableRowType",!1,{type:t.type,no_events:!0})})(e,n),Ke($.fromDom(t[0])).each((t=>ut(e,t.dom,{structure:s,style:a})))}})(e,t,o,r),e.focus()}))},Mn=e=>{const t=((e,t)=>{const o=So(e),n=o.bind((e=>Ke(e))).map((e=>Xe(e)));return De(o,n,((e,o)=>L(o,(o=>H(po(o.dom.cells),(o=>"1"===Oe(o,t)||ne(o,e))))))).getOr([])})(jt(e),yo.selected);if(0===t.length)return;const o=V(t,(t=>((e,t,o)=>{const n=e.dom;return i({height:n.getStyle(t,"height")||n.getAttrib(t,"height"),class:n.getAttrib(t,"class",""),type:bn(t),align:fn(e,t)},o?gn(t):{})})(e,t.dom,Ot(e)))),n=hn(o),r={type:"tabpanel",tabs:[{title:"General",name:"general",items:zn(e)},Jo(e,"row")]},s={type:"panel",items:[{type:"grid",columns:2,items:zn(e)}]};e.windowManager.open({title:"Row Properties",size:"normal",body:Ot(e)?r:s,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:n,onSubmit:v(Tn,e,V(t,(e=>e.dom)),n)})},_n=(e,t,o)=>{const n=o?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],r=Mt(e)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],s=t.length>0?[{type:"listbox",name:"class",label:"Class",items:t}]:[];return n.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(r).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(s)},Dn=(e,t,o,r)=>{if("TD"===t.tagName||"TH"===t.tagName)n(o)?e.setStyle(t,o,r):e.setStyles(t,o);else if(t.children)for(let n=0;n<t.children.length;n++)Dn(e,t.children[n],o,r)},An=(e,t,o,n)=>{const r=e.dom,s=n.getData(),a=k(s,((e,t)=>o[t]!==e));n.close(),""===s.class&&delete s.class,e.undoManager.transact((()=>{if(!t){const o=parseInt(s.cols,10)||1,n=parseInt(s.rows,10)||1;e.execCommand("mceInsertTable",!1,{rows:n,columns:o}),t=So(jt(e),Ft(e)).bind((t=>Ke(t,Ft(e)))).map((e=>e.dom)).getOrUndefined()}if(O(a)>0){((e,t,o)=>{const n=e.dom,r={},s={};var a;if(r.class=o.class,s.height=Pt(o.height),n.getAttrib(t,"width")&&!Dt(e)?r.width=(a=o.width)?a.replace(/px$/,""):"":s.width=Pt(o.width),Dt(e)?(s["border-width"]=Pt(o.border),s["border-spacing"]=Pt(o.cellspacing)):(r.border=o.border,r.cellpadding=o.cellpadding,r.cellspacing=o.cellspacing),Dt(e)&&t.children)for(let i=0;i<t.children.length;i++)Dn(n,t.children[i],{"border-width":Pt(o.border),padding:Pt(o.cellpadding)}),Tt(e)&&Dn(n,t.children[i],{"border-color":o.bordercolor});Tt(e)&&(s["background-color"]=o.backgroundcolor,s["border-color"]=o.bordercolor,s["border-style"]=o.borderstyle),r.style=n.serializeStyle(i(i({},It(e)),s)),n.setAttribs(t,i(i({},kt(e)),r))})(e,t,s);const o=r.select("caption",t)[0];(o&&!s.caption||!o&&s.caption)&&e.execCommand("mceTableToggleCaption"),""===s.align?mt(e,t):dt(e,t,s.align)}if(e.focus(),e.addVisual(),O(a)>0){const o=M(a,"caption"),n=!o||O(a)>1;ut(e,t,{structure:o,style:n})}}))},En=(e,t)=>{const o=e.dom;let n,r=((e,t)=>{const o=It(e),n=kt(e),r=t?{borderstyle:T(o,"border-style").getOr(""),bordercolor:un(T(o,"border-color").getOr("")),backgroundcolor:un(T(o,"background-color").getOr(""))}:{};return i(i(i(i(i(i({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),o),n),r),(()=>{const t=o["border-width"];return Dt(e)&&t?{border:t}:T(n,"border").fold((()=>({})),(e=>({border:e})))})()),(()=>{const e=T(o,"border-spacing").or(T(n,"cellspacing")).fold((()=>({})),(e=>({cellspacing:e}))),t=T(o,"border-padding").or(T(n,"cellpadding")).fold((()=>({})),(e=>({cellpadding:e})));return i(i({},e),t)})())})(e,Tt(e));!1===t?(n=o.getParent(e.selection.getStart(),"table",e.getBody()),n?r=((e,t,o)=>{const n=e.dom,r=Dt(e)?n.getStyle(t,"border-spacing")||n.getAttrib(t,"cellspacing"):n.getAttrib(t,"cellspacing")||n.getStyle(t,"border-spacing"),s=Dt(e)?ct(n,t,"padding")||n.getAttrib(t,"cellpadding"):n.getAttrib(t,"cellpadding")||ct(n,t,"padding");return i({width:n.getStyle(t,"width")||n.getAttrib(t,"width"),height:n.getStyle(t,"height")||n.getAttrib(t,"height"),cellspacing:r,cellpadding:s,border:((t,o)=>{const n=Ie($.fromDom(o),"border-width");return Dt(e)&&n.isSome()?n.getOr(""):t.getAttrib(o,"border")||ct(e.dom,o,"border-width")||ct(e.dom,o,"border")})(n,t),caption:!!n.select("caption",t)[0],class:n.getAttrib(t,"class",""),align:fn(e,t)},o?gn(t):{})})(e,n,Tt(e)):Tt(e)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor="")):(r.cols="1",r.rows="1",Tt(e)&&(r.borderstyle="",r.bordercolor="",r.backgroundcolor=""));const s=Fo(Ht(e));s.length>0&&r.class&&(r.class=r.class.replace(/\s*mce\-item\-table\s*/g,""));const a={type:"grid",columns:2,items:_n(e,s,t)},l=Tt(e)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[a]},Jo(e,"table")]}:{type:"panel",items:[a]};e.windowManager.open({title:"Table Properties",size:"normal",body:l,onSubmit:v(An,e,n,r),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r})},Hn=p,Bn=e=>{const t=(e,t)=>Te(e,t).exists((e=>parseInt(e,10)>1));return e.length>0&&P(e,(e=>t(e,"rowspan")||t(e,"colspan")))?w.some(e):w.none()},Vn=(e,t,o)=>t.length<=1?w.none():ho(e,o.firstSelectedSelector,o.lastSelectedSelector).map((e=>({bounds:e,cells:t}))),Rn=e=>{const t=Ro(w.none()),o=Ro([]);let n=w.none();const r=ee("caption"),s=e=>n.forall((t=>!t[e])),a=()=>xo((e=>$.fromDom(e.selection.getEnd()))(e),Ft(e)),i=()=>xo(jt(e),Ft(e)).bind((t=>De(Ke(t),a().bind(Ke),((o,n)=>{return ne(o,n)?r(t)?w.some({element:s=t,mergable:w.none(),unmergable:w.none(),selection:[s]}):w.some(((e,t,o)=>({element:o,mergable:Vn(t,e,yo),unmergable:Bn(e),selection:Hn(e)}))(Co(e),o,t)):w.none();var s})).bind(p))),l=e=>Ke(e.element).map((t=>{const o=nt(t),n=sn(o,e).getOr([]),r=N(n,((e,t)=>(t.isLocked&&(e.onAny=!0,0===t.column?e.onFirst=!0:t.column+t.colspan>=o.grid.columns&&(e.onLast=!0)),e)),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:ln(o,e).isSome(),unmergeable:cn(o,e).isSome(),locked:r}})),c=()=>{t.set((e=>{let t,o=!1;return(...n)=>(o||(o=!0,t=e.apply(null,n)),t)})(i)()),n=t.get().bind(l),R(o.get(),(e=>e()))},d=e=>(e(),o.set(o.get().concat([e])),()=>{o.set(L(o.get(),(t=>t!==e)))}),m=(e,o)=>d((()=>t.get().fold((()=>{e.setEnabled(!1)}),(t=>{e.setEnabled(!o(t))})))),u=(e,o,n)=>d((()=>t.get().fold((()=>{e.setEnabled(!1),e.setActive(!1)}),(t=>{e.setEnabled(!o(t)),e.setActive(n(t))})))),g=e=>n.exists((t=>t.locked[e])),h=(t,o)=>n=>u(n,(e=>r(e.element)),(()=>e.queryCommandValue(t)===o)),f=h("mceTableRowType","header"),v=h("mceTableColType","th");return e.on("NodeChange ExecCommand TableSelectorChange",c),{onSetupTable:e=>m(e,(e=>!1)),onSetupCellOrRow:e=>m(e,(e=>r(e.element))),onSetupColumn:e=>t=>m(t,(t=>r(t.element)||g(e))),onSetupPasteable:e=>t=>m(t,(t=>r(t.element)||e().isNone())),onSetupPasteableColumn:(e,t)=>o=>m(o,(o=>r(o.element)||e().isNone()||g(t))),onSetupMergeable:e=>m(e,(e=>s("mergeable"))),onSetupUnmergeable:e=>m(e,(e=>s("unmergeable"))),resetTargets:c,onSetupTableWithCaption:t=>u(t,b,(t=>Ke(t.element,Ft(e)).exists((e=>xe(e,"caption").isSome())))),onSetupTableRowHeaders:f,onSetupTableColumnHeaders:v,targets:t.get}};var Ln=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Nn=e=>{var t;const o=null!==(t=Ln.read())&&void 0!==t?t:[];return U(o,(t=>w.from(t.getType(e))))},In=()=>Nn("x-tinymce/dom-table-rows"),Fn=()=>Nn("x-tinymce/dom-table-columns"),Pn=e=>{const t=Rn(e);(e=>{const t=e.options.register;t("table_border_widths",{processor:"object[]",default:bt}),t("table_border_styles",{processor:"object[]",default:yt}),t("table_cell_advtab",{processor:"boolean",default:!0}),t("table_row_advtab",{processor:"boolean",default:!0}),t("table_advtab",{processor:"boolean",default:!0}),t("table_appearance_options",{processor:"boolean",default:!0}),t("table_grid",{processor:"boolean",default:!vt.deviceType.isTouch()}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_cell_class_list",{processor:"object[]",default:[]}),t("table_row_class_list",{processor:"object[]",default:[]}),t("table_class_list",{processor:"object[]",default:[]}),t("table_toolbar",{processor:"string",default:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol"}),t("table_background_color_map",{processor:"object[]",default:[]}),t("table_border_color_map",{processor:"object[]",default:[]})})(e),(e=>{C({mceTableProps:v(En,e,!1),mceTableRowProps:v(Mn,e),mceTableCellProps:v(Cn,e)},((t,o)=>e.addCommand(o,(()=>t())))),e.addCommand("mceInsertTableDialog",(t=>{En(e,!0)}))})(e),((e,t)=>{const o=t=>()=>e.execCommand(t),n=(t,n)=>!!e.queryCommandSupported(n.command)&&(e.ui.registry.addMenuItem(t,l(i({},n),{onAction:m(n.onAction)?n.onAction:o(n.command)})),!0),r=(t,n)=>{e.queryCommandSupported(n.command)&&e.ui.registry.addToggleMenuItem(t,l(i({},n),{onAction:m(n.onAction)?n.onAction:o(n.command)}))},s=t=>{e.execCommand("mceInsertTable",!1,{rows:t.numRows,columns:t.numColumns})},a=[n("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:t.onSetupCellOrRow}),n("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:t.onSetupCellOrRow}),n("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:t.onSetupCellOrRow}),n("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:t.onSetupCellOrRow}),n("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:t.onSetupCellOrRow}),n("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:t.onSetupCellOrRow}),n("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:t.onSetupPasteable(In)}),n("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:t.onSetupPasteable(In)})],c=[n("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:t.onSetupColumn("onFirst")}),n("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:t.onSetupColumn("onLast")}),n("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:t.onSetupColumn("onAny")}),n("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:t.onSetupColumn("onAny")}),n("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:t.onSetupColumn("onAny")}),n("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:t.onSetupPasteableColumn(Fn,"onFirst")}),n("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:t.onSetupPasteableColumn(Fn,"onLast")})],d=[n("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:t.onSetupCellOrRow}),n("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:t.onSetupMergeable}),n("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:t.onSetupUnmergeable})];_t(e)?e.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:s}]}):e.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTableDialog")}),e.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTableDialog")}),n("tableprops",{text:"Table properties",onSetup:t.onSetupTable,command:"mceTableProps"}),n("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:t.onSetupTable,command:"mceTableDelete"}),E(a,!0)&&e.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:h("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),E(c,!0)&&e.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:h("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),E(d,!0)&&e.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:h("tablecellprops tablemergecells tablesplitcells")}),e.ui.registry.addContextMenu("table",{update:()=>(t.resetTargets(),t.targets().fold(h(""),(e=>"caption"===G(e.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable")))});const u=Uo(Ht(e));0!==u.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Po(e,u,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});const g=Uo(At(e));0!==g.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Po(e,g,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Po(e,ko,"tablecellverticalalign",jo(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Po(e,St(e),"tablecellborderwidth",jo(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Po(e,Ct(e),"tablecellborderstyle",jo(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>$o(e,Vt(e),"background-color"),onSetup:t.onSetupCellOrRow}),e.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>$o(e,Rt(e),"border-color"),onSetup:t.onSetupCellOrRow})),r("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Go(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:qo(e),onSetup:t.onSetupTableRowHeaders})})(e,t),((e,t)=>{e.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:e=>e("inserttable | cell row column | advtablesort | tableprops deletetable")});const o=t=>()=>e.execCommand(t),n=(t,n)=>{e.queryCommandSupported(n.command)&&e.ui.registry.addButton(t,l(i({},n),{onAction:m(n.onAction)?n.onAction:o(n.command)}))},r=(t,n)=>{e.queryCommandSupported(n.command)&&e.ui.registry.addToggleButton(t,l(i({},n),{onAction:m(n.onAction)?n.onAction:o(n.command)}))};n("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:t.onSetupTable}),n("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:t.onSetupTable}),n("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:t.onSetupCellOrRow}),n("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:t.onSetupMergeable}),n("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:t.onSetupUnmergeable}),n("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:t.onSetupCellOrRow}),n("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:t.onSetupCellOrRow}),n("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:t.onSetupCellOrRow}),n("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:t.onSetupCellOrRow}),n("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:t.onSetupColumn("onFirst")}),n("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:t.onSetupColumn("onLast")}),n("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:t.onSetupColumn("onAny")}),n("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:t.onSetupCellOrRow}),n("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:t.onSetupCellOrRow}),n("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:t.onSetupPasteable(In)}),n("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:t.onSetupPasteable(In)}),n("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:t.onSetupColumn("onAny")}),n("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:t.onSetupColumn("onAny")}),n("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:t.onSetupPasteableColumn(Fn,"onFirst")}),n("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:t.onSetupPasteableColumn(Fn,"onLast")}),n("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const s=Uo(Ht(e));0!==s.length&&e.queryCommandSupported("mceTableToggleClass")&&e.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Wo(e,s,"tableclass",(t=>e.execCommand("mceTableToggleClass",!1,t))),onSetup:t.onSetupTable});const a=Uo(At(e));0!==a.length&&e.queryCommandSupported("mceTableCellToggleClass")&&e.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Wo(e,a,"tablecellclass",(t=>e.execCommand("mceTableCellToggleClass",!1,t))),onSetup:t.onSetupCellOrRow}),e.queryCommandSupported("mceTableApplyCellStyle")&&(e.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Wo(e,ko,"tablecellverticalalign",jo(e,"vertical-align")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Wo(e,St(e),"tablecellborderwidth",jo(e,"border-width")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Wo(e,Ct(e),"tablecellborderstyle",jo(e,"border-style")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:t=>t($o(e,Vt(e),"background-color")),onSetup:t.onSetupCellOrRow}),e.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:t=>t($o(e,Rt(e),"border-color")),onSetup:t.onSetupCellOrRow})),r("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:t.onSetupTableWithCaption}),r("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Go(e),onSetup:t.onSetupTableRowHeaders}),r("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:qo(e),onSetup:t.onSetupTableColumnHeaders})})(e,t),(e=>{const t=t=>e.dom.is(t,"table")&&e.getBody().contains(t),o=Bt(e);o.length>0&&e.ui.registry.addContextToolbar("table",{predicate:t,items:o,scope:"node",position:"node"})})(e)};e.add("table",Pn)}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=(e,t,o)=>{const n="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(n,!1,!1===o?null:{"list-style-type":o})},o=e=>t=>t.options.get(e),n=o("advlist_number_styles"),r=o("advlist_bullet_styles");var s=tinymce.util.Tools.resolve("tinymce.util.Tools");class a{constructor(e,t){this.tag=e,this.value=t}static some(e){return new a(!0,e)}static none(){return a.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?a.some(e(this.value)):a.none()}bind(e){return this.tag?e(this.value):a.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:a.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return(e=>null==e)(e)?a.none():a.some(e)}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}a.singletonNone=new a(!1);const i=e=>e&&/^(TH|TD)$/.test(e.nodeName),l=(e,t)=>o=>{const n=n=>{o.setActive(((e,t,o)=>{const n=((e,t)=>{for(let o=0;o<e.length;o++)if(t(e[o]))return o;return-1})(t.parents,i),r=-1!==n?t.parents.slice(0,n):t.parents,a=s.grep(r,(e=>t=>t&&/^(OL|UL|DL)$/.test(t.nodeName)&&((e,t)=>e.dom.isChildOf(t,e.getBody()))(e,t))(e));return a.length>0&&a[0].nodeName===o})(e,n,t))};return e.on("NodeChange",n),()=>e.off("NodeChange",n)},c=(e,o,n,r,i,c)=>{e.ui.registry.addSplitButton(o,{tooltip:n,icon:"OL"===i?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:e=>{e(s.map(c,(e=>{const t="OL"===i?"num":"bull",o="disc"===e||"decimal"===e?"default":e,n="default"===e?"":e,r=(e=>e.replace(/\-/g," ").replace(/\b\w/g,(e=>e.toUpperCase())))(e);return{type:"choiceitem",value:n,icon:"list-"+t+"-"+o,text:r}})))},onAction:()=>e.execCommand(r),onItemAction:(o,n)=>{t(e,i,n)},select:t=>{const o=(e=>{const t=e.dom.getParent(e.selection.getNode(),"ol,ul"),o=e.dom.getStyle(t,"listStyleType");return a.from(o)})(e);return o.map((e=>t===e)).getOr(!1)},onSetup:l(e,i)})},d=(e,t,o,n,r,s)=>{s.length>1?c(e,t,o,n,r,s):((e,t,o,n,r,s)=>{e.ui.registry.addToggleButton(t,{active:!1,tooltip:o,icon:"OL"===r?"ordered-list":"unordered-list",onSetup:l(e,r),onAction:()=>e.execCommand(n)})})(e,t,o,n,r)};e.add("advlist",(e=>{e.hasPlugin("lists")&&((e=>{const t=e.options.register;t("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),t("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})})(e),(e=>{d(e,"numlist","Numbered list","InsertOrderedList","OL",n(e)),d(e,"bullist","Bullet list","InsertUnorderedList","UL",r(e))})(e),(e=>{e.addCommand("ApplyUnorderedListStyle",((o,n)=>{t(e,"UL",n["list-style-type"])})),e.addCommand("ApplyOrderedListStyle",((o,n)=>{t(e,"OL",n["list-style-type"])}))})(e))}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager");const t=e=>t=>t.options.get(e),o=t("autolink_pattern"),n=t("link_default_target"),r=t("link_default_protocol"),s=(a="string",e=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=n=e,(r=String).prototype.isPrototypeOf(o)||(null===(s=n.constructor)||void 0===s?void 0:s.name)===r.name)?"string":t;var o,n,r,s})(e)===a);var a;const i=e=>/^[(\[{ \u00a0]$/.test(e),l=e=>3===e.nodeType,c=e=>1===e.nodeType,d=(e,t)=>{if(t<0&&(t=0),l(e)){const o=e.data.length;t>o&&(t=o)}return t},m=(e,t,o)=>{!c(t)||t.hasChildNodes()?e.setStart(t,d(t,o)):e.setStartBefore(t)},u=(e,t,o)=>{!c(t)||t.hasChildNodes()?e.setEnd(t,d(t,o)):e.setEndAfter(t)},g=(e,t)=>{let a,c,d,g,h,p,f;const v=o(e),b=n(e);if(null!==e.dom.getParent(e.selection.getNode(),"a[href]"))return;const y=e.selection.getRng().cloneRange();if(y.startOffset<5){if(h=y.endContainer.previousSibling,!h){if(!y.endContainer.firstChild||!y.endContainer.firstChild.nextSibling)return;h=y.endContainer.firstChild.nextSibling}if(p=h.length,m(y,h,p),u(y,h,p),y.endOffset<5)return;a=y.endOffset,c=h}else{if(c=y.endContainer,!l(c)&&c.firstChild){for(;!l(c)&&c.firstChild;)c=c.firstChild;l(c)&&(m(y,c,0),u(y,c,c.nodeValue.length))}a=1===y.endOffset?2:y.endOffset-1-t}const w=a;do{m(y,c,a>=2?a-2:0),u(y,c,a>=1?a-1:0),a-=1,f=y.toString()}while(!i(f)&&a-2>=0);var x;i(y.toString())?(m(y,c,a),u(y,c,w),a+=1):0===y.startOffset?(m(y,c,0),u(y,c,w)):(m(y,c,a),u(y,c,w)),g=y.toString(),x=g.charAt(g.length-1),/[?!,.;:]/.test(x)&&u(y,c,w-1),g=y.toString().trim();const S=g.match(v),C=r(e);if(S){let t=S[0];((e,t,o)=>""===t||e.length>=t.length&&e.substr(o,o+t.length)===t)(t,"www.",0)?t=C+"://"+t:((e,t)=>-1!==e.indexOf(t))(t,"@")&&!(e=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(e))(t)&&(t="mailto:"+t),d=e.selection.getBookmark(),e.selection.setRng(y),e.getDoc().execCommand("createlink",!1,t),s(b)&&e.dom.setAttrib(e.selection.getNode(),"target",b),e.selection.moveToBookmark(d),e.nodeChanged()}},h=e=>{e.on("keydown",(t=>{if(13===t.keyCode)return(e=>g(e,-1))(e)})),e.on("keypress",(t=>{if(41===t.keyCode||93===t.keyCode||125===t.keyCode)return(e=>g(e,-1))(e)})),e.on("keyup",(t=>{if(32===t.keyCode)return(e=>g(e,0))(e)}))};e.add("autolink",(e=>{(e=>{const t=e.options.register;t("autolink_pattern",{processor:"regexp",default:new RegExp("^"+/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-+~=.,%()\/\w]*[-+~=%()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g.source+"$","i")}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"})})(e),h(e)}))}(),function(){const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const o=e=>({isFullscreen:()=>null!==e.get()}),n=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(o=r=e,n=(s=String).prototype,n.isPrototypeOf(o)||(null===(a=r.constructor)||void 0===a?void 0:a.name)===s.name)?"string":t;var o,n;var r,s,a})(t)===e,r=e=>t=>typeof t===e,s=n("string"),a=n("array"),c=(d=null,e=>d===e);var d;const m=r("boolean"),u=e=>!(e=>null==e)(e),g=r("function"),h=r("number"),p=()=>{},f=e=>()=>e;function v(e,...t){return(...o)=>{const n=t.concat(o);return e.apply(null,n)}}const b=f(!1),y=f(!0);class w{constructor(e,t){this.tag=e,this.value=t}static some(e){return new w(!0,e)}static none(){return w.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?w.some(e(this.value)):w.none()}bind(e){return this.tag?e(this.value):w.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:w.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return u(e)?w.some(e):w.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}w.singletonNone=new w(!1);const x=t=>{const o=e(w.none()),n=()=>o.get().each(t);return{clear:()=>{n(),o.set(w.none())},isSet:()=>o.get().isSome(),get:()=>o.get(),set:e=>{n(),o.set(w.some(e))}}},S=()=>x((e=>e.unbind())),C=Array.prototype.push,k=(e,t)=>{const o=e.length,n=new Array(o);for(let r=0;r<o;r++){const o=e[r];n[r]=t(o,r)}return n},z=(e,t)=>{for(let o=0,n=e.length;o<n;o++){t(e[o],o)}},O=(e,t)=>{const o=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t(r,n)&&o.push(r)}return o},T=(e,t)=>((e,t,o)=>{for(let n=0,r=e.length;n<r;n++){const r=e[n];if(t(r,n))return w.some(r);if(o(r,n))break}return w.none()})(e,t,b),M=(e,t)=>(e=>{const t=[];for(let o=0,n=e.length;o<n;++o){if(!a(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);C.apply(t,e[o])}return t})(k(e,t)),_=e=>((e,t)=>t>=0&&t<e.length?w.some(e[t]):w.none())(e,0),D=Object.keys,A=(e,t)=>-1!==e.indexOf(t),E=e=>void 0!==e.style&&g(e.style.getPropertyValue),H=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},B={fromHtml:(e,t)=>{const o=(t||document).createElement("div");if(o.innerHTML=e,!o.hasChildNodes()||o.childNodes.length>1){throw new Error("HTML does not have a single root node")}return H(o.childNodes[0])},fromTag:(e,t)=>{const o=(t||document).createElement(e);return H(o)},fromText:(e,t)=>{const o=(t||document).createTextNode(e);return H(o)},fromDom:H,fromPoint:(e,t,o)=>w.from(e.dom.elementFromPoint(t,o)).map(H)};"undefined"!=typeof window?window:Function("return this;")();const V=e=>t=>(e=>e.dom.nodeType)(t)===e,R=V(1),L=V(3),N=V(9),I=V(11),F=(e,t)=>{const o=e.dom;if(1!==o.nodeType)return!1;{const e=o;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},P=e=>B.fromDom(e.dom.ownerDocument),j=e=>(e=>w.from(e.dom.parentNode).map(B.fromDom))(e).map(U).map((t=>O(t,(t=>{return o=t,!(e.dom===o.dom);var o})))).getOr([]),U=e=>k(e.dom.childNodes,B.fromDom),W=g(Element.prototype.attachShadow)&&g(Node.prototype.getRootNode),$=f(W),G=W?e=>B.fromDom(e.dom.getRootNode()):e=>N(e)?e:P(e),q=e=>{const t=G(e);return I(o=t)&&u(o.dom.host)?w.some(t):w.none();var o},K=e=>B.fromDom(e.dom.host),X=e=>u(e.dom.shadowRoot),J=e=>{const t=L(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const o=t.ownerDocument;return q(B.fromDom(t)).fold((()=>o.body.contains(t)),(n=J,r=K,e=>n(r(e))));var n,r},Y=(e,t,o)=>{((e,t,o)=>{if(!(s(o)||m(o)||h(o)))throw new Error("Attribute value was not simple");e.setAttribute(t,o+"")})(e.dom,t,o)},Z=(e,t)=>{const o=e.dom.getAttribute(t);return null===o?void 0:o},Q=(e,t)=>{e.dom.removeAttribute(t)},ee=(e,t)=>{const o=e.dom;((e,t)=>{const o=D(e);for(let n=0,r=o.length;n<r;n++){const r=o[n];t(e[r],r)}})(t,((e,t)=>{((e,t,o)=>{if(!s(o))throw new Error("CSS value must be a string: "+o);E(e)&&e.style.setProperty(t,o)})(o,t,e)}))},te=(e,t)=>E(e)?e.style.getPropertyValue(t):"",oe=e=>{const t=B.fromDom((e=>{if($()&&u(e.target)){const t=B.fromDom(e.target);if(R(t)&&X(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return _(t)}}return w.from(e.target)})(e).getOr(e.target)),o=()=>e.stopPropagation(),n=()=>e.preventDefault(),r=(s=n,a=o,(...e)=>s(a.apply(null,e)));var s,a;return((e,t,o,n,r,s,a)=>({target:e,x:t,y:o,stop:n,prevent:r,kill:s,raw:a}))(t,e.clientX,e.clientY,o,n,r,e)},ne=(e,t,o,n,r)=>{const s=((e,t)=>o=>{e(o)&&t(oe(o))})(o,n);return e.dom.addEventListener(t,s,r),{unbind:v(re,e,t,s,r)}},re=(e,t,o,n)=>{e.dom.removeEventListener(t,o,n)},se=y,ae=(e,t,o)=>((e,t,o,n)=>ne(e,t,o,n,!1))(e,t,se,o),ie=()=>le(0,0),le=(e,t)=>({major:e,minor:t}),ce={nu:le,detect:(e,t)=>{const o=String(t).toLowerCase();return 0===e.length?ie():((e,t)=>{const o=((e,t)=>{for(let o=0;o<e.length;o++){const n=e[o];if(n.test(t))return n}})(e,t);if(!o)return{major:0,minor:0};const n=e=>Number(t.replace(o,"$"+e));return le(n(1),n(2))})(e,o)},unknown:ie},de=(e,t)=>((e,t)=>{for(let o=0;o<e.length;o++){const n=t(e[o],o);if(n.isSome())return n}return w.none()})(t.brands,(t=>{const o=t.brand.toLowerCase();return T(e,(e=>{var t;return o===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:ce.nu(parseInt(t.version,10),0)})))})),me=(e,t)=>{const o=String(t).toLowerCase();return T(e,(e=>e.search(o)))},ue=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ge=e=>t=>A(t,e),he=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>A(e,"edge/")&&A(e,"chrome")&&A(e,"safari")&&A(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ue],search:e=>A(e,"chrome")&&!A(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>A(e,"msie")||A(e,"trident")},{name:"Opera",versionRegexes:[ue,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ge("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ge("firefox")},{name:"Safari",versionRegexes:[ue,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(A(e,"safari")||A(e,"mobile/"))&&A(e,"applewebkit")}],pe=[{name:"Windows",search:ge("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>A(e,"iphone")||A(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ge("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ge("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ge("linux"),versionRegexes:[]},{name:"Solaris",search:ge("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ge("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ge("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],fe={browsers:f(he),oses:f(pe)},ve="Edge",be="Chromium",ye="Opera",we="Firefox",xe="Safari",Se=e=>{const t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isEdge:n(ve),isChromium:n(be),isIE:n("IE"),isOpera:n(ye),isFirefox:n(we),isSafari:n(xe)}},Ce={unknown:()=>Se({current:void 0,version:ce.unknown()}),nu:Se,edge:f(ve),chromium:f(be),ie:f("IE"),opera:f(ye),firefox:f(we),safari:f(xe)},ke="Windows",ze="Android",Oe="Linux",Te="macOS",Me="Solaris",_e="FreeBSD",De="ChromeOS",Ae=e=>{const t=e.current,o=e.version,n=e=>()=>t===e;return{current:t,version:o,isWindows:n(ke),isiOS:n("iOS"),isAndroid:n(ze),isMacOS:n(Te),isLinux:n(Oe),isSolaris:n(Me),isFreeBSD:n(_e),isChromeOS:n(De)}},Ee={unknown:()=>Ae({current:void 0,version:ce.unknown()}),nu:Ae,windows:f(ke),ios:f("iOS"),android:f(ze),linux:f(Oe),macos:f(Te),solaris:f(Me),freebsd:f(_e),chromeos:f(De)},He=(e,t,o)=>{const n=fe.browsers(),r=fe.oses(),s=t.bind((e=>de(n,e))).orThunk((()=>((e,t)=>me(e,t).map((e=>{const o=ce.detect(e.versionRegexes,t);return{current:e.name,version:o}})))(n,e))).fold(Ce.unknown,Ce.nu),a=((e,t)=>me(e,t).map((e=>{const o=ce.detect(e.versionRegexes,t);return{current:e.name,version:o}})))(r,e).fold(Ee.unknown,Ee.nu),i=((e,t,o,n)=>{const r=e.isiOS()&&!0===/ipad/i.test(o),s=e.isiOS()&&!r,a=e.isiOS()||e.isAndroid(),i=a||n("(pointer:coarse)"),l=r||!s&&a&&n("(min-device-width:768px)"),c=s||a&&!l,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(o),m=!c&&!l&&!d;return{isiPad:f(r),isiPhone:f(s),isTablet:f(l),isPhone:f(c),isTouch:f(i),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:f(d),isDesktop:f(m)}})(a,s,e,o);return{browser:s,os:a,deviceType:i}},Be=e=>window.matchMedia(e).matches;let Ve=(e=>{let t,o=!1;return(...n)=>(o||(o=!0,t=e.apply(null,n)),t)})((()=>He(navigator.userAgent,w.from(navigator.userAgentData),Be)));const Re=(e,t)=>({left:e,top:t,translate:(o,n)=>Re(e+o,t+n)}),Le=Re,Ne=e=>{const t=void 0===e?window:e;return Ve().browser.isFirefox()?w.none():w.from(t.visualViewport)},Ie=(e,t,o,n)=>({x:e,y:t,width:o,height:n,right:e+o,bottom:t+n}),Fe=e=>{const t=void 0===e?window:e,o=t.document,n=(e=>{const t=void 0!==e?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,n=t.body.scrollTop||t.documentElement.scrollTop;return Le(o,n)})(B.fromDom(o));return Ne(t).fold((()=>{const e=t.document.documentElement,o=e.clientWidth,r=e.clientHeight;return Ie(n.left,n.top,o,r)}),(e=>Ie(Math.max(e.pageLeft,n.left),Math.max(e.pageTop,n.top),e.width,e.height)))},Pe=(e,t,o)=>Ne(o).map((o=>{const n=e=>t(oe(e));return o.addEventListener(e,n),{unbind:()=>o.removeEventListener(e,n)}})).getOrThunk((()=>({unbind:p})));var je=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ue=tinymce.util.Tools.resolve("tinymce.Env");const We=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t})},$e=(Ge="fullscreen_native",e=>e.options.get(Ge));var Ge;const qe=e=>{const t=B.fromDom(e.getElement());return q(t).map(K).getOrThunk((()=>(e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return B.fromDom(t)})(P(t))))},Ke=e=>{return e.dom===(void 0!==(t=P(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null);var t},Xe=(e,t,o)=>O(((e,t)=>{const o=g(t)?t:b;let n=e.dom;const r=[];for(;null!==n.parentNode&&void 0!==n.parentNode;){const e=n.parentNode,t=B.fromDom(e);if(r.push(t),!0===o(t))break;n=e}return r})(e,o),t),Je=e=>((e,t)=>{const o=void 0===t?document:t.dom;return 1!==(n=o).nodeType&&9!==n.nodeType&&11!==n.nodeType||0===n.childElementCount?[]:k(o.querySelectorAll(e),B.fromDom);var n})(e),Ye=(e,t)=>((e,t)=>O(j(e),t))(e,(e=>F(e,t))),Ze="data-ephox-mobile-fullscreen-style",Qe="position:absolute!important;",et="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",tt=Ue.os.isAndroid(),ot=e=>{const t=((e,t)=>{const o=e.dom,n=window.getComputedStyle(o).getPropertyValue(t);return""!==n||J(e)?n:te(o,t)})(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"},nt=(e,t,o)=>{const n=t=>o=>{const n=Z(o,"style"),r=void 0===n?"no-styles":n.trim();r!==t&&(Y(o,Ze,r),ee(o,e.parseStyle(t)))},r=(s="*",Xe(t,(e=>F(e,s)),a));var s,a;const i=M(r,(e=>Ye(e,"*:not(.tox-silver-sink)"))),l=ot(o);z(i,n("display:none!important;")),z(r,n(Qe+et+l));n((!0===tt?"":Qe)+et+l)(t)},rt=je.DOM,st=Ne().fold((()=>({bind:p,unbind:p})),(e=>{const t=(()=>{const e=x(p);return l(i({},e),{on:t=>e.get().each(t)})})(),o=S(),n=S(),r=((e,t)=>{let o=null;return{cancel:()=>{c(o)||(clearTimeout(o),o=null)},throttle:(...n)=>{c(o)&&(o=setTimeout((()=>{o=null,e.apply(null,n)}),t))}}})((()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((()=>{t.on((t=>ee(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})))}))}),50);return{bind:e=>{t.set(e),r.throttle(),o.set(Pe("resize",r.throttle)),n.set(Pe("scroll",r.throttle))},unbind:()=>{t.on((()=>{o.clear(),n.clear()})),t.clear()}}})),at=(e,t)=>{const o=document.body,n=document.documentElement,r=e.getContainer(),s=B.fromDom(r),a=qe(e),i=t.get(),l=B.fromDom(e.getBody()),c=Ue.deviceType.isTouch(),d=r.style,m=e.iframeElement.style,u=e=>{e(o,"tox-fullscreen"),e(n,"tox-fullscreen"),e(r,"tox-fullscreen"),q(s).map((e=>K(e).dom)).each((t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")}))},g=()=>{c&&(e=>{const t=Je("["+Ze+"]");z(t,(t=>{const o=Z(t,Ze);"no-styles"!==o?ee(t,e.parseStyle(o)):Q(t,"style"),Q(t,Ze)}))})(e.dom),u(rt.removeClass),st.unbind(),w.from(t.get()).each((e=>e.fullscreenChangeHandler.unbind()))};if(i)i.fullscreenChangeHandler.unbind(),$e(e)&&Ke(a)&&(e=>{const t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()})(P(a)),m.width=i.iframeWidth,m.height=i.iframeHeight,d.width=i.containerWidth,d.height=i.containerHeight,d.top=i.containerTop,d.left=i.containerLeft,g(),h=i.scrollPos,window.scrollTo(h.x,h.y),t.set(null),We(e,!1),e.off("remove",g);else{const o=ae(P(a),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(o=>{$e(e)&&(Ke(a)||null===t.get()||at(e,t))})),n={scrollPos:Fe(window),containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:m.width,iframeHeight:m.height,fullscreenChangeHandler:o};c&&nt(e.dom,s,l),m.width=m.height="100%",d.width=d.height="",u(rt.addClass),st.bind(s),e.on("remove",g),t.set(n),$e(e)&&(e=>{const t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()})(a),We(e,!0)}var h},it=(e,t)=>o=>{o.setActive(null!==t.get());const n=e=>o.setActive(e.state);return e.on("FullscreenStateChanged",n),()=>e.off("FullscreenStateChanged",n)};t.add("fullscreen",(t=>{const n=e(null);return t.inline||((e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(t),((e,t)=>{e.addCommand("mceFullScreen",(()=>{at(e,t)}))})(t,n),((e,t)=>{const o=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:o,onSetup:it(e,t)}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:o,onSetup:it(e,t)})})(t,n),t.addShortcut("Meta+Shift+F","","mceFullScreen")),o(n)}))}(),function(){var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),o=tinymce.util.Tools.resolve("tinymce.util.Tools");const n=e=>t=>t.options.get(e),r=n("content_style"),s=n("content_css_cors"),a=n("body_class"),i=n("body_id"),l=e=>{const n=(e=>{var n;let l="";const c=e.dom.encode,d=null!==(n=r(e))&&void 0!==n?n:"";l+='<base href="'+c(e.documentBaseURI.getURI())+'">';const m=s(e)?' crossorigin="anonymous"':"";o.each(e.contentCSS,(t=>{l+='<link type="text/css" rel="stylesheet" href="'+c(e.documentBaseURI.toAbsolute(t))+'"'+m+">"})),d&&(l+='<style type="text/css">'+d+"</style>");const u=i(e),g=a(e),h='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(t.os.isMacOS()||t.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",p=e.getBody().dir,f=p?' dir="'+c(p)+'"':"";return"<!DOCTYPE html><html><head>"+l+'</head><body id="'+c(u)+'" class="mce-content-body '+c(g)+'"'+f+">"+e.getContent()+h+"</body></html>"})(e);e.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:n}}).focus("close")};e.add("preview",(e=>{(e=>{e.addCommand("mcePreview",(()=>{l(e)}))})(e),(e=>{const t=()=>e.execCommand("mcePreview");e.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:t}),e.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:t})})(e)}))}();const ae=m({props:{modelValue:{default:""},max:{default:2}},emits:["update:modelValue"],setup(e,{expose:t,emit:o}){const n=e,r=g([]);window.tinymce.baseURL="/tinymce";const s={selector:"#tinymce",height:500,width:"100%",language_url:"/tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"/tinymce/skins/ui/oxide",plugins:"advlist autolink link image lists charmap table fullscreen preview",menubar:!1,toolbar:"| styleselect | fontsizeselect | forecolor backcolor bold italic underline strikethrough link image | code undo redo restoredraft | fontselect | cut copy paste pastetext | alignleft aligncenter alignright alignjustify outdent indent | bullist numlist | blockquote subscript superscript removeformat | table media charmap emoticons hr pagebreak insertdatetime print preview | fullscreen | bdmap indent2em lineheight axupimgs",fontsize_formats:"12px 14px 16px 18px 20px 22px 24px 28px 32px 36px 48px 56px 72px",font_formats:"='';='';='';='';='';='';='';Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings",placeholder:"",statusbar:!1,images_upload_handler:(e,t)=>new Promise(((t,o)=>{const s=e.blob();if(s){if(s.size/1024/1024>n.max)return void o(`${n.max}M`);const a=URL.createObjectURL(s);return r.value.push({blobUrl:a,fileObj:s,fileName:e.filename()}),void t(a)}o("")}))};N.init({});const a=w({get:()=>n.modelValue,set:e=>{o("update:modelValue",e)}});return t({clearImgs:()=>{r.value.forEach((e=>{URL.revokeObjectURL(e.blobUrl)}))},upImages:async()=>{const e=a.value,t=/src=[\'\"]?(blob:[^\'\"]*)[\'\"]?/gi,o=e.match(/<img [^>]*src=['"]blob:([^'"]+)[^>]*>/gi);let n=e;if(o){let e=0;const s=async a=>{let i='scr=""',l="";a.replace(t,(function(e,t){return l=t,e}));const c=r.value.findIndex((e=>e.blobUrl==l));if(c>-1){const e=await I({site:"official_img"});if(1==e.status){const t=r.value[c],o=t.fileName.substring(t.fileName.lastIndexOf(".")),n=new FormData,s={key:e.body.dir+"/"+e.body.uuid+o,OSSAccessKeyId:e.body.accessid,success_action_status:"200",policy:e.body.policy,signature:e.body.signature};for(const[e,r]of Object.entries(s))n.append(e,r);n.append("file",t.fileObj);200==(await F({url:e.body.host,method:"post",headers:{"Content-Type":"multipart/form-data;"},data:n})).status&&(i='src="'+e.body.host+"/"+e.body.dir+"/"+e.body.uuid+o+'"')}}const d=a.replace(t,i);n=n.replace(a,d),e<o.length-1&&(e++,o[e]&&await s(o[e]))};o[e]&&await s(o[e]),a.value=n}}}),(e,t)=>(x(),S(C(se),{id:"tinymce",modelValue:C(a),"onUpdate:modelValue":t[0]||(t[0]=e=>k(a)?a.value=e:null),init:s},null,8,["modelValue"]))}});const ie=e=>(E("data-v-7965d36d"),e=e(),H(),e),le={class:"article_add"},ce={class:"addform"},de={class:"fjend btns"},me=A(""),ue=A(""),ge={class:"form_content"},he=ie((()=>O("div",{class:"up_cover_txt"},"",-1))),pe={class:"upload fcs"},fe={class:"upbox"},ve=["src"],be={key:1,class:"fleximg fc upbox_noimg"},ye=ie((()=>O("div",null,[
A(""),
O("span",null,"")],-1))),we=ie((()=>O("div",{class:"img_tip flex"}," JPGPNG JPEG2M",-1))),xe=ie((()=>O("div",{class:"up_cover_txt"},"",-1))),Se={class:"up_cover_txt flexl"},Ce=A("  "),ke={class:"fcs content_tip"},ze=ie((()=>O("span",null,"",-1)));var Oe=P(m({setup(e){const t=j(),o=B(),n=V(),r=o.query.id;r&&W({id:r}).then((e=>{s.value=e.body,e.body.thumb_url&&(c.value="")}));const s=g({thumb_url:"",title:"",content:"",status:1}),a=g(),c=g("none"),d={thumb_url:[{validator:(e,t,o)=>{switch(c.value){case"size":o(new Error("2M"));break;case"type":o(new Error(" .JPG.PNG .JPEG "));break;case"none":o(new Error(""));break;default:o()}},trigger:"change"}],title:[{required:!0,message:"5~30",trigger:"blur"},{min:5,max:30,message:" 5 ~ 30 ",trigger:"blur"}],content:[{required:!0,message:"",trigger:"blur"}]},m=g(!1),u=g(),h=g(),p=[".jpg",".png",".jpeg",".JPG",".PNG",".JPEG"],f=g(""),v=(e,t)=>{f.value=e.name.substring(e.name.lastIndexOf(".")),p.indexOf(f.value)<0?(c.value="type",a.value.validateField("thumb_url",(()=>null))):e.size&&e.size/1024/1024>2?(c.value="size",a.value.validateField("thumb_url",(()=>null))):(c.value="",h.value=e.url,a.value.clearValidate("thumb_url"))},b=e=>{u.value.clearFiles(),u.value.handleStart(e[0])},y=(e,t)=>{h.value="",S()},w=(e,t,o)=>{h.value="",s.value.thumb_url="",u.value.clearFiles(),U("")},S=async()=>{const e=r?await $(l(i({},s.value),{id:r})):await G(s.value);m.value=!1,1==e.status&&(t.setKeepList([]),n.back())},C=g(""),k=g({}),A=g(),E=async e=>{s.value.status=e,a.value.validate((async(e,t)=>{if(!e)return!1;m.value=!0,await A.value.upImages(),A.value.clearImgs(),h.value||S(),I({site:"cms_article"}).then((e=>{1===e.status?(C.value=e.body.host,k.value={key:e.body.dir+"/"+e.body.uuid+f.value,OSSAccessKeyId:e.body.accessid,success_action_status:200,policy:e.body.policy,signature:e.body.signature},s.value.thumb_url=e.body.host+"/"+e.body.dir+"/"+e.body.uuid+f.value,u.value.submit()):U("")}))}))};return(e,t)=>{const o=R("el-button"),n=R("KzIcon"),r=R("el-upload"),i=R("el-form-item"),l=R("el-input"),c=R("el-form"),g=L("loading");return x(),z("div",le,[O("div",ce,[O("div",de,[T(o,{onClick:t[0]||(t[0]=e=>E(1))},{default:M((()=>[me])),_:1}),T(o,{type:"primary",onClick:t[1]||(t[1]=e=>E(2))},{default:M((()=>[ue])),_:1})]),_((x(),z("div",ge,[T(c,{ref_key:"aFormRef",ref:a,model:s.value,rules:d,size:"large",onSubmit:t[4]||(t[4]=D((()=>{}),["prevent"]))},{default:M((()=>[T(i,{prop:"thumb_url",class:"up_cover"},{default:M((()=>[he,O("div",pe,[T(r,{ref_key:"upload",ref:u,action:C.value,"auto-upload":!1,limit:1,multiple:!1,"show-file-list":!1,data:k.value,"list-type":"picture","on-change":v,"on-exceed":b,"on-success":y,"on-error":w,accept:".jpg,.png,.jpeg,.JPG,.PNG,.JPEG",class:"flex"},{default:M((()=>[O("div",fe,[h.value||s.value.thumb_url?(x(),z("img",{key:0,src:h.value||s.value.thumb_url,class:"title_img",alt:""},null,8,ve)):(x(),z("div",be,[T(n,{href:"#icon-shangchuan",size:"32px"}),ye]))])])),_:1},8,["action","data"]),we])])),_:1}),T(i,{prop:"title",class:"up_cover"},{default:M((()=>[xe,T(l,{modelValue:s.value.title,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value.title=e),placeholder:"5~30"},null,8,["modelValue"])])),_:1}),T(i,{prop:"content",class:"up_cover"},{default:M((()=>[O("div",Se,[Ce,O("div",ke,[T(n,{href:"#icon-zhuyi",size:"14px"}),ze])]),T(ae,{ref_key:"editRef",ref:A,modelValue:s.value.content,"onUpdate:modelValue":t[3]||(t[3]=e=>s.value.content=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),[[g,m.value]])])])}}}),[["__scopeId","data-v-7965d36d"]]);export{Oe as default};
