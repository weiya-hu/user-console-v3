var e=Object.defineProperty,a=Object.defineProperties,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(a,o,s)=>o in a?e(a,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[o]=s;import{_ as i}from"./logo-white.2ea4ed8e.js";import{_ as n,a as m}from"./login_unselect.c17c67f8.js";import{L as c}from"./KzLoginInput.e8d311b4.js";import{_ as u,m as d,a as g,b as v,e as f,q as p,o as b,E as _,l as y}from"./index.20de6183.js";import{f as w}from"./date.23847c74.js";import{H as j,g as h,o as x,I as V,J as k,B as O,a2 as I,a as U,w as C,c as P,a0 as q,av as T,aw as B,a1 as D,b as M}from"./vue.fa004e33.js";import"./login_down.c04ab7d4.js";import"./areaNum.1f3b05a6.js";import"./debounce.d07373a2.js";import"./tinymce.50e98bcc.js";const R=e=>(T("data-v-325f5ccc"),e=e(),B(),e),E={class:"register"},L={class:"register_main"},S=R((()=>k("div",{class:"fleximg logo_img"},[
k("img",{src:i})],-1))),$={class:"register_content"},z=R((()=>k("div",{class:"register_content_title fleximg"},"手机号绑定",-1))),F={class:"register_content_main"},H={class:"login_userinfo"},J={class:"fleximg header_img"},K=["src"],N={class:"nickname"},Y={class:"fleximg user_agree_img"},Z={key:0,src:n},A={key:1,src:m},G={class:"user_agree_txt"},Q=D(" 我已阅读并同意");var W=u(j({setup(e){const i=d(),n=h(!1),m=h(),u=g("url"),j=g("headimgurl")||"@/assets/images/login_header.png",T=g("nickname"),B=h(!1),D=h({acode:"86",invite_code:sessionStorage.getItem("inviteCode")||void 0}),R=h({mobile:[{required:!0,message:"电话号码不能为空",trigger:"blur"},{validator:v,trigger:"blur"}],sms:[{required:!0,message:"验证码不能为空",trigger:"blur"}],captcha:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}),W=e=>{e.preventDefault(),m.value.validate((async e=>{if(e){if(!n.value)return void f("请阅读并同意《康洲数智用户须知》");const e=(m=((e,a)=>{for(var o in a||(a={}))t.call(a,o)&&r(e,o,a[o]);if(s)for(var o of s(a))l.call(a,o)&&r(e,o,a[o]);return e})({},D.value),c={acode:"+"+D.value.acode,type:3},a(m,o(c))),{status:d,body:g,message:v,errno:j}=await p(e);d&&(b("绑定成功"),setTimeout((()=>{window.location.href=u?decodeURIComponent(u):"//"+i.state.yxtUrl.offical}),500)),!d&&(10200===j&&_.confirm(`您的账户已于${w(new Date(g.time),"yyyy年MM月dd日 hh:mm:ss")}，在IP:${g.ip}登录，如非本人操作请尽快修改密码！`,"登录提醒",{confirmButtonText:"强制登录",cancelButtonText:"取消",customClass:"force_login"}).then((async()=>{(await y()).status&&setTimeout((()=>{window.location.href=u?decodeURIComponent(u):"//"+i.state.yxtUrl.offical}),500)})),(g>=3||"captcha: 不能为空"===v)&&(B.value=!0))}var m,c}))};return(e,a)=>{const o=M("el-form-item"),s=M("el-form");return x(),V("div",E,[k("div",L,[S,k("div",$,[z,k("div",F,[k("div",H,[k("div",J,[k("img",{src:O(j)},null,8,K)]),k("div",N,I(O(T)),1)]),U(s,{ref_key:"loginFormRef",ref:m,model:D.value,rules:R.value},{default:C((()=>[U(c,{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),name:"mobile","form-name":"mobile"},null,8,["modelValue"]),B.value?(x(),P(c,{key:0,modelValue:D.value,"onUpdate:modelValue":a[1]||(a[1]=e=>D.value=e),name:"captcha","form-name":"captcha"},null,8,["modelValue"])):q("",!0),U(c,{modelValue:D.value,"onUpdate:modelValue":a[2]||(a[2]=e=>D.value=e),name:"mobileYZM","form-name":"sms",type:"login"},null,8,["modelValue"]),U(c,{modelValue:D.value,"onUpdate:modelValue":a[3]||(a[3]=e=>D.value=e),name:"invite_code","form-name":"invite_code"},null,8,["modelValue"]),U(o,null,{default:C((()=>[k("button",{class:"submit_button",type:"submit",onClick:a[4]||(a[4]=e=>W(e))}," 免费注册 ")])),_:1}),k("div",{class:"flexl user_agree",onClick:a[6]||(a[6]=e=>n.value=!n.value)},[k("div",Y,[n.value?(x(),V("img",Z)):(x(),V("img",A))]),k("div",G,[Q,k("span",{onClick:a[5]||(a[5]=e=>(e.stopPropagation(),void window.open(window.location.origin+"/useragreement","_blank")))},"《康洲数智用户须知》")])])])),_:1},8,["model","rules"])])])])])}}}),[["__scopeId","data-v-325f5ccc"]]);export{W as default};
