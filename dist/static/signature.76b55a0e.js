import{K as e}from"./KzEmpty.cf970ba3.js";import{f as a}from"./date.23847c74.js";import{K as l}from"./KzDialog.579e968a.js";import{c as t,d as s,e as o}from"./message.05333019.js";import{K as i}from"./KzPage.dd3597d0.js";import{_ as n,E as r}from"./index.e45ab2da.js";import{H as d,g as u,o as m,I as c,J as p,a as f,w as v,a2 as _,B as y,av as b,aw as g,a1 as h,b as w}from"./vue.fa004e33.js";import"./kzkf.70bb183f.js";import"./tinymce.50e98bcc.js";const j={class:"send_list"},x={class:"flexb send_list_top"},z=(e=>(b("data-v-63ac476e"),e=e(),g(),e))((()=>p("div",null,"签名管理",-1))),k={class:"flexr"},K=h(" 新建  "),V={class:"dmp_table"},C={class:"fcs"},B={class:"fcs"},U=h("删除");var E=n(d({setup(n){const d=u(),b=u(!1),g=u(),h=u(1),E=u(10),I=u(0),D=u({name:""}),M=u({name:[{required:!0,message:"请输入签名",trigger:"change"},{validator:(e,a,l)=>{a.length<2?l(new Error("签名字数需在2~10之间")):l()},trigger:"blur"}]}),T=async()=>{const e={current:h.value,size:E.value},{status:a,body:l}=await t(e);a&&(d.value=l.records,I.value=l.total)};T();const q=()=>{g.value.validate((async(e,a)=>{if(e){const{status:e}=await s(D.value);e&&(b.value=!1,T())}}))};return(t,s)=>{const n=w("KzIcon"),u=w("el-button"),H=w("el-table-column"),J=w("el-link"),P=w("el-table"),R=w("el-input"),S=w("el-form-item"),A=w("el-form");return m(),c("div",j,[p("div",x,[z,p("div",k,[f(u,{type:"primary",onClick:s[0]||(s[0]=e=>b.value=!0)},{default:v((()=>[f(n,{href:"#icon-tianjia",size:"14px",color:"white",class:"add_need_icon"}),K])),_:1})])]),p("div",V,[f(P,{data:d.value,style:{width:"100%"}},{empty:v((()=>[f(e)])),default:v((()=>[f(H,{label:"签名","min-width":"130"},{default:v((({row:e})=>[p("div",C,"【"+_(e.name)+"】",1)])),_:1}),f(H,{property:"applicant",label:"申请人","min-width":"120"}),f(H,{property:"create_time",label:"申请日期","min-width":"120"},{default:v((({row:e})=>[p("div",null,_(y(a)(new Date(e.create_time),"yyyy-MM-dd")),1)])),_:1}),f(H,{label:"操作",fixed:"right",width:"150"},{default:v((({row:e})=>[p("div",B,[f(J,{type:"primary",onClick:a=>(e=>{r.confirm("是否确认删除签名："+e.name,"操作提示",{showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"确认"}).then((async()=>{const{status:a}=await o({id:e.id});a&&T()})).catch((()=>{}))})(e)},{default:v((()=>[U])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),f(i,{page:h.value,"onUpdate:page":s[1]||(s[1]=e=>h.value=e),size:E.value,"onUpdate:size":s[2]||(s[2]=e=>E.value=e),total:I.value,onChange:s[3]||(s[3]=e=>T())},null,8,["page","size","total"])]),f(l,{modelValue:b.value,"onUpdate:modelValue":s[5]||(s[5]=e=>b.value=e),width:"470px",title:"新建签名",onSure:q},{default:v((()=>[f(A,{ref_key:"formRef",ref:g,model:D.value,rules:M.value},{default:v((()=>[f(S,{label:"签名标题",prop:"name"},{default:v((()=>[f(R,{modelValue:D.value.name,"onUpdate:modelValue":s[4]||(s[4]=e=>D.value.name=e),placeholder:"请输入签名",maxlength:10,minlength:2},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-63ac476e"]]);export{E as default};
