var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,r=(a,s,o)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o;import{L as i,_ as n}from"./KzLoginInput.3df3baa2.js";import{_ as m,a as c}from"./login_unselect.c17c67f8.js";import{_ as u,m as d,g,a as f,e as v,q as p,o as b,E as _,l as y}from"./index.0bf61828.js";import{f as w}from"./date.8b6fbc66.js";import{H as j,g as h,o as x,I as V,J as k,B as O,a2 as I,a as U,w as C,c as P,a0 as q,av as T,aw as B,a1 as D,b as M}from"./vue.a94c4214.js";import"./areaNum.1f3b05a6.js";import"./debounce.0e1bcf9d.js";import"./tinymce.a8dd01a6.js";const R=e=>(T("data-v-325f5ccc"),e=e(),B(),e),E={class:"register"},L={class:"register_main"},S=R((()=>k("div",{class:"fleximg logo_img"},[
k("img",{src:n})],-1))),$={class:"register_content"},z=R((()=>k("div",{class:"register_content_title fleximg"},"手机号绑定",-1))),F={class:"register_content_main"},H={class:"login_userinfo"},J={class:"fleximg header_img"},K=["src"],N={class:"nickname"},Y={class:"fleximg user_agree_img"},Z={key:0,src:m},A={key:1,src:c},G={class:"user_agree_txt"},Q=D(" 我已阅读并同意");var W=u(j({setup(e){const n=d(),m=h(!1),c=h(),u=g("url"),j=g("headimgurl")||"@/assets/images/login_header.png",T=g("nickname"),B=h(!1),D=h({acode:"86",invite_code:sessionStorage.getItem("inviteCode")||void 0}),R=h({mobile:[{required:!0,message:"电话号码不能为空",trigger:"blur"},{validator:f,trigger:"blur"}],sms:[{required:!0,message:"验证码不能为空",trigger:"blur"}],captcha:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}),W=e=>{e.preventDefault(),c.value.validate((async e=>{if(e){if(!m.value)return void v("请阅读并同意《康洲数智用户须知》");const e=(i=((e,a)=>{for(var s in a||(a={}))t.call(a,s)&&r(e,s,a[s]);if(o)for(var s of o(a))l.call(a,s)&&r(e,s,a[s]);return e})({},D.value),c={acode:"+"+D.value.acode,type:3},a(i,s(c))),{status:d,body:g,message:f,errno:j}=await p(e);d&&(b("绑定成功"),setTimeout((()=>{window.location.href=u?decodeURIComponent(u):"//"+n.state.yxtUrl.offical}),500)),!d&&(10200===j&&_.confirm(`您的账户已于${w(new Date(g.time),"yyyy年MM月dd日 hh:mm:ss")}，在IP:${g.ip}登录，如非本人操作请尽快修改密码！`,"登录提醒",{confirmButtonText:"强制登录",cancelButtonText:"取消",customClass:"force_login"}).then((async()=>{(await y()).status&&setTimeout((()=>{window.location.href=u?decodeURIComponent(u):"//"+n.state.yxtUrl.offical}),500)})),(g>=3||"captcha: 不能为空"===f)&&(B.value=!0))}var i,c}))};return(e,a)=>{const s=M("el-form-item"),o=M("el-form");return x(),V("div",E,[k("div",L,[S,k("div",$,[z,k("div",F,[k("div",H,[k("div",J,[k("img",{src:O(j)},null,8,K)]),k("div",N,I(O(T)),1)]),U(o,{ref_key:"loginFormRef",ref:c,model:D.value,rules:R.value},{default:C((()=>[U(i,{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),name:"mobile","form-name":"mobile"},null,8,["modelValue"]),B.value?(x(),P(i,{key:0,modelValue:D.value,"onUpdate:modelValue":a[1]||(a[1]=e=>D.value=e),name:"captcha","form-name":"captcha"},null,8,["modelValue"])):q("",!0),U(i,{modelValue:D.value,"onUpdate:modelValue":a[2]||(a[2]=e=>D.value=e),name:"mobileYZM","form-name":"sms",type:"login"},null,8,["modelValue"]),U(i,{modelValue:D.value,"onUpdate:modelValue":a[3]||(a[3]=e=>D.value=e),name:"invite_code","form-name":"invite_code"},null,8,["modelValue"]),U(s,null,{default:C((()=>[k("button",{class:"submit_button",type:"submit",onClick:a[4]||(a[4]=e=>W(e))}," 免费注册 ")])),_:1}),k("div",{class:"flexl user_agree",onClick:a[6]||(a[6]=e=>m.value=!m.value)},[k("div",Y,[m.value?(x(),V("img",Z)):(x(),V("img",A))]),k("div",G,[Q,k("span",{onClick:a[5]||(a[5]=e=>(e.stopPropagation(),void window.open(window.location.origin+"/useragreement","_blank")))},"《康洲数智用户须知》")])])])),_:1},8,["model","rules"])])])])])}}}),[["__scopeId","data-v-325f5ccc"]]);export{W as default};
