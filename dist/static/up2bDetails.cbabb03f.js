import{K as e}from"./KzTopBtns.d8c0a7fe.js";import{K as a}from"./KzDmpTitle.5be6dd26.js";import{K as t}from"./KzEmpty.e30b69b6.js";import{K as s}from"./KzPage.d586fb1f.js";import{_ as l,m as o,O as p,P as r}from"./index.81e0e33e.js";import{H as d,u as i,g as n,_ as c,o as u,I as y,J as b,a as m,B as v,w as f,a2 as _,ay as g,b as h,ae as w}from"./vue.fa004e33.js";import{g as z,b as j,s as K}from"./myData.e1a5f904.js";import"./KzDialog.00bbba98.js";import"./kzkf.83b11867.js";import"./tinymce.50e98bcc.js";const k={class:"kz_card my_up2b_page dmp_page"},x={class:"fsc mb20"},B={class:"dmp_table"},D={style:{width:"100px"}},H={style:{width:"100px"}},S={class:"els"},T={style:{width:"100px"}},q={class:"els"};var C=l(d({setup(l){const d=o(),C=i((()=>d.state.addressHash)),I=i((()=>d.state.typeHash)),P=i((()=>d.state.companyType)),R=g();R.query.id;const U=n([]),E=n(0),J=n(10),L=n(1),O=n(!1),A=async()=>{O.value=!0;const e={current:L.value,size:J.value,id:R.query.id},{status:a,body:t}=await j(e);O.value=!1,a&&(E.value=t.total,U.value=t.records)};A();const F=n([]),G=e=>{F.value=e.map((e=>e.id))},M=n(),N=n(),Q=i((()=>!F.value.length)),V=async()=>{N.value.setLoading(!0);const e=await K({list:F.value,type:1});N.value.close(e.message),F.value=[],M.value.clearSelection()};return(l,o)=>{const d=h("el-table-column"),i=h("el-tooltip"),n=h("el-table"),g=w("loading");return c((u(),y("div",k,[b("div",x,[m(a,{total:E.value},null,8,["total"]),m(e,{ref_key:"topBtnRef",ref:N,type:"sync",syncbtn:"","sync-api":v(z),"sync-disabled":v(Q),onSync:V},null,8,["sync-api","sync-disabled"])]),b("div",B,[m(n,{ref_key:"tableRef",ref:M,data:U.value,height:"100%",onSelectionChange:G},{empty:f((()=>[m(t)])),default:f((()=>[m(d,{type:"selection",width:"50"}),m(d,{property:"id",label:"序号"}),m(d,{property:"name",label:"企业名称"}),m(d,{property:"contact",label:"联系人"}),m(d,{property:"mobiles",label:"联系方式"}),m(d,{property:"telephone",label:"固定电话"}),m(d,{property:"industry_id",label:"行业"},{default:f((e=>[b("div",null,_(v(p)(e.row.industry_id.split(","),v(I),"last")),1)])),_:1}),m(d,{property:"city",label:"地区"},{default:f((({row:e})=>[m(i,{effect:"dark",placement:"top"},{content:f((()=>[b("div",D,_(v(p)(v(r)(e.province,e.city,e.district),v(C))),1)])),default:f((()=>[b("div",null,_(v(p)(v(r)(e.province,e.city,e.district),v(C))),1)])),_:2},1024)])),_:1}),m(d,{property:"address",label:"详细地址"},{default:f((({row:e})=>[m(i,{effect:"dark",placement:"top"},{content:f((()=>[b("div",H,_(e.address),1)])),default:f((()=>[b("div",S,_(e.address),1)])),_:2},1024)])),_:1}),m(d,{property:"company_type",label:"企业类型"},{default:f((e=>{var a;return[b("div",null,_(null==(a=v(P).find((a=>a.id===e.row.company_type)))?void 0:a.name),1)]})),_:1}),m(d,{property:"code",label:"统一社会信用代码"}),m(d,{property:"url",label:"企业官网"}),m(d,{property:"business_scope",label:"经营范围"},{default:f((({row:e})=>[m(i,{effect:"dark",placement:"top"},{content:f((()=>[b("div",T,_(e.business_scope),1)])),default:f((()=>[b("div",q,_(e.business_scope),1)])),_:2},1024)])),_:1})])),_:1},8,["data"])]),m(s,{page:L.value,"onUpdate:page":o[0]||(o[0]=e=>L.value=e),size:J.value,"onUpdate:size":o[1]||(o[1]=e=>J.value=e),total:E.value,onChange:A},null,8,["page","size","total"])])),[[g,O.value]])}}}),[["__scopeId","data-v-1b6bba15"]]);export{C as default};
