var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,u=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s;import{H as o,u as d,b as m,o as i,I as c,J as n,a2 as v,a as p,c as f,w as g,a0 as b,B as _,a1 as y,g as V,j as w,_ as h,$ as j,P as k,aa as O,av as I,aw as P,ax as S}from"./vue.fa004e33.js";import{_ as x,Z as z,a1 as T,b as U,o as q}from"./index.e8eb8543.js";import{a as B}from"./areaNum.1f3b05a6.js";import{s as C,k as D}from"./myinfo.0c169060.js";import"./tinymce.50e98bcc.js";const R={class:"rz_dialog_hll"},$=["model"],E={class:"card_title"},F={class:"fcc fc imgs"},H=["src"],J={class:"fcc msg"},N={class:"fcc msgTwo"},Z={class:"fcc"},A=y("重新认证");var G=x(o({props:{reSubmit:{type:Boolean},u_type:null,modelValue:{type:Boolean},img:{default:""},img_small:{default:""},msg:{default:""},msgTwo:{default:""}},emits:["update:modelValue","redo"],setup(e,{emit:a}){const l=e,s=d({get:()=>l.modelValue,set:e=>{a("update:modelValue",e)}}),r=()=>{a("redo")};return(a,l)=>{const t=m("el-button");return i(),c("div",R,[n("div",{class:"kz_card identific",model:_(s)},[n("div",E,v("user"==e.u_type?"实名认证":"认证信息"),1),n("div",F,[n("img",{src:e.img,alt:""},null,8,H),p(z,{href:e.img_small,size:"24px",class:"pic"},null,8,["href"])]),n("div",J,v(e.msg),1),n("div",N,v(e.msgTwo),1),n("div",Z,[e.reSubmit?(i(),f(t,{key:0,type:"primary",onClick:r},{default:g((()=>[A])),_:1})):b("",!0)])],8,$)])}}}),[["__scopeId","data-v-d2f40d82"]]);const K={class:"real_name kz_card"},L=(e=>(I("data-v-14e1f9a2"),e=e(),P(),e))((()=>n("div",{class:"card_title"},"实名认证",-1))),M={class:"card_body fcc"},Q={class:"fcs f1"},W=y("提交认证");var X=x(o({setup(e){const o=S(),d=V(!0),b=V(!1),I=V(""),P=V(""),x=V(""),z=V(""),R=V(1),$=V(),E=V({mobile:"",acode:"86",sms:"",real_name:"",id_card:""}),F=w({real_name:[{required:!0,message:"请输入真实姓名！",trigger:"blur"}],id_card:[{required:!0,message:"请输入个人身份证号",trigger:"blur"},{validator:T,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号！",trigger:"blur"},{validator:U,trigger:"blur"}],sms:[{required:!0,message:"请输入验证码！",trigger:"blur"}]}),H=V(0),J=()=>{$.value.validateField("mobile",(async e=>{e&&(H.value=120,(()=>{const e=setInterval((()=>{H.value>0?H.value--:(clearInterval(e),H.value=0,localStorage.removeItem("changePsssTime"))}),1e3)})(),localStorage.setItem("changePsssTime",(new Date).getTime().toString()),await C({mobile:E.value.mobile,acode:"+"+E.value.acode}))}))},N=()=>{$.value.validate((async e=>{if(e){const e=(d=((e,a)=>{for(var l in a||(a={}))r.call(a,l)&&u(e,l,a[l]);if(s)for(var l of s(a))t.call(a,l)&&u(e,l,a[l]);return e})({},E.value),m={acode:"+"+E.value.acode},a(d,l(m)));1===(await D(e)).status?(o.replace("/manage/user/myinfo"),q("恭喜你，实名认证已通过！")):(R.value=2,b.value=!0,I.value="/static/user.f484e765.png",P.value="#icon-renzhengshibai",x.value="很遗憾，你的实名认证未通过！",z.value="请检查姓名与身份证号码是否有误，更正后再试")}var d,m}))};return(e,a)=>{const l=m("el-input"),s=m("el-form-item"),r=m("el-option"),t=m("el-select"),u=m("el-button"),o=m("el-form");return i(),c("div",null,[h(n("div",K,[L,n("div",M,[p(o,{ref_key:"realRef",ref:$,model:E.value,"label-position":"right",size:"large","label-width":"100px",rules:_(F)},{default:g((()=>[p(s,{label:"真实姓名",prop:"real_name"},{default:g((()=>[p(l,{modelValue:E.value.real_name,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value.real_name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(s,{label:"身份证号码",prop:"id_card"},{default:g((()=>[p(l,{modelValue:E.value.id_card,"onUpdate:modelValue":a[1]||(a[1]=e=>E.value.id_card=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(s,{label:"手机号码",prop:"mobile"},{default:g((()=>[p(l,{modelValue:E.value.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>E.value.mobile=e),placeholder:"请输入手机号"},{prepend:g((()=>[p(t,{modelValue:E.value.acode,"onUpdate:modelValue":a[2]||(a[2]=e=>E.value.acode=e),style:{width:"80px"}},{default:g((()=>[(i(!0),c(k,null,O(_(B),((e,a)=>(i(),f(r,{key:a,label:"+"+e.value,value:e.value},{default:g((()=>[y(v(e.name+" +"+e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),p(s,{label:"验证码",prop:"sms"},{default:g((()=>[n("div",Q,[p(l,{modelValue:E.value.sms,"onUpdate:modelValue":a[4]||(a[4]=e=>E.value.sms=e),placeholder:"请输入验证码",class:"sms_ipt"},null,8,["modelValue"]),p(u,{class:"bdc_btn",disabled:H.value>0,onClick:J},{default:g((()=>[y(v(0===H.value?"获取验证码":H.value+"S后重新获取"),1)])),_:1},8,["disabled"])])])),_:1}),p(s,null,{default:g((()=>[p(u,{type:"primary",class:"f1 mt20",onClick:N},{default:g((()=>[W])),_:1})])),_:1})])),_:1},8,["model","rules"])])],512),[[j,1===R.value]]),h(p(G,{modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=e=>d.value=e),u_type:"user","re-submit":b.value,img:I.value,img_small:P.value,msg:x.value,"msg-two":z.value,onRedo:a[6]||(a[6]=a=>e.$router.replace("/manage/user/myinfo"))},null,8,["modelValue","re-submit","img","img_small","msg","msg-two"]),[[j,2===R.value]])])}}}),[["__scopeId","data-v-14e1f9a2"]]);export{X as default};
