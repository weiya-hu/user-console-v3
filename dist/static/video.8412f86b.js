var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,u=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{f as i}from"./date.23847c74.js";import{K as d}from"./KzEmpty.01dcebe6.js";import{K as r}from"./KzPage.a22dbf56.js";import{K as n}from"./KzDialog.d64f45a3.js";import{K as c}from"./KzUpload.32a62374.js";import{_ as v,U as m,o as p,e as f,T as _}from"./index.2739bd6f.js";import{v as y,m as b,n as w,o as k}from"./myWork.76487691.js";import{H as g,g as h,o as C,I as V,J as j,a as x,w as z,a2 as U,B as O,W as K,_ as P,c as I,a0 as D,av as S,aw as E,a1 as M,b as W,ae as A}from"./vue.fa004e33.js";import"./kzkf.83b11867.js";import"./tinymce.50e98bcc.js";const B=e=>(S("data-v-ea9c8110"),e=e(),E(),e),H={class:"m_video"},J={class:"article_top flexb"},N=B((()=>j("div",null,"图片库",-1))),T=M("新建"),q={class:"dmp_table"},F=["src","onClick"],G={class:"els"},L={class:"fcs"},Q={class:"els"},R={key:0,class:"fcs"},X=M("修改名称"),Y=B((()=>j("div",{class:"line"},null,-1))),Z=M("删除"),$=B((()=>j("div",{class:"line"},null,-1))),ee=M("拒绝原因"),ae={key:1,class:"fcs"},le=M("修改名称"),te=B((()=>j("div",{class:"line"},null,-1))),se=M("删除"),oe=B((()=>j("div",{class:"line"},null,-1))),ue=M("查看"),ie={class:"add_img_content"},de={class:"fcs btns fjend"},re=M("取消"),ne=M("提交"),ce={class:"flex fjend"},ve=M("确定"),me=["src"],pe=g((fe=((e,a)=>{for(var l in a||(a={}))s.call(a,l)&&u(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&u(e,l,a[l]);return e})({},{name:"我的作品库-视频库"}),a(fe,l({setup(e){const a=h(1),l=h(0),t=h(10),s=h([]),o=async()=>{const e=await y({size:t.value,current:a.value});1==e.status&&(s.value=e.body.records,l.value=e.body.total)};o();const u=()=>{o()},v=h([]),g=e=>{v.value=e},S=h(""),E=h(!1),M=e=>{S.value=e,E.value=!0},B=async()=>{1==(await b({id:S.value})).status&&o(),E.value=!1},pe=h(!1),fe=h(""),_e=e=>{fe.value=e,pe.value=!0},ye=h(!1),be=h(""),we=h(!1),ke=h(!1),ge=[".mp4"],he=h(),Ce=()=>{je.value="",he.value.clear(),we.value=!1,ke.value=!1},Ve=()=>{ke.value=!0,he.value.submit()},je=h(""),xe=e=>{},ze=async e=>{const a=je.value.split(".").pop(),l=je.value.substring(0,je.value.indexOf(a)-1);1==(await w({thumb_url:e,source_name:l})).status&&(p("上传成功"),Ce(),o())},Ue=e=>{f(e,0),ke.value=!1},Oe=e=>{ke.value?_().then((()=>{he.value.doAbort(),e()})).catch((()=>{})):e()},Ke=h(!1),Pe=h(""),Ie=h(""),De=(e,a)=>{Pe.value=e,Ie.value=a,Ke.value=!0},Se=async()=>{const{status:e}=await k({id:Pe.value,source_name:Ie.value});1==e&&(Ke.value=!1,o())};return(e,o)=>{const v=W("KzIcon"),p=W("el-button"),f=W("el-table-column"),_=W("el-link"),y=W("el-table"),b=W("el-dialog"),w=W("el-input"),k=W("el-form-item"),h=W("el-form"),S=A("loading");return C(),V("div",H,[j("div",J,[N,j("div",null,[x(p,{type:"primary",class:"add_need_btn",onClick:o[0]||(o[0]=e=>we.value=!0)},{default:z((()=>[x(v,{href:"#icon-tianjia",size:"14px",color:"white",class:"add_need_icon"}),T])),_:1})])]),j("div",q,[x(y,{data:s.value,style:{width:"100%"},onSelectionChange:g},{empty:z((()=>[x(d)])),default:z((()=>[x(f,{type:"selection",width:"50"}),x(f,{property:"id",label:"ID","min-width":"120"}),x(f,{property:"video",label:"视频","min-width":"100"},{default:z((({row:e})=>[j("video",{src:e.video_url,alt:"",class:"firstimg lookhover",onClick:a=>_e(e.video_url)},null,8,F)])),_:1}),x(f,{property:"source_name",label:"视频名","min-width":"160"},{default:z((({row:e})=>[j("div",G,U(e.source_name),1)])),_:1}),x(f,{property:"create_time",label:"创建日期","min-width":"110"},{default:z((({row:e})=>[j("div",null,U(O(i)(new Date(e.create_time),"yyyy-MM-dd")),1)])),_:1}),x(f,{property:"status",label:"状态","min-width":"120"},{default:z((({row:e})=>[j("div",L,[j("div",{class:K(["status_dot",O(m)(e.status).className])},null,2),j("div",null,U(O(m)(e.status).text),1)])])),_:1}),x(f,{property:"user_name",label:"创作人","min-width":"100"},{default:z((({row:e})=>[j("div",Q,U(e.user_name),1)])),_:1}),x(f,{label:"操作",fixed:"right",width:"240"},{default:z((({row:e})=>[4==e.status?(C(),V("div",R,[x(_,{type:"primary",onClick:a=>De(e.id,e.source_name)},{default:z((()=>[X])),_:2},1032,["onClick"]),Y,x(_,{type:"primary",onClick:a=>M(e.id)},{default:z((()=>[Z])),_:2},1032,["onClick"]),$,x(_,{type:"primary",onClick:()=>{be.value=e.fail_reason,ye.value=!0}},{default:z((()=>[ee])),_:2},1032,["onClick"])])):(C(),V("div",ae,[x(_,{type:"primary",onClick:a=>De(e.id,e.source_name)},{default:z((()=>[le])),_:2},1032,["onClick"]),te,x(_,{type:"primary",onClick:a=>M(e.id)},{default:z((()=>[se])),_:2},1032,["onClick"]),oe,x(_,{type:"primary",onClick:a=>_e(e.video_url)},{default:z((()=>[ue])),_:2},1032,["onClick"])]))])),_:1})])),_:1},8,["data"])]),x(r,{page:a.value,"onUpdate:page":o[1]||(o[1]=e=>a.value=e),size:t.value,"onUpdate:size":o[2]||(o[2]=e=>t.value=e),total:l.value,onChange:u},null,8,["page","size","total"]),x(n,{modelValue:E.value,"onUpdate:modelValue":o[3]||(o[3]=e=>E.value=e),msg:"确认删除这条数据吗?",onSure:B},null,8,["modelValue"]),x(n,{modelValue:ye.value,"onUpdate:modelValue":o[4]||(o[4]=e=>ye.value=e),msg:be.value,title:"拒绝原因",btn:1},null,8,["modelValue","msg"]),x(b,{modelValue:we.value,"onUpdate:modelValue":o[6]||(o[6]=e=>we.value=e),title:"上传视频",width:"400px","custom-class":"upimgs","before-close":Oe,onClose:Ce},{default:z((()=>[P((C(),V("div",ie,[x(c,{ref_key:"upload",ref:he,modelValue:je.value,"onUpdate:modelValue":o[5]||(o[5]=e=>je.value=e),type:"video","max-size":200,"exname-list":ge,msg:"视频尺寸：宽高16:9或9:16；<br/>不超过200M；<br/>支持"+ge.join("、")+"格式",site:"cms_video",onError:Ue,onSuccess:ze,onChange:xe},null,8,["modelValue","msg"]),j("div",de,[x(p,{onClick:Ce},{default:z((()=>[re])),_:1}),he.value?(C(),I(p,{key:0,type:"primary",disabled:!je.value,onClick:Ve},{default:z((()=>[ne])),_:1},8,["disabled"])):D("",!0)])])),[[S,ke.value]])])),_:1},8,["modelValue"]),x(b,{modelValue:Ke.value,"onUpdate:modelValue":o[8]||(o[8]=e=>Ke.value=e),title:"修改名称",width:"380px"},{default:z((()=>[x(h,null,{default:z((()=>[x(k,{label:"输入名称"},{default:z((()=>[x(w,{modelValue:Ie.value,"onUpdate:modelValue":o[7]||(o[7]=e=>Ie.value=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1})])),_:1}),j("div",ce,[x(p,{type:"primary",disabled:!Ie.value,onClick:Se},{default:z((()=>[ve])),_:1},8,["disabled"])])])),_:1},8,["modelValue"]),x(b,{modelValue:pe.value,"onUpdate:modelValue":o[9]||(o[9]=e=>pe.value=e),title:"查看视频",fullscreen:"","custom-class":"videobox",onClose:o[10]||(o[10]=e=>fe.value="")},{default:z((()=>[j("video",{src:fe.value,controls:"",class:"show_video"},null,8,me)])),_:1},8,["modelValue"])])}}}))));var fe,_e=v(pe,[["__scopeId","data-v-ea9c8110"]]);export{_e as default};
