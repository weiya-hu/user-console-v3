import{K as e}from"./KzDmpTitle.6f4a029f.js";import{K as a}from"./KzPage.4cc4cb8e.js";import{K as t}from"./KzEmpty.21ade687.js";import{f as l}from"./date.23847c74.js";import{m as s,S as r,T as o,U as i,_ as u}from"./index.743440f4.js";import{H as d,u as n,g as p,b as c,o as v,I as y,a as f,w as m,J as b,a2 as _,B as g,X as h,ay as w,ae as z,_ as K}from"./vue.fa004e33.js";import{K as j}from"./KzTopBtns.fa143eba.js";import{g as L,s as x}from"./findC.35f3f774.js";const H=["innerHTML"],I=d({props:{data:null,oheight:{default:120}},emits:["select"],setup(e,{expose:a,emit:u}){const d=s(),w=n((()=>d.state.typeHash)),z=n((()=>d.state.addressHash)),K=p([]),j=e=>{K.value=e.map((e=>e.id))},L=p();return a({selIdList:K,clear:()=>{K.value=[],L.value.clearSelection()}}),(a,s)=>{const u=c("el-table-column"),d=c("el-table");return v(),y("div",{class:"dmp_table user_table",style:h({height:`calc( 100% - ${e.oheight}px )`})},[f(d,{ref_key:"tableRef",ref:L,data:e.data,style:{width:"100%"},height:"100%",onSelectionChange:j},{empty:m((()=>[f(t)])),default:m((()=>[f(u,{type:"selection",width:"50"}),f(u,{property:"name",label:"姓名"}),f(u,{property:"sex",label:"性别"},{default:m((e=>[b("div",null,_(0==e.row.sex?"未知":1==e.row.sex?"男":"女"),1)])),_:1}),f(u,{property:"mobiles",label:"联系方式"},{default:m((e=>[b("div",{innerHTML:e.row.mobiles},null,8,H)])),_:1}),f(u,{property:"email",label:"邮箱"}),f(u,{property:"type",label:"从事行业"},{default:m((e=>[b("div",null,_(g(r)(e.row.industry_id.split(","),g(w),"last")),1)])),_:1}),f(u,{label:"地区"},{default:m((e=>[b("div",null,_(g(r)(g(o)(e.row.province,e.row.city,e.row.district),g(z))),1)])),_:1}),f(u,{property:"source",label:"来源"},{default:m((e=>[b("div",null,_(g(i)(e.row.source)),1)])),_:1}),f(u,{property:"update_time",label:"创建时间"},{default:m((e=>[b("div",null,_(g(l)(new Date(Number(e.row.update_time)),"yyyy-MM-dd")),1)])),_:1})])),_:1},8,["data"])],4)}}});const T={class:"user_data_details kz_card dmp_page"},k={class:"fsc mb20"};var M=u(d({props:{getListApi:null},setup(t){const l=t,s=p([]),r=p(0),o=p(1),i=p(50),u=p(!1),d=w(),c=()=>{u.value=!0,l.getListApi({size:i.value,current:o.value,did:d.query.id}).then((e=>{1==e.status&&(r.value=e.body.total,s.value=e.body.records),u.value=!1})).catch((()=>{u.value=!1}))};c();const m=p(),_=p(),h=n((()=>_.value&&!_.value.selIdList.length)),H=async()=>{m.value.setLoading(!0);const e=await x({list:_.value.selIdList});m.value.close(e.message),_.value.clear()};return(t,l)=>{const d=z("loading");return K((v(),y("div",T,[b("div",k,[f(e,{total:r.value},null,8,["total"]),f(j,{ref_key:"topBtnRef",ref:m,type:"sync",syncbtn:"","sync-api":g(L),"sync-disabled":g(h),onSync:H},null,8,["sync-api","sync-disabled"])]),f(I,{ref_key:"tableRef",ref:_,data:s.value},null,8,["data"]),f(a,{page:o.value,"onUpdate:page":l[0]||(l[0]=e=>o.value=e),size:i.value,"onUpdate:size":l[1]||(l[1]=e=>i.value=e),total:r.value,onChange:c},null,8,["page","size","total"])])),[[d,u.value]])}}}),[["__scopeId","data-v-7b1901e4"]]);export{M as K};
