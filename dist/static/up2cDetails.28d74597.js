import{K as e}from"./KzTopBtns.acde30cd.js";import{K as a}from"./KzDmpTitle.9ff9d8e8.js";import{K as t}from"./KzEmpty.4d80e38b.js";import{K as s}from"./KzPage.acda255b.js";import{_ as l,m as o,R as r,S as d}from"./index.28f1d40d.js";import{H as i,u as p,g as n,_ as c,o as u,I as y,J as m,a as v,B as f,w as b,a1 as _,a2 as g,ay as h,b as z,ae as j}from"./vue.fa004e33.js";import{g as w,b as K,s as k}from"./myData.087a89be.js";import"./KzDialog.d11ad238.js";import"./kzkf.83b11867.js";import"./tinymce.50e98bcc.js";const x={class:"kz_card my_up2c_page dmp_page"},S={class:"fsc mb20"},B={class:"dmp_table"},D={style:{width:"100px"}},H={style:{width:"100px"}},R={class:"els"};var q=l(i({setup(l){const i=o(),q=p((()=>i.state.typeHash)),C=p((()=>i.state.addressHash)),I=h();I.query.id;const T=n([]),U=n(0),E=n(10),J=n(1),L=n(!1),P=async()=>{L.value=!0;const e={current:J.value,size:E.value,id:I.query.id},{status:a,body:t}=await K(e);L.value=!1,a&&(U.value=t.total,T.value=t.records)};P();const A=n([]),F=e=>{A.value=e.map((e=>e.id))},G=n(),M=n(),N=p((()=>!A.value.length)),O=async()=>{M.value.setLoading(!0);const e=await k({list:A.value,type:2});M.value.close(e.message),A.value=[],G.value.clearSelection()};return(l,o)=>{const i=z("el-table-column"),p=z("el-tooltip"),n=z("el-table"),h=j("loading");return c((u(),y("div",x,[m("div",S,[v(a,{total:U.value},null,8,["total"]),v(e,{ref_key:"topBtnRef",ref:M,type:"sync",syncbtn:"","sync-api":f(w),"sync-disabled":f(N),onSync:O},null,8,["sync-api","sync-disabled"])]),m("div",B,[v(n,{ref_key:"tableRef",ref:G,data:T.value,height:"100%",onSelectionChange:F},{empty:b((()=>[v(t)])),default:b((()=>[v(i,{type:"selection",width:"50"}),v(i,{property:"contact",label:"姓名"}),v(i,{property:"sex",label:"性别"},{default:b((({row:e})=>[_(g(1===e.sex?"男":"女"),1)])),_:1}),v(i,{property:"mobiles",label:"联系方式"}),v(i,{property:"telephone",label:"固定电话"}),v(i,{property:"email",label:"邮箱"}),v(i,{property:"industry_id",label:"从事行业"},{default:b((e=>[m("div",null,g(f(r)(e.row.industry_id.split(","),f(q),"last")),1)])),_:1}),v(i,{property:"city",label:"地区"},{default:b((({row:e})=>[v(p,{effect:"dark",placement:"top"},{content:b((()=>[m("div",D,g(f(r)(f(d)(e.province,e.city,e.district),f(C))),1)])),default:b((()=>[m("div",null,g(f(r)(f(d)(e.province,e.city,e.district),f(C))),1)])),_:2},1024)])),_:1}),v(i,{property:"address",label:"详细地址"},{default:b((({row:e})=>[v(p,{effect:"dark",placement:"top"},{content:b((()=>[m("div",H,g(e.address),1)])),default:b((()=>[m("div",R,g(e.address),1)])),_:2},1024)])),_:1})])),_:1},8,["data"])]),v(s,{page:J.value,"onUpdate:page":o[0]||(o[0]=e=>J.value=e),size:E.value,"onUpdate:size":o[1]||(o[1]=e=>E.value=e),total:U.value,onChange:P},null,8,["page","size","total"])])),[[h,L.value]])}}}),[["__scopeId","data-v-2958ce00"]]);export{q as default};
