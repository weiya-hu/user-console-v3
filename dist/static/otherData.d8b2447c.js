var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{_ as o}from"./KzCascader.423603b4.js";import{K as u}from"./KzTopBtns.acde30cd.js";import{K as i}from"./KzEmpty.4d80e38b.js";import{K as n}from"./KzDmpTitle.9ff9d8e8.js";import{K as p}from"./KzPage.acda255b.js";import{_ as c,m,R as v,S as f,T as y,e as b}from"./index.28f1d40d.js";import{g as _,a as g,b as w,s as k}from"./findC.043bbf83.js";import{H as x,u as j,g as V,_ as z,o as h,c as K,w as O,J as C,a as U,I as P,aa as R,P as H,B as S,a2 as T,a1 as B,b as D,ae as I}from"./vue.fa004e33.js";import"./KzDialog.d11ad238.js";import"./kzkf.83b11867.js";import"./tinymce.50e98bcc.js";const L={class:"top_search kz_card dmp_page mb16"},E={class:"fcs"},M=B(" 查询 "),N=B(" 重置 "),F={class:"dmp_c_kzdata_content kz_card dmp_page"},J={class:"fsc mb20"},q={class:"dmp_table"},A=["innerHTML"],G={style:{width:"100px"},class:"fcc"},Q={class:"els"},W={style:{width:"100px"},class:"fcc"},X={class:"els"};var Y=c(x({setup(e){const c=m(),x=j((()=>c.state.addressHash)),Y=j((()=>c.state.typeHash));V([]);const Z=["","success","info","warning","danger"],$=V(0),ee=V(!1),ae=V([]),le=V({size:50,current:1,source:2}),te=V([]);(async()=>{const e=await g();1===e.status&&(te.value=e.body)})();const de=[{id:0},{id:1,min:18,max:23},{id:2,min:24,max:30},{id:3,min:31,max:40},{id:4,min:41,max:49},{id:5,min:50}],se=[{id:0,value:"不限"},{id:1,value:"男"},{id:2,value:"女"}],re=V({keyword:"",industry_id:[],address:[],age:"",education:"",sex:""}),oe=V(),ue=()=>{oe.value.resetFields()},ie=()=>{le.value.current=1,ne()},ne=async()=>{var e,o;ee.value=!0;const u=await w((i=((e,a)=>{for(var l in a||(a={}))d.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e})({},le.value),n={keyword:re.value.keyword,industry_id:re.value.industry_id.join(),province:re.value.address[0]||null,city:re.value.address[1]||null,district:re.value.address[2]||null,start_age:(null==(e=de.find((e=>e.id===Number(re.value.age))))?void 0:e.min)||null,end_age:(null==(o=de.find((e=>e.id===Number(re.value.age))))?void 0:o.max)||null,education:re.value.education,sex:re.value.sex},a(i,l(n))));var i,n;ee.value=!1,1===u.status?($.value=u.body.total,ae.value=u.body.records):b("查询失败")},pe=V([]),ce=e=>{pe.value=e.map((e=>e.id))},me=()=>{ne()},ve=V(),fe=V(),ye=j((()=>!pe.value.length)),be=async()=>{fe.value.setLoading(!0);const e=await k({list:pe.value});fe.value.close(e.message),pe.value=[],ve.value.clearSelection()};return(e,a)=>{const l=D("el-form-item"),t=D("el-input"),d=D("el-radio"),s=D("el-radio-group"),r=D("el-button"),c=D("el-form"),m=D("el-table-column"),b=D("el-tooltip"),g=D("el-tag"),w=D("el-table"),k=D("el-scrollbar"),j=I("loading");return z((h(),K(k,{class:"dmp_c_kzdata_page"},{default:O((()=>[C("div",L,[U(c,{ref_key:"formRef",ref:oe,model:re.value},{default:O((()=>[C("div",E,[U(l,{label:"行业",prop:"industry_id"},{default:O((()=>[U(o,{ref:"typeCRef",modelValue:re.value.industry_id,"onUpdate:modelValue":a[0]||(a[0]=e=>re.value.industry_id=e),type:"type"},null,8,["modelValue"])])),_:1}),U(l,{label:"地区",prop:"address"},{default:O((()=>[U(o,{ref:"addrCRef",modelValue:re.value.address,"onUpdate:modelValue":a[1]||(a[1]=e=>re.value.address=e),type:"address"},null,8,["modelValue"])])),_:1}),U(l,{label:"关键字",prop:"keyword"},{default:O((()=>[U(t,{modelValue:re.value.keyword,"onUpdate:modelValue":a[2]||(a[2]=e=>re.value.keyword=e),placeholder:"请输入职业、兴趣等关键词",maxlength:"15"},null,8,["modelValue"])])),_:1})]),U(l,{label:"年龄",prop:"age"},{default:O((()=>[U(s,{modelValue:re.value.age,"onUpdate:modelValue":a[3]||(a[3]=e=>re.value.age=e)},{default:O((()=>[(h(),P(H,null,R(de,(e=>U(d,{key:e.id,label:e.id},{default:O((()=>[B(T(e.min?e.max?e.min+"岁-"+e.max+"岁":e.min+"+岁":"不限"),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1}),U(l,{label:"学历",prop:"education"},{default:O((()=>[U(s,{modelValue:re.value.education,"onUpdate:modelValue":a[4]||(a[4]=e=>re.value.education=e)},{default:O((()=>[(h(!0),P(H,null,R(te.value,(e=>(h(),K(d,{key:e.id,label:e.value},{default:O((()=>[B(T(e.id?e.name:"不限"),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),U(l,{label:"性别",prop:"sex"},{default:O((()=>[U(s,{modelValue:re.value.sex,"onUpdate:modelValue":a[5]||(a[5]=e=>re.value.sex=e)},{default:O((()=>[(h(),P(H,null,R(se,(e=>U(d,{key:e.id,label:e.id},{default:O((()=>[B(T(e.value),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1}),C("div",null,[U(r,{type:"primary",onClick:ie},{default:O((()=>[M])),_:1}),U(r,{onClick:ue},{default:O((()=>[N])),_:1})])])),_:1},8,["model"])]),C("div",F,[C("div",J,[U(n,{total:$.value},null,8,["total"]),U(u,{ref_key:"topBtnRef",ref:fe,type:"sync",syncbtn:"","sync-api":S(_),"sync-disabled":S(ye),onSync:be},null,8,["sync-api","sync-disabled"])]),C("div",q,[U(w,{ref_key:"tableRef",ref:ve,data:ae.value,style:{width:"100%"},height:"100%",onSelectionChange:ce},{empty:O((()=>[U(i)])),default:O((()=>[U(m,{type:"selection",width:"50"}),U(m,{property:"name",label:"姓名"}),U(m,{property:"sex",label:"性别"},{default:O((e=>[C("div",null,T(0==e.row.sex?"未知":1==e.row.sex?"男":"女"),1)])),_:1}),U(m,{property:"age",label:"年龄"}),U(m,{property:"education",label:"学历"},{default:O((e=>[B(T(te.value.find((a=>a.id===e.row.education)).name),1)])),_:1}),U(m,{property:"mobiles",label:"联系方式"},{default:O((e=>[C("div",{innerHTML:e.row.mobiles},null,8,A)])),_:1}),U(m,{property:"email",label:"邮箱"}),U(m,{property:"industry_id",label:"从事行业"},{default:O((e=>[U(b,{effect:"dark",placement:"top"},{content:O((()=>[C("div",G,T(S(v)(e.row.industry_id,S(Y))),1)])),default:O((()=>[C("div",Q,T(S(v)(e.row.industry_id,S(Y),"last")),1)])),_:2},1024)])),_:1}),U(m,{property:"job",label:"职业"}),U(m,{property:"tags",label:"行为兴趣",width:"250"},{default:O((({row:e})=>[(h(!0),P(H,null,R(e.tags,((e,a)=>(h(),K(g,{key:a,class:"user_tag",type:Z[a]},{default:O((()=>[B(T(e),1)])),_:2},1032,["type"])))),128))])),_:1}),U(m,{property:"address",label:"地区"},{default:O((e=>[U(b,{effect:"dark",placement:"top"},{content:O((()=>[C("div",W,T(S(v)(S(f)(e.row.province,e.row.city,e.row.district),S(x))),1)])),default:O((()=>[C("div",X,T(S(v)(S(f)(e.row.province,e.row.city,e.row.district),S(x))),1)])),_:2},1024)])),_:1}),U(m,{property:"source",label:"来源"},{default:O((e=>[C("div",null,T(S(y)(e.row.source)),1)])),_:1})])),_:1},8,["data"])]),U(p,{page:le.value.current,"onUpdate:page":a[6]||(a[6]=e=>le.value.current=e),size:le.value.size,"onUpdate:size":a[7]||(a[7]=e=>le.value.size=e),total:$.value,onChange:me},null,8,["page","size","total"])])])),_:1})),[[j,ee.value]])}}}),[["__scopeId","data-v-ee7bce34"]]);export{Y as default};
