import{K as a}from"./KzEmpty.cf970ba3.js";import{t as e,f as t,h as l,i as s}from"./message.05333019.js";import{K as i}from"./KzPage.dd3597d0.js";import{_ as o,E as d}from"./index.e45ab2da.js";import{H as n,g as u,o as c,I as r,J as p,a as m,w as v,a2 as f,av as y,aw as _,a1 as h,b as w}from"./vue.fa004e33.js";import"./tinymce.50e98bcc.js";const b=a=>(y("data-v-71e711d0"),a=a(),_(),a),g={class:"send_list"},x={class:"flexb send_list_top"},C=b((()=>p("div",null,"短信模板",-1))),z={class:"flexr"},j=h("查询"),k=h(" 新建  "),V={class:"dmp_table"},K={class:"flexl"},U={class:"template_status"},I={class:"fcs"},B=h("编辑"),E=b((()=>p("div",{class:"line"},null,-1))),T=h("删除");var $=o(n({setup(o){const n=u(1),y=u(10),_=u(0),h=u(),b=u(),$=u({1:"未提交审核",2:"审核中",3:"审核通过",4:"未通过审核"}),H=async a=>{const t={current:n.value,size:y.value,keyword:a},{status:l,body:s}=await e(t);l&&(b.value=s.records,_.value=s.total)};H();return(e,o)=>{const u=w("el-input"),J=w("el-button"),P=w("KzIcon"),q=w("el-table-column"),A=w("el-switch"),D=w("el-link"),F=w("el-table");return c(),r("div",g,[p("div",x,[C,p("div",z,[m(u,{modelValue:h.value,"onUpdate:modelValue":o[0]||(o[0]=a=>h.value=a),placeholder:"请输入模板名称搜索",class:"search_inpt",clearable:"",onInput:o[1]||(o[1]=()=>{!h.value&&H()}),onKeydown:o[2]||(o[2]=a=>H(h.value))},null,8,["modelValue"]),m(J,{class:"bdc_btn"},{default:v((()=>[j])),_:1}),m(J,{type:"primary",onClick:o[3]||(o[3]=a=>e.$router.push("/product/notification/sms/addtemplate"))},{default:v((()=>[m(P,{href:"#icon-tianjia",size:"14px",color:"white",class:"add_need_icon"}),k])),_:1})])]),p("div",V,[m(F,{data:b.value,style:{width:"100%"}},{empty:v((()=>[m(a)])),default:v((()=>[m(q,{property:"title",label:"模板名称","min-width":"120"}),m(q,{property:"type",label:"短信类型","min-width":"110"},{default:v((({row:a})=>[p("div",null,f(1===a.type?"事务类":2===a.type?"通用/运营类":"---"),1)])),_:1}),m(q,{property:"content",label:"模板内容","min-width":"160","show-overflow-tooltip":""}),m(q,{property:"status",label:"状态","min-width":"130"},{default:v((({row:a})=>[p("div",K,[m(A,{modelValue:a.status,"onUpdate:modelValue":e=>a.status=e,"active-value":1,"inactive-value":0,disabled:1===a.template_status||4===a.template_status,onChange:e=>(async(a,e)=>{a?await t({id:e.id}):await l({id:e.id}),H()})(e,a)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"]),p("div",U,f($.value[a.template_status]),1)])])),_:1}),m(q,{label:"操作",fixed:"right",width:"150"},{default:v((({row:a})=>[p("div",I,[m(D,{type:"primary",onClick:t=>e.$router.push("/product/notification/sms/addtemplate?id="+a.id)},{default:v((()=>[B])),_:2},1032,["onClick"]),E,m(D,{type:"primary",onClick:e=>(a=>{d.confirm("是否确认删除短信模板："+a.title,"操作提示",{showCancelButton:!0,cancelButtonText:"取消",confirmButtonText:"确认"}).then((async()=>{const{status:e}=await s({id:a.id});e&&H()})).catch((()=>{}))})(a)},{default:v((()=>[T])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),m(i,{page:n.value,"onUpdate:page":o[4]||(o[4]=a=>n.value=a),size:y.value,"onUpdate:size":o[5]||(o[5]=a=>y.value=a),total:_.value,onChange:o[6]||(o[6]=a=>H(h.value))},null,8,["page","size","total"])])])}}}),[["__scopeId","data-v-71e711d0"]]);export{$ as default};
