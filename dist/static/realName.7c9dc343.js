var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,u=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s;import{H as o,u as d,r as m,o as i,I as c,J as n,a3 as v,a as p,c as g,w as f,a1 as b,B as _,a2 as y,g as V,j as h,$ as w,a0 as j,P as k,aa as O,av as I,aw as P,ax as z}from"./vue.a499711c.js";import{_ as S,V as x,a4 as T,b as U,o as q}from"./index.74b5253d.js";import{a as B}from"./areaNum.1f3b05a6.js";import{s as C,k as D}from"./myinfo.82e48100.js";import"./tinymce.275386ab.js";const N={class:"rz_dialog_hll"},R=["model"],$={class:"card_title"},A={class:"fcc fc imgs"},E=["src"],F={class:"fcc msg"},H={class:"fcc msgTwo"},J={class:"fcc"},K=y("重新认证");var G=S(o({name:"KzAuthentication",props:{reSubmit:{type:Boolean},u_type:null,modelValue:{type:Boolean},img:{default:""},img_small:{default:""},msg:{default:""},msgTwo:{default:""}},emits:["update:modelValue","redo"],setup(e,{emit:a}){const l=e,s=d({get:()=>l.modelValue,set:e=>{a("update:modelValue",e)}}),r=()=>{a("redo")};return(a,l)=>{const t=m("el-button");return i(),c("div",N,[n("div",{class:"kz_card identific",model:_(s)},[n("div",$,v("user"==e.u_type?"实名认证":"认证信息"),1),n("div",A,[n("img",{src:e.img,alt:""},null,8,E),p(x,{href:e.img_small,size:"24px",class:"pic"},null,8,["href"])]),n("div",F,v(e.msg),1),n("div",H,v(e.msgTwo),1),n("div",J,[e.reSubmit?(i(),g(t,{key:0,type:"primary",onClick:r},{default:f((()=>[K])),_:1})):b("",!0)])],8,R)])}}}),[["__scopeId","data-v-d2f40d82"]]);const L={class:"real_name kz_card"},M=(e=>(I("data-v-14e1f9a2"),e=e(),P(),e))((()=>n("div",{class:"card_title"},"实名认证",-1))),Q={class:"card_body fcc"},W={class:"fcs f1"},X=y("提交认证");var Y=S(o({name:"realName",setup(e){const o=z(),d=V(!0),b=V(!1),I=V(""),P=V(""),S=V(""),x=V(""),N=V(1),R=V(),$=V({mobile:"",acode:"86",sms:"",real_name:"",id_card:""}),A=h({real_name:[{required:!0,message:"请输入真实姓名！",trigger:"blur"}],id_card:[{required:!0,message:"请输入个人身份证号",trigger:"blur"},{validator:T,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号！",trigger:"blur"},{validator:U,trigger:"blur"}],sms:[{required:!0,message:"请输入验证码！",trigger:"blur"}]}),E=V(0),F=()=>{R.value.validateField("mobile",(async e=>{e&&(E.value=120,(()=>{const e=setInterval((()=>{E.value>0?E.value--:(clearInterval(e),E.value=0,localStorage.removeItem("changePsssTime"))}),1e3)})(),localStorage.setItem("changePsssTime",(new Date).getTime().toString()),await C({mobile:$.value.mobile,acode:"+"+$.value.acode}))}))},H=()=>{R.value.validate((async e=>{if(e){const e=(d=((e,a)=>{for(var l in a||(a={}))r.call(a,l)&&u(e,l,a[l]);if(s)for(var l of s(a))t.call(a,l)&&u(e,l,a[l]);return e})({},$.value),m={acode:"+"+$.value.acode},a(d,l(m)));1===(await D(e)).status?(o.replace("/manage/user/myinfo"),q("恭喜你，实名认证已通过！")):(N.value=2,b.value=!0,I.value="/static/user.f484e765.png",P.value="#icon-renzhengshibai",S.value="很遗憾，你的实名认证未通过！",x.value="请检查姓名与身份证号码是否有误，更正后再试")}var d,m}))};return(e,a)=>{const l=m("el-input"),s=m("el-form-item"),r=m("el-option"),t=m("el-select"),u=m("el-button"),o=m("el-form");return i(),c("div",null,[w(n("div",L,[M,n("div",Q,[p(o,{ref_key:"realRef",ref:R,model:$.value,"label-position":"right",size:"large","label-width":"100px",rules:A},{default:f((()=>[p(s,{label:"真实姓名",prop:"real_name"},{default:f((()=>[p(l,{modelValue:$.value.real_name,"onUpdate:modelValue":a[0]||(a[0]=e=>$.value.real_name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(s,{label:"身份证号码",prop:"id_card"},{default:f((()=>[p(l,{modelValue:$.value.id_card,"onUpdate:modelValue":a[1]||(a[1]=e=>$.value.id_card=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(s,{label:"手机号码",prop:"mobile"},{default:f((()=>[p(l,{modelValue:$.value.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>$.value.mobile=e),placeholder:"请输入手机号"},{prepend:f((()=>[p(t,{modelValue:$.value.acode,"onUpdate:modelValue":a[2]||(a[2]=e=>$.value.acode=e),style:{width:"80px"}},{default:f((()=>[(i(!0),c(k,null,O(_(B),((e,a)=>(i(),g(r,{key:a,label:"+"+e.value,value:e.value},{default:f((()=>[y(v(e.name+" +"+e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),p(s,{label:"验证码",prop:"sms"},{default:f((()=>[n("div",W,[p(l,{modelValue:$.value.sms,"onUpdate:modelValue":a[4]||(a[4]=e=>$.value.sms=e),placeholder:"请输入验证码",class:"sms_ipt"},null,8,["modelValue"]),p(u,{class:"bdc_btn",disabled:E.value>0,onClick:F},{default:f((()=>[y(v(0===E.value?"获取验证码":E.value+"S后重新获取"),1)])),_:1},8,["disabled"])])])),_:1}),p(s,null,{default:f((()=>[p(u,{type:"primary",class:"f1 mt20",onClick:H},{default:f((()=>[X])),_:1})])),_:1})])),_:1},8,["model","rules"])])],512),[[j,1===N.value]]),w(p(G,{modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=e=>d.value=e),u_type:"user","re-submit":b.value,img:I.value,img_small:P.value,msg:S.value,"msg-two":x.value,onRedo:a[6]||(a[6]=a=>e.$router.replace("/manage/user/myinfo"))},null,8,["modelValue","re-submit","img","img_small","msg","msg-two"]),[[j,2===N.value]])])}}}),[["__scopeId","data-v-14e1f9a2"]]);export{Y as default};
