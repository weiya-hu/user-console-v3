import{f as a}from"./date.23847c74.js";import{d as e}from"./dfavatar.b7e0a12f.js";import{K as t}from"./KzPage.d586fb1f.js";import{K as s}from"./KzEmpty.e30b69b6.js";import{K as l}from"./KzDmpTitle.5be6dd26.js";import{K as r}from"./KzTopBtns.d8c0a7fe.js";import{g as o,j as d,s as i}from"./findC.5f6fbb3e.js";import{H as n,u as p,g as u,_ as c,o as m,I as v,J as f,a as b,B as y,w as _,a2 as g,ay as j,b as w,ae as h}from"./vue.fa004e33.js";import{_ as z,m as K,O as k,P as x}from"./index.81e0e33e.js";import"./KzDialog.00bbba98.js";import"./kzkf.83b11867.js";import"./tinymce.50e98bcc.js";const B={class:"kz_card wxdata_details_c dmp_page"},C={class:"fsc mb20"},D={class:"dmp_table"},S=["src"];var H=z(n({setup(n){const z=K(),H=p((()=>z.state.addressHash)),I=u([]),M=j(),P=u(1),R=u(50),T=u(0),U=u(!1),q=()=>{U.value=!0,d({did:M.query.id,size:R.value,current:P.value}).then((a=>{1==a.status&&(I.value=a.body.records,T.value=a.body.total),U.value=!1})).catch((()=>{U.value=!1}))};q();const E=u([]),J=a=>{E.value=a.map((a=>a.id))},L=u(),O=u(),A=p((()=>!E.value.length)),F=async()=>{O.value.setLoading(!0);const a=await i({list:E.value});O.value.close(a.message),E.value=[],L.value.clearSelection()};return(d,i)=>{const n=w("el-table-column"),p=w("el-table"),u=h("loading");return c((m(),v("div",B,[f("div",C,[b(l,{total:T.value},null,8,["total"]),b(r,{ref_key:"topBtnRef",ref:O,type:"sync",syncbtn:"","sync-api":y(o),"sync-disabled":y(A),onSync:F},null,8,["sync-api","sync-disabled"])]),f("div",D,[b(p,{ref_key:"tableRef",ref:L,data:I.value,onSelectionChange:J},{empty:_((()=>[b(s)])),default:_((()=>[b(n,{type:"selection",width:"50"}),b(n,{property:"wechat_id",label:"好友微信号"}),b(n,{property:"avatar_url",label:"头像"},{default:_((a=>[f("img",{src:a.row.avatar_url||y(e),alt:"",class:"firstimg"},null,8,S)])),_:1}),b(n,{property:"nick_name",label:"昵称"}),b(n,{property:"gender",label:"性别"},{default:_((a=>[f("div",null,g(0==a.row.gender?"未知":1==a.row.gender?"男":"女"),1)])),_:1}),b(n,{property:"phone_number",label:"联系方式"}),b(n,{property:"address",label:"地区"},{default:_((a=>[f("div",null,g(y(k)(y(x)(a.row.province,a.row.city,a.row.district),y(H))),1)])),_:1}),b(n,{property:"signature",label:"个性签名"}),b(n,{property:"create_time",label:"更新时间"},{default:_((e=>[f("div",null,g(y(a)(new Date(e.row.update_time),"yyyy-MM-dd hh:mm:ss")),1)])),_:1})])),_:1},8,["data"])]),b(t,{page:P.value,"onUpdate:page":i[0]||(i[0]=a=>P.value=a),size:R.value,"onUpdate:size":i[1]||(i[1]=a=>R.value=a),total:T.value,onChange:q},null,8,["page","size","total"])])),[[u,U.value]])}}}),[["__scopeId","data-v-53595bad"]]);export{H as default};
