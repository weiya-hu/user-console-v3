import{K as e}from"./KzEmpty.61a513e5.js";import{K as a}from"./KzPage.9312e74c.js";import{_ as t,m as l,P as s,Q as r}from"./index.7f252a0e.js";import{H as o,g as p,u as i,o as n,I as c,J as d,a as u,B as y,$ as v,c as b,w as m,a3 as f,ay as _,r as g,ad as h}from"./vue.a499711c.js";import{f as w}from"./date.23847c74.js";import{g as z,d as j,s as K}from"./seekPathPro.ed0df80c.js";import{K as k}from"./KzDmpTitle.1b8d0ed8.js";import"./tinymce.275386ab.js";const P={class:"kz_card dmp_page"},x={class:"fsc mb20"},B={class:"dmp_table",style:{height:"calc(100% - 120px)"}},D={style:{width:"100px"}};var H=t(o({name:"seekPathDetails",setup(t){const o=_(),H=l(),S=p(H.state.addressHash),C=i((()=>H.state.typeHash)),I=p([]),M=p(0),R=p(50),T=p(1),U=p(!1),q=async()=>{U.value=!0;const e={current:T.value,type:1,size:R.value,id:o.query.id},{status:a,body:t}=await j(e);U.value=!1,a&&(M.value=t.total,I.value=t.records)};q();const E=p([]),J=e=>{E.value=e.map((e=>e.id))},L=p(),N=p(),Q=i((()=>!E.value.length)),$=async()=>{N.value.setLoading(!0);const e=await K({list:E.value,type:1});N.value.close(e.message),E.value=[],L.value.clearSelection()};return(t,l)=>{const o=g("KzTopBtns"),p=g("el-table-column"),i=g("el-tooltip"),_=g("el-table"),j=h("loading");return n(),c("div",P,[d("div",x,[u(k,{total:M.value},null,8,["total"]),u(o,{ref_key:"topBtnRef",ref:N,type:"sync",syncbtn:"","sync-api":y(z),"sync-disabled":y(Q),onSync:$},null,8,["sync-api","sync-disabled"])]),d("div",B,[v((n(),b(_,{ref_key:"tableRef",ref:L,data:I.value,style:{width:"100%"},height:"100%",onSelectionChange:J},{empty:m((()=>[u(e)])),default:m((()=>[u(p,{type:"selection",width:"50"}),u(p,{property:"num",label:"序号"}),u(p,{property:"name",label:"企业名称"}),u(p,{property:"contact",label:"联系人"}),u(p,{property:"mobiles",label:"联系方式"}),u(p,{property:"mobiles",label:"固定电话"}),u(p,{property:"industry_id",label:"行业分类"},{default:m((e=>[d("div",null,f(y(s)(e.row.industry_id.split(","),y(C),"last")),1)])),_:1}),u(p,{property:"city",label:"地区"},{default:m((({row:e})=>[u(i,{effect:"dark",placement:"top"},{content:m((()=>[d("div",D,f(e.province>0&&y(s)(y(r)(e.province,e.city,e.district),S.value)),1)])),default:m((()=>[d("div",null,f(e.province>0&&y(s)(y(r)(e.province,e.city,e.district),S.value)),1)])),_:2},1024)])),_:1}),u(p,{property:"address",label:"详细地址"}),u(p,{property:"company_type",label:"企业类型"}),u(p,{property:"code",label:"统一社会信用代码"}),u(p,{property:"url",label:"企业官网"}),u(p,{property:"business_scope",label:"经营范围"}),u(p,{property:"sell_product",label:"主管产品"}),u(p,{property:"agent_product",label:"代理产品"}),u(p,{property:"business_countries",label:"销售国家"}),u(p,{property:"business_city",label:"销售城市"}),u(p,{property:"source",label:"来源"}),u(p,{property:"create_time",label:"更新日期"},{default:m((({row:e})=>[d("div",null,f(y(w)(new Date(Number(e.create_time)),"yyyy-MM-dd")),1)])),_:1})])),_:1},8,["data"])),[[j,U.value]])]),u(a,{page:T.value,"onUpdate:page":l[0]||(l[0]=e=>T.value=e),size:R.value,"onUpdate:size":l[1]||(l[1]=e=>R.value=e),total:M.value,onChange:q},null,8,["page","size","total"])])}}}),[["__scopeId","data-v-2d7b821a"]]);export{H as default};
