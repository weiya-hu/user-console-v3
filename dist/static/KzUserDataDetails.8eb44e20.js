import{K as e}from"./KzDmpTitle.9ff9d8e8.js";import{K as a}from"./KzPage.acda255b.js";import{K as t}from"./KzEmpty.4d80e38b.js";import{f as l}from"./date.23847c74.js";import{m as s,R as r,S as o,T as d,_ as i}from"./index.28f1d40d.js";import{H as u,u as n,g as p,b as c,o as v,I as y,a as m,w as f,J as b,a2 as _,B as g,X as h,ay as w,ae as z,_ as K}from"./vue.fa004e33.js";import{K as j}from"./KzTopBtns.acde30cd.js";import{g as L,s as x}from"./findC.043bbf83.js";const H=["innerHTML"],I=u({props:{data:null,oheight:{default:120}},emits:["select"],setup(e,{expose:a,emit:i}){const u=s(),w=n((()=>u.state.typeHash)),z=n((()=>u.state.addressHash)),K=p([]),j=e=>{K.value=e.map((e=>e.id))},L=p();return a({selIdList:K,clear:()=>{K.value=[],L.value.clearSelection()}}),(a,s)=>{const i=c("el-table-column"),u=c("el-table");return v(),y("div",{class:"dmp_table user_table",style:h({height:`calc( 100% - ${e.oheight}px )`})},[m(u,{ref_key:"tableRef",ref:L,data:e.data,style:{width:"100%"},height:"100%",onSelectionChange:j},{empty:f((()=>[m(t)])),default:f((()=>[m(i,{type:"selection",width:"50"}),m(i,{property:"name",label:"姓名"}),m(i,{property:"sex",label:"性别"},{default:f((e=>[b("div",null,_(0==e.row.sex?"未知":1==e.row.sex?"男":"女"),1)])),_:1}),m(i,{property:"mobiles",label:"联系方式"},{default:f((e=>[b("div",{innerHTML:e.row.mobiles},null,8,H)])),_:1}),m(i,{property:"email",label:"邮箱"}),m(i,{property:"type",label:"从事行业"},{default:f((e=>[b("div",null,_(g(r)(e.row.industry_id.split(","),g(w),"last")),1)])),_:1}),m(i,{label:"地区"},{default:f((e=>[b("div",null,_(g(r)(g(o)(e.row.province,e.row.city,e.row.district),g(z))),1)])),_:1}),m(i,{property:"source",label:"来源"},{default:f((e=>[b("div",null,_(g(d)(e.row.source)),1)])),_:1}),m(i,{property:"update_time",label:"创建时间"},{default:f((e=>[b("div",null,_(g(l)(new Date(Number(e.row.update_time)),"yyyy-MM-dd")),1)])),_:1})])),_:1},8,["data"])],4)}}});const T={class:"user_data_details kz_card dmp_page"},k={class:"fsc mb20"};var M=i(u({props:{getListApi:null},setup(t){const l=t,s=p([]),r=p(0),o=p(1),d=p(50),i=p(!1),u=w(),c=()=>{i.value=!0,l.getListApi({size:d.value,current:o.value,did:u.query.id}).then((e=>{1==e.status&&(r.value=e.body.total,s.value=e.body.records),i.value=!1})).catch((()=>{i.value=!1}))};c();const f=p(),_=p(),h=n((()=>_.value&&!_.value.selIdList.length)),H=async()=>{f.value.setLoading(!0);const e=await x({list:_.value.selIdList});f.value.close(e.message),_.value.clear()};return(t,l)=>{const u=z("loading");return K((v(),y("div",T,[b("div",k,[m(e,{total:r.value},null,8,["total"]),m(j,{ref_key:"topBtnRef",ref:f,type:"sync",syncbtn:"","sync-api":g(L),"sync-disabled":g(h),onSync:H},null,8,["sync-api","sync-disabled"])]),m(I,{ref_key:"tableRef",ref:_,data:s.value},null,8,["data"]),m(a,{page:o.value,"onUpdate:page":l[0]||(l[0]=e=>o.value=e),size:d.value,"onUpdate:size":l[1]||(l[1]=e=>d.value=e),total:r.value,onChange:c},null,8,["page","size","total"])])),[[u,i.value]])}}}),[["__scopeId","data-v-7b1901e4"]]);export{M as K};
