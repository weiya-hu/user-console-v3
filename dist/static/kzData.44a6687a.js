var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,u=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(s)for(var l of s(a))o.call(a,l)&&r(e,l,a[l]);return e};import{H as n,g as c,u as i,_ as d,o as v,c as p,w as f,a as m,$ as y,J as b,B as g,ac as _,a1 as h,b as j,ae as z}from"./vue.fa004e33.js";import{K as w}from"./KzTopSearch.82d8174a.js";import{K as k}from"./KzPage.4cc4cb8e.js";import{K}from"./KzTopBtns.fa143eba.js";import{_ as O}from"./KzCompanyTable.ce693978.js";import{K as C}from"./KzDmpTitle.6f4a029f.js";import{g as P,a as L,w as x,s as B,b as I}from"./findB.f589dff3.js";import{_ as S,R as T,e as D}from"./index.743440f4.js";import"./KzCascader.61445d27.js";import"./KzDialog.df5ada75.js";import"./kzkf.70bb183f.js";import"./KzEmpty.21ade687.js";import"./tinymce.50e98bcc.js";const R={class:"dmp_b_kzdata_content kz_card dmp_page"},U={class:"fsc mb20"},V={class:"fcs"},E={class:"fcs word_search"},H=h("查询一下"),J=h("高级查询");var M=S(n({setup(e){const s=c(!1),t=c([]),o=()=>{L().then((e=>{t.value=e.body}))};o();const r=(e,a)=>{a(e?t.value.filter(n(e)):t.value)},n=e=>a=>0===a.keyword.toLowerCase().indexOf(e.toLowerCase()),h=c({size:50,current:1,source:1}),S=c(0),M=c([]),$=c(!1),q=c(1),A=c(""),F=async()=>{A.value.trim().length<1||A.value.trim().length>36?D("输入长度须在 1 ~ 36 之间"):(q.value=1,$.value=!0,h.value.current=1,await G(),o())},G=async()=>{var e,s;$.value=!0,await x((e=u({},h.value),s={keywords:A.value},a(e,l(s)))).then((e=>{1===e.status&&(S.value=e.body.total,M.value=e.body.records),$.value=!1})).catch((()=>{D("查询失败"),$.value=!1}))},N=c({}),Q=async e=>{$.value=!0,q.value=2,h.value.current=1,N.value=e,await W()},W=async()=>{$.value=!0,await B(u(u({},h.value),N.value)).then((e=>{1===e.status&&(S.value=e.body.total,M.value=e.body.records),$.value=!1})).catch((()=>{D("查询失败"),$.value=!1}))},X=()=>{1==q.value?G():W()},Y=c(),Z=c(),ee=i((()=>Z.value&&!Z.value.selIdList.length)),ae=async()=>{Y.value.setLoading(!0);const e=await I({list:Z.value.selIdList});Y.value.close(e.message),Z.value.clear()};return(e,a)=>{const l=j("el-collapse-transition"),t=j("el-icon"),o=j("el-autocomplete"),u=j("el-button"),n=j("el-link"),c=j("el-scrollbar"),i=z("loading");return d((v(),p(c,{height:"100%",class:"dmp_b_kzdata_page",noresize:!0},{default:f((()=>[m(l,null,{default:f((()=>[d(m(w,{onSearch:Q,onClose:a[0]||(a[0]=e=>s.value=!1)},null,512),[[y,s.value]])])),_:1}),b("div",R,[b("div",U,[m(C,{total:S.value},null,8,["total"]),b("div",V,[b("div",E,[m(o,{modelValue:A.value,"onUpdate:modelValue":a[1]||(a[1]=e=>A.value=e),modelModifiers:{trim:!0},placeholder:"请输入企业名称、联系人、经营范围关键词","fetch-suggestions":r,"value-key":"keyword",onKeyup:_(F,["enter"])},{prefix:f((()=>[m(t,{class:"searchicon"},{default:f((()=>[m(g(T))])),_:1})])),_:1},8,["modelValue","onKeyup"]),m(u,{type:"primary",class:"ml16",onClick:F},{default:f((()=>[H])),_:1}),m(n,{class:"heisearch ml16 fs0",type:"primary",onClick:a[2]||(a[2]=e=>s.value=!0)},{default:f((()=>[J])),_:1})]),m(K,{ref_key:"topBtnRef",ref:Y,type:"sync",syncbtn:"","sync-api":g(P),"sync-disabled":g(ee),onSync:ae},null,8,["sync-api","sync-disabled"])])]),m(O,{ref_key:"tableRef",ref:Z,data:M.value},null,8,["data"]),m(k,{page:h.value.current,"onUpdate:page":a[3]||(a[3]=e=>h.value.current=e),size:h.value.size,"onUpdate:size":a[4]||(a[4]=e=>h.value.size=e),total:S.value,onChange:X},null,8,["page","size","total"])])])),_:1})),[[i,$.value]])}}}),[["__scopeId","data-v-bf37b224"]]);export{M as default};
