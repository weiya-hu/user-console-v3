var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,d=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t;import{_ as o}from"./KzCascader.4e0226ed.js";import{K as u}from"./KzTopBtns.cf198609.js";import{K as i}from"./KzEmpty.d7f95ebf.js";import{K as n}from"./KzDmpTitle.bdbf5a2d.js";import{K as p}from"./KzPage.270569e7.js";import{_ as c,m,P as v,Q as f,R as y,e as b}from"./index.fde176ed.js";import{g as _,a as g,b as w,s as k}from"./findC.2b1765c7.js";import{H as x,g as j,u as V,o as h,I as z,J as K,a as O,w as C,P,aa as U,B as R,a3 as H,a2 as D,r as S,c as T}from"./vue.a499711c.js";import"./KzDialog.552d8a23.js";import"./tinymce.275386ab.js";const B={class:"dmp_kz_data"},I={class:"kz_card"},L={class:"top_search"},E={class:"fcs"},M=D(" 查询 "),N=D(" 重置 "),F={class:"kz_card dmp_page"},J={class:"fsc f1"},Q={class:"dmp_table"},q=["innerHTML"],A={style:{width:"100px"},class:"fcc"},G={class:"els"},W={style:{width:"100px"},class:"fcc"},X={class:"els"};var Y=c(x({name:"kzData",setup(e){j([]);const c=j(0),x=j(10),Y=j(1),Z=m(),$=V((()=>Z.state.addressHash)),ee=V((()=>Z.state.typeHash));j([]);const ae=["","success","info","warning","danger"],le=j(!1),te=j([]),de=j({size:x.value,current:1,source:1}),se=j([]);(async()=>{const e=await g();1===e.status&&(se.value=e.body)})();const re=[{id:0},{id:1,min:18,max:23},{id:2,min:24,max:30},{id:3,min:31,max:40},{id:4,min:41,max:49},{id:5,min:50}],oe=[{id:0,value:"不限"},{id:1,value:"男"},{id:2,value:"女"}],ue=j({keyword:"",industry_id:[],address:[],age:"",education:"",sex:""}),ie=j(),ne=()=>{ie.value.resetFields()},pe=()=>{de.value.current=1,ce()},ce=async()=>{var e,o;le.value=!0;const u=await w((i=((e,a)=>{for(var l in a||(a={}))d.call(a,l)&&r(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&r(e,l,a[l]);return e})({},de.value),n={keyword:ue.value.keyword,industry_id:ue.value.industry_id.join(),province:ue.value.address[0]||null,city:ue.value.address[1]||null,district:ue.value.address[2]||null,start_age:(null==(e=re.find((e=>e.id===Number(ue.value.age))))?void 0:e.min)||null,end_age:(null==(o=re.find((e=>e.id===Number(ue.value.age))))?void 0:o.max)||null,education:ue.value.education,sex:ue.value.sex},a(i,l(n))));var i,n;le.value=!1,1===u.status?(c.value=u.body.total,te.value=u.body.records):b("查询失败")},me=j([]),ve=e=>{me.value=e.map((e=>e.id))},fe=()=>{ce()},ye=j(),be=j(),_e=V((()=>!me.value.length)),ge=async()=>{be.value.setLoading(!0);const e=await k({list:me.value});be.value.close(e.message),me.value=[],ye.value.clearSelection()};return(e,a)=>{const l=S("el-form-item"),t=S("el-input"),d=S("el-radio"),s=S("el-radio-group"),r=S("el-button"),m=S("el-form"),b=S("el-table-column"),g=S("el-tooltip"),w=S("el-tag"),k=S("el-table");return h(),z("div",B,[K("div",I,[K("div",L,[O(m,{ref_key:"formRef",ref:ie,model:ue.value},{default:C((()=>[K("div",E,[O(l,{label:"行业",prop:"industry_id"},{default:C((()=>[O(o,{ref:"typeCRef",modelValue:ue.value.industry_id,"onUpdate:modelValue":a[0]||(a[0]=e=>ue.value.industry_id=e),type:"type"},null,8,["modelValue"])])),_:1}),O(l,{label:"地区",prop:"address"},{default:C((()=>[O(o,{ref:"addrCRef",modelValue:ue.value.address,"onUpdate:modelValue":a[1]||(a[1]=e=>ue.value.address=e),type:"address"},null,8,["modelValue"])])),_:1}),O(l,{label:"关键字",prop:"keyword"},{default:C((()=>[O(t,{modelValue:ue.value.keyword,"onUpdate:modelValue":a[2]||(a[2]=e=>ue.value.keyword=e),placeholder:"请输入职业、兴趣等关键词",maxlength:"15"},null,8,["modelValue"])])),_:1})]),O(l,{label:"年龄",prop:"age"},{default:C((()=>[O(s,{modelValue:ue.value.age,"onUpdate:modelValue":a[3]||(a[3]=e=>ue.value.age=e)},{default:C((()=>[(h(),z(P,null,U(re,(e=>O(d,{key:e.id,label:e.id},{default:C((()=>[D(H(e.min?e.max?e.min+"岁-"+e.max+"岁":e.min+"+岁":"不限"),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1}),O(l,{label:"学历",prop:"education"},{default:C((()=>[O(s,{modelValue:ue.value.education,"onUpdate:modelValue":a[4]||(a[4]=e=>ue.value.education=e)},{default:C((()=>[(h(!0),z(P,null,U(se.value,(e=>(h(),T(d,{key:e.id,label:e.value},{default:C((()=>[D(H(e.id?e.name:"不限"),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),O(l,{label:"性别",prop:"sex"},{default:C((()=>[O(s,{modelValue:ue.value.sex,"onUpdate:modelValue":a[5]||(a[5]=e=>ue.value.sex=e)},{default:C((()=>[(h(),z(P,null,U(oe,(e=>O(d,{key:e.id,label:e.id},{default:C((()=>[D(H(e.value),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1}),K("div",null,[O(r,{type:"primary",onClick:pe},{default:C((()=>[M])),_:1}),O(r,{onClick:ne},{default:C((()=>[N])),_:1})])])),_:1},8,["model"])])]),K("div",F,[K("div",J,[O(n,{total:c.value,class:"pt20 pb20 ml16"},null,8,["total"]),O(u,{ref_key:"topBtnRef",ref:be,type:"sync",syncbtn:"","sync-api":R(_),"sync-disabled":R(_e),class:"topbtns mr20",onSync:ge},null,8,["sync-api","sync-disabled"])]),K("div",Q,[O(k,{ref_key:"tableRef",ref:ye,data:te.value,style:{width:"100%"},height:"100%",onSelectionChange:ve},{empty:C((()=>[O(i)])),default:C((()=>[O(b,{type:"selection",width:"50"}),O(b,{property:"name",label:"姓名"}),O(b,{property:"sex",label:"性别"},{default:C((e=>[K("div",null,H(0==e.row.sex?"未知":1==e.row.sex?"男":"女"),1)])),_:1}),O(b,{property:"age",label:"年龄"}),O(b,{property:"education",label:"学历"},{default:C((e=>[D(H(se.value.find((a=>a.id===e.row.education)).name),1)])),_:1}),O(b,{property:"mobiles",label:"联系方式"},{default:C((e=>[K("div",{innerHTML:e.row.mobiles},null,8,q)])),_:1}),O(b,{property:"email",label:"邮箱"}),O(b,{property:"industry_id",label:"从事行业"},{default:C((e=>[O(g,{effect:"dark",placement:"top"},{content:C((()=>[K("div",A,H(R(v)(e.row.industry_id,R(ee))),1)])),default:C((()=>[K("div",G,H(R(v)(e.row.industry_id,R(ee),"last")),1)])),_:2},1024)])),_:1}),O(b,{property:"job",label:"职业"}),O(b,{property:"tags",label:"行为兴趣",width:"250"},{default:C((({row:e})=>[(h(!0),z(P,null,U(e.tags,((e,a)=>(h(),T(w,{key:a,class:"user_tag",type:ae[a]},{default:C((()=>[D(H(e),1)])),_:2},1032,["type"])))),128))])),_:1}),O(b,{property:"address",label:"地区"},{default:C((e=>[O(g,{effect:"dark",placement:"top"},{content:C((()=>[K("div",W,H(R(v)(R(f)(e.row.province,e.row.city,e.row.district),R($))),1)])),default:C((()=>[K("div",X,H(R(v)(R(f)(e.row.province,e.row.city,e.row.district),R($))),1)])),_:2},1024)])),_:1}),O(b,{property:"source",label:"来源"},{default:C((e=>[K("div",null,H(R(y)(e.row.source)),1)])),_:1})])),_:1},8,["data"])]),O(p,{page:Y.value,"onUpdate:page":a[6]||(a[6]=e=>Y.value=e),size:x.value,"onUpdate:size":a[7]||(a[7]=e=>x.value=e),total:c.value,onChange:fe},null,8,["page","size","total"])])])}}}),[["__scopeId","data-v-3231f674"]]);export{Y as default};
