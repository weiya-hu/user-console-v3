import{H as e,u as a,g as l,j as t,o as s,I as o,J as d,a as u,B as r,w as p,W as i,a2 as n,c,_ as v,P as m,aa as f,av as y,aw as _,a1 as b,ax as g,b as w,ae as h}from"./vue.fa004e33.js";import{K as V}from"./KzTopBtns.840b738a.js";import{f as j}from"./date.23847c74.js";import{K as k}from"./KzPage.0e73684e.js";import{_ as z}from"./KzCascader.598b8622.js";import{K as C}from"./KzEmpty.640dfbae.js";import{_ as x,m as K,A as U,R as D,O as I,P as B,Q as L}from"./index.a202d357.js";import{g as P,s as R,c as F,d as H,e as M}from"./findC.41817a0b.js";import"./KzDialog.8a40b047.js";import"./tinymce.50e98bcc.js";const S={class:"kz_card teldata_page_c"},q={class:"fsc f1"},A=(e=>(y("data-v-70647218"),e=e(),_(),e))((()=>d("div",{class:"card_title"},"号码段获客",-1))),E={class:"btns fsc"},J=b("新增数据"),N={class:"dmp_table"},O={class:"fcs"},Q=b("查看"),T={key:1},W={class:"fcs fjend"},G=b("取消"),X=b("提交");var Y=x(e({setup(e){const y=K(),_=a((()=>y.state.addressHash)),x=g(),Y=l(0),Z=l(10),$=l(1),ee=l(),ae=l(),le=a((()=>ae.value&&!ae.value.selIdList.length)),te=async()=>{ee.value.setLoading(!0);const e=await R({list:ae.value.selIdList});ee.value.close(e.message),ae.value.clear()},se=()=>{F({current:$.value,size:Z.value}).then((e=>{1==e.status&&(oe.value=e.body.records,Y.value=e.body.total)}))};se();const oe=l([]),de=l([]),ue=e=>{de.value=e},re=l([]),pe=l({});H().then((e=>{pe.value=e.body}));const ie=e=>{re.value=pe.value[e].segments},ne=l(!1),ce=()=>{re.value=[],ne.value=!1,fe.value=!1,ye.value.resetFields()},ve=l({people:"",desc:"",addr:[],operator:"",tels:[]}),me=t({people:[{required:!0,message:"请输入人群名称",trigger:"blur"}]}),fe=l(!1),ye=l(),_e=()=>{ye.value.validate((e=>{if(!e)return!1;fe.value=!0,M({city:ve.value.addr[1]||0,district:ve.value.addr[2]||0,group_desc:ve.value.desc,group_name:ve.value.people,province:ve.value.addr[0]||0,segment:ve.value.tels.join()}).then((e=>{1==e.status&&(ce(),se()),fe.value=!1}))}))};return(e,a)=>{const l=w("el-icon"),t=w("el-button"),y=w("el-table-column"),g=w("el-link"),K=w("el-table"),R=w("el-input"),F=w("el-form-item"),H=w("el-radio"),M=w("el-radio-group"),ae=w("el-option"),de=w("el-select"),be=w("el-form"),ge=w("el-dialog"),we=h("loading");return s(),o("div",S,[d("div",q,[A,d("div",E,[u(V,{ref_key:"topBtnRef",ref:ee,type:"sync",syncbtn:"","sync-api":r(P),"sync-disabled":r(le),class:"topbtns mr20",onSync:te},null,8,["sync-api","sync-disabled"]),u(t,{type:"primary",onClick:a[0]||(a[0]=e=>ne.value=!0)},{default:p((()=>[u(l,{size:"14px",style:{"margin-right":"4px"}},{default:p((()=>[u(r(U))])),_:1}),J])),_:1})])]),d("div",N,[u(K,{data:oe.value,style:{width:"100%"},onSelectionChange:ue},{empty:p((()=>[u(C)])),default:p((()=>[u(y,{type:"selection",width:"50"}),u(y,{property:"id",label:"ID"}),u(y,{property:"group_name",label:"人群名称"}),u(y,{property:"group_desc",label:"人群描述"}),u(y,{property:"status",label:"状态"},{default:p((e=>[d("div",O,[d("div",{class:i(["status_dot",r(D)(e.row.status).className])},null,2),d("div",null,n(r(D)(e.row.status).text),1)])])),_:1}),u(y,{label:"地区"},{default:p((e=>[d("div",null,n(r(I)(r(B)(e.row.province,e.row.city,e.row.district),r(_))),1)])),_:1}),u(y,{property:"count",label:"覆盖用户人数"},{default:p((e=>[d("div",null,n(e.row.count),1)])),_:1}),u(y,{property:"source",label:"来源"},{default:p((e=>[d("div",null,n(r(L)(e.row.source)),1)])),_:1}),u(y,{property:"user_name",label:"创建人"}),u(y,{property:"create_time",label:"创建日期"},{default:p((e=>[d("div",null,n(r(j)(new Date(e.row.create_time),"yyyy-MM-dd")),1)])),_:1}),u(y,{property:"source",label:"操作",fixed:"right"},{default:p((e=>[4==e.row.status?(s(),c(g,{key:0,type:"primary",onClick:a=>{return l=e.row.id,void x.push("/product/dmp/findc/telDataDetails?id="+l);var l}},{default:p((()=>[Q])),_:2},1032,["onClick"])):(s(),o("div",T,"---"))])),_:1}),u(k,{page:$.value,"onUpdate:page":a[1]||(a[1]=e=>$.value=e),size:Z.value,"onUpdate:size":a[2]||(a[2]=e=>Z.value=e),total:Y.value,onChange:se},null,8,["page","size","total"])])),_:1},8,["data"])]),u(ge,{modelValue:ne.value,"onUpdate:modelValue":a[8]||(a[8]=e=>ne.value=e),title:"新建数据",width:"500px",onClose:ce},{default:p((()=>[v((s(),c(be,{ref_key:"addFormRef",ref:ye,class:"myform",model:ve.value,rules:r(me)},{default:p((()=>[u(F,{label:"人群名称",prop:"people"},{default:p((()=>[u(R,{modelValue:ve.value.people,"onUpdate:modelValue":a[3]||(a[3]=e=>ve.value.people=e),placeholder:"请输入人群名称"},null,8,["modelValue"])])),_:1}),u(F,{label:"选择地区",prop:"addr"},{default:p((()=>[u(z,{modelValue:ve.value.addr,"onUpdate:modelValue":a[4]||(a[4]=e=>ve.value.addr=e),type:"address"},null,8,["modelValue"])])),_:1}),u(F,{label:"人群描述",prop:"desc"},{default:p((()=>[u(R,{modelValue:ve.value.desc,"onUpdate:modelValue":a[5]||(a[5]=e=>ve.value.desc=e),placeholder:"可对人群进行简单的描述",type:"textarea",maxlength:"150","show-word-limit":"",rows:"4",resize:"none"},null,8,["modelValue"])])),_:1}),u(F,{label:"运营商",prop:"operator"},{default:p((()=>[u(M,{modelValue:ve.value.operator,"onUpdate:modelValue":a[6]||(a[6]=e=>ve.value.operator=e),onChange:ie},{default:p((()=>[(s(!0),o(m,null,f(pe.value,(e=>(s(),c(H,{key:e.id,label:e.id},{default:p((()=>[b(n(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(F,{label:"号码段",prop:"tels"},{default:p((()=>[u(de,{modelValue:ve.value.tels,"onUpdate:modelValue":a[7]||(a[7]=e=>ve.value.tels=e),multiple:"",placeholder:"请选择号码段",class:"w100",disabled:0==re.value.length},{default:p((()=>[(s(!0),o(m,null,f(re.value,((e,a)=>(s(),c(ae,{key:a,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),d("div",W,[u(t,{onClick:ce},{default:p((()=>[G])),_:1}),u(t,{type:"primary",onClick:_e},{default:p((()=>[X])),_:1})])])),_:1},8,["model","rules"])),[[we,fe.value]])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-70647218"]]);export{Y as default};
