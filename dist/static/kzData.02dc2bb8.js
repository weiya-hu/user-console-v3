var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,u=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&r(e,l,a[l]);if(s)for(var l of s(a))o.call(a,l)&&r(e,l,a[l]);return e};import{H as n,g as c,u as i,_ as v,o as d,c as p,w as m,a as f,$ as y,J as b,B as g,ac as _,a1 as h,b as j,ae as z}from"./vue.fa004e33.js";import{K as w}from"./KzTopSearch.ad75ef44.js";import{K as k}from"./KzPage.e5833c31.js";import{K}from"./KzTopBtns.787996b5.js";import{_ as O}from"./KzCompanyTable.8be04d00.js";import{K as C}from"./KzDmpTitle.9f1696b6.js";import{g as P,a as L,w as x,s as B,b as I}from"./findB.6ce4abf4.js";import{_ as S,N as T,e as D}from"./index.a5da46a5.js";import"./KzCascader.959798c6.js";import"./KzDialog.268c77a5.js";import"./kzkf.83b11867.js";import"./KzEmpty.e7d92402.js";import"./tinymce.50e98bcc.js";const U={class:"dmp_b_kzdata_content kz_card dmp_page"},V={class:"fsc mb20"},E={class:"fcs"},R={class:"fcs word_search"},H=h("查询一下"),J=h("高级查询");var M=S(n({setup(e){const s=c(!1),t=c([]),o=()=>{L().then((e=>{t.value=e.body}))};o();const r=(e,a)=>{a(e?t.value.filter(n(e)):t.value)},n=e=>a=>0===a.keyword.toLowerCase().indexOf(e.toLowerCase()),h=c({size:50,current:1,source:1}),S=c(0),M=c([]),N=c(!1),$=c(1),q=c(""),A=async()=>{q.value.trim().length<1||q.value.trim().length>36?D("输入长度须在 1 ~ 36 之间"):($.value=1,N.value=!0,h.value.current=1,await F(),o())},F=async()=>{var e,s;N.value=!0,await x((e=u({},h.value),s={keywords:q.value},a(e,l(s)))).then((e=>{1===e.status&&(S.value=e.body.total,M.value=e.body.records),N.value=!1})).catch((()=>{D("查询失败"),N.value=!1}))},G=c({}),Q=async e=>{N.value=!0,$.value=2,h.value.current=1,G.value=e,await W()},W=async()=>{N.value=!0,await B(u(u({},h.value),G.value)).then((e=>{1===e.status&&(S.value=e.body.total,M.value=e.body.records),N.value=!1})).catch((()=>{D("查询失败"),N.value=!1}))},X=()=>{1==$.value?F():W()},Y=c(),Z=c(),ee=i((()=>Z.value&&!Z.value.selIdList.length)),ae=async()=>{Y.value.setLoading(!0);const e=await I({list:Z.value.selIdList});Y.value.close(e.message),Z.value.clear()};return(e,a)=>{const l=j("el-collapse-transition"),t=j("el-icon"),o=j("el-autocomplete"),u=j("el-button"),n=j("el-link"),c=j("el-scrollbar"),i=z("loading");return v((d(),p(c,{height:"100%",class:"dmp_b_kzdata_page",noresize:!0},{default:m((()=>[f(l,null,{default:m((()=>[v(f(w,{onSearch:Q,onClose:a[0]||(a[0]=e=>s.value=!1)},null,512),[[y,s.value]])])),_:1}),b("div",U,[b("div",V,[f(C,{total:S.value},null,8,["total"]),b("div",E,[b("div",R,[f(o,{modelValue:q.value,"onUpdate:modelValue":a[1]||(a[1]=e=>q.value=e),modelModifiers:{trim:!0},placeholder:"请输入企业名称、联系人、经营范围关键词","fetch-suggestions":r,"value-key":"keyword",onKeyup:_(A,["enter"])},{prefix:m((()=>[f(t,{class:"searchicon"},{default:m((()=>[f(g(T))])),_:1})])),_:1},8,["modelValue","onKeyup"]),f(u,{type:"primary",class:"ml16",onClick:A},{default:m((()=>[H])),_:1}),f(n,{class:"heisearch ml16 fs0",type:"primary",onClick:a[2]||(a[2]=e=>s.value=!0)},{default:m((()=>[J])),_:1})]),f(K,{ref_key:"topBtnRef",ref:Y,type:"sync",syncbtn:"","sync-api":g(P),"sync-disabled":g(ee),onSync:ae},null,8,["sync-api","sync-disabled"])])]),f(O,{ref_key:"tableRef",ref:Z,data:M.value},null,8,["data"]),f(k,{page:h.value.current,"onUpdate:page":a[3]||(a[3]=e=>h.value.current=e),size:h.value.size,"onUpdate:size":a[4]||(a[4]=e=>h.value.size=e),total:S.value,onChange:X},null,8,["page","size","total"])])])),_:1})),[[i,N.value]])}}}),[["__scopeId","data-v-bf37b224"]]);export{M as default};
