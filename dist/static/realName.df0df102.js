var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,u=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s;import{H as o,u as d,b as m,o as i,I as c,J as n,a2 as v,a as p,c as f,w as g,a0 as b,B as _,a1 as y,g as V,j as w,_ as h,$ as j,P as O,aa as k,av as I,aw as S,ax as x}from"./vue.fa004e33.js";import{_ as z,a6 as P,a9 as T,b as U}from"./index.743440f4.js";import{a as q}from"./areaNum.1f3b05a6.js";import{s as B,j as C}from"./myinfo.adad0b17.js";import"./tinymce.50e98bcc.js";const N={class:"rz_dialog_hll"},D=["model"],R={class:"card_title"},$={class:"fcc fc imgs"},E=["src"],F={class:"fcc msg"},H={class:"fcc msgTwo"},J={class:"fcc"},A=y("重新认证");var G=z(o({props:{reSubmit:{type:Boolean},u_type:null,modelValue:{type:Boolean},img:{default:""},img_small:{default:""},msg:{default:""},msgTwo:{default:""}},emits:["update:modelValue","redo"],setup(e,{emit:a}){const l=e,s=d({get:()=>l.modelValue,set:e=>{a("update:modelValue",e)}}),r=()=>{a("redo")};return(a,l)=>{const t=m("el-button");return i(),c("div",N,[n("div",{class:"kz_card identific",model:_(s)},[n("div",R,v("user"==e.u_type?"实名认证":"认证信息"),1),n("div",$,[n("img",{src:e.img,alt:""},null,8,E),p(P,{href:e.img_small,size:"24px",class:"pic"},null,8,["href"])]),n("div",F,v(e.msg),1),n("div",H,v(e.msgTwo),1),n("div",J,[e.reSubmit?(i(),f(t,{key:0,type:"primary",onClick:r},{default:g((()=>[A])),_:1})):b("",!0)])],8,D)])}}}),[["__scopeId","data-v-d2f40d82"]]);const K={class:"real_name kz_card"},L=(e=>(I("data-v-1efae28d"),e=e(),S(),e))((()=>n("div",{class:"card_title"},"实名认证",-1))),M={class:"card_body fcc"},Q={class:"fcs f1"},W=y("提交认证");var X=z(o({setup(e){const o=x(),d=V(!0),b=V(!1),I=V(""),S=V(""),z=V(""),P=V(""),N=V(1),D=V(),R=V({mobile:"",acode:"86",sms:"",real_name:"",id_card:""}),$=w({real_name:[{required:!0,message:"请输入真实姓名！",trigger:"blur"}],id_card:[{required:!0,message:"请输入个人身份证号",trigger:"blur"},{validator:T,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号！",trigger:"blur"},{validator:U,trigger:"blur"}],sms:[{required:!0,message:"请输入验证码！",trigger:"blur"}]}),E=V(0),F=()=>{D.value.validateField("mobile",(async e=>{e&&(E.value=120,(()=>{const e=setInterval((()=>{E.value>0?E.value--:(clearInterval(e),E.value=0,localStorage.removeItem("changeNameTime"))}),1e3)})(),localStorage.setItem("changeNameTime",(new Date).getTime().toString()),await B({mobile:R.value.mobile,acode:"+"+R.value.acode}))}))},H=()=>{D.value.validate((async e=>{if(e){const e=(d=((e,a)=>{for(var l in a||(a={}))r.call(a,l)&&u(e,l,a[l]);if(s)for(var l of s(a))t.call(a,l)&&u(e,l,a[l]);return e})({},R.value),m={acode:"+"+R.value.acode},a(d,l(m)));1===(await C(e)).status?o.replace("/manage/user/myinfo"):(N.value=2,b.value=!0,I.value="/static/user.f484e765.png",S.value="#icon-renzhengshibai",z.value="很遗憾，你的实名认证未通过！",P.value="请检查姓名与身份证号码是否有误，更正后再试")}var d,m}))};return(e,a)=>{const l=m("el-input"),s=m("el-form-item"),r=m("el-option"),t=m("el-select"),u=m("el-button"),o=m("el-form");return i(),c("div",null,[h(n("div",K,[L,n("div",M,[p(o,{ref_key:"realRef",ref:D,model:R.value,"label-position":"right",size:"large","label-width":"100px",rules:_($)},{default:g((()=>[p(s,{label:"真实姓名",prop:"real_name"},{default:g((()=>[p(l,{modelValue:R.value.real_name,"onUpdate:modelValue":a[0]||(a[0]=e=>R.value.real_name=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(s,{label:"身份证号码",prop:"id_card"},{default:g((()=>[p(l,{modelValue:R.value.id_card,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value.id_card=e),placeholder:"请输入"},null,8,["modelValue"])])),_:1}),p(s,{label:"手机号码",prop:"mobile"},{default:g((()=>[p(l,{modelValue:R.value.mobile,"onUpdate:modelValue":a[3]||(a[3]=e=>R.value.mobile=e),placeholder:"请输入手机号"},{prepend:g((()=>[p(t,{modelValue:R.value.acode,"onUpdate:modelValue":a[2]||(a[2]=e=>R.value.acode=e),style:{width:"80px"}},{default:g((()=>[(i(!0),c(O,null,k(_(q),((e,a)=>(i(),f(r,{key:a,label:"+"+e.value,value:e.value},{default:g((()=>[y(v(e.name+" +"+e.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),p(s,{label:"验证码",prop:"sms"},{default:g((()=>[n("div",Q,[p(l,{modelValue:R.value.sms,"onUpdate:modelValue":a[4]||(a[4]=e=>R.value.sms=e),placeholder:"请输入验证码",class:"sms_ipt"},null,8,["modelValue"]),p(u,{class:"bdc_btn",disabled:E.value>0,onClick:F},{default:g((()=>[y(v(0===E.value?"获取验证码":E.value+"S后重新获取"),1)])),_:1},8,["disabled"])])])),_:1}),p(s,null,{default:g((()=>[p(u,{type:"primary",class:"f1 mt20",onClick:H},{default:g((()=>[W])),_:1})])),_:1})])),_:1},8,["model","rules"])])],512),[[j,1===N.value]]),h(p(G,{modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=e=>d.value=e),u_type:"user","re-submit":b.value,img:I.value,img_small:S.value,msg:z.value,"msg-two":P.value,onRedo:a[6]||(a[6]=a=>e.$router.replace("/manage/user/myinfo"))},null,8,["modelValue","re-submit","img","img_small","msg","msg-two"]),[[j,2===N.value]])])}}}),[["__scopeId","data-v-1efae28d"]]);export{X as default};
