import{f as a}from"./date.23847c74.js";import{d as e}from"./dfavatar.b7e0a12f.js";import{K as t}from"./KzPage.9c6d1927.js";import{K as s}from"./KzEmpty.b11d49f7.js";import{K as l}from"./KzDmpTitle.75aa6a30.js";import{K as r}from"./KzTopBtns.baf6f18f.js";import{g as o,j as d,s as i}from"./findC.49cdeaf2.js";import{H as n,u as p,g as u,$ as c,o as m,I as v,J as f,a as y,B as b,w as _,a3 as g,ay as w,r as j,ad as h}from"./vue.a499711c.js";import{_ as z,m as K,T as k,U as D}from"./index.561f5261.js";import"./KzDialog.9ecb6295.js";import"./kzkf.83b11867.js";import"./tinymce.275386ab.js";const x={class:"kz_card wxdata_details_c dmp_page"},B={class:"fsc mb20"},C={class:"dmp_table"},S=["src"];var T=z(n({name:"wxDataDetails",setup(n){const z=K(),T=p((()=>z.state.addressHash)),U=u([]),H=w(),I=u(1),M=u(50),R=u(0),q=u(!1),E=()=>{q.value=!0,d({did:H.query.id,size:M.value,current:I.value}).then((a=>{1==a.status&&(U.value=a.body.records,R.value=a.body.total),q.value=!1})).catch((()=>{q.value=!1}))};E();const J=u([]),L=a=>{J.value=a.map((a=>a.id))},P=u(),$=u(),A=p((()=>!J.value.length)),F=async()=>{$.value.setLoading(!0);const a=await i({list:J.value});$.value.close(a.message),J.value=[],P.value.clearSelection()};return(d,i)=>{const n=j("el-table-column"),p=j("el-table"),u=h("loading");return c((m(),v("div",x,[f("div",B,[y(l,{total:R.value},null,8,["total"]),y(r,{ref_key:"topBtnRef",ref:$,type:"sync",syncbtn:"","sync-api":b(o),"sync-disabled":b(A),onSync:F},null,8,["sync-api","sync-disabled"])]),f("div",C,[y(p,{ref_key:"tableRef",ref:P,data:U.value,onSelectionChange:L},{empty:_((()=>[y(s)])),default:_((()=>[y(n,{type:"selection",width:"50"}),y(n,{property:"wechat_id",label:"好友微信号"}),y(n,{property:"avatar_url",label:"头像"},{default:_((a=>[f("img",{src:a.row.avatar_url||b(e),alt:"",class:"firstimg"},null,8,S)])),_:1}),y(n,{property:"nick_name",label:"昵称"}),y(n,{property:"gender",label:"性别"},{default:_((a=>[f("div",null,g(0==a.row.gender?"未知":1==a.row.gender?"男":"女"),1)])),_:1}),y(n,{property:"phone_number",label:"联系方式"}),y(n,{property:"address",label:"地区"},{default:_((a=>[f("div",null,g(b(k)(b(D)(a.row.province,a.row.city,a.row.district),b(T))),1)])),_:1}),y(n,{property:"signature",label:"个性签名"}),y(n,{property:"create_time",label:"更新时间"},{default:_((e=>[f("div",null,g(b(a)(new Date(e.row.update_time),"yyyy-MM-dd hh:mm:ss")),1)])),_:1})])),_:1},8,["data"])]),y(t,{page:I.value,"onUpdate:page":i[0]||(i[0]=a=>I.value=a),size:M.value,"onUpdate:size":i[1]||(i[1]=a=>M.value=a),total:R.value,onChange:E},null,8,["page","size","total"])])),[[u,q.value]])}}}),[["__scopeId","data-v-53595bad"]]);export{T as default};
