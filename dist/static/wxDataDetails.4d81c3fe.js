import{f as a}from"./date.23847c74.js";import{d as e}from"./dfavatar.b7e0a12f.js";import{K as t}from"./KzPage.37ded4ad.js";import{K as s}from"./KzEmpty.5c4cf380.js";import{K as l}from"./KzDmpTitle.20de2cc7.js";import{K as r}from"./KzTopBtns.8a27cfb2.js";import{g as o,j as d,s as i}from"./findC.2f168c25.js";import{H as n,u as p,g as c,_ as u,o as m,I as v,J as f,a as y,B as b,w as _,a2 as g,ay as j,b as w,ae as h}from"./vue.fa004e33.js";import{_ as z,m as K,O as k,P as x}from"./index.e8eb8543.js";import"./KzDialog.e32b7bcd.js";import"./kzkf.83b11867.js";import"./tinymce.50e98bcc.js";const B={class:"kz_card wxdata_details_c dmp_page"},C={class:"fsc mb20"},D={class:"dmp_table"},S=["src"];var H=z(n({setup(n){const z=K(),H=p((()=>z.state.addressHash)),I=c([]),M=j(),P=c(1),R=c(50),T=c(0),U=c(!1),q=()=>{U.value=!0,d({did:M.query.id,size:R.value,current:P.value}).then((a=>{1==a.status&&(I.value=a.body.records,T.value=a.body.total),U.value=!1})).catch((()=>{U.value=!1}))};q();const E=c([]),J=a=>{E.value=a.map((a=>a.id))},L=c(),O=c(),A=p((()=>!E.value.length)),F=async()=>{O.value.setLoading(!0);const a=await i({list:E.value});O.value.close(a.message),E.value=[],L.value.clearSelection()};return(d,i)=>{const n=w("el-table-column"),p=w("el-table"),c=h("loading");return u((m(),v("div",B,[f("div",C,[y(l,{total:T.value},null,8,["total"]),y(r,{ref_key:"topBtnRef",ref:O,type:"sync",syncbtn:"","sync-api":b(o),"sync-disabled":b(A),onSync:F},null,8,["sync-api","sync-disabled"])]),f("div",D,[y(p,{ref_key:"tableRef",ref:L,data:I.value,onSelectionChange:J},{empty:_((()=>[y(s)])),default:_((()=>[y(n,{type:"selection",width:"50"}),y(n,{property:"wechat_id",label:"好友微信号"}),y(n,{property:"avatar_url",label:"头像"},{default:_((a=>[f("img",{src:a.row.avatar_url||b(e),alt:"",class:"firstimg"},null,8,S)])),_:1}),y(n,{property:"nick_name",label:"昵称"}),y(n,{property:"gender",label:"性别"},{default:_((a=>[f("div",null,g(0==a.row.gender?"未知":1==a.row.gender?"男":"女"),1)])),_:1}),y(n,{property:"phone_number",label:"联系方式"}),y(n,{property:"address",label:"地区"},{default:_((a=>[f("div",null,g(b(k)(b(x)(a.row.province,a.row.city,a.row.district),b(H))),1)])),_:1}),y(n,{property:"signature",label:"个性签名"}),y(n,{property:"create_time",label:"更新时间"},{default:_((e=>[f("div",null,g(b(a)(new Date(e.row.update_time),"yyyy-MM-dd hh:mm:ss")),1)])),_:1})])),_:1},8,["data"])]),y(t,{page:P.value,"onUpdate:page":i[0]||(i[0]=a=>P.value=a),size:R.value,"onUpdate:size":i[1]||(i[1]=a=>R.value=a),total:T.value,onChange:q},null,8,["page","size","total"])])),[[c,U.value]])}}}),[["__scopeId","data-v-53595bad"]]);export{H as default};
